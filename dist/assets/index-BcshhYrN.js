var rL=Object.defineProperty;var nL=(t,e,r)=>e in t?rL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ue=(t,e,r)=>nL(t,typeof e!="symbol"?e+"":e,r);function iL(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function at(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aL(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var FC={exports:{}},Vg={},LC={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh=Symbol.for("react.element"),sL=Symbol.for("react.portal"),oL=Symbol.for("react.fragment"),lL=Symbol.for("react.strict_mode"),cL=Symbol.for("react.profiler"),uL=Symbol.for("react.provider"),dL=Symbol.for("react.context"),fL=Symbol.for("react.forward_ref"),hL=Symbol.for("react.suspense"),mL=Symbol.for("react.memo"),pL=Symbol.for("react.lazy"),gN=Symbol.iterator;function gL(t){return t===null||typeof t!="object"?null:(t=gN&&t[gN]||t["@@iterator"],typeof t=="function"?t:null)}var BC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UC=Object.assign,zC={};function cu(t,e,r){this.props=t,this.context=e,this.refs=zC,this.updater=r||BC}cu.prototype.isReactComponent={};cu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function WC(){}WC.prototype=cu.prototype;function s_(t,e,r){this.props=t,this.context=e,this.refs=zC,this.updater=r||BC}var o_=s_.prototype=new WC;o_.constructor=s_;UC(o_,cu.prototype);o_.isPureReactComponent=!0;var xN=Array.isArray,VC=Object.prototype.hasOwnProperty,l_={current:null},HC={key:!0,ref:!0,__self:!0,__source:!0};function qC(t,e,r){var n,i={},a=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)VC.call(e,n)&&!HC.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Oh,type:t,key:a,ref:s,props:i,_owner:l_.current}}function xL(t,e){return{$$typeof:Oh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function c_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oh}function vL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var vN=/\/+/g;function Tv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vL(""+t.key):e.toString(36)}function y0(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Oh:case sL:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+Tv(s,0):n,xN(i)?(r="",t!=null&&(r=t.replace(vN,"$&/")+"/"),y0(i,e,r,"",function(u){return u})):i!=null&&(c_(i)&&(i=xL(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(vN,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",xN(t))for(var o=0;o<t.length;o++){a=t[o];var l=n+Tv(a,o);s+=y0(a,e,r,l,i)}else if(l=gL(t),typeof l=="function")for(t=l.call(t),o=0;!(a=t.next()).done;)a=a.value,l=n+Tv(a,o++),s+=y0(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function lm(t,e,r){if(t==null)return t;var n=[],i=0;return y0(t,n,"","",function(a){return e.call(r,a,i++)}),n}function yL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},b0={transition:null},bL={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:b0,ReactCurrentOwner:l_};function GC(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:lm,forEach:function(t,e,r){lm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return lm(t,function(){e++}),e},toArray:function(t){return lm(t,function(e){return e})||[]},only:function(t){if(!c_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=cu;He.Fragment=oL;He.Profiler=cL;He.PureComponent=s_;He.StrictMode=lL;He.Suspense=hL;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bL;He.act=GC;He.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=UC({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=l_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)VC.call(e,l)&&!HC.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Oh,type:t.type,key:i,ref:a,props:n,_owner:s}};He.createContext=function(t){return t={$$typeof:dL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uL,_context:t},t.Consumer=t};He.createElement=qC;He.createFactory=function(t){var e=qC.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:fL,render:t}};He.isValidElement=c_;He.lazy=function(t){return{$$typeof:pL,_payload:{_status:-1,_result:t},_init:yL}};He.memo=function(t,e){return{$$typeof:mL,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=b0.transition;b0.transition={};try{t()}finally{b0.transition=e}};He.unstable_act=GC;He.useCallback=function(t,e){return ln.current.useCallback(t,e)};He.useContext=function(t){return ln.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};He.useEffect=function(t,e){return ln.current.useEffect(t,e)};He.useId=function(){return ln.current.useId()};He.useImperativeHandle=function(t,e,r){return ln.current.useImperativeHandle(t,e,r)};He.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return ln.current.useMemo(t,e)};He.useReducer=function(t,e,r){return ln.current.useReducer(t,e,r)};He.useRef=function(t){return ln.current.useRef(t)};He.useState=function(t){return ln.current.useState(t)};He.useSyncExternalStore=function(t,e,r){return ln.current.useSyncExternalStore(t,e,r)};He.useTransition=function(){return ln.current.useTransition()};He.version="18.3.1";LC.exports=He;var j=LC.exports;const X=at(j),wL=iL({__proto__:null,default:X},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _L=j,SL=Symbol.for("react.element"),NL=Symbol.for("react.fragment"),jL=Object.prototype.hasOwnProperty,EL=_L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TL={key:!0,ref:!0,__self:!0,__source:!0};function KC(t,e,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)jL.call(e,n)&&!TL.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:SL,type:t,key:a,ref:s,props:i,_owner:EL.current}}Vg.Fragment=NL;Vg.jsx=KC;Vg.jsxs=KC;FC.exports=Vg;var c=FC.exports,YC={exports:{}},Vn={},XC={exports:{}},QC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,z){var J=R.length;R.push(z);e:for(;0<J;){var W=J-1>>>1,C=R[W];if(0<i(C,z))R[W]=z,R[J]=C,J=W;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var z=R[0],J=R.pop();if(J!==z){R[0]=J;e:for(var W=0,C=R.length,G=C>>>1;W<G;){var Y=2*(W+1)-1,I=R[Y],Q=Y+1,fe=R[Q];if(0>i(I,J))Q<C&&0>i(fe,I)?(R[W]=fe,R[Q]=J,W=Q):(R[W]=I,R[Y]=J,W=Y);else if(Q<C&&0>i(fe,J))R[W]=fe,R[Q]=J,W=Q;else break e}}return z}function i(R,z){var J=R.sortIndex-z.sortIndex;return J!==0?J:R.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,h=3,m=!1,g=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=R)n(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=r(u)}}function _(R){if(p=!1,y(R),!g)if(r(l)!==null)g=!0,O(w);else{var z=r(u);z!==null&&L(_,z.startTime-R)}}function w(R,z){g=!1,p&&(p=!1,v(E),E=-1),m=!0;var J=h;try{for(y(z),f=r(l);f!==null&&(!(f.expirationTime>z)||R&&!A());){var W=f.callback;if(typeof W=="function"){f.callback=null,h=f.priorityLevel;var C=W(f.expirationTime<=z);z=t.unstable_now(),typeof C=="function"?f.callback=C:f===r(l)&&n(l),y(z)}else n(l);f=r(l)}if(f!==null)var G=!0;else{var Y=r(u);Y!==null&&L(_,Y.startTime-z),G=!1}return G}finally{f=null,h=J,m=!1}}var N=!1,S=null,E=-1,T=5,P=-1;function A(){return!(t.unstable_now()-P<T)}function k(){if(S!==null){var R=t.unstable_now();P=R;var z=!0;try{z=S(!0,R)}finally{z?F():(N=!1,S=null)}}else N=!1}var F;if(typeof b=="function")F=function(){b(k)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,M=H.port2;H.port1.onmessage=k,F=function(){M.postMessage(null)}}else F=function(){x(k,0)};function O(R){S=R,N||(N=!0,F())}function L(R,z){E=x(function(){R(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,O(w))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var J=h;h=z;try{return R()}finally{h=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,z){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var J=h;h=R;try{return z()}finally{h=J}},t.unstable_scheduleCallback=function(R,z,J){var W=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,R){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=J+C,R={id:d++,callback:z,priorityLevel:R,startTime:J,expirationTime:C,sortIndex:-1},J>W?(R.sortIndex=J,e(u,R),r(l)===null&&R===r(u)&&(p?(v(E),E=-1):p=!0,L(_,J-W))):(R.sortIndex=C,e(l,R),g||m||(g=!0,O(w))),R},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(R){var z=h;return function(){var J=h;h=z;try{return R.apply(this,arguments)}finally{h=J}}}})(QC);XC.exports=QC;var PL=XC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kL=j,zn=PL;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JC=new Set,uf={};function rl(t,e){bc(t,e),bc(t+"Capture",e)}function bc(t,e){for(uf[t]=e,t=0;t<e.length;t++)JC.add(e[t])}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rb=Object.prototype.hasOwnProperty,AL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yN={},bN={};function OL(t){return rb.call(bN,t)?!0:rb.call(yN,t)?!1:AL.test(t)?bN[t]=!0:(yN[t]=!0,!1)}function CL(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ML(t,e,r,n){if(e===null||typeof e>"u"||CL(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cn(t,e,r,n,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var Cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cr[t]=new cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cr[e]=new cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cr[t]=new cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cr[t]=new cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cr[t]=new cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cr[t]=new cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cr[t]=new cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cr[t]=new cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cr[t]=new cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var u_=/[\-:]([a-z])/g;function d_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(u_,d_);Cr[e]=new cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(u_,d_);Cr[e]=new cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(u_,d_);Cr[e]=new cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cr[t]=new cn(t,1,!1,t.toLowerCase(),null,!1,!1)});Cr.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cr[t]=new cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function f_(t,e,r,n){var i=Cr.hasOwnProperty(e)?Cr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ML(e,r,i,n)&&(r=null),n||i===null?OL(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ga=kL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cm=Symbol.for("react.element"),Rl=Symbol.for("react.portal"),Fl=Symbol.for("react.fragment"),h_=Symbol.for("react.strict_mode"),nb=Symbol.for("react.profiler"),ZC=Symbol.for("react.provider"),e4=Symbol.for("react.context"),m_=Symbol.for("react.forward_ref"),ib=Symbol.for("react.suspense"),ab=Symbol.for("react.suspense_list"),p_=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),t4=Symbol.for("react.offscreen"),wN=Symbol.iterator;function zu(t){return t===null||typeof t!="object"?null:(t=wN&&t[wN]||t["@@iterator"],typeof t=="function"?t:null)}var Ut=Object.assign,Pv;function xd(t){if(Pv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Pv=e&&e[1]||""}return`
`+Pv+t}var kv=!1;function Av(t,e){if(!t||kv)return"";kv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=o);break}}}finally{kv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?xd(t):""}function DL(t){switch(t.tag){case 5:return xd(t.type);case 16:return xd("Lazy");case 13:return xd("Suspense");case 19:return xd("SuspenseList");case 0:case 2:case 15:return t=Av(t.type,!1),t;case 11:return t=Av(t.type.render,!1),t;case 1:return t=Av(t.type,!0),t;default:return""}}function sb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fl:return"Fragment";case Rl:return"Portal";case nb:return"Profiler";case h_:return"StrictMode";case ib:return"Suspense";case ab:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case e4:return(t.displayName||"Context")+".Consumer";case ZC:return(t._context.displayName||"Context")+".Provider";case m_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case p_:return e=t.displayName||null,e!==null?e:sb(t.type)||"Memo";case us:e=t._payload,t=t._init;try{return sb(t(e))}catch{}}return null}function $L(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sb(e);case 8:return e===h_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IL(t){var e=r4(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function um(t){t._valueTracker||(t._valueTracker=IL(t))}function n4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=r4(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function F0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ob(t,e){var r=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function _N(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Rs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function i4(t,e){e=e.checked,e!=null&&f_(t,"checked",e,!1)}function lb(t,e){i4(t,e);var r=Rs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cb(t,e.type,r):e.hasOwnProperty("defaultValue")&&cb(t,e.type,Rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function SN(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function cb(t,e,r){(e!=="number"||F0(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var vd=Array.isArray;function tc(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Rs(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ub(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function NN(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ge(92));if(vd(r)){if(1<r.length)throw Error(ge(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Rs(r)}}function a4(t,e){var r=Rs(e.value),n=Rs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function jN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function s4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function db(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?s4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dm,o4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dm=dm||document.createElement("div"),dm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function df(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RL=["Webkit","ms","Moz","O"];Object.keys(Ad).forEach(function(t){RL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ad[e]=Ad[t]})});function l4(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ad.hasOwnProperty(t)&&Ad[t]?(""+e).trim():e+"px"}function c4(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=l4(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var FL=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fb(t,e){if(e){if(FL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function hb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mb=null;function g_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pb=null,rc=null,nc=null;function EN(t){if(t=Dh(t)){if(typeof pb!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=Yg(e),pb(t.stateNode,t.type,e))}}function u4(t){rc?nc?nc.push(t):nc=[t]:rc=t}function d4(){if(rc){var t=rc,e=nc;if(nc=rc=null,EN(t),e)for(t=0;t<e.length;t++)EN(e[t])}}function f4(t,e){return t(e)}function h4(){}var Ov=!1;function m4(t,e,r){if(Ov)return t(e,r);Ov=!0;try{return f4(t,e,r)}finally{Ov=!1,(rc!==null||nc!==null)&&(h4(),d4())}}function ff(t,e){var r=t.stateNode;if(r===null)return null;var n=Yg(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ge(231,e,typeof r));return r}var gb=!1;if(Ia)try{var Wu={};Object.defineProperty(Wu,"passive",{get:function(){gb=!0}}),window.addEventListener("test",Wu,Wu),window.removeEventListener("test",Wu,Wu)}catch{gb=!1}function LL(t,e,r,n,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Od=!1,L0=null,B0=!1,xb=null,BL={onError:function(t){Od=!0,L0=t}};function UL(t,e,r,n,i,a,s,o,l){Od=!1,L0=null,LL.apply(BL,arguments)}function zL(t,e,r,n,i,a,s,o,l){if(UL.apply(this,arguments),Od){if(Od){var u=L0;Od=!1,L0=null}else throw Error(ge(198));B0||(B0=!0,xb=u)}}function nl(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function p4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function TN(t){if(nl(t)!==t)throw Error(ge(188))}function WL(t){var e=t.alternate;if(!e){if(e=nl(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return TN(i),t;if(a===n)return TN(i),e;a=a.sibling}throw Error(ge(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(ge(189))}}if(r.alternate!==n)throw Error(ge(190))}if(r.tag!==3)throw Error(ge(188));return r.stateNode.current===r?t:e}function g4(t){return t=WL(t),t!==null?x4(t):null}function x4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=x4(t);if(e!==null)return e;t=t.sibling}return null}var v4=zn.unstable_scheduleCallback,PN=zn.unstable_cancelCallback,VL=zn.unstable_shouldYield,HL=zn.unstable_requestPaint,Gt=zn.unstable_now,qL=zn.unstable_getCurrentPriorityLevel,x_=zn.unstable_ImmediatePriority,y4=zn.unstable_UserBlockingPriority,U0=zn.unstable_NormalPriority,GL=zn.unstable_LowPriority,b4=zn.unstable_IdlePriority,Hg=null,Xi=null;function KL(t){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(Hg,t,void 0,(t.current.flags&128)===128)}catch{}}var Ai=Math.clz32?Math.clz32:QL,YL=Math.log,XL=Math.LN2;function QL(t){return t>>>=0,t===0?32:31-(YL(t)/XL|0)|0}var fm=64,hm=4194304;function yd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function z0(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=yd(o):(a&=s,a!==0&&(n=yd(a)))}else s=r&~i,s!==0?n=yd(s):a!==0&&(n=yd(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ai(e),i=1<<r,n|=t[r],e&=~i;return n}function JL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZL(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-Ai(a),o=1<<s,l=i[s];l===-1?(!(o&r)||o&n)&&(i[s]=JL(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}function vb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w4(){var t=fm;return fm<<=1,!(fm&4194240)&&(fm=64),t}function Cv(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ch(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ai(e),t[e]=r}function eB(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Ai(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function v_(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ai(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var dt=0;function _4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var S4,y_,N4,j4,E4,yb=!1,mm=[],Es=null,Ts=null,Ps=null,hf=new Map,mf=new Map,ms=[],tB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kN(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":hf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mf.delete(e.pointerId)}}function Vu(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Dh(e),e!==null&&y_(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function rB(t,e,r,n,i){switch(e){case"focusin":return Es=Vu(Es,t,e,r,n,i),!0;case"dragenter":return Ts=Vu(Ts,t,e,r,n,i),!0;case"mouseover":return Ps=Vu(Ps,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return hf.set(a,Vu(hf.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,mf.set(a,Vu(mf.get(a)||null,t,e,r,n,i)),!0}return!1}function T4(t){var e=No(t.target);if(e!==null){var r=nl(e);if(r!==null){if(e=r.tag,e===13){if(e=p4(r),e!==null){t.blockedOn=e,E4(t.priority,function(){N4(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function w0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=bb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);mb=n,r.target.dispatchEvent(n),mb=null}else return e=Dh(r),e!==null&&y_(e),t.blockedOn=r,!1;e.shift()}return!0}function AN(t,e,r){w0(t)&&r.delete(e)}function nB(){yb=!1,Es!==null&&w0(Es)&&(Es=null),Ts!==null&&w0(Ts)&&(Ts=null),Ps!==null&&w0(Ps)&&(Ps=null),hf.forEach(AN),mf.forEach(AN)}function Hu(t,e){t.blockedOn===e&&(t.blockedOn=null,yb||(yb=!0,zn.unstable_scheduleCallback(zn.unstable_NormalPriority,nB)))}function pf(t){function e(i){return Hu(i,t)}if(0<mm.length){Hu(mm[0],t);for(var r=1;r<mm.length;r++){var n=mm[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Es!==null&&Hu(Es,t),Ts!==null&&Hu(Ts,t),Ps!==null&&Hu(Ps,t),hf.forEach(e),mf.forEach(e),r=0;r<ms.length;r++)n=ms[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ms.length&&(r=ms[0],r.blockedOn===null);)T4(r),r.blockedOn===null&&ms.shift()}var ic=Ga.ReactCurrentBatchConfig,W0=!0;function iB(t,e,r,n){var i=dt,a=ic.transition;ic.transition=null;try{dt=1,b_(t,e,r,n)}finally{dt=i,ic.transition=a}}function aB(t,e,r,n){var i=dt,a=ic.transition;ic.transition=null;try{dt=4,b_(t,e,r,n)}finally{dt=i,ic.transition=a}}function b_(t,e,r,n){if(W0){var i=bb(t,e,r,n);if(i===null)zv(t,e,n,V0,r),kN(t,n);else if(rB(i,t,e,r,n))n.stopPropagation();else if(kN(t,n),e&4&&-1<tB.indexOf(t)){for(;i!==null;){var a=Dh(i);if(a!==null&&S4(a),a=bb(t,e,r,n),a===null&&zv(t,e,n,V0,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else zv(t,e,n,null,r)}}var V0=null;function bb(t,e,r,n){if(V0=null,t=g_(n),t=No(t),t!==null)if(e=nl(t),e===null)t=null;else if(r=e.tag,r===13){if(t=p4(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return V0=t,null}function P4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qL()){case x_:return 1;case y4:return 4;case U0:case GL:return 16;case b4:return 536870912;default:return 16}default:return 16}}var ys=null,w_=null,_0=null;function k4(){if(_0)return _0;var t,e=w_,r=e.length,n,i="value"in ys?ys.value:ys.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[a-n];n++);return _0=i.slice(t,1<n?1-n:void 0)}function S0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pm(){return!0}function ON(){return!1}function Hn(t){function e(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?pm:ON,this.isPropagationStopped=ON,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pm)},persist:function(){},isPersistent:pm}),e}var uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},__=Hn(uu),Mh=Ut({},uu,{view:0,detail:0}),sB=Hn(Mh),Mv,Dv,qu,qg=Ut({},Mh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:S_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qu&&(qu&&t.type==="mousemove"?(Mv=t.screenX-qu.screenX,Dv=t.screenY-qu.screenY):Dv=Mv=0,qu=t),Mv)},movementY:function(t){return"movementY"in t?t.movementY:Dv}}),CN=Hn(qg),oB=Ut({},qg,{dataTransfer:0}),lB=Hn(oB),cB=Ut({},Mh,{relatedTarget:0}),$v=Hn(cB),uB=Ut({},uu,{animationName:0,elapsedTime:0,pseudoElement:0}),dB=Hn(uB),fB=Ut({},uu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hB=Hn(fB),mB=Ut({},uu,{data:0}),MN=Hn(mB),pB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xB[t])?!!e[t]:!1}function S_(){return vB}var yB=Ut({},Mh,{key:function(t){if(t.key){var e=pB[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=S0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gB[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:S_,charCode:function(t){return t.type==="keypress"?S0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?S0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bB=Hn(yB),wB=Ut({},qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DN=Hn(wB),_B=Ut({},Mh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:S_}),SB=Hn(_B),NB=Ut({},uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),jB=Hn(NB),EB=Ut({},qg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TB=Hn(EB),PB=[9,13,27,32],N_=Ia&&"CompositionEvent"in window,Cd=null;Ia&&"documentMode"in document&&(Cd=document.documentMode);var kB=Ia&&"TextEvent"in window&&!Cd,A4=Ia&&(!N_||Cd&&8<Cd&&11>=Cd),$N=" ",IN=!1;function O4(t,e){switch(t){case"keyup":return PB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ll=!1;function AB(t,e){switch(t){case"compositionend":return C4(e);case"keypress":return e.which!==32?null:(IN=!0,$N);case"textInput":return t=e.data,t===$N&&IN?null:t;default:return null}}function OB(t,e){if(Ll)return t==="compositionend"||!N_&&O4(t,e)?(t=k4(),_0=w_=ys=null,Ll=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A4&&e.locale!=="ko"?null:e.data;default:return null}}var CB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CB[t.type]:e==="textarea"}function M4(t,e,r,n){u4(n),e=H0(e,"onChange"),0<e.length&&(r=new __("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Md=null,gf=null;function MB(t){V4(t,0)}function Gg(t){var e=zl(t);if(n4(e))return t}function DB(t,e){if(t==="change")return e}var D4=!1;if(Ia){var Iv;if(Ia){var Rv="oninput"in document;if(!Rv){var FN=document.createElement("div");FN.setAttribute("oninput","return;"),Rv=typeof FN.oninput=="function"}Iv=Rv}else Iv=!1;D4=Iv&&(!document.documentMode||9<document.documentMode)}function LN(){Md&&(Md.detachEvent("onpropertychange",$4),gf=Md=null)}function $4(t){if(t.propertyName==="value"&&Gg(gf)){var e=[];M4(e,gf,t,g_(t)),m4(MB,e)}}function $B(t,e,r){t==="focusin"?(LN(),Md=e,gf=r,Md.attachEvent("onpropertychange",$4)):t==="focusout"&&LN()}function IB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gg(gf)}function RB(t,e){if(t==="click")return Gg(e)}function FB(t,e){if(t==="input"||t==="change")return Gg(e)}function LB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Di=typeof Object.is=="function"?Object.is:LB;function xf(t,e){if(Di(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!rb.call(e,i)||!Di(t[i],e[i]))return!1}return!0}function BN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function UN(t,e){var r=BN(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=BN(r)}}function I4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?I4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function R4(){for(var t=window,e=F0();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=F0(t.document)}return e}function j_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BB(t){var e=R4(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&I4(r.ownerDocument.documentElement,r)){if(n!==null&&j_(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=UN(r,a);var s=UN(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UB=Ia&&"documentMode"in document&&11>=document.documentMode,Bl=null,wb=null,Dd=null,_b=!1;function zN(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_b||Bl==null||Bl!==F0(n)||(n=Bl,"selectionStart"in n&&j_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Dd&&xf(Dd,n)||(Dd=n,n=H0(wb,"onSelect"),0<n.length&&(e=new __("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Bl)))}function gm(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ul={animationend:gm("Animation","AnimationEnd"),animationiteration:gm("Animation","AnimationIteration"),animationstart:gm("Animation","AnimationStart"),transitionend:gm("Transition","TransitionEnd")},Fv={},F4={};Ia&&(F4=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function Kg(t){if(Fv[t])return Fv[t];if(!Ul[t])return t;var e=Ul[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in F4)return Fv[t]=e[r];return t}var L4=Kg("animationend"),B4=Kg("animationiteration"),U4=Kg("animationstart"),z4=Kg("transitionend"),W4=new Map,WN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(t,e){W4.set(t,e),rl(e,[t])}for(var Lv=0;Lv<WN.length;Lv++){var Bv=WN[Lv],zB=Bv.toLowerCase(),WB=Bv[0].toUpperCase()+Bv.slice(1);Vs(zB,"on"+WB)}Vs(L4,"onAnimationEnd");Vs(B4,"onAnimationIteration");Vs(U4,"onAnimationStart");Vs("dblclick","onDoubleClick");Vs("focusin","onFocus");Vs("focusout","onBlur");Vs(z4,"onTransitionEnd");bc("onMouseEnter",["mouseout","mouseover"]);bc("onMouseLeave",["mouseout","mouseover"]);bc("onPointerEnter",["pointerout","pointerover"]);bc("onPointerLeave",["pointerout","pointerover"]);rl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rl("onBeforeInput",["compositionend","keypress","textInput","paste"]);rl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VB=new Set("cancel close invalid load scroll toggle".split(" ").concat(bd));function VN(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,zL(n,e,void 0,t),t.currentTarget=null}function V4(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;VN(i,o,u),a=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;VN(i,o,u),a=l}}}if(B0)throw t=xb,B0=!1,xb=null,t}function Nt(t,e){var r=e[Tb];r===void 0&&(r=e[Tb]=new Set);var n=t+"__bubble";r.has(n)||(H4(e,t,2,!1),r.add(n))}function Uv(t,e,r){var n=0;e&&(n|=4),H4(r,t,n,e)}var xm="_reactListening"+Math.random().toString(36).slice(2);function vf(t){if(!t[xm]){t[xm]=!0,JC.forEach(function(r){r!=="selectionchange"&&(VB.has(r)||Uv(r,!1,t),Uv(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xm]||(e[xm]=!0,Uv("selectionchange",!1,e))}}function H4(t,e,r,n){switch(P4(e)){case 1:var i=iB;break;case 4:i=aB;break;default:i=b_}r=i.bind(null,e,r,t),i=void 0,!gb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function zv(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=No(o),s===null)return;if(l=s.tag,l===5||l===6){n=a=s;continue e}o=o.parentNode}}n=n.return}m4(function(){var u=a,d=g_(r),f=[];e:{var h=W4.get(t);if(h!==void 0){var m=__,g=t;switch(t){case"keypress":if(S0(r)===0)break e;case"keydown":case"keyup":m=bB;break;case"focusin":g="focus",m=$v;break;case"focusout":g="blur",m=$v;break;case"beforeblur":case"afterblur":m=$v;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=CN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=SB;break;case L4:case B4:case U4:m=dB;break;case z4:m=jB;break;case"scroll":m=sB;break;case"wheel":m=TB;break;case"copy":case"cut":case"paste":m=hB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=DN}var p=(e&4)!==0,x=!p&&t==="scroll",v=p?h!==null?h+"Capture":null:h;p=[];for(var b=u,y;b!==null;){y=b;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,v!==null&&(_=ff(b,v),_!=null&&p.push(yf(b,_,y)))),x)break;b=b.return}0<p.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&r!==mb&&(g=r.relatedTarget||r.fromElement)&&(No(g)||g[Ra]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?No(g):null,g!==null&&(x=nl(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=CN,_="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(p=DN,_="onPointerLeave",v="onPointerEnter",b="pointer"),x=m==null?h:zl(m),y=g==null?h:zl(g),h=new p(_,b+"leave",m,r,d),h.target=x,h.relatedTarget=y,_=null,No(d)===u&&(p=new p(v,b+"enter",g,r,d),p.target=y,p.relatedTarget=x,_=p),x=_,m&&g)t:{for(p=m,v=g,b=0,y=p;y;y=yl(y))b++;for(y=0,_=v;_;_=yl(_))y++;for(;0<b-y;)p=yl(p),b--;for(;0<y-b;)v=yl(v),y--;for(;b--;){if(p===v||v!==null&&p===v.alternate)break t;p=yl(p),v=yl(v)}p=null}else p=null;m!==null&&HN(f,h,m,p,!1),g!==null&&x!==null&&HN(f,x,g,p,!0)}}e:{if(h=u?zl(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var w=DB;else if(RN(h))if(D4)w=FB;else{w=IB;var N=$B}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=RB);if(w&&(w=w(t,u))){M4(f,w,r,d);break e}N&&N(t,h,u),t==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&cb(h,"number",h.value)}switch(N=u?zl(u):window,t){case"focusin":(RN(N)||N.contentEditable==="true")&&(Bl=N,wb=u,Dd=null);break;case"focusout":Dd=wb=Bl=null;break;case"mousedown":_b=!0;break;case"contextmenu":case"mouseup":case"dragend":_b=!1,zN(f,r,d);break;case"selectionchange":if(UB)break;case"keydown":case"keyup":zN(f,r,d)}var S;if(N_)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ll?O4(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(A4&&r.locale!=="ko"&&(Ll||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ll&&(S=k4()):(ys=d,w_="value"in ys?ys.value:ys.textContent,Ll=!0)),N=H0(u,E),0<N.length&&(E=new MN(E,t,null,r,d),f.push({event:E,listeners:N}),S?E.data=S:(S=C4(r),S!==null&&(E.data=S)))),(S=kB?AB(t,r):OB(t,r))&&(u=H0(u,"onBeforeInput"),0<u.length&&(d=new MN("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}V4(f,e)})}function yf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function H0(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ff(t,r),a!=null&&n.unshift(yf(t,a,i)),a=ff(t,e),a!=null&&n.push(yf(t,a,i))),t=t.return}return n}function yl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function HN(t,e,r,n,i){for(var a=e._reactName,s=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=ff(r,a),l!=null&&s.unshift(yf(r,l,o))):i||(l=ff(r,a),l!=null&&s.push(yf(r,l,o)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var HB=/\r\n?/g,qB=/\u0000|\uFFFD/g;function qN(t){return(typeof t=="string"?t:""+t).replace(HB,`
`).replace(qB,"")}function vm(t,e,r){if(e=qN(e),qN(t)!==e&&r)throw Error(ge(425))}function q0(){}var Sb=null,Nb=null;function jb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Eb=typeof setTimeout=="function"?setTimeout:void 0,GB=typeof clearTimeout=="function"?clearTimeout:void 0,GN=typeof Promise=="function"?Promise:void 0,KB=typeof queueMicrotask=="function"?queueMicrotask:typeof GN<"u"?function(t){return GN.resolve(null).then(t).catch(YB)}:Eb;function YB(t){setTimeout(function(){throw t})}function Wv(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),pf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);pf(e)}function ks(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function KN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var du=Math.random().toString(36).slice(2),Gi="__reactFiber$"+du,bf="__reactProps$"+du,Ra="__reactContainer$"+du,Tb="__reactEvents$"+du,XB="__reactListeners$"+du,QB="__reactHandles$"+du;function No(t){var e=t[Gi];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ra]||r[Gi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=KN(t);t!==null;){if(r=t[Gi])return r;t=KN(t)}return e}t=r,r=t.parentNode}return null}function Dh(t){return t=t[Gi]||t[Ra],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function Yg(t){return t[bf]||null}var Pb=[],Wl=-1;function Hs(t){return{current:t}}function Pt(t){0>Wl||(t.current=Pb[Wl],Pb[Wl]=null,Wl--)}function _t(t,e){Wl++,Pb[Wl]=t.current,t.current=e}var Fs={},Gr=Hs(Fs),vn=Hs(!1),Bo=Fs;function wc(t,e){var r=t.type.contextTypes;if(!r)return Fs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function yn(t){return t=t.childContextTypes,t!=null}function G0(){Pt(vn),Pt(Gr)}function YN(t,e,r){if(Gr.current!==Fs)throw Error(ge(168));_t(Gr,e),_t(vn,r)}function q4(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ge(108,$L(t)||"Unknown",i));return Ut({},r,n)}function K0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fs,Bo=Gr.current,_t(Gr,t),_t(vn,vn.current),!0}function XN(t,e,r){var n=t.stateNode;if(!n)throw Error(ge(169));r?(t=q4(t,e,Bo),n.__reactInternalMemoizedMergedChildContext=t,Pt(vn),Pt(Gr),_t(Gr,t)):Pt(vn),_t(vn,r)}var ba=null,Xg=!1,Vv=!1;function G4(t){ba===null?ba=[t]:ba.push(t)}function JB(t){Xg=!0,G4(t)}function qs(){if(!Vv&&ba!==null){Vv=!0;var t=0,e=dt;try{var r=ba;for(dt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ba=null,Xg=!1}catch(i){throw ba!==null&&(ba=ba.slice(t+1)),v4(x_,qs),i}finally{dt=e,Vv=!1}}return null}var Vl=[],Hl=0,Y0=null,X0=0,Jn=[],Zn=0,Uo=null,_a=1,Sa="";function lo(t,e){Vl[Hl++]=X0,Vl[Hl++]=Y0,Y0=t,X0=e}function K4(t,e,r){Jn[Zn++]=_a,Jn[Zn++]=Sa,Jn[Zn++]=Uo,Uo=t;var n=_a;t=Sa;var i=32-Ai(n)-1;n&=~(1<<i),r+=1;var a=32-Ai(e)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,_a=1<<32-Ai(e)+i|r<<i|n,Sa=a+t}else _a=1<<a|r<<i|n,Sa=t}function E_(t){t.return!==null&&(lo(t,1),K4(t,1,0))}function T_(t){for(;t===Y0;)Y0=Vl[--Hl],Vl[Hl]=null,X0=Vl[--Hl],Vl[Hl]=null;for(;t===Uo;)Uo=Jn[--Zn],Jn[Zn]=null,Sa=Jn[--Zn],Jn[Zn]=null,_a=Jn[--Zn],Jn[Zn]=null}var Ln=null,Fn=null,Ct=!1,ji=null;function Y4(t,e){var r=ri(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function QN(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,Fn=ks(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Uo!==null?{id:_a,overflow:Sa}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ri(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ln=t,Fn=null,!0):!1;default:return!1}}function kb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ab(t){if(Ct){var e=Fn;if(e){var r=e;if(!QN(t,e)){if(kb(t))throw Error(ge(418));e=ks(r.nextSibling);var n=Ln;e&&QN(t,e)?Y4(n,r):(t.flags=t.flags&-4097|2,Ct=!1,Ln=t)}}else{if(kb(t))throw Error(ge(418));t.flags=t.flags&-4097|2,Ct=!1,Ln=t}}}function JN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function ym(t){if(t!==Ln)return!1;if(!Ct)return JN(t),Ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jb(t.type,t.memoizedProps)),e&&(e=Fn)){if(kb(t))throw X4(),Error(ge(418));for(;e;)Y4(t,e),e=ks(e.nextSibling)}if(JN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Fn=ks(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=Ln?ks(t.stateNode.nextSibling):null;return!0}function X4(){for(var t=Fn;t;)t=ks(t.nextSibling)}function _c(){Fn=Ln=null,Ct=!1}function P_(t){ji===null?ji=[t]:ji.push(t)}var ZB=Ga.ReactCurrentBatchConfig;function Gu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ge(309));var n=r.stateNode}if(!n)throw Error(ge(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(ge(284));if(!r._owner)throw Error(ge(290,t))}return t}function bm(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ZN(t){var e=t._init;return e(t._payload)}function Q4(t){function e(v,b){if(t){var y=v.deletions;y===null?(v.deletions=[b],v.flags|=16):y.push(b)}}function r(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=Ms(v,b),v.index=0,v.sibling=null,v}function a(v,b,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<b?(v.flags|=2,b):y):(v.flags|=2,b)):(v.flags|=1048576,b)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,b,y,_){return b===null||b.tag!==6?(b=Qv(y,v.mode,_),b.return=v,b):(b=i(b,y),b.return=v,b)}function l(v,b,y,_){var w=y.type;return w===Fl?d(v,b,y.props.children,_,y.key):b!==null&&(b.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===us&&ZN(w)===b.type)?(_=i(b,y.props),_.ref=Gu(v,b,y),_.return=v,_):(_=A0(y.type,y.key,y.props,null,v.mode,_),_.ref=Gu(v,b,y),_.return=v,_)}function u(v,b,y,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=Jv(y,v.mode,_),b.return=v,b):(b=i(b,y.children||[]),b.return=v,b)}function d(v,b,y,_,w){return b===null||b.tag!==7?(b=Do(y,v.mode,_,w),b.return=v,b):(b=i(b,y),b.return=v,b)}function f(v,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Qv(""+b,v.mode,y),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cm:return y=A0(b.type,b.key,b.props,null,v.mode,y),y.ref=Gu(v,null,b),y.return=v,y;case Rl:return b=Jv(b,v.mode,y),b.return=v,b;case us:var _=b._init;return f(v,_(b._payload),y)}if(vd(b)||zu(b))return b=Do(b,v.mode,y,null),b.return=v,b;bm(v,b)}return null}function h(v,b,y,_){var w=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:o(v,b,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case cm:return y.key===w?l(v,b,y,_):null;case Rl:return y.key===w?u(v,b,y,_):null;case us:return w=y._init,h(v,b,w(y._payload),_)}if(vd(y)||zu(y))return w!==null?null:d(v,b,y,_,null);bm(v,y)}return null}function m(v,b,y,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(y)||null,o(b,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case cm:return v=v.get(_.key===null?y:_.key)||null,l(b,v,_,w);case Rl:return v=v.get(_.key===null?y:_.key)||null,u(b,v,_,w);case us:var N=_._init;return m(v,b,y,N(_._payload),w)}if(vd(_)||zu(_))return v=v.get(y)||null,d(b,v,_,w,null);bm(b,_)}return null}function g(v,b,y,_){for(var w=null,N=null,S=b,E=b=0,T=null;S!==null&&E<y.length;E++){S.index>E?(T=S,S=null):T=S.sibling;var P=h(v,S,y[E],_);if(P===null){S===null&&(S=T);break}t&&S&&P.alternate===null&&e(v,S),b=a(P,b,E),N===null?w=P:N.sibling=P,N=P,S=T}if(E===y.length)return r(v,S),Ct&&lo(v,E),w;if(S===null){for(;E<y.length;E++)S=f(v,y[E],_),S!==null&&(b=a(S,b,E),N===null?w=S:N.sibling=S,N=S);return Ct&&lo(v,E),w}for(S=n(v,S);E<y.length;E++)T=m(S,v,E,y[E],_),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?E:T.key),b=a(T,b,E),N===null?w=T:N.sibling=T,N=T);return t&&S.forEach(function(A){return e(v,A)}),Ct&&lo(v,E),w}function p(v,b,y,_){var w=zu(y);if(typeof w!="function")throw Error(ge(150));if(y=w.call(y),y==null)throw Error(ge(151));for(var N=w=null,S=b,E=b=0,T=null,P=y.next();S!==null&&!P.done;E++,P=y.next()){S.index>E?(T=S,S=null):T=S.sibling;var A=h(v,S,P.value,_);if(A===null){S===null&&(S=T);break}t&&S&&A.alternate===null&&e(v,S),b=a(A,b,E),N===null?w=A:N.sibling=A,N=A,S=T}if(P.done)return r(v,S),Ct&&lo(v,E),w;if(S===null){for(;!P.done;E++,P=y.next())P=f(v,P.value,_),P!==null&&(b=a(P,b,E),N===null?w=P:N.sibling=P,N=P);return Ct&&lo(v,E),w}for(S=n(v,S);!P.done;E++,P=y.next())P=m(S,v,E,P.value,_),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?E:P.key),b=a(P,b,E),N===null?w=P:N.sibling=P,N=P);return t&&S.forEach(function(k){return e(v,k)}),Ct&&lo(v,E),w}function x(v,b,y,_){if(typeof y=="object"&&y!==null&&y.type===Fl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case cm:e:{for(var w=y.key,N=b;N!==null;){if(N.key===w){if(w=y.type,w===Fl){if(N.tag===7){r(v,N.sibling),b=i(N,y.props.children),b.return=v,v=b;break e}}else if(N.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===us&&ZN(w)===N.type){r(v,N.sibling),b=i(N,y.props),b.ref=Gu(v,N,y),b.return=v,v=b;break e}r(v,N);break}else e(v,N);N=N.sibling}y.type===Fl?(b=Do(y.props.children,v.mode,_,y.key),b.return=v,v=b):(_=A0(y.type,y.key,y.props,null,v.mode,_),_.ref=Gu(v,b,y),_.return=v,v=_)}return s(v);case Rl:e:{for(N=y.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){r(v,b.sibling),b=i(b,y.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else e(v,b);b=b.sibling}b=Jv(y,v.mode,_),b.return=v,v=b}return s(v);case us:return N=y._init,x(v,b,N(y._payload),_)}if(vd(y))return g(v,b,y,_);if(zu(y))return p(v,b,y,_);bm(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(r(v,b.sibling),b=i(b,y),b.return=v,v=b):(r(v,b),b=Qv(y,v.mode,_),b.return=v,v=b),s(v)):r(v,b)}return x}var Sc=Q4(!0),J4=Q4(!1),Q0=Hs(null),J0=null,ql=null,k_=null;function A_(){k_=ql=J0=null}function O_(t){var e=Q0.current;Pt(Q0),t._currentValue=e}function Ob(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ac(t,e){J0=t,k_=ql=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function oi(t){var e=t._currentValue;if(k_!==t)if(t={context:t,memoizedValue:e,next:null},ql===null){if(J0===null)throw Error(ge(308));ql=t,J0.dependencies={lanes:0,firstContext:t}}else ql=ql.next=t;return e}var jo=null;function C_(t){jo===null?jo=[t]:jo.push(t)}function Z4(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,C_(e)):(r.next=i.next,i.next=r),e.interleaved=r,Fa(t,n)}function Fa(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ds=!1;function M_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ta(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function As(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Xe&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Fa(t,r)}return i=n.interleaved,i===null?(e.next=e,C_(n)):(e.next=i.next,i.next=e),n.interleaved=e,Fa(t,r)}function N0(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,v_(t,r)}}function ej(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Z0(t,e,r,n){var i=t.updateQueue;ds=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,d=u=l=null,o=a;do{var h=o.lane,m=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,p=o;switch(h=e,m=r,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=Ut({},f,h);break e;case 2:ds=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=m,l=f):d=d.next=m,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Wo|=s,t.lanes=s,t.memoizedState=f}}function tj(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ge(191,i));i.call(n)}}}var $h={},Qi=Hs($h),wf=Hs($h),_f=Hs($h);function Eo(t){if(t===$h)throw Error(ge(174));return t}function D_(t,e){switch(_t(_f,e),_t(wf,t),_t(Qi,$h),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:db(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=db(e,t)}Pt(Qi),_t(Qi,e)}function Nc(){Pt(Qi),Pt(wf),Pt(_f)}function tM(t){Eo(_f.current);var e=Eo(Qi.current),r=db(e,t.type);e!==r&&(_t(wf,t),_t(Qi,r))}function $_(t){wf.current===t&&(Pt(Qi),Pt(wf))}var Ft=Hs(0);function ep(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hv=[];function I_(){for(var t=0;t<Hv.length;t++)Hv[t]._workInProgressVersionPrimary=null;Hv.length=0}var j0=Ga.ReactCurrentDispatcher,qv=Ga.ReactCurrentBatchConfig,zo=0,Lt=null,ar=null,hr=null,tp=!1,$d=!1,Sf=0,e8=0;function Rr(){throw Error(ge(321))}function R_(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Di(t[r],e[r]))return!1;return!0}function F_(t,e,r,n,i,a){if(zo=a,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,j0.current=t===null||t.memoizedState===null?i8:a8,t=r(n,i),$d){a=0;do{if($d=!1,Sf=0,25<=a)throw Error(ge(301));a+=1,hr=ar=null,e.updateQueue=null,j0.current=s8,t=r(n,i)}while($d)}if(j0.current=rp,e=ar!==null&&ar.next!==null,zo=0,hr=ar=Lt=null,tp=!1,e)throw Error(ge(300));return t}function L_(){var t=Sf!==0;return Sf=0,t}function Hi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hr===null?Lt.memoizedState=hr=t:hr=hr.next=t,hr}function li(){if(ar===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=ar.next;var e=hr===null?Lt.memoizedState:hr.next;if(e!==null)hr=e,ar=t;else{if(t===null)throw Error(ge(310));ar=t,t={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},hr===null?Lt.memoizedState=hr=t:hr=hr.next=t}return hr}function Nf(t,e){return typeof e=="function"?e(t):e}function Gv(t){var e=li(),r=e.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=t;var n=ar,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,l=null,u=a;do{var d=u.lane;if((zo&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,s=n):l=l.next=f,Lt.lanes|=d,Wo|=d}u=u.next}while(u!==null&&u!==a);l===null?s=n:l.next=o,Di(n,e.memoizedState)||(gn=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,Lt.lanes|=a,Wo|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Kv(t){var e=li(),r=e.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Di(a,e.memoizedState)||(gn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function rM(){}function nM(t,e){var r=Lt,n=li(),i=e(),a=!Di(n.memoizedState,i);if(a&&(n.memoizedState=i,gn=!0),n=n.queue,B_(sM.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||hr!==null&&hr.memoizedState.tag&1){if(r.flags|=2048,jf(9,aM.bind(null,r,n,i,e),void 0,null),yr===null)throw Error(ge(349));zo&30||iM(r,e,i)}return i}function iM(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function aM(t,e,r,n){e.value=r,e.getSnapshot=n,oM(e)&&lM(t)}function sM(t,e,r){return r(function(){oM(e)&&lM(t)})}function oM(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Di(t,r)}catch{return!0}}function lM(t){var e=Fa(t,1);e!==null&&Oi(e,t,1,-1)}function rj(t){var e=Hi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nf,lastRenderedState:t},e.queue=t,t=t.dispatch=n8.bind(null,Lt,t),[e.memoizedState,t]}function jf(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function cM(){return li().memoizedState}function E0(t,e,r,n){var i=Hi();Lt.flags|=t,i.memoizedState=jf(1|e,r,void 0,n===void 0?null:n)}function Qg(t,e,r,n){var i=li();n=n===void 0?null:n;var a=void 0;if(ar!==null){var s=ar.memoizedState;if(a=s.destroy,n!==null&&R_(n,s.deps)){i.memoizedState=jf(e,r,a,n);return}}Lt.flags|=t,i.memoizedState=jf(1|e,r,a,n)}function nj(t,e){return E0(8390656,8,t,e)}function B_(t,e){return Qg(2048,8,t,e)}function uM(t,e){return Qg(4,2,t,e)}function dM(t,e){return Qg(4,4,t,e)}function fM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hM(t,e,r){return r=r!=null?r.concat([t]):null,Qg(4,4,fM.bind(null,e,t),r)}function U_(){}function mM(t,e){var r=li();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&R_(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function pM(t,e){var r=li();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&R_(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function gM(t,e,r){return zo&21?(Di(r,e)||(r=w4(),Lt.lanes|=r,Wo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=r)}function t8(t,e){var r=dt;dt=r!==0&&4>r?r:4,t(!0);var n=qv.transition;qv.transition={};try{t(!1),e()}finally{dt=r,qv.transition=n}}function xM(){return li().memoizedState}function r8(t,e,r){var n=Cs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},vM(t))yM(e,r);else if(r=Z4(t,e,r,n),r!==null){var i=sn();Oi(r,t,n,i),bM(r,e,n)}}function n8(t,e,r){var n=Cs(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(vM(t))yM(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,Di(o,s)){var l=e.interleaved;l===null?(i.next=i,C_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=Z4(t,e,i,n),r!==null&&(i=sn(),Oi(r,t,n,i),bM(r,e,n))}}function vM(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function yM(t,e){$d=tp=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function bM(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,v_(t,r)}}var rp={readContext:oi,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},i8={readContext:oi,useCallback:function(t,e){return Hi().memoizedState=[t,e===void 0?null:e],t},useContext:oi,useEffect:nj,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,E0(4194308,4,fM.bind(null,e,t),r)},useLayoutEffect:function(t,e){return E0(4194308,4,t,e)},useInsertionEffect:function(t,e){return E0(4,2,t,e)},useMemo:function(t,e){var r=Hi();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Hi();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=r8.bind(null,Lt,t),[n.memoizedState,t]},useRef:function(t){var e=Hi();return t={current:t},e.memoizedState=t},useState:rj,useDebugValue:U_,useDeferredValue:function(t){return Hi().memoizedState=t},useTransition:function(){var t=rj(!1),e=t[0];return t=t8.bind(null,t[1]),Hi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Lt,i=Hi();if(Ct){if(r===void 0)throw Error(ge(407));r=r()}else{if(r=e(),yr===null)throw Error(ge(349));zo&30||iM(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,nj(sM.bind(null,n,a,t),[t]),n.flags|=2048,jf(9,aM.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Hi(),e=yr.identifierPrefix;if(Ct){var r=Sa,n=_a;r=(n&~(1<<32-Ai(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Sf++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=e8++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},a8={readContext:oi,useCallback:mM,useContext:oi,useEffect:B_,useImperativeHandle:hM,useInsertionEffect:uM,useLayoutEffect:dM,useMemo:pM,useReducer:Gv,useRef:cM,useState:function(){return Gv(Nf)},useDebugValue:U_,useDeferredValue:function(t){var e=li();return gM(e,ar.memoizedState,t)},useTransition:function(){var t=Gv(Nf)[0],e=li().memoizedState;return[t,e]},useMutableSource:rM,useSyncExternalStore:nM,useId:xM,unstable_isNewReconciler:!1},s8={readContext:oi,useCallback:mM,useContext:oi,useEffect:B_,useImperativeHandle:hM,useInsertionEffect:uM,useLayoutEffect:dM,useMemo:pM,useReducer:Kv,useRef:cM,useState:function(){return Kv(Nf)},useDebugValue:U_,useDeferredValue:function(t){var e=li();return ar===null?e.memoizedState=t:gM(e,ar.memoizedState,t)},useTransition:function(){var t=Kv(Nf)[0],e=li().memoizedState;return[t,e]},useMutableSource:rM,useSyncExternalStore:nM,useId:xM,unstable_isNewReconciler:!1};function bi(t,e){if(t&&t.defaultProps){e=Ut({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Cb(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ut({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Jg={isMounted:function(t){return(t=t._reactInternals)?nl(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=sn(),i=Cs(t),a=Ta(n,i);a.payload=e,r!=null&&(a.callback=r),e=As(t,a,i),e!==null&&(Oi(e,t,i,n),N0(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=sn(),i=Cs(t),a=Ta(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=As(t,a,i),e!==null&&(Oi(e,t,i,n),N0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=sn(),n=Cs(t),i=Ta(r,n);i.tag=2,e!=null&&(i.callback=e),e=As(t,i,n),e!==null&&(Oi(e,t,n,r),N0(e,t,n))}};function ij(t,e,r,n,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,s):e.prototype&&e.prototype.isPureReactComponent?!xf(r,n)||!xf(i,a):!0}function wM(t,e,r){var n=!1,i=Fs,a=e.contextType;return typeof a=="object"&&a!==null?a=oi(a):(i=yn(e)?Bo:Gr.current,n=e.contextTypes,a=(n=n!=null)?wc(t,i):Fs),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jg,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function aj(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Jg.enqueueReplaceState(e,e.state,null)}function Mb(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},M_(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=oi(a):(a=yn(e)?Bo:Gr.current,i.context=wc(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Cb(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jg.enqueueReplaceState(i,i.state,null),Z0(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function jc(t,e){try{var r="",n=e;do r+=DL(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Yv(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Db(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var o8=typeof WeakMap=="function"?WeakMap:Map;function _M(t,e,r){r=Ta(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ip||(ip=!0,Vb=n),Db(t,e)},r}function SM(t,e,r){r=Ta(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Db(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Db(t,e),typeof n!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function sj(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new o8;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=w8.bind(null,t,e,r),e.then(t,t))}function oj(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lj(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ta(-1,1),e.tag=2,As(r,e,1))),r.lanes|=1),t)}var l8=Ga.ReactCurrentOwner,gn=!1;function Qr(t,e,r,n){e.child=t===null?J4(e,null,r,n):Sc(e,t.child,r,n)}function cj(t,e,r,n,i){r=r.render;var a=e.ref;return ac(e,i),n=F_(t,e,r,n,a,i),r=L_(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,La(t,e,i)):(Ct&&r&&E_(e),e.flags|=1,Qr(t,e,n,i),e.child)}function uj(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!Y_(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,NM(t,e,a,n,i)):(t=A0(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:xf,r(s,n)&&t.ref===e.ref)return La(t,e,i)}return e.flags|=1,t=Ms(a,n),t.ref=e.ref,t.return=e,e.child=t}function NM(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(xf(a,n)&&t.ref===e.ref)if(gn=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,La(t,e,i)}return $b(t,e,r,n,i)}function jM(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Kl,An),An|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_t(Kl,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,_t(Kl,An),An|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,_t(Kl,An),An|=n;return Qr(t,e,i,r),e.child}function EM(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function $b(t,e,r,n,i){var a=yn(r)?Bo:Gr.current;return a=wc(e,a),ac(e,i),r=F_(t,e,r,n,a,i),n=L_(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,La(t,e,i)):(Ct&&n&&E_(e),e.flags|=1,Qr(t,e,r,i),e.child)}function dj(t,e,r,n,i){if(yn(r)){var a=!0;K0(e)}else a=!1;if(ac(e,i),e.stateNode===null)T0(t,e),wM(e,r,n),Mb(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=oi(u):(u=yn(r)?Bo:Gr.current,u=wc(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||l!==u)&&aj(e,s,n,u),ds=!1;var h=e.memoizedState;s.state=h,Z0(e,n,s,i),l=e.memoizedState,o!==n||h!==l||vn.current||ds?(typeof d=="function"&&(Cb(e,r,d,n),l=e.memoizedState),(o=ds||ij(e,r,o,n,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,eM(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:bi(e.type,o),s.props=u,f=e.pendingProps,h=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=oi(l):(l=yn(r)?Bo:Gr.current,l=wc(e,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==l)&&aj(e,s,n,l),ds=!1,h=e.memoizedState,s.state=h,Z0(e,n,s,i);var g=e.memoizedState;o!==f||h!==g||vn.current||ds?(typeof m=="function"&&(Cb(e,r,m,n),g=e.memoizedState),(u=ds||ij(e,r,u,n,h,g,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),s.props=n,s.state=g,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Ib(t,e,r,n,a,i)}function Ib(t,e,r,n,i,a){EM(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&XN(e,r,!1),La(t,e,a);n=e.stateNode,l8.current=e;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Sc(e,t.child,null,a),e.child=Sc(e,null,o,a)):Qr(t,e,o,a),e.memoizedState=n.state,i&&XN(e,r,!0),e.child}function TM(t){var e=t.stateNode;e.pendingContext?YN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&YN(t,e.context,!1),D_(t,e.containerInfo)}function fj(t,e,r,n,i){return _c(),P_(i),e.flags|=256,Qr(t,e,r,n),e.child}var Rb={dehydrated:null,treeContext:null,retryLane:0};function Fb(t){return{baseLanes:t,cachePool:null,transitions:null}}function PM(t,e,r){var n=e.pendingProps,i=Ft.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_t(Ft,i&1),t===null)return Ab(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,a?(n=e.mode,a=e.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=tx(s,n,0,null),t=Do(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Fb(r),e.memoizedState=Rb,t):z_(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return c8(t,e,s,n,o,i,r);if(a){a=n.fallback,s=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ms(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Ms(o,a):(a=Do(a,s,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,s=t.child.memoizedState,s=s===null?Fb(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~r,e.memoizedState=Rb,n}return a=t.child,t=a.sibling,n=Ms(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function z_(t,e){return e=tx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wm(t,e,r,n){return n!==null&&P_(n),Sc(e,t.child,null,r),t=z_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function c8(t,e,r,n,i,a,s){if(r)return e.flags&256?(e.flags&=-257,n=Yv(Error(ge(422))),wm(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=tx({mode:"visible",children:n.children},i,0,null),a=Do(a,i,s,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Sc(e,t.child,null,s),e.child.memoizedState=Fb(s),e.memoizedState=Rb,a);if(!(e.mode&1))return wm(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(ge(419)),n=Yv(a,n,void 0),wm(t,e,s,n)}if(o=(s&t.childLanes)!==0,gn||o){if(n=yr,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Fa(t,i),Oi(n,t,i,-1))}return K_(),n=Yv(Error(ge(421))),wm(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=_8.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Fn=ks(i.nextSibling),Ln=e,Ct=!0,ji=null,t!==null&&(Jn[Zn++]=_a,Jn[Zn++]=Sa,Jn[Zn++]=Uo,_a=t.id,Sa=t.overflow,Uo=e),e=z_(e,n.children),e.flags|=4096,e)}function hj(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ob(t.return,e,r)}function Xv(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function kM(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Qr(t,e,n.children,r),n=Ft.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hj(t,r,e);else if(t.tag===19)hj(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(_t(Ft,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&ep(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Xv(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ep(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Xv(e,!0,r,null,a);break;case"together":Xv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function T0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function La(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Wo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,r=Ms(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ms(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function u8(t,e,r){switch(e.tag){case 3:TM(e),_c();break;case 5:tM(e);break;case 1:yn(e.type)&&K0(e);break;case 4:D_(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;_t(Q0,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(_t(Ft,Ft.current&1),e.flags|=128,null):r&e.child.childLanes?PM(t,e,r):(_t(Ft,Ft.current&1),t=La(t,e,r),t!==null?t.sibling:null);_t(Ft,Ft.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return kM(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_t(Ft,Ft.current),n)break;return null;case 22:case 23:return e.lanes=0,jM(t,e,r)}return La(t,e,r)}var AM,Lb,OM,CM;AM=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Lb=function(){};OM=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Eo(Qi.current);var a=null;switch(r){case"input":i=ob(t,i),n=ob(t,n),a=[];break;case"select":i=Ut({},i,{value:void 0}),n=Ut({},n,{value:void 0}),a=[];break;case"textarea":i=ub(t,i),n=ub(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=q0)}fb(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uf.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Nt("scroll",t),a||o===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};CM=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ku(t,e){if(!Ct)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Fr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function d8(t,e,r){var n=e.pendingProps;switch(T_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(e),null;case 1:return yn(e.type)&&G0(),Fr(e),null;case 3:return n=e.stateNode,Nc(),Pt(vn),Pt(Gr),I_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ym(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ji!==null&&(Gb(ji),ji=null))),Lb(t,e),Fr(e),null;case 5:$_(e);var i=Eo(_f.current);if(r=e.type,t!==null&&e.stateNode!=null)OM(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ge(166));return Fr(e),null}if(t=Eo(Qi.current),ym(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Gi]=e,n[bf]=a,t=(e.mode&1)!==0,r){case"dialog":Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":case"embed":Nt("load",n);break;case"video":case"audio":for(i=0;i<bd.length;i++)Nt(bd[i],n);break;case"source":Nt("error",n);break;case"img":case"image":case"link":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"input":_N(n,a),Nt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Nt("invalid",n);break;case"textarea":NN(n,a),Nt("invalid",n)}fb(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&vm(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&vm(n.textContent,o,t),i=["children",""+o]):uf.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Nt("scroll",n)}switch(r){case"input":um(n),SN(n,a,!0);break;case"textarea":um(n),jN(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=q0)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=s4(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Gi]=e,t[bf]=n,AM(t,e,!1,!1),e.stateNode=t;e:{switch(s=hb(r,n),r){case"dialog":Nt("cancel",t),Nt("close",t),i=n;break;case"iframe":case"object":case"embed":Nt("load",t),i=n;break;case"video":case"audio":for(i=0;i<bd.length;i++)Nt(bd[i],t);i=n;break;case"source":Nt("error",t),i=n;break;case"img":case"image":case"link":Nt("error",t),Nt("load",t),i=n;break;case"details":Nt("toggle",t),i=n;break;case"input":_N(t,n),i=ob(t,n),Nt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Ut({},n,{value:void 0}),Nt("invalid",t);break;case"textarea":NN(t,n),i=ub(t,n),Nt("invalid",t);break;default:i=n}fb(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?c4(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&o4(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&df(t,l):typeof l=="number"&&df(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(uf.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Nt("scroll",t):l!=null&&f_(t,a,l,s))}switch(r){case"input":um(t),SN(t,n,!1);break;case"textarea":um(t),jN(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Rs(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?tc(t,!!n.multiple,a,!1):n.defaultValue!=null&&tc(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=q0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fr(e),null;case 6:if(t&&e.stateNode!=null)CM(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ge(166));if(r=Eo(_f.current),Eo(Qi.current),ym(e)){if(n=e.stateNode,r=e.memoizedProps,n[Gi]=e,(a=n.nodeValue!==r)&&(t=Ln,t!==null))switch(t.tag){case 3:vm(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vm(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Gi]=e,e.stateNode=n}return Fr(e),null;case 13:if(Pt(Ft),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ct&&Fn!==null&&e.mode&1&&!(e.flags&128))X4(),_c(),e.flags|=98560,a=!1;else if(a=ym(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(ge(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ge(317));a[Gi]=e}else _c(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fr(e),a=!1}else ji!==null&&(Gb(ji),ji=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?or===0&&(or=3):K_())),e.updateQueue!==null&&(e.flags|=4),Fr(e),null);case 4:return Nc(),Lb(t,e),t===null&&vf(e.stateNode.containerInfo),Fr(e),null;case 10:return O_(e.type._context),Fr(e),null;case 17:return yn(e.type)&&G0(),Fr(e),null;case 19:if(Pt(Ft),a=e.memoizedState,a===null)return Fr(e),null;if(n=(e.flags&128)!==0,s=a.rendering,s===null)if(n)Ku(a,!1);else{if(or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ep(t),s!==null){for(e.flags|=128,Ku(a,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return _t(Ft,Ft.current&1|2),e.child}t=t.sibling}a.tail!==null&&Gt()>Ec&&(e.flags|=128,n=!0,Ku(a,!1),e.lanes=4194304)}else{if(!n)if(t=ep(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ku(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ct)return Fr(e),null}else 2*Gt()-a.renderingStartTime>Ec&&r!==1073741824&&(e.flags|=128,n=!0,Ku(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(r=a.last,r!==null?r.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Gt(),e.sibling=null,r=Ft.current,_t(Ft,n?r&1|2:r&1),e):(Fr(e),null);case 22:case 23:return G_(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?An&1073741824&&(Fr(e),e.subtreeFlags&6&&(e.flags|=8192)):Fr(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function f8(t,e){switch(T_(e),e.tag){case 1:return yn(e.type)&&G0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Nc(),Pt(vn),Pt(Gr),I_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $_(e),null;case 13:if(Pt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));_c()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pt(Ft),null;case 4:return Nc(),null;case 10:return O_(e.type._context),null;case 22:case 23:return G_(),null;case 24:return null;default:return null}}var _m=!1,Ur=!1,h8=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Gl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zt(t,e,n)}else r.current=null}function Bb(t,e,r){try{r()}catch(n){zt(t,e,n)}}var mj=!1;function m8(t,e){if(Sb=W0,t=R4(),j_(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,l=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var m;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===r&&++u===i&&(o=s),h===a&&++d===n&&(l=s),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nb={focusedElem:t,selectionRange:r},W0=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,x=g.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:bi(e.type,p),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(_){zt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return g=mj,mj=!1,g}function Id(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Bb(e,r,a)}i=i.next}while(i!==n)}}function Zg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Ub(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function MM(t){var e=t.alternate;e!==null&&(t.alternate=null,MM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gi],delete e[bf],delete e[Tb],delete e[XB],delete e[QB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function DM(t){return t.tag===5||t.tag===3||t.tag===4}function pj(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||DM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zb(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=q0));else if(n!==4&&(t=t.child,t!==null))for(zb(t,e,r),t=t.sibling;t!==null;)zb(t,e,r),t=t.sibling}function Wb(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Wb(t,e,r),t=t.sibling;t!==null;)Wb(t,e,r),t=t.sibling}var Er=null,wi=!1;function ts(t,e,r){for(r=r.child;r!==null;)$M(t,e,r),r=r.sibling}function $M(t,e,r){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(Hg,r)}catch{}switch(r.tag){case 5:Ur||Gl(r,e);case 6:var n=Er,i=wi;Er=null,ts(t,e,r),Er=n,wi=i,Er!==null&&(wi?(t=Er,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Er.removeChild(r.stateNode));break;case 18:Er!==null&&(wi?(t=Er,r=r.stateNode,t.nodeType===8?Wv(t.parentNode,r):t.nodeType===1&&Wv(t,r),pf(t)):Wv(Er,r.stateNode));break;case 4:n=Er,i=wi,Er=r.stateNode.containerInfo,wi=!0,ts(t,e,r),Er=n,wi=i;break;case 0:case 11:case 14:case 15:if(!Ur&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Bb(r,e,s),i=i.next}while(i!==n)}ts(t,e,r);break;case 1:if(!Ur&&(Gl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){zt(r,e,o)}ts(t,e,r);break;case 21:ts(t,e,r);break;case 22:r.mode&1?(Ur=(n=Ur)||r.memoizedState!==null,ts(t,e,r),Ur=n):ts(t,e,r);break;default:ts(t,e,r)}}function gj(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new h8),e.forEach(function(n){var i=S8.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function gi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:Er=o.stateNode,wi=!1;break e;case 3:Er=o.stateNode.containerInfo,wi=!0;break e;case 4:Er=o.stateNode.containerInfo,wi=!0;break e}o=o.return}if(Er===null)throw Error(ge(160));$M(a,s,i),Er=null,wi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){zt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IM(e,t),e=e.sibling}function IM(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gi(e,t),Li(t),n&4){try{Id(3,t,t.return),Zg(3,t)}catch(p){zt(t,t.return,p)}try{Id(5,t,t.return)}catch(p){zt(t,t.return,p)}}break;case 1:gi(e,t),Li(t),n&512&&r!==null&&Gl(r,r.return);break;case 5:if(gi(e,t),Li(t),n&512&&r!==null&&Gl(r,r.return),t.flags&32){var i=t.stateNode;try{df(i,"")}catch(p){zt(t,t.return,p)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=r!==null?r.memoizedProps:a,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&i4(i,a),hb(o,s);var u=hb(o,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?c4(i,f):d==="dangerouslySetInnerHTML"?o4(i,f):d==="children"?df(i,f):f_(i,d,f,u)}switch(o){case"input":lb(i,a);break;case"textarea":a4(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?tc(i,!!a.multiple,m,!1):h!==!!a.multiple&&(a.defaultValue!=null?tc(i,!!a.multiple,a.defaultValue,!0):tc(i,!!a.multiple,a.multiple?[]:"",!1))}i[bf]=a}catch(p){zt(t,t.return,p)}}break;case 6:if(gi(e,t),Li(t),n&4){if(t.stateNode===null)throw Error(ge(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(p){zt(t,t.return,p)}}break;case 3:if(gi(e,t),Li(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pf(e.containerInfo)}catch(p){zt(t,t.return,p)}break;case 4:gi(e,t),Li(t);break;case 13:gi(e,t),Li(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(H_=Gt())),n&4&&gj(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Ur=(u=Ur)||d,gi(e,t),Ur=u):gi(e,t),Li(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Te=t,d=t.child;d!==null;){for(f=Te=d;Te!==null;){switch(h=Te,m=h.child,h.tag){case 0:case 11:case 14:case 15:Id(4,h,h.return);break;case 1:Gl(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(p){zt(n,r,p)}}break;case 5:Gl(h,h.return);break;case 22:if(h.memoizedState!==null){vj(f);continue}}m!==null?(m.return=h,Te=m):vj(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=l4("display",s))}catch(p){zt(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){zt(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gi(e,t),Li(t),n&4&&gj(t);break;case 21:break;default:gi(e,t),Li(t)}}function Li(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(DM(r)){var n=r;break e}r=r.return}throw Error(ge(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(df(i,""),n.flags&=-33);var a=pj(t);Wb(t,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=pj(t);zb(t,o,s);break;default:throw Error(ge(161))}}catch(l){zt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function p8(t,e,r){Te=t,RM(t)}function RM(t,e,r){for(var n=(t.mode&1)!==0;Te!==null;){var i=Te,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||_m;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ur;o=_m;var u=Ur;if(_m=s,(Ur=l)&&!u)for(Te=i;Te!==null;)s=Te,l=s.child,s.tag===22&&s.memoizedState!==null?yj(i):l!==null?(l.return=s,Te=l):yj(i);for(;a!==null;)Te=a,RM(a),a=a.sibling;Te=i,_m=o,Ur=u}xj(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Te=a):xj(t)}}function xj(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ur||Zg(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ur)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:bi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&tj(e,a,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}tj(e,s,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&pf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}Ur||e.flags&512&&Ub(e)}catch(h){zt(e,e.return,h)}}if(e===t){Te=null;break}if(r=e.sibling,r!==null){r.return=e.return,Te=r;break}Te=e.return}}function vj(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Te=r;break}Te=e.return}}function yj(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Zg(4,e)}catch(l){zt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){zt(e,i,l)}}var a=e.return;try{Ub(e)}catch(l){zt(e,a,l)}break;case 5:var s=e.return;try{Ub(e)}catch(l){zt(e,s,l)}}}catch(l){zt(e,e.return,l)}if(e===t){Te=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Te=o;break}Te=e.return}}var g8=Math.ceil,np=Ga.ReactCurrentDispatcher,W_=Ga.ReactCurrentOwner,si=Ga.ReactCurrentBatchConfig,Xe=0,yr=null,Jt=null,Ar=0,An=0,Kl=Hs(0),or=0,Ef=null,Wo=0,ex=0,V_=0,Rd=null,hn=null,H_=0,Ec=1/0,xa=null,ip=!1,Vb=null,Os=null,Sm=!1,bs=null,ap=0,Fd=0,Hb=null,P0=-1,k0=0;function sn(){return Xe&6?Gt():P0!==-1?P0:P0=Gt()}function Cs(t){return t.mode&1?Xe&2&&Ar!==0?Ar&-Ar:ZB.transition!==null?(k0===0&&(k0=w4()),k0):(t=dt,t!==0||(t=window.event,t=t===void 0?16:P4(t.type)),t):1}function Oi(t,e,r,n){if(50<Fd)throw Fd=0,Hb=null,Error(ge(185));Ch(t,r,n),(!(Xe&2)||t!==yr)&&(t===yr&&(!(Xe&2)&&(ex|=r),or===4&&ps(t,Ar)),bn(t,n),r===1&&Xe===0&&!(e.mode&1)&&(Ec=Gt()+500,Xg&&qs()))}function bn(t,e){var r=t.callbackNode;ZL(t,e);var n=z0(t,t===yr?Ar:0);if(n===0)r!==null&&PN(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&PN(r),e===1)t.tag===0?JB(bj.bind(null,t)):G4(bj.bind(null,t)),KB(function(){!(Xe&6)&&qs()}),r=null;else{switch(_4(n)){case 1:r=x_;break;case 4:r=y4;break;case 16:r=U0;break;case 536870912:r=b4;break;default:r=U0}r=HM(r,FM.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function FM(t,e){if(P0=-1,k0=0,Xe&6)throw Error(ge(327));var r=t.callbackNode;if(sc()&&t.callbackNode!==r)return null;var n=z0(t,t===yr?Ar:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=sp(t,n);else{e=n;var i=Xe;Xe|=2;var a=BM();(yr!==t||Ar!==e)&&(xa=null,Ec=Gt()+500,Mo(t,e));do try{y8();break}catch(o){LM(t,o)}while(!0);A_(),np.current=a,Xe=i,Jt!==null?e=0:(yr=null,Ar=0,e=or)}if(e!==0){if(e===2&&(i=vb(t),i!==0&&(n=i,e=qb(t,i))),e===1)throw r=Ef,Mo(t,0),ps(t,n),bn(t,Gt()),r;if(e===6)ps(t,n);else{if(i=t.current.alternate,!(n&30)&&!x8(i)&&(e=sp(t,n),e===2&&(a=vb(t),a!==0&&(n=a,e=qb(t,a))),e===1))throw r=Ef,Mo(t,0),ps(t,n),bn(t,Gt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(ge(345));case 2:co(t,hn,xa);break;case 3:if(ps(t,n),(n&130023424)===n&&(e=H_+500-Gt(),10<e)){if(z0(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Eb(co.bind(null,t,hn,xa),e);break}co(t,hn,xa);break;case 4:if(ps(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-Ai(n);a=1<<s,s=e[s],s>i&&(i=s),n&=~a}if(n=i,n=Gt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*g8(n/1960))-n,10<n){t.timeoutHandle=Eb(co.bind(null,t,hn,xa),n);break}co(t,hn,xa);break;case 5:co(t,hn,xa);break;default:throw Error(ge(329))}}}return bn(t,Gt()),t.callbackNode===r?FM.bind(null,t):null}function qb(t,e){var r=Rd;return t.current.memoizedState.isDehydrated&&(Mo(t,e).flags|=256),t=sp(t,e),t!==2&&(e=hn,hn=r,e!==null&&Gb(e)),t}function Gb(t){hn===null?hn=t:hn.push.apply(hn,t)}function x8(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Di(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ps(t,e){for(e&=~V_,e&=~ex,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ai(e),n=1<<r;t[r]=-1,e&=~n}}function bj(t){if(Xe&6)throw Error(ge(327));sc();var e=z0(t,0);if(!(e&1))return bn(t,Gt()),null;var r=sp(t,e);if(t.tag!==0&&r===2){var n=vb(t);n!==0&&(e=n,r=qb(t,n))}if(r===1)throw r=Ef,Mo(t,0),ps(t,e),bn(t,Gt()),r;if(r===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,co(t,hn,xa),bn(t,Gt()),null}function q_(t,e){var r=Xe;Xe|=1;try{return t(e)}finally{Xe=r,Xe===0&&(Ec=Gt()+500,Xg&&qs())}}function Vo(t){bs!==null&&bs.tag===0&&!(Xe&6)&&sc();var e=Xe;Xe|=1;var r=si.transition,n=dt;try{if(si.transition=null,dt=1,t)return t()}finally{dt=n,si.transition=r,Xe=e,!(Xe&6)&&qs()}}function G_(){An=Kl.current,Pt(Kl)}function Mo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,GB(r)),Jt!==null)for(r=Jt.return;r!==null;){var n=r;switch(T_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&G0();break;case 3:Nc(),Pt(vn),Pt(Gr),I_();break;case 5:$_(n);break;case 4:Nc();break;case 13:Pt(Ft);break;case 19:Pt(Ft);break;case 10:O_(n.type._context);break;case 22:case 23:G_()}r=r.return}if(yr=t,Jt=t=Ms(t.current,null),Ar=An=e,or=0,Ef=null,V_=ex=Wo=0,hn=Rd=null,jo!==null){for(e=0;e<jo.length;e++)if(r=jo[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}jo=null}return t}function LM(t,e){do{var r=Jt;try{if(A_(),j0.current=rp,tp){for(var n=Lt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}tp=!1}if(zo=0,hr=ar=Lt=null,$d=!1,Sf=0,W_.current=null,r===null||r.return===null){or=1,Ef=e,Jt=null;break}e:{var a=t,s=r.return,o=r,l=e;if(e=Ar,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=oj(s);if(m!==null){m.flags&=-257,lj(m,s,o,a,e),m.mode&1&&sj(a,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var p=new Set;p.add(l),e.updateQueue=p}else g.add(l);break e}else{if(!(e&1)){sj(a,u,e),K_();break e}l=Error(ge(426))}}else if(Ct&&o.mode&1){var x=oj(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),lj(x,s,o,a,e),P_(jc(l,o));break e}}a=l=jc(l,o),or!==4&&(or=2),Rd===null?Rd=[a]:Rd.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=_M(a,l,e);ej(a,v);break e;case 1:o=l;var b=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Os===null||!Os.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var _=SM(a,o,e);ej(a,_);break e}}a=a.return}while(a!==null)}zM(r)}catch(w){e=w,Jt===r&&r!==null&&(Jt=r=r.return);continue}break}while(!0)}function BM(){var t=np.current;return np.current=rp,t===null?rp:t}function K_(){(or===0||or===3||or===2)&&(or=4),yr===null||!(Wo&268435455)&&!(ex&268435455)||ps(yr,Ar)}function sp(t,e){var r=Xe;Xe|=2;var n=BM();(yr!==t||Ar!==e)&&(xa=null,Mo(t,e));do try{v8();break}catch(i){LM(t,i)}while(!0);if(A_(),Xe=r,np.current=n,Jt!==null)throw Error(ge(261));return yr=null,Ar=0,or}function v8(){for(;Jt!==null;)UM(Jt)}function y8(){for(;Jt!==null&&!VL();)UM(Jt)}function UM(t){var e=VM(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?zM(t):Jt=e,W_.current=null}function zM(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=f8(r,e),r!==null){r.flags&=32767,Jt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{or=6,Jt=null;return}}else if(r=d8(r,e,An),r!==null){Jt=r;return}if(e=e.sibling,e!==null){Jt=e;return}Jt=e=t}while(e!==null);or===0&&(or=5)}function co(t,e,r){var n=dt,i=si.transition;try{si.transition=null,dt=1,b8(t,e,r,n)}finally{si.transition=i,dt=n}return null}function b8(t,e,r,n){do sc();while(bs!==null);if(Xe&6)throw Error(ge(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(eB(t,a),t===yr&&(Jt=yr=null,Ar=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sm||(Sm=!0,HM(U0,function(){return sc(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=si.transition,si.transition=null;var s=dt;dt=1;var o=Xe;Xe|=4,W_.current=null,m8(t,r),IM(r,t),BB(Nb),W0=!!Sb,Nb=Sb=null,t.current=r,p8(r),HL(),Xe=o,dt=s,si.transition=a}else t.current=r;if(Sm&&(Sm=!1,bs=t,ap=i),a=t.pendingLanes,a===0&&(Os=null),KL(r.stateNode),bn(t,Gt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(ip)throw ip=!1,t=Vb,Vb=null,t;return ap&1&&t.tag!==0&&sc(),a=t.pendingLanes,a&1?t===Hb?Fd++:(Fd=0,Hb=t):Fd=0,qs(),null}function sc(){if(bs!==null){var t=_4(ap),e=si.transition,r=dt;try{if(si.transition=null,dt=16>t?16:t,bs===null)var n=!1;else{if(t=bs,bs=null,ap=0,Xe&6)throw Error(ge(331));var i=Xe;for(Xe|=4,Te=t.current;Te!==null;){var a=Te,s=a.child;if(Te.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Te=u;Te!==null;){var d=Te;switch(d.tag){case 0:case 11:case 15:Id(8,d,a)}var f=d.child;if(f!==null)f.return=d,Te=f;else for(;Te!==null;){d=Te;var h=d.sibling,m=d.return;if(MM(d),d===u){Te=null;break}if(h!==null){h.return=m,Te=h;break}Te=m}}}var g=a.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}Te=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Te=s;else e:for(;Te!==null;){if(a=Te,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Id(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,Te=v;break e}Te=a.return}}var b=t.current;for(Te=b;Te!==null;){s=Te;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,Te=y;else e:for(s=b;Te!==null;){if(o=Te,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Zg(9,o)}}catch(w){zt(o,o.return,w)}if(o===s){Te=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,Te=_;break e}Te=o.return}}if(Xe=i,qs(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(Hg,t)}catch{}n=!0}return n}finally{dt=r,si.transition=e}}return!1}function wj(t,e,r){e=jc(r,e),e=_M(t,e,1),t=As(t,e,1),e=sn(),t!==null&&(Ch(t,1,e),bn(t,e))}function zt(t,e,r){if(t.tag===3)wj(t,t,r);else for(;e!==null;){if(e.tag===3){wj(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Os===null||!Os.has(n))){t=jc(r,t),t=SM(e,t,1),e=As(e,t,1),t=sn(),e!==null&&(Ch(e,1,t),bn(e,t));break}}e=e.return}}function w8(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&r,yr===t&&(Ar&r)===r&&(or===4||or===3&&(Ar&130023424)===Ar&&500>Gt()-H_?Mo(t,0):V_|=r),bn(t,e)}function WM(t,e){e===0&&(t.mode&1?(e=hm,hm<<=1,!(hm&130023424)&&(hm=4194304)):e=1);var r=sn();t=Fa(t,e),t!==null&&(Ch(t,e,r),bn(t,r))}function _8(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),WM(t,r)}function S8(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ge(314))}n!==null&&n.delete(e),WM(t,r)}var VM;VM=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||vn.current)gn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return gn=!1,u8(t,e,r);gn=!!(t.flags&131072)}else gn=!1,Ct&&e.flags&1048576&&K4(e,X0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;T0(t,e),t=e.pendingProps;var i=wc(e,Gr.current);ac(e,r),i=F_(null,e,n,t,i,r);var a=L_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(n)?(a=!0,K0(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,M_(e),i.updater=Jg,e.stateNode=i,i._reactInternals=e,Mb(e,n,t,r),e=Ib(null,e,n,!0,a,r)):(e.tag=0,Ct&&a&&E_(e),Qr(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(T0(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=j8(n),t=bi(n,t),i){case 0:e=$b(null,e,n,t,r);break e;case 1:e=dj(null,e,n,t,r);break e;case 11:e=cj(null,e,n,t,r);break e;case 14:e=uj(null,e,n,bi(n.type,t),r);break e}throw Error(ge(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:bi(n,i),$b(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:bi(n,i),dj(t,e,n,i,r);case 3:e:{if(TM(e),t===null)throw Error(ge(387));n=e.pendingProps,a=e.memoizedState,i=a.element,eM(t,e),Z0(e,n,null,r);var s=e.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=jc(Error(ge(423)),e),e=fj(t,e,n,r,i);break e}else if(n!==i){i=jc(Error(ge(424)),e),e=fj(t,e,n,r,i);break e}else for(Fn=ks(e.stateNode.containerInfo.firstChild),Ln=e,Ct=!0,ji=null,r=J4(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_c(),n===i){e=La(t,e,r);break e}Qr(t,e,n,r)}e=e.child}return e;case 5:return tM(e),t===null&&Ab(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,jb(n,i)?s=null:a!==null&&jb(n,a)&&(e.flags|=32),EM(t,e),Qr(t,e,s,r),e.child;case 6:return t===null&&Ab(e),null;case 13:return PM(t,e,r);case 4:return D_(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Sc(e,null,n,r):Qr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:bi(n,i),cj(t,e,n,i,r);case 7:return Qr(t,e,e.pendingProps,r),e.child;case 8:return Qr(t,e,e.pendingProps.children,r),e.child;case 12:return Qr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,_t(Q0,n._currentValue),n._currentValue=s,a!==null)if(Di(a.value,s)){if(a.children===i.children&&!vn.current){e=La(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Ta(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Ob(a.return,r,e),o.lanes|=r;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(ge(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),Ob(s,r,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Qr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ac(e,r),i=oi(i),n=n(i),e.flags|=1,Qr(t,e,n,r),e.child;case 14:return n=e.type,i=bi(n,e.pendingProps),i=bi(n.type,i),uj(t,e,n,i,r);case 15:return NM(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:bi(n,i),T0(t,e),e.tag=1,yn(n)?(t=!0,K0(e)):t=!1,ac(e,r),wM(e,n,i),Mb(e,n,i,r),Ib(null,e,n,!0,t,r);case 19:return kM(t,e,r);case 22:return jM(t,e,r)}throw Error(ge(156,e.tag))};function HM(t,e){return v4(t,e)}function N8(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(t,e,r,n){return new N8(t,e,r,n)}function Y_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function j8(t){if(typeof t=="function")return Y_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===m_)return 11;if(t===p_)return 14}return 2}function Ms(t,e){var r=t.alternate;return r===null?(r=ri(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function A0(t,e,r,n,i,a){var s=2;if(n=t,typeof t=="function")Y_(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Fl:return Do(r.children,i,a,e);case h_:s=8,i|=8;break;case nb:return t=ri(12,r,e,i|2),t.elementType=nb,t.lanes=a,t;case ib:return t=ri(13,r,e,i),t.elementType=ib,t.lanes=a,t;case ab:return t=ri(19,r,e,i),t.elementType=ab,t.lanes=a,t;case t4:return tx(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ZC:s=10;break e;case e4:s=9;break e;case m_:s=11;break e;case p_:s=14;break e;case us:s=16,n=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=ri(s,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Do(t,e,r,n){return t=ri(7,t,n,e),t.lanes=r,t}function tx(t,e,r,n){return t=ri(22,t,n,e),t.elementType=t4,t.lanes=r,t.stateNode={isHidden:!1},t}function Qv(t,e,r){return t=ri(6,t,null,e),t.lanes=r,t}function Jv(t,e,r){return e=ri(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function E8(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cv(0),this.expirationTimes=Cv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cv(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function X_(t,e,r,n,i,a,s,o,l){return t=new E8(t,e,r,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ri(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},M_(a),t}function T8(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function qM(t){if(!t)return Fs;t=t._reactInternals;e:{if(nl(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var r=t.type;if(yn(r))return q4(t,r,e)}return e}function GM(t,e,r,n,i,a,s,o,l){return t=X_(r,n,!0,t,i,a,s,o,l),t.context=qM(null),r=t.current,n=sn(),i=Cs(r),a=Ta(n,i),a.callback=e??null,As(r,a,i),t.current.lanes=i,Ch(t,i,n),bn(t,n),t}function rx(t,e,r,n){var i=e.current,a=sn(),s=Cs(i);return r=qM(r),e.context===null?e.context=r:e.pendingContext=r,e=Ta(a,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=As(i,e,s),t!==null&&(Oi(t,i,s,a),N0(t,i,s)),s}function op(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _j(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Q_(t,e){_j(t,e),(t=t.alternate)&&_j(t,e)}function P8(){return null}var KM=typeof reportError=="function"?reportError:function(t){console.error(t)};function J_(t){this._internalRoot=t}nx.prototype.render=J_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));rx(t,e,null,null)};nx.prototype.unmount=J_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vo(function(){rx(null,t,null,null)}),e[Ra]=null}};function nx(t){this._internalRoot=t}nx.prototype.unstable_scheduleHydration=function(t){if(t){var e=j4();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ms.length&&e!==0&&e<ms[r].priority;r++);ms.splice(r,0,t),r===0&&T4(t)}};function Z_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ix(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sj(){}function k8(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=op(s);a.call(u)}}var s=GM(e,n,t,0,null,!1,!1,"",Sj);return t._reactRootContainer=s,t[Ra]=s.current,vf(t.nodeType===8?t.parentNode:t),Vo(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=op(l);o.call(u)}}var l=X_(t,0,!1,null,null,!1,!1,"",Sj);return t._reactRootContainer=l,t[Ra]=l.current,vf(t.nodeType===8?t.parentNode:t),Vo(function(){rx(e,l,r,n)}),l}function ax(t,e,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=op(s);o.call(l)}}rx(e,s,t,i)}else s=k8(r,e,t,i,n);return op(s)}S4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=yd(e.pendingLanes);r!==0&&(v_(e,r|1),bn(e,Gt()),!(Xe&6)&&(Ec=Gt()+500,qs()))}break;case 13:Vo(function(){var n=Fa(t,1);if(n!==null){var i=sn();Oi(n,t,1,i)}}),Q_(t,1)}};y_=function(t){if(t.tag===13){var e=Fa(t,134217728);if(e!==null){var r=sn();Oi(e,t,134217728,r)}Q_(t,134217728)}};N4=function(t){if(t.tag===13){var e=Cs(t),r=Fa(t,e);if(r!==null){var n=sn();Oi(r,t,e,n)}Q_(t,e)}};j4=function(){return dt};E4=function(t,e){var r=dt;try{return dt=t,e()}finally{dt=r}};pb=function(t,e,r){switch(e){case"input":if(lb(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Yg(n);if(!i)throw Error(ge(90));n4(n),lb(n,i)}}}break;case"textarea":a4(t,r);break;case"select":e=r.value,e!=null&&tc(t,!!r.multiple,e,!1)}};f4=q_;h4=Vo;var A8={usingClientEntryPoint:!1,Events:[Dh,zl,Yg,u4,d4,q_]},Yu={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O8={bundleType:Yu.bundleType,version:Yu.version,rendererPackageName:Yu.rendererPackageName,rendererConfig:Yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g4(t),t===null?null:t.stateNode},findFiberByHostInstance:Yu.findFiberByHostInstance||P8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nm.isDisabled&&Nm.supportsFiber)try{Hg=Nm.inject(O8),Xi=Nm}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A8;Vn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Z_(e))throw Error(ge(200));return T8(t,e,null,r)};Vn.createRoot=function(t,e){if(!Z_(t))throw Error(ge(299));var r=!1,n="",i=KM;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=X_(t,1,!1,null,null,r,!1,n,i),t[Ra]=e.current,vf(t.nodeType===8?t.parentNode:t),new J_(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=g4(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return Vo(t)};Vn.hydrate=function(t,e,r){if(!ix(e))throw Error(ge(200));return ax(null,t,e,!0,r)};Vn.hydrateRoot=function(t,e,r){if(!Z_(t))throw Error(ge(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=KM;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=GM(e,null,t,1,r??null,i,!1,a,s),t[Ra]=e.current,vf(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new nx(e)};Vn.render=function(t,e,r){if(!ix(e))throw Error(ge(200));return ax(null,t,e,!1,r)};Vn.unmountComponentAtNode=function(t){if(!ix(t))throw Error(ge(40));return t._reactRootContainer?(Vo(function(){ax(null,null,t,!1,function(){t._reactRootContainer=null,t[Ra]=null})}),!0):!1};Vn.unstable_batchedUpdates=q_;Vn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ix(r))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return ax(t,e,r,!1,n)};Vn.version="18.3.1-next-f1338f8080-20240426";function YM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YM)}catch(t){console.error(t)}}YM(),YC.exports=Vn;var C8=YC.exports,XM,Nj=C8;XM=Nj.createRoot,Nj.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tf(){return Tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tf.apply(this,arguments)}var ws;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ws||(ws={}));const jj="popstate";function M8(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:s,hash:o}=n.location;return Kb("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:lp(i)}return $8(e,r,null,t)}function Bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D8(){return Math.random().toString(36).substr(2,8)}function Ej(t,e){return{usr:t.state,key:t.key,idx:e}}function Kb(t,e,r,n){return r===void 0&&(r=null),Tf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fu(e):e,{state:r,key:e&&e.key||n||D8()})}function lp(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function fu(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function $8(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=ws.Pop,l=null,u=d();u==null&&(u=0,s.replaceState(Tf({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=ws.Pop;let x=d(),v=x==null?null:x-u;u=x,l&&l({action:o,location:p.location,delta:v})}function h(x,v){o=ws.Push;let b=Kb(p.location,x,v);u=d()+1;let y=Ej(b,u),_=p.createHref(b);try{s.pushState(y,"",_)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(_)}a&&l&&l({action:o,location:p.location,delta:1})}function m(x,v){o=ws.Replace;let b=Kb(p.location,x,v);u=d();let y=Ej(b,u),_=p.createHref(b);s.replaceState(y,"",_),a&&l&&l({action:o,location:p.location,delta:0})}function g(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof x=="string"?x:lp(x);return b=b.replace(/ $/,"%20"),Bt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let p={get action(){return o},get location(){return t(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jj,f),l=x,()=>{i.removeEventListener(jj,f),l=null}},createHref(x){return e(i,x)},createURL:g,encodeLocation(x){let v=g(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:m,go(x){return s.go(x)}};return p}var Tj;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Tj||(Tj={}));function I8(t,e,r){return r===void 0&&(r="/"),R8(t,e,r,!1)}function R8(t,e,r,n){let i=typeof e=="string"?fu(e):e,a=Tc(i.pathname||"/",r);if(a==null)return null;let s=JM(t);F8(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let u=Y8(a);o=G8(s[l],u,n)}return o}function JM(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Bt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Ds([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&(Bt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),JM(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:H8(u,a.index),routesMeta:d})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of ZM(a.path))i(a,s,l)}),e}function ZM(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=ZM(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function F8(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:q8(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const L8=/^:[\w-]+$/,B8=3,U8=2,z8=1,W8=10,V8=-2,Pj=t=>t==="*";function H8(t,e){let r=t.split("/"),n=r.length;return r.some(Pj)&&(n+=V8),e&&(n+=U8),r.filter(i=>!Pj(i)).reduce((i,a)=>i+(L8.test(a)?B8:a===""?z8:W8),n)}function q8(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function G8(t,e,r){let{routesMeta:n}=t,i={},a="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=cp({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=cp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Ds([a,f.pathname]),pathnameBase:Z8(Ds([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=Ds([a,f.pathnameBase]))}return s}function cp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=K8(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let p=o[f]||"";s=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const g=o[f];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function K8(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),QM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Y8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return QM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Tc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function X8(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?fu(t):t;return{pathname:r?r.startsWith("/")?r:Q8(r,e):e,search:e7(n),hash:t7(i)}}function Q8(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Zv(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J8(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function e2(t,e){let r=J8(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function t2(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=fu(t):(i=Tf({},t),Bt(!i.pathname||!i.pathname.includes("?"),Zv("?","pathname","search",i)),Bt(!i.pathname||!i.pathname.includes("#"),Zv("#","pathname","hash",i)),Bt(!i.search||!i.search.includes("#"),Zv("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=e.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}o=f>=0?e[f]:"/"}let l=X8(i,o),u=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Ds=t=>t.join("/").replace(/\/\/+/g,"/"),Z8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),e7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,t7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function r7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const e3=["post","put","patch","delete"];new Set(e3);const n7=["get",...e3];new Set(n7);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pf(){return Pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pf.apply(this,arguments)}const sx=j.createContext(null),t3=j.createContext(null),Ka=j.createContext(null),ox=j.createContext(null),Ya=j.createContext({outlet:null,matches:[],isDataRoute:!1}),r3=j.createContext(null);function i7(t,e){let{relative:r}=e===void 0?{}:e;hu()||Bt(!1);let{basename:n,navigator:i}=j.useContext(Ka),{hash:a,pathname:s,search:o}=lx(t,{relative:r}),l=s;return n!=="/"&&(l=s==="/"?n:Ds([n,s])),i.createHref({pathname:l,search:o,hash:a})}function hu(){return j.useContext(ox)!=null}function Gs(){return hu()||Bt(!1),j.useContext(ox).location}function n3(t){j.useContext(Ka).static||j.useLayoutEffect(t)}function mu(){let{isDataRoute:t}=j.useContext(Ya);return t?y7():a7()}function a7(){hu()||Bt(!1);let t=j.useContext(sx),{basename:e,future:r,navigator:n}=j.useContext(Ka),{matches:i}=j.useContext(Ya),{pathname:a}=Gs(),s=JSON.stringify(e2(i,r.v7_relativeSplatPath)),o=j.useRef(!1);return n3(()=>{o.current=!0}),j.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=t2(u,JSON.parse(s),a,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ds([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,a,t])}const s7=j.createContext(null);function o7(t){let e=j.useContext(Ya).outlet;return e&&j.createElement(s7.Provider,{value:t},e)}function lx(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=j.useContext(Ka),{matches:i}=j.useContext(Ya),{pathname:a}=Gs(),s=JSON.stringify(e2(i,n.v7_relativeSplatPath));return j.useMemo(()=>t2(t,JSON.parse(s),a,r==="path"),[t,s,a,r])}function l7(t,e){return c7(t,e)}function c7(t,e,r,n){hu()||Bt(!1);let{navigator:i}=j.useContext(Ka),{matches:a}=j.useContext(Ya),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=Gs(),d;if(e){var f;let x=typeof e=="string"?fu(e):e;l==="/"||(f=x.pathname)!=null&&f.startsWith(l)||Bt(!1),d=x}else d=u;let h=d.pathname||"/",m=h;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=I8(t,{pathname:m}),p=m7(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Ds([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Ds([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,r,n);return e&&p?j.createElement(ox.Provider,{value:{location:Pf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ws.Pop}},p):p}function u7(){let t=v7(),e=r7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),r?j.createElement("pre",{style:i},r):null,null)}const d7=j.createElement(u7,null);class f7 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?j.createElement(Ya.Provider,{value:this.props.routeContext},j.createElement(r3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h7(t){let{routeContext:e,match:r,children:n}=t,i=j.useContext(sx);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(Ya.Provider,{value:e},n)}function m7(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Bt(!1),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,h)=>{let m,g=!1,p=null,x=null;r&&(m=o&&f.route.id?o[f.route.id]:void 0,p=f.route.errorElement||d7,l&&(u<0&&h===0?(g=!0,x=null):u===h&&(g=!0,x=f.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,h+1)),b=()=>{let y;return m?y=p:g?y=x:f.route.Component?y=j.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,j.createElement(h7,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:y})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?j.createElement(f7,{location:r.location,revalidation:r.revalidation,component:p,error:m,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var i3=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(i3||{}),up=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(up||{});function p7(t){let e=j.useContext(sx);return e||Bt(!1),e}function g7(t){let e=j.useContext(t3);return e||Bt(!1),e}function x7(t){let e=j.useContext(Ya);return e||Bt(!1),e}function a3(t){let e=x7(),r=e.matches[e.matches.length-1];return r.route.id||Bt(!1),r.route.id}function v7(){var t;let e=j.useContext(r3),r=g7(up.UseRouteError),n=a3(up.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function y7(){let{router:t}=p7(i3.UseNavigateStable),e=a3(up.UseNavigateStable),r=j.useRef(!1);return n3(()=>{r.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Pf({fromRouteId:e},a)))},[t,e])}const kj={};function b7(t,e){kj[e]||(kj[e]=!0,console.warn(e))}const Aj=(t,e,r)=>b7(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function w7(t,e){t!=null&&t.v7_startTransition||Aj("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&Aj("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function dp(t){let{to:e,replace:r,state:n,relative:i}=t;hu()||Bt(!1);let{future:a,static:s}=j.useContext(Ka),{matches:o}=j.useContext(Ya),{pathname:l}=Gs(),u=mu(),d=t2(e,e2(o,a.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(d);return j.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:i}),[u,f,i,r,n]),null}function _7(t){return o7(t.context)}function Ye(t){Bt(!1)}function S7(t){let{basename:e="/",children:r=null,location:n,navigationType:i=ws.Pop,navigator:a,static:s=!1,future:o}=t;hu()&&Bt(!1);let l=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:a,static:s,future:Pf({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof n=="string"&&(n=fu(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:g="default"}=n,p=j.useMemo(()=>{let x=Tc(d,l);return x==null?null:{location:{pathname:x,search:f,hash:h,state:m,key:g},navigationType:i}},[l,d,f,h,m,g,i]);return p==null?null:j.createElement(Ka.Provider,{value:u},j.createElement(ox.Provider,{children:r,value:p}))}function N7(t){let{children:e,location:r}=t;return l7(Yb(e),r)}new Promise(()=>{});function Yb(t,e){e===void 0&&(e=[]);let r=[];return j.Children.forEach(t,(n,i)=>{if(!j.isValidElement(n))return;let a=[...e,i];if(n.type===j.Fragment){r.push.apply(r,Yb(n.props.children,a));return}n.type!==Ye&&Bt(!1),!n.props.index||!n.props.children||Bt(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=Yb(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fp(){return fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fp.apply(this,arguments)}function s3(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function j7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function E7(t,e){return t.button===0&&(!e||e==="_self")&&!j7(t)}const T7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],P7=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],k7="6";try{window.__reactRouterVersion=k7}catch{}const A7=j.createContext({isTransitioning:!1}),O7="startTransition",Oj=wL[O7];function C7(t){let{basename:e,children:r,future:n,window:i}=t,a=j.useRef();a.current==null&&(a.current=M8({window:i,v5Compat:!0}));let s=a.current,[o,l]=j.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=j.useCallback(f=>{u&&Oj?Oj(()=>l(f)):l(f)},[l,u]);return j.useLayoutEffect(()=>s.listen(d),[s,d]),j.useEffect(()=>w7(n),[n]),j.createElement(S7,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const M7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",D7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o3=j.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:d,viewTransition:f}=e,h=s3(e,T7),{basename:m}=j.useContext(Ka),g,p=!1;if(typeof u=="string"&&D7.test(u)&&(g=u,M7))try{let y=new URL(window.location.href),_=u.startsWith("//")?new URL(y.protocol+u):new URL(u),w=Tc(_.pathname,m);_.origin===y.origin&&w!=null?u=w+_.search+_.hash:p=!0}catch{}let x=i7(u,{relative:i}),v=R7(u,{replace:s,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:f});function b(y){n&&n(y),y.defaultPrevented||v(y)}return j.createElement("a",fp({},h,{href:g||x,onClick:p||a?n:b,ref:r,target:l}))}),$7=j.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:l,viewTransition:u,children:d}=e,f=s3(e,P7),h=lx(l,{relative:f.relative}),m=Gs(),g=j.useContext(t3),{navigator:p,basename:x}=j.useContext(Ka),v=g!=null&&F7(h)&&u===!0,b=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,y=m.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(y=y.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&x&&(_=Tc(_,x)||_);const w=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let N=y===b||!s&&y.startsWith(b)&&y.charAt(w)==="/",S=_!=null&&(_===b||!s&&_.startsWith(b)&&_.charAt(b.length)==="/"),E={isActive:N,isPending:S,isTransitioning:v},T=N?n:void 0,P;typeof a=="function"?P=a(E):P=[a,N?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(E):o;return j.createElement(o3,fp({},f,{"aria-current":T,className:P,ref:r,style:A,to:l,viewTransition:u}),typeof d=="function"?d(E):d)});var Xb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Xb||(Xb={}));var Cj;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Cj||(Cj={}));function I7(t){let e=j.useContext(sx);return e||Bt(!1),e}function R7(t,e){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,l=mu(),u=Gs(),d=lx(t,{relative:s});return j.useCallback(f=>{if(E7(f,r)){f.preventDefault();let h=n!==void 0?n:lp(u)===lp(d);l(t,{replace:h,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[u,l,d,n,i,r,t,a,s,o])}function F7(t,e){e===void 0&&(e={});let r=j.useContext(A7);r==null&&Bt(!1);let{basename:n}=I7(Xb.useViewTransitionState),i=lx(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=Tc(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=Tc(r.nextLocation.pathname,n)||r.nextLocation.pathname;return cp(i.pathname,s)!=null||cp(i.pathname,a)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Oe=(t,e)=>{const r=j.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,...u},d)=>j.createElement("svg",{ref:d,...L7,width:i,height:i,stroke:n,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${B7(t)}`,o].join(" "),...u},[...e.map(([f,h])=>j.createElement(f,h)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=Oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=Oe("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=Oe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=Oe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=Oe("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=Oe("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=Oe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=Oe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=Oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=Oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=Oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=Oe("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=Oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=Oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=Oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=Oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=Oe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=Oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=Oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=Oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=Oe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=Oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=Oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=Oe("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Oe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Oe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=Oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=Oe("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=Oe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=Oe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=Oe("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=Oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=Oe("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=Oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=Oe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=Oe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Oe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=Oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=Oe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=Oe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=Oe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=Oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=Oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=Oe("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=Oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=Oe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),m9={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SITE_URL:"https://generalpos.netlify.app/",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFwenB4dGx6Z3RkeGFza21nb2t1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUwNDQ2OTEsImV4cCI6MjA1MDYyMDY5MX0.BkDQ9YLN1j-6NsTGS0JcZmBibPlwav7yzmibOutmw4g",VITE_SUPABASE_URL:"https://qpzpxtlzgtdxaskmgoku.supabase.co"},Ij=t=>{let e;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(e):d;if(!Object.is(h,e)){const m=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),r.forEach(g=>g(e,m))}},i=()=>e,l={setState:n,getState:i,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(m9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,i,l);return l},p9=t=>t?Ij(t):Ij;var y3={exports:{}},b3={},w3={exports:{}},_3={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc=j;function g9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var x9=typeof Object.is=="function"?Object.is:g9,v9=Pc.useState,y9=Pc.useEffect,b9=Pc.useLayoutEffect,w9=Pc.useDebugValue;function _9(t,e){var r=e(),n=v9({inst:{value:r,getSnapshot:e}}),i=n[0].inst,a=n[1];return b9(function(){i.value=r,i.getSnapshot=e,ey(i)&&a({inst:i})},[t,r,e]),y9(function(){return ey(i)&&a({inst:i}),t(function(){ey(i)&&a({inst:i})})},[t]),w9(r),r}function ey(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!x9(t,r)}catch{return!0}}function S9(t,e){return e()}var N9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S9:_9;_3.useSyncExternalStore=Pc.useSyncExternalStore!==void 0?Pc.useSyncExternalStore:N9;w3.exports=_3;var j9=w3.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux=j,E9=j9;function T9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var P9=typeof Object.is=="function"?Object.is:T9,k9=E9.useSyncExternalStore,A9=ux.useRef,O9=ux.useEffect,C9=ux.useMemo,M9=ux.useDebugValue;b3.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=A9(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=C9(function(){function l(m){if(!u){if(u=!0,d=m,m=n(m),i!==void 0&&s.hasValue){var g=s.value;if(i(g,m))return f=g}return f=m}if(g=f,P9(d,m))return g;var p=n(m);return i!==void 0&&i(g,p)?g:(d=m,f=p)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var o=k9(t,a[0],a[1]);return O9(function(){s.hasValue=!0,s.value=o},[o]),M9(o),o};y3.exports=b3;var D9=y3.exports;const $9=at(D9),S3={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SITE_URL:"https://generalpos.netlify.app/",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFwenB4dGx6Z3RkeGFza21nb2t1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUwNDQ2OTEsImV4cCI6MjA1MDYyMDY5MX0.BkDQ9YLN1j-6NsTGS0JcZmBibPlwav7yzmibOutmw4g",VITE_SUPABASE_URL:"https://qpzpxtlzgtdxaskmgoku.supabase.co"},{useDebugValue:I9}=X,{useSyncExternalStoreWithSelector:R9}=$9;let Rj=!1;const F9=t=>t;function L9(t,e=F9,r){(S3?"production":void 0)!=="production"&&r&&!Rj&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Rj=!0);const n=R9(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return I9(n),n}const Fj=t=>{(S3?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?p9(t):t,r=(n,i)=>L9(e,n,i);return Object.assign(r,e),r},Ih=t=>t?Fj(t):Fj,B9={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SITE_URL:"https://generalpos.netlify.app/",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFwenB4dGx6Z3RkeGFza21nb2t1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUwNDQ2OTEsImV4cCI6MjA1MDYyMDY5MX0.BkDQ9YLN1j-6NsTGS0JcZmBibPlwav7yzmibOutmw4g",VITE_SUPABASE_URL:"https://qpzpxtlzgtdxaskmgoku.supabase.co"};function U9(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var a;const s=l=>l===null?null:JSON.parse(l,void 0),o=(a=r.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>r.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>r.removeItem(i)}}const Af=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Af(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Af(n)(r)}}}},z9=(t,e)=>(r,n,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,v)=>({...v,...x}),...e},s=!1;const o=new Set,l=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...x)},n,i);const d=Af(a.serialize),f=()=>{const x=a.partialize({...n()});let v;const b=d({state:x,version:a.version}).then(y=>u.setItem(a.name,y)).catch(y=>{v=y});if(v)throw v;return b},h=i.setState;i.setState=(x,v)=>{h(x,v),f()};const m=t((...x)=>{r(...x),f()},n,i);let g;const p=()=>{var x;if(!u)return;s=!1,o.forEach(b=>b(n()));const v=((x=a.onRehydrateStorage)==null?void 0:x.call(a,n()))||void 0;return Af(u.getItem.bind(u))(a.name).then(b=>{if(b)return a.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==a.version){if(a.migrate)return a.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var y;return g=a.merge(b,(y=n())!=null?y:m),r(g,!0),f()}).then(()=>{v==null||v(g,void 0),s=!0,l.forEach(b=>b(g))}).catch(b=>{v==null||v(void 0,b)})};return i.persist={setOptions:x=>{a={...a,...x},x.getStorage&&(u=x.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},p(),g||m},W9=(t,e)=>(r,n,i)=>{let a={storage:U9(()=>localStorage),partialize:p=>p,version:0,merge:(p,x)=>({...x,...p}),...e},s=!1;const o=new Set,l=new Set;let u=a.storage;if(!u)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...p)},n,i);const d=()=>{const p=a.partialize({...n()});return u.setItem(a.name,{state:p,version:a.version})},f=i.setState;i.setState=(p,x)=>{f(p,x),d()};const h=t((...p)=>{r(...p),d()},n,i);i.getInitialState=()=>h;let m;const g=()=>{var p,x;if(!u)return;s=!1,o.forEach(b=>{var y;return b((y=n())!=null?y:h)});const v=((x=a.onRehydrateStorage)==null?void 0:x.call(a,(p=n())!=null?p:h))||void 0;return Af(u.getItem.bind(u))(a.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==a.version){if(a.migrate)return[!0,a.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var y;const[_,w]=b;if(m=a.merge(w,(y=n())!=null?y:h),r(m,!0),_)return d()}).then(()=>{v==null||v(m,void 0),m=n(),s=!0,l.forEach(b=>b(m))}).catch(b=>{v==null||v(void 0,b)})};return i.persist={setOptions:p=>{a={...a,...p},p.storage&&(u=p.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:p=>(o.add(p),()=>{o.delete(p)}),onFinishHydration:p=>(l.add(p),()=>{l.delete(p)})},a.skipHydration||g(),m||h},V9=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((B9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),z9(t,e)):W9(t,e),dx=V9,qe=Ih()(dx(t=>({user:null,businessCode:null,setUser:e=>t({user:e,businessCode:(e==null?void 0:e.businessCode)||null}),setBusinessCode:e=>t({businessCode:e})}),{name:"auth-storage"})),_e=Ih()(dx(t=>({language:"ar",setLanguage:e=>t({language:e})}),{name:"language-storage"})),vt=({to:t,icon:e,children:r})=>c.jsxs($7,{to:t,className:({isActive:n})=>`flex items-center space-x-2 space-x-reverse px-4 py-2 rounded-md transition-colors ${n?"bg-indigo-500 text-white":"text-gray-600 hover:bg-indigo-50 hover:text-indigo-600"}`,children:[c.jsx(e,{className:"w-5 h-5"}),c.jsx("span",{children:r})]});function H9(){const{user:t}=qe(),{language:e}=_e();return c.jsx("aside",{className:"w-64 bg-white border-l border-gray-200 overflow-y-auto",children:c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-center p-4",children:[c.jsx(Yt,{className:"w-8 h-8 text-indigo-600"}),c.jsx("span",{className:"mr-2 text-xl font-bold text-gray-900",children:e==="ar"?"متجري":"My Store"})]}),c.jsx("nav",{className:"mt-8 space-y-2",children:(t==null?void 0:t.role)==="admin"?c.jsxs(c.Fragment,{children:[c.jsx(vt,{to:"/dashboard",icon:c9,children:e==="ar"?"أصحاب المتاجر":"Store Owners"}),c.jsx(vt,{to:"/cashiers",icon:Ld,children:e==="ar"?"الكاشير":"Cashiers"}),c.jsx(vt,{to:"/vendors",icon:Yt,children:e==="ar"?"الموردين":"Vendors"})]}):(t==null?void 0:t.role)==="vendor"?c.jsxs(c.Fragment,{children:[c.jsx(vt,{to:"/dashboard",icon:Mj,children:e==="ar"?"لوحة التحكم":"Dashboard"}),c.jsx(vt,{to:"/products",icon:Pa,children:e==="ar"?"منتجاتي":"My Products"}),c.jsx(vt,{to:"/settings",icon:Dj,children:e==="ar"?"الإعدادات":"Settings"})]}):c.jsxs(c.Fragment,{children:[((t==null?void 0:t.role)==="owner"||(t==null?void 0:t.role)==="manager")&&c.jsxs(c.Fragment,{children:[c.jsx(vt,{to:"/dashboard",icon:Mj,children:e==="ar"?"الرئيسية":"Dashboard"}),c.jsx(vt,{to:"/reports",icon:W7,children:e==="ar"?"التقارير":"Reports"})]}),c.jsx(vt,{to:"/pos",icon:Jb,children:e==="ar"?"نقطة البيع":"POS"}),c.jsx(vt,{to:"/products",icon:Pa,children:e==="ar"?"المنتجات":"Products"}),c.jsx(vt,{to:"/upcoming-products",icon:Pa,children:e==="ar"?"المنتجات القادمة":"Upcoming Products"}),c.jsx(vt,{to:"/customers",icon:Ld,children:e==="ar"?"العملاء":"Customers"}),c.jsx(vt,{to:"/cash-drawer",icon:kf,children:e==="ar"?"درج النقود":"Cash Drawer"}),c.jsx(vt,{to:"/expenses",icon:v3,children:e==="ar"?"المصروفات العامة":"General Expenses"}),c.jsx(vt,{to:"/return-products",icon:U7,children:e==="ar"?"إرجاع المنتجات":"Return Products"}),c.jsx(vt,{to:"/receipts",icon:m3,children:e==="ar"?"الفواتير":"Receipts"}),((t==null?void 0:t.role)==="owner"||(t==null?void 0:t.role)==="manager")&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"pt-4 mb-2 border-t",children:c.jsx("p",{className:"px-4 text-xs font-semibold text-gray-500 uppercase",children:e==="ar"?"الإدارة":"Management"})}),c.jsx(vt,{to:"/cashiers",icon:$j,children:e==="ar"?"الكاشير":"Cashiers"}),c.jsx(vt,{to:"/managers",icon:$j,children:e==="ar"?"المدراء":"Managers"}),c.jsx(vt,{to:"/sub-vendors",icon:Ld,children:e==="ar"?"إدارة الموردين":"Sub-vendors"}),c.jsx(vt,{to:"/branches",icon:pu,children:e==="ar"?"الفروع":"Branches"}),c.jsx(vt,{to:"/vendor-profits",icon:d9,children:e==="ar"?"أرباح الموردين":"Vendor Profits"}),c.jsx(vt,{to:"/monthly-vendor-taxes",icon:kf,children:e==="ar"?"الضرائب الشهرية للموردين":"Monthly Vendor Taxes"}),c.jsx(vt,{to:"/vendor-spaces",icon:Z7,children:e==="ar"?"مساحات الموردين":"Vendor Spaces"}),c.jsx(vt,{to:"/coupons",icon:g3,children:e==="ar"?"الكوبونات":"Coupons"}),c.jsx(vt,{to:"/settings",icon:Dj,children:e==="ar"?"الإعدادات":"Settings"}),c.jsx(vt,{to:"/developer",icon:Y7,children:e==="ar"?"المطور":"Developer"})]})]})})]})})}const q9="modulepreload",G9=function(t){return"/"+t},Lj={},kc=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=G9(l),l in Lj)return;Lj[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":q9,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},K9=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>kc(async()=>{const{default:n}=await Promise.resolve().then(()=>gu);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class i2 extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Y9 extends i2{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class X9 extends i2{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Q9 extends i2{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zb;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zb||(Zb={}));var J9=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function l(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};class Z9{constructor(e,{headers:r={},customFetch:n,region:i=Zb.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=K9(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return J9(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:s}=r;let o={},{region:l}=r;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=s):typeof s=="string"?(o["Content-Type"]="text/plain",u=s):typeof FormData<"u"&&s instanceof FormData?u=s:(o["Content-Type"]="application/json",u=JSON.stringify(s)));const d=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:u}).catch(g=>{throw new Y9(g)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new X9(d);if(!d.ok)throw new Q9(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield d.json():h==="application/octet-stream"?m=yield d.blob():h==="text/event-stream"?m=d:h==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(i){return{data:null,error:i}}})}}var mn={},a2={},fx={},Rh={},hx={},mx={},eU=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ac=eU();const tU=Ac.fetch,N3=Ac.fetch.bind(Ac),j3=Ac.Headers,rU=Ac.Request,nU=Ac.Response,gu=Object.freeze(Object.defineProperty({__proto__:null,Headers:j3,Request:rU,Response:nU,default:N3,fetch:tU},Symbol.toStringTag,{value:"Module"})),iU=aL(gu);var px={};Object.defineProperty(px,"__esModule",{value:!0});let aU=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};px.default=aU;var E3=Wr&&Wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mx,"__esModule",{value:!0});const sU=E3(iU),oU=E3(px);let lU=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=sU.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var s,o,l;let u=null,d=null,f=null,h=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const v=await a.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const p=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),x=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");p&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const p=await a.text();try{u=JSON.parse(p),Array.isArray(u)&&a.status===404&&(d=[],u=null,h=200,m="OK")}catch{a.status===404&&p===""?(h=204,m="No Content"):u={message:p}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new oU.default(u)}return{error:u,data:d,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(i=i.catch(a=>{var s,o,l;return{error:{message:`${(s=a==null?void 0:a.name)!==null&&s!==void 0?s:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}};mx.default=lU;var cU=Wr&&Wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hx,"__esModule",{value:!0});const uU=cU(mx);let dU=class extends uU.default{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const s=a?`${a}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:s="text"}={}){var o;const l=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${u}"; options=${l};`,s==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};hx.default=dU;var fU=Wr&&Wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rh,"__esModule",{value:!0});const hU=fU(hx);let mU=class extends hU.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${s}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Rh.default=mU;var pU=Wr&&Wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fx,"__esModule",{value:!0});const Xu=pU(Rh);let gU=class{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=r,this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const s=(e??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer=`count=${n}`),new Xu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const s=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(s.length>0){const o=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Xu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){const s="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Xu.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new Xu.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Xu.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};fx.default=gU;var gx={},xx={};Object.defineProperty(xx,"__esModule",{value:!0});xx.version=void 0;xx.version="0.0.0-automated";Object.defineProperty(gx,"__esModule",{value:!0});gx.DEFAULT_HEADERS=void 0;const xU=xx;gx.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${xU.version}`};var T3=Wr&&Wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a2,"__esModule",{value:!0});const vU=T3(fx),yU=T3(Rh),bU=gx;let wU=class P3{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},bU.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new vU.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new P3(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:a}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let l;n||i?(s=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{o.searchParams.append(d,f)})):(s="POST",l=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new yU.default({method:s,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};a2.default=wU;var xu=Wr&&Wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mn,"__esModule",{value:!0});mn.PostgrestError=mn.PostgrestBuilder=mn.PostgrestTransformBuilder=mn.PostgrestFilterBuilder=mn.PostgrestQueryBuilder=mn.PostgrestClient=void 0;const k3=xu(a2);mn.PostgrestClient=k3.default;const A3=xu(fx);mn.PostgrestQueryBuilder=A3.default;const O3=xu(Rh);mn.PostgrestFilterBuilder=O3.default;const C3=xu(hx);mn.PostgrestTransformBuilder=C3.default;const M3=xu(mx);mn.PostgrestBuilder=M3.default;const D3=xu(px);mn.PostgrestError=D3.default;var _U=mn.default={PostgrestClient:k3.default,PostgrestQueryBuilder:A3.default,PostgrestFilterBuilder:O3.default,PostgrestTransformBuilder:C3.default,PostgrestBuilder:M3.default,PostgrestError:D3.default};const{PostgrestClient:SU,PostgrestQueryBuilder:nMe,PostgrestFilterBuilder:iMe,PostgrestTransformBuilder:aMe,PostgrestBuilder:sMe,PostgrestError:oMe}=_U,NU="2.11.2",jU={"X-Client-Info":`realtime-js/${NU}`},EU="1.0.0",$3=1e4,TU=1e3;var oc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(oc||(oc={}));var Tn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Tn||(Tn={}));var _i;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(_i||(_i={}));var e1;(function(t){t.websocket="websocket"})(e1||(e1={}));var vo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(vo||(vo={}));class PU{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2);let s=this.HEADER_LENGTH+2;const o=n.decode(e.slice(s,s+i));s=s+i;const l=n.decode(e.slice(s,s+a));s=s+a;const u=JSON.parse(n.decode(e.slice(s,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class I3{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(yt||(yt={}));const Bj=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,s)=>(a[s]=kU(s,t,e,i),a),{})},kU=(t,e,r,n)=>{const i=e.find(o=>o.name===t),a=i==null?void 0:i.type,s=r[t];return a&&!n.includes(a)?R3(a,s):t1(s)},R3=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return MU(e,r)}switch(t){case yt.bool:return AU(e);case yt.float4:case yt.float8:case yt.int2:case yt.int4:case yt.int8:case yt.numeric:case yt.oid:return OU(e);case yt.json:case yt.jsonb:return CU(e);case yt.timestamp:return DU(e);case yt.abstime:case yt.date:case yt.daterange:case yt.int4range:case yt.int8range:case yt.money:case yt.reltime:case yt.text:case yt.time:case yt.timestamptz:case yt.timetz:case yt.tsrange:case yt.tstzrange:return t1(e);default:return t1(e)}},t1=t=>t,AU=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},OU=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},CU=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},MU=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const s=t.slice(1,r);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>R3(e,o))}return t},DU=t=>typeof t=="string"?t.replace(" ","T"):t,F3=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ty{constructor(e,r,n={},i=$3){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Uj;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Uj||(Uj={}));class Bd{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bd.syncState(this.state,i,a,s),this.pendingDiffs.forEach(l=>{this.state=Bd.syncDiff(this.state,l,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Bd.syncDiff(this.state,i,a,s),o())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),s=this.transformState(r),o={},l={};return this.map(a,(u,d)=>{s[u]||(l[u]=d)}),this.map(s,(u,d)=>{const f=a[u];if(f){const h=d.map(x=>x.presence_ref),m=f.map(x=>x.presence_ref),g=d.filter(x=>m.indexOf(x.presence_ref)<0),p=f.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(o[u]=g),p.length>0&&(l[u]=p)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,l)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),d.length>0){const f=e[o].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);e[o].unshift(...h)}n(o,d,l)}),this.map(s,(o,l)=>{let u=e[o];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=u,i(o,u,l),u.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zj;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(zj||(zj={}));var Wj;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wj||(Wj={}));var va;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(va||(va={}));class s2{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ty(this,_i.join,this.params,this.timeout),this.rejoinTimer=new I3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_i.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Bd(this),this.broadcastEndpointURL=F3(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:s,private:o}}=this.params;this._onError(d=>e==null?void 0:e(va.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(va.CLOSED));const l={},u={broadcast:a,presence:s,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(va.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,g=[];for(let p=0;p<m;p++){const x=h[p],{filter:{event:v,schema:b,table:y,filter:_}}=x,w=d&&d[p];if(w&&w.event===v&&w.schema===b&&w.table===y&&w.filter===_)g.push(Object.assign(Object.assign({},x),{id:w.id}));else{this.unsubscribe(),e==null||e(va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(va.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:s}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Tn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_i.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new ty(this,_i.leave,{},e);i.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),s}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ty(this,e,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const s=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=_i;if(n&&[o,l,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var g,p,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(p=m.filter)===null||p===void 0?void 0:p.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(m=>m.callback(h,n)):(a=this.bindings[s])===null||a===void 0||a.filter(m=>{var g,p,x,v,b,y;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const _=m.id,w=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((p=r.ids)===null||p===void 0?void 0:p.includes(_))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(b=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:p,table:x,commit_timestamp:v,type:b,errors:y}=g;h=Object.assign(Object.assign({},{schema:p,table:x,commit_timestamp:v,eventType:b,new:{},old:{},errors:y}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===Tn.closed}_isJoined(){return this.state===Tn.joined}_isJoining(){return this.state===Tn.joining}_isLeaving(){return this.state===Tn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&s2.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_i.close,{},e)}_onError(e){this._on(_i.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Bj(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Bj(e.columns,e.old_record)),r}}const $U=()=>{},IU=typeof WebSocket<"u",RU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class FU{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=jU,this.params={},this.timeout=$3,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=$U,this.conn=null,this.sendBuffer=[],this.serializer=new PU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...o)=>kc(async()=>{const{default:l}=await Promise.resolve().then(()=>gu);return{default:l}},void 0).then(({default:l})=>l(...o)):s=fetch,(...o)=>s(...o)},this.endPoint=`${e}/${e1.websocket}`,this.httpEndpoint=F3(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,s)=>s(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new I3(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(IU){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new LU(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),kc(async()=>{const{default:e}=await import("./browser-Cg6CEk4e.js").then(r=>r.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:EU}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case oc.connecting:return vo.Connecting;case oc.open:return vo.Open;case oc.closing:return vo.Closing;default:return vo.Closed}}isConnected(){return this.connectionState()===vo.Open}channel(e,r={config:{}}){const n=new s2(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:i,ref:a}=e,s=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(i=>{r&&i.updateJoinPayload({access_token:r}),i.joinedOnce&&i._isJoined()&&i._push(_i.access_token,{access_token:r})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(TU,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:i,payload:a,ref:s}=r;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${i} ${s&&"("+s+")"||""}`,a),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(i,a,s)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(_i.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([RU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class LU{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=oc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class o2 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function dr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class BU extends o2{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class r1 extends o2{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var UU=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function l(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const L3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>kc(async()=>{const{default:n}=await Promise.resolve().then(()=>gu);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},zU=()=>UU(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kc(()=>Promise.resolve().then(()=>gu),void 0)).Response:Response}),n1=t=>{if(Array.isArray(t))return t.map(r=>n1(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=n1(n)}),e};var al=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function l(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const ry=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),WU=(t,e,r)=>al(void 0,void 0,void 0,function*(){const n=yield zU();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{e(new BU(ry(i),t.status||500))}).catch(i=>{e(new r1(ry(i),i))}):e(new r1(ry(t),t))}),VU=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),r))};function Fh(t,e,r,n,i,a){return al(this,void 0,void 0,function*(){return new Promise((s,o)=>{t(r,VU(e,n,i,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>WU(l,o,n))})})}function hp(t,e,r,n){return al(this,void 0,void 0,function*(){return Fh(t,"GET",e,r,n)})}function fs(t,e,r,n,i){return al(this,void 0,void 0,function*(){return Fh(t,"POST",e,n,i,r)})}function HU(t,e,r,n,i){return al(this,void 0,void 0,function*(){return Fh(t,"PUT",e,n,i,r)})}function qU(t,e,r,n){return al(this,void 0,void 0,function*(){return Fh(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function B3(t,e,r,n,i){return al(this,void 0,void 0,function*(){return Fh(t,"DELETE",e,n,i,r)})}var dn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function l(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const GU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class KU{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=L3(i)}uploadOrUpdate(e,r,n,i){return dn(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Vj),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",s.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:a,headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}upload(e,r,n){return dn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return dn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:Vj.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:d}),h=yield f.json();return f.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(dr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return dn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield fs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),s=new URL(this.url+a.url),o=s.searchParams.get("token");if(!o)throw new o2("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:o},error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}update(e,r,n){return dn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return dn(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(dr(i))return{data:null,error:i};throw i}})}copy(e,r,n){return dn(this,void 0,void 0,function*(){try{return{data:{path:(yield fs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(dr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return dn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield fs(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(dr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return dn(this,void 0,void 0,function*(){try{const i=yield fs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(dr(i))return{data:null,error:i};throw i}})}download(e,r){return dn(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=a?`?${a}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield hp(this.fetch,`${this.url}/${i}/${o}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(dr(o))return{data:null,error:o};throw o}})}info(e){return dn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield hp(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:n1(n),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}exists(e){return dn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield qU(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(dr(n)&&n instanceof r1){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return dn(this,void 0,void 0,function*(){try{return{data:yield B3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}list(e,r,n){return dn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},GU),r),{prefix:e||""});return{data:yield fs(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(dr(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const YU="2.7.1",XU={"X-Client-Info":`storage-js/${YU}`};var bl=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function l(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};class QU{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},XU),r),this.fetch=L3(n)}listBuckets(){return bl(this,void 0,void 0,function*(){try{return{data:yield hp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}})}getBucket(e){return bl(this,void 0,void 0,function*(){try{return{data:yield hp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return bl(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return bl(this,void 0,void 0,function*(){try{return{data:yield HU(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return bl(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return bl(this,void 0,void 0,function*(){try{return{data:yield B3(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}}class JU extends QU{constructor(e,r={},n){super(e,r,n)}from(e){return new KU(this.url,this.headers,e,this.fetch)}}const ZU="2.48.1";let _d="";typeof Deno<"u"?_d="deno":typeof document<"u"?_d="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_d="react-native":_d="node";const ez={"X-Client-Info":`supabase-js-${_d}/${ZU}`},tz={headers:ez},rz={schema:"public"},nz={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iz={};var az=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function l(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};const sz=t=>{let e;return t?e=t:typeof fetch>"u"?e=N3:e=fetch,(...r)=>e(...r)},oz=()=>typeof Headers>"u"?j3:Headers,lz=(t,e,r)=>{const n=sz(r),i=oz();return(a,s)=>az(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new i(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(a,Object.assign(Object.assign({},s),{headers:u}))})};var cz=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function l(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};function uz(t){return t.replace(/\/$/,"")}function dz(t,e){const{db:r,auth:n,realtime:i,global:a}=t,{db:s,auth:o,realtime:l,global:u}=e,d={db:Object.assign(Object.assign({},s),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),a),accessToken:()=>cz(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}const U3="2.67.3",fz="http://localhost:9999",hz="supabase.auth.token",mz={"X-Client-Info":`gotrue-js/${U3}`},Hj=10,i1="X-Supabase-Api-Version",z3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function pz(t){return Math.round(Date.now()/1e3)+t}function gz(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ui=()=>typeof window<"u"&&typeof document<"u",to={tested:!1,writable:!1},Ud=()=>{if(!Ui())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(to.tested)return to.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),to.tested=!0,to.writable=!0}catch{to.tested=!0,to.writable=!1}return to.writable};function xz(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const W3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>kc(async()=>{const{default:n}=await Promise.resolve().then(()=>gu);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},vz=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",V3=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},jm=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Em=async(t,e)=>{await t.removeItem(e)};function yz(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,i,a,s,o,l,u,d=0;for(t=t.replace("-","+").replace("_","/");d<t.length;)s=e.indexOf(t.charAt(d++)),o=e.indexOf(t.charAt(d++)),l=e.indexOf(t.charAt(d++)),u=e.indexOf(t.charAt(d++)),n=s<<2|o>>4,i=(o&15)<<4|l>>2,a=(l&3)<<6|u,r=r+String.fromCharCode(n),l!=64&&i!=0&&(r=r+String.fromCharCode(i)),u!=64&&a!=0&&(r=r+String.fromCharCode(a));return r}class vx{constructor(){this.promise=new vx.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}vx.promiseConstructor=Promise;function qj(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse(yz(n))}async function bz(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function wz(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await t(a);if(!e(a,null,s)){n(s);return}}catch(s){if(!e(a,s)){i(s);return}}})()})}function _z(t){return("0"+t.toString(16)).substr(-2)}function Sz(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,_z).join("")}async function Nz(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}function jz(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ez(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Nz(t);return jz(r)}async function wl(t,e,r=!1){const n=Sz();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await V3(t,`${e}-code-verifier`,i);const a=await Ez(n);return[a,n===a?"plain":"s256"]}const Tz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Pz(t){const e=t.headers.get(i1);if(!e||!e.match(Tz))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class l2 extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ze(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class kz extends l2{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Az(t){return ze(t)&&t.name==="AuthApiError"}class H3 extends l2{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class sl extends l2{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class os extends sl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Oz(t){return ze(t)&&t.name==="AuthSessionMissingError"}class ny extends sl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tm extends sl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pm extends sl{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Cz(t){return ze(t)&&t.name==="AuthImplicitGrantRedirectError"}class Gj extends sl{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class a1 extends sl{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function iy(t){return ze(t)&&t.name==="AuthRetryableFetchError"}class Kj extends sl{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}var Mz=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const uo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Dz=[502,503,504];async function Yj(t){var e;if(!vz(t))throw new a1(uo(t),0);if(Dz.includes(t.status))throw new a1(uo(t),t.status);let r;try{r=await t.json()}catch(a){throw new H3(uo(a),a)}let n;const i=Pz(t);if(i&&i.getTime()>=z3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Kj(uo(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new os}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Kj(uo(r),t.status,r.weak_password.reasons);throw new kz(uo(r),t.status||500,n)}const $z=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Ge(t,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[i1]||(a[i1]=z3["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const s=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await Iz(t,e,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Iz(t,e,r,n,i,a){const s=$z(e,n,i,a);let o;try{o=await t(r,Object.assign({},s))}catch(l){throw console.error(l),new a1(uo(l),0)}if(o.ok||await Yj(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Yj(l)}}function ls(t){var e;let r=null;Bz(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=pz(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Xj(t){const e=ls(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function gs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Rz(t){return{data:t,error:null}}function Fz(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,s=Mz(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},l=Object.assign({},s);return{data:{properties:o,user:l},error:null}}function Lz(t){return t}function Bz(t){return t.access_token&&t.refresh_token&&t.expires_in}var Uz=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class zz{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=W3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:gs})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Uz(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Fz,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ze(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gs})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,s,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Lz});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ze(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gs})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:gs})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:gs})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}}const Wz={getItem:t=>Ud()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ud()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ud()&&globalThis.localStorage.removeItem(t)}};function Qj(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Vz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _l={debug:!!(globalThis&&Ud()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class q3 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Hz extends q3{}async function qz(t,e,r){_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),_l.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw _l.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Hz(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(_l.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Vz();const Gz={url:fz,storageKey:hz,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mz,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Qu=30*1e3,Jj=3;async function Zj(t,e,r){return await r()}class Of{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Of.nextInstanceID,Of.nextInstanceID+=1,this.instanceID>0&&Ui()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Gz),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new zz({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=W3(i.fetch),this.lock=i.lock||Zj,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ui()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=qz:this.lock=Zj,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Ud()?this.storage=Wz:(this.memoryStorage={},this.storage=Qj(this.memoryStorage)):(this.memoryStorage={},this.storage=Qj(this.memoryStorage)),Ui()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${U3}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=xz(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ui()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Cz(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ze(r)?{error:r}:{error:new H3("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ls}),{data:s,error:o}=a;if(o||!s)return{data:{user:null,session:null},error:o};const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:d,password:f,options:h}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await wl(this.storage,this.storageKey)),a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:ls})}else if("phone"in e){const{phone:d,password:f,options:h}=e;a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ls})}else throw new Tm("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return{data:{user:null,session:null},error:o};const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:s,options:o}=e;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Xj})}else if("phone"in e){const{phone:a,password:s,options:o}=e;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Xj})}else throw new Tm("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ny}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await jm(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:s}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ls});if(await Em(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new ny}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(ze(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:s}=e,o=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ls}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ny}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,a,s;try{if("email"in e){const{email:o,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await wl(this.storage,this.storageKey));const{error:f}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:d}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Tm("You must provide either an email or phone number.")}catch(o){if(ze(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ls});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,u=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let a=null,s=null;return this.flowType==="pkce"&&([a,s]=await wl(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:Rz})}catch(a){if(ze(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new os;const{error:i}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ze(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:s}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:s,error:o}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o}}throw new Tm("You must provide either an email or phone number and a type")}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await jm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!s&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gs}):await this._useSession(async r=>{var n,i,a;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new os}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:gs})})}catch(r){if(ze(r))return Oz(r)&&(await this._removeSession(),await Em(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new os;const s=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await wl(this.storage,this.storageKey));const{data:u,error:d}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:s.access_token,xform:gs});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return qj(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new os;const r=Date.now()/1e3;let n=r,i=!0,a=null;const s=qj(e.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(ze(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:s,error:o}=r;if(o)throw o;e=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new os;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ui())throw new Pm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Gj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Gj("No code detected.");const{data:b,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:o,expires_at:l,token_type:u}=e;if(!a||!o||!s||!u)throw new Pm("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;l&&(h=parseInt(l));const m=h-d;m*1e3<=Qu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:p,error:x}=await this._getUser(a);if(x)throw x;const v={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(n){if(ze(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await jm(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,e);if(o&&!(Az(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Em(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=gz(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await wl(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(ze(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var s,o,l,u,d;const{data:f,error:h}=a;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ui()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ze(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)throw s;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await wz(async i=>(i>0&&await bz(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ls})),(i,a)=>{const s=200*Math.pow(2,i);return a&&iy(a)&&Date.now()+s-n<Qu})}catch(n){if(this._debug(r,"error",n),ze(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ui()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await jm(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),a=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<i+Hj;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Hj}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),iy(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new os;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new vx;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new os;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),ze(a)){const s={session:null,error:a};return iy(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(l){a.push(l)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await V3(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Em(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ui()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Qu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Qu}ms, refresh threshold is ${Jj} ticks`),i<=Jj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof q3)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ui()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,s]=await wl(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)return{data:null,error:s};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:s,error:o}=await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}catch(r){if(ze(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ze(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(s=>s.factor_type==="totp"&&s.status==="verified"),a=n.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(i.access_token);let o=null;s.aal&&(o=s.aal);let l=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=s.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}Of.nextInstanceID=0;const Kz=Of;class Yz extends Kz{constructor(e){super(e)}}var Xz=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function l(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((n=n.apply(t,e||[])).next())})};class Qz{constructor(e,r,n){var i,a,s;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=uz(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:rz,realtime:iz,auth:Object.assign(Object.assign({},nz),{storageKey:l}),global:tz},d=dz(n??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=lz(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new SU(`${o}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Z9(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new JU(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Xz(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:a,flowType:s,lock:o,debug:l},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yz({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:s,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new FU(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Jz=(t,e,r)=>new Qz(t,e,r),Zz="https://qpzpxtlzgtdxaskmgoku.supabase.co",eW="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFwenB4dGx6Z3RkeGFza21nb2t1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUwNDQ2OTEsImV4cCI6MjA1MDYyMDY5MX0.BkDQ9YLN1j-6NsTGS0JcZmBibPlwav7yzmibOutmw4g",oe=Jz(Zz,eW);async function G3(t){const{data:e,error:r}=await oe.from("profiles").select("main_branch").eq("user_id",t).single();return r?(console.error("Error fetching user main branch:",r),null):(e==null?void 0:e.main_branch)||null}async function c2(t){console.log("Fetching profile for user:",t);const{data:e,error:r}=await oe.from("profiles").select("*").eq("user_id",t).single();return r?(console.error("Error fetching profile:",r),null):(console.log("Profile data retrieved:",{userId:t,role:e==null?void 0:e.role,mainBranch:e==null?void 0:e.main_branch,businessCode:e==null?void 0:e.business_code}),e)}function tW(t){if(!t.role)return"/setup-profile";const e=t.role.toLowerCase();switch(console.log("Determining redirect path for role:",e),e){case"super_admin":case"admin":return"/dashboard";case"owner":return"/dashboard";case"cashier":return"/pos";case"vendor":return console.log("Redirecting vendor to sub-vendor dashboard"),"/dashboard";default:return console.log("Using default redirect to dashboard"),"/dashboard"}}async function u2(t){const{data:e,error:r}=await oe.from("profiles").select("business_name").eq("business_code",t).eq("role","owner").single();return r?(console.error("Error fetching business name:",r),"Unknown Business"):(e==null?void 0:e.business_name)||"Unknown Business"}async function Lh(t){console.log("Fetching branches for business code:",t);const{data:e,error:r}=await oe.from("branches").select("*").eq("business_code",t);return r?(console.error("Error fetching branches:",r),[]):(console.log("Supabase branches response:",{businessCode:t,data:e,error:r}),e||[])}async function rW(t){return!t.role||!t.business_code?(console.error("Missing required profile fields:",{role:t.role,business_code:t.business_code}),!1):t.role==="vendor"&&!t.is_vendor?(console.error("Invalid vendor profile: is_vendor flag not set"),!1):t.role==="admin"?(console.log("Admin access granted"),!0):(console.log("Default access granted for role:",t.role),!0)}function K3(){const[t,e]=j.useState(!1),[r,n]=j.useState(null),{setUser:i}=qe();return{signIn:async(o,l)=>{try{e(!0),n(null);const{data:u,error:d}=await oe.auth.signInWithPassword({email:o,password:l});if(d)throw d;if(u.user){const f=await c2(u.user.id);if(f){console.log("Profile loaded:",f);const h=await rW(f);if(console.log("Business access validated:",h),!h)throw new Error("Invalid business code or no access to this business");console.log("Setting user with business code:",f.business_code),i({id:u.user.id,email:u.user.email,name:f.full_name||"",role:f.role||"user",businessCode:f.business_code||"",main_branch:f.main_branch||void 0})}return{user:u.user,profile:f}}return{user:null,profile:null}}catch(u){return n(u instanceof Error?u.message:"An error occurred"),{user:null,profile:null}}finally{e(!1)}},signOut:async()=>{try{e(!0),n(null),localStorage.removeItem("business-storage");const{error:o}=await oe.auth.signOut();if(o)throw o;i(null)}catch(o){n(o instanceof Error?o.message:"An error occurred")}finally{e(!1)}},isLoading:t,error:r}}function nW(){const{language:t,setLanguage:e}=_e();return c.jsx("div",{className:"relative inline-block text-left",children:c.jsxs("button",{type:"button",onClick:()=>e(t==="ar"?"en":"ar"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[c.jsx(d3,{className:"h-4 w-4 ml-2"}),t==="ar"?"English":"العربية"]})})}function iW(){const{user:t}=qe(),{signOut:e}=K3(),{language:r}=_e(),n=mu(),i=async()=>{await e(),n("/login")};return c.jsx("header",{className:"bg-white shadow-sm",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r==="ar"?"نظام نقاط البيع":"POS System"}),c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[c.jsx(nW,{}),c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(h9,{className:"w-5 h-5 text-gray-500"}),c.jsx("span",{className:"text-gray-700",children:t==null?void 0:t.name})]}),c.jsxs("button",{onClick:i,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[c.jsx(e9,{className:"w-4 h-4 ml-2"}),r==="ar"?"تسجيل الخروج":"Logout"]})]})]})})}const tr=Ih()(dx((t,e)=>({businessCode:null,branches:[],selectedBranchId:null,defaultBranchId:null,setBusinessCode:r=>t({businessCode:r}),setBranches:r=>t({branches:r}),setSelectedBranch:r=>t({selectedBranchId:r}),setDefaultBranch:r=>t({defaultBranchId:r}),getCurrentBranch:()=>{const{branches:r,selectedBranchId:n}=e();return!n||n==="all"?null:r.find(i=>i.branch_id===n)||null}}),{name:"business-storage"}));function aW(){const{language:t}=_e(),{user:e}=qe(),{setBranches:r}=tr();return j.useEffect(()=>{e!=null&&e.businessCode&&Lh(e.businessCode).then(n=>{console.log("Fetched branches:",n),r(n)}).catch(n=>{console.error("Error fetching branches:",n)})},[e==null?void 0:e.businessCode]),c.jsxs("div",{className:"flex h-screen bg-gray-50",dir:t==="ar"?"rtl":"ltr",children:[c.jsx(H9,{}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[c.jsx(iW,{}),c.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-4",children:c.jsx(_7,{})})]})]})}const Ii=Ih()(dx(t=>({settings:null,isLoading:!1,error:null,setSettings:e=>t({settings:e}),setIsLoading:e=>t({isLoading:e}),setError:e=>t({error:e}),updateSettings:e=>t(r=>({settings:r.settings?{...r.settings,...e}:null}))}),{name:"business-settings-storage"}));async function Y3(t){try{const{data:e,error:r}=await oe.from("business_settings").select("*").eq("business_code_",t).single();return r?(console.error("Error fetching business settings:",r),null):e}catch(e){return console.error("Error in getBusinessSettings:",e),null}}async function eE(t,e){try{const{data:r,error:n}=await oe.from("business_settings").update(e).eq("business_code_",t).select().single();return n?(console.error("Error updating business settings:",n),null):r}catch(r){return console.error("Error in updateBusinessSettings:",r),null}}function sW(){const{user:t}=qe(),{settings:e,isLoading:r,error:n,setSettings:i,setIsLoading:a,setError:s}=Ii();return j.useEffect(()=>{e||(async()=>{if(t!=null&&t.businessCode)try{a(!0),s(null);const l=await Y3(t.businessCode);i(l)}catch(l){console.error("Error loading business settings:",l),s(l instanceof Error?l.message:"Failed to load settings")}finally{a(!1)}})()},[t==null?void 0:t.businessCode]),{settings:e,isLoading:r,error:n}}const d2={ar:{title:"نظام متجري",email:"البريد الإلكتروني",password:"كلمة المرور",login:"تسجيل الدخول",loggingIn:"جاري تسجيل الدخول...",invalidCredentials:"اسم المستخدم أو كلمة المرور غير صحيحة",forgotPassword:"نسيت كلمة المرور؟",resetPassword:"إعادة تعيين كلمة المرور",sendResetLink:"إرسال رابط إعادة التعيين",sending:"جاري الإرسال...",resetPasswordSuccess:"تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني",newPassword:"كلمة المرور الجديدة",confirmPassword:"تأكيد كلمة المرور",passwordsDoNotMatch:"كلمات المرور غير متطابقة",passwordTooShort:"كلمة المرور يجب أن تكون 6 أحرف على الأقل",unexpectedError:"حدث خطأ غير متوقع",resetYourPassword:"إعادة تعيين كلمة المرور",resettingPassword:"جاري إعادة التعيين...",passwordResetSuccess:"تم تغيير كلمة المرور بنجاح. سيتم توجيهك إلى صفحة تسجيل الدخول...",createAccount:"إنشاء حساب",creatingAccount:"جاري إنشاء الحساب...",accountCreated:"تم إنشاء الحساب بنجاح"},en:{title:"My Store System",email:"Email",password:"Password",login:"Sign in",loggingIn:"Signing in...",invalidCredentials:"Invalid username or password",forgotPassword:"Forgot password?",resetPassword:"Reset Password",sendResetLink:"Send Reset Link",sending:"Sending...",resetPasswordSuccess:"Password reset link has been sent to your email",newPassword:"New Password",confirmPassword:"Confirm Password",passwordsDoNotMatch:"Passwords do not match",passwordTooShort:"Password must be at least 6 characters",unexpectedError:"An unexpected error occurred",resetYourPassword:"Reset Your Password",resettingPassword:"Resetting Password...",passwordResetSuccess:"Password has been reset successfully. Redirecting to login...",createAccount:"Create Account",creatingAccount:"Creating Account...",accountCreated:"Account created successfully"}},Ju=5,tE=15*60*1e3,km=new Map;function oW(t){const e=Date.now(),r=km.get(t);return r?r.blocked?e-r.firstAttempt>=tE?(km.delete(t),{blocked:!1,remainingAttempts:Ju}):{blocked:!0,remainingAttempts:0}:e-r.firstAttempt>=tE?(km.set(t,{attempts:1,firstAttempt:e,blocked:!1}),{blocked:!1,remainingAttempts:Ju-1}):(r.attempts++,r.attempts>Ju?(r.blocked=!0,{blocked:!0,remainingAttempts:0}):{blocked:!1,remainingAttempts:Ju-r.attempts}):(km.set(t,{attempts:1,firstAttempt:e,blocked:!1}),{blocked:!1,remainingAttempts:Ju-1})}function lW(t){return t.replace(/[<>]/g,"").trim()}function cW(t){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)}function uW(){const{language:t}=_e(),e=d2[t],r=mu(),{user:n}=qe(),{signIn:i,isLoading:a,error:s}=K3(),[o,l]=j.useState(""),[u,d]=j.useState(""),[f,h]=j.useState(null);if(n)return c.jsx(dp,{to:"/dashboard",replace:!0});const m=async p=>{p.preventDefault(),h(null);const x=lW(o);if(!cW(x)){h("Invalid email format");return}const{blocked:v,remainingAttempts:b}=oW(x);if(v){h("Too many login attempts. Please try again in 15 minutes.");return}const{user:y,profile:_}=await i(x,u);if(y&&_){const w=tW(_);r(w)}else b>0&&h(`Login failed. ${b} attempts remaining.`)},g=p=>{l(p.target.value.toLowerCase())};return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx(Yt,{className:"w-12 h-12 text-indigo-600"})}),c.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:e.title})]}),c.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:c.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:c.jsxs("form",{className:"space-y-6",onSubmit:m,autoComplete:"off",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:e.email}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:o,onChange:g,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",autoComplete:"off"})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:e.password}),c.jsx(o3,{to:"/reset-password",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:e.forgotPassword})]}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:u,onChange:p=>d(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",autoComplete:"off"})})]}),(s||f)&&c.jsx("div",{className:"rounded-md bg-red-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(il,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:f||s})})]})}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:a,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:a?e.loggingIn:e.login})})]})})})]})}const f2=Ih(t=>({userProfile:null,setUserProfile:e=>t({userProfile:e}),fetchUserProfile:async()=>{try{const{data:{user:e}}=await oe.auth.getUser();if(!e){t({userProfile:null});return}const{data:r,error:n}=await oe.from("profiles").select("*").eq("user_id",e.id).single();if(n){console.error("Error fetching user profile:",n),t({userProfile:null});return}t({userProfile:r})}catch(e){console.error("Error in fetchUserProfile:",e),t({userProfile:null})}}})),dW=(t,e,r,n)=>{var a,s,o,l;const i=[r,{code:e,...n||{}}];if((s=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&s.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);$o(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(l=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&l.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},rE={},s1=(t,e,r,n)=>{$o(r)&&rE[r]||($o(r)&&(rE[r]=new Date),dW(t,e,r,n))},X3=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},o1=(t,e,r)=>{t.loadNamespaces(e,X3(t,r))},nE=(t,e,r,n)=>{if($o(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return o1(t,r,n);r.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,X3(t,n))},fW=(t,e,r={})=>!e.languages||!e.languages.length?(s1(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(n,i)=>{var a;if(((a=r.bindI18n)==null?void 0:a.indexOf("languageChanging"))>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,t))return!1}}),$o=t=>typeof t=="string",hW=t=>typeof t=="object"&&t!==null,mW=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,pW={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},gW=t=>pW[t],xW=t=>t.replace(mW,gW);let l1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:xW};const vW=(t={})=>{l1={...l1,...t}},yW=()=>l1;let Q3;const bW=t=>{Q3=t},wW=()=>Q3,_W={type:"3rdParty",init(t){vW(t.options.react),bW(t)}},SW=j.createContext();class NW{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const jW=(t,e)=>{const r=j.useRef();return j.useEffect(()=>{r.current=t},[t,e]),r.current},J3=(t,e,r,n)=>t.getFixedT(e,r,n),EW=(t,e,r,n)=>j.useCallback(J3(t,e,r,n),[t,e,r,n]),TW=(t,e={})=>{var _,w,N,S;const{i18n:r}=e,{i18n:n,defaultNS:i}=j.useContext(SW)||{},a=r||n||wW();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new NW),!a){s1(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const E=(P,A)=>$o(A)?A:hW(A)&&$o(A.defaultValue)?A.defaultValue:Array.isArray(P)?P[P.length-1]:P,T=[E,{},!1];return T.t=E,T.i18n={},T.ready=!1,T}(_=a.options.react)!=null&&_.wait&&s1(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...yW(),...a.options.react,...e},{useSuspense:o,keyPrefix:l}=s;let u=i||((w=a.options)==null?void 0:w.defaultNS);u=$o(u)?[u]:u||["translation"],(S=(N=a.reportNamespaces).addUsedNamespaces)==null||S.call(N,u);const d=(a.isInitialized||a.initializedStoreOnce)&&u.every(E=>fW(E,a,s)),f=EW(a,e.lng||null,s.nsMode==="fallback"?u:u[0],l),h=()=>f,m=()=>J3(a,e.lng||null,s.nsMode==="fallback"?u:u[0],l),[g,p]=j.useState(h);let x=u.join();e.lng&&(x=`${e.lng}${x}`);const v=jW(x),b=j.useRef(!0);j.useEffect(()=>{const{bindI18n:E,bindI18nStore:T}=s;b.current=!0,!d&&!o&&(e.lng?nE(a,e.lng,u,()=>{b.current&&p(m)}):o1(a,u,()=>{b.current&&p(m)})),d&&v&&v!==x&&b.current&&p(m);const P=()=>{b.current&&p(m)};return E&&(a==null||a.on(E,P)),T&&(a==null||a.store.on(T,P)),()=>{b.current=!1,a&&(E==null||E.split(" ").forEach(A=>a.off(A,P))),T&&a&&T.split(" ").forEach(A=>a.store.off(A,P))}},[a,x]),j.useEffect(()=>{b.current&&d&&p(h)},[a,l,d]);const y=[g,a,d];if(y.t=g,y.i18n=a,y.ready=d,d||!d&&!o)return y;throw new Promise(E=>{e.lng?nE(a,e.lng,u,()=>E()):o1(a,u,()=>E())})};async function ay(t,e,r,n){try{let i=oe.from("transactions_overall").select("*").eq("business_code",t).gte("transaction_date",`${e}T00:00:00`).lte("transaction_date",`${r}T23:59:59`);n&&n!=="all"&&(i=i.eq("branch_name",n));const{data:a,error:s}=await i;if(s)throw console.error("Error fetching transactions:",s),s;const o={totalAmount:0,totalProfit:0,transactionCount:0,byPaymentMethod:{cash:{amount:0,count:0,profit:0},card:{amount:0,count:0,profit:0},online:{amount:0,count:0,profit:0},tax_deduction:{amount:0,count:0,profit:0}},byTransactionType:{vendor_withdrawal:{amount:0,count:0,profit:0},vendor_sale:{amount:0,count:0,profit:0},vendor_deposit:{amount:0,count:0,profit:0},sale:{amount:0,count:0,profit:0},rental_income:{amount:0,count:0,profit:0},cash_addition:{amount:0,count:0,profit:0},cash_removal:{amount:0,count:0,profit:0}},topVendors:[]},l={};return(a||[]).forEach(u=>{const d=Number(Number(u.amount).toFixed(2)),f=Number(Number(u.owner_profit_from_this_transcation||d).toFixed(2));if(o.totalAmount=Number((o.totalAmount+d).toFixed(2)),o.totalProfit=Number((o.totalProfit+f).toFixed(2)),o.transactionCount++,u.payment_method){o.byPaymentMethod[u.payment_method]||(o.byPaymentMethod[u.payment_method]={amount:0,count:0,profit:0});const g=o.byPaymentMethod[u.payment_method];g.amount=Number((g.amount+d).toFixed(2)),g.count++,g.profit=Number((g.profit+f).toFixed(2))}if(u.transaction_type){o.byTransactionType[u.transaction_type]||(o.byTransactionType[u.transaction_type]={amount:0,count:0,profit:0});const g=o.byTransactionType[u.transaction_type];g.amount=Number((g.amount+d).toFixed(2)),g.count++,g.profit=Number((g.profit+f).toFixed(2))}const m=!u.vendor_name&&u.transaction_type==="sale"?"BUSINESS_PRODUCTS":u.vendor_name;m&&(l[m]||(l[m]={vendor_name:m,total_amount:0,total_profit:0,transaction_count:0}),l[m].total_amount=Number((l[m].total_amount+d).toFixed(2)),l[m].total_profit=Number((l[m].total_profit+f).toFixed(2)),l[m].transaction_count++)}),o.topVendors=Object.values(l).sort((u,d)=>d.total_amount-u.total_amount).slice(0,5),console.log("Transaction Summary:",o),o}catch(i){throw console.error("Error in getTransactionSummary:",i),i}}async function Z3(t){try{const{data:e,error:r}=await oe.from("branches").select("*").eq("business_code",t).eq("is_active",!0).order("branch_name",{ascending:!0});if(r)throw console.error("Error fetching branches:",r),r;return e||[]}catch(e){return console.error("Error in getActiveBranches:",e),[]}}function Dr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ra(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function e5(t,e){const r=Dr(t);return isNaN(e)?ra(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function PW(t,e){const r=Dr(t);if(isNaN(e))return ra(t,NaN);if(!e)return r;const n=r.getDate(),i=ra(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const a=i.getDate();return n>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}const t5=6048e5,kW=864e5,r5=6e4,n5=36e5;let AW={};function Bh(){return AW}function qo(t,e){var o,l,u,d;const r=Bh(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Dr(t),a=i.getDay(),s=(a<n?7:0)+a-n;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function mp(t){return qo(t,{weekStartsOn:1})}function i5(t){const e=Dr(t),r=e.getFullYear(),n=ra(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=mp(n),a=ra(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const s=mp(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=s.getTime()?r:r-1}function At(t){const e=Dr(t);return e.setHours(0,0,0,0),e}function iE(t){const e=Dr(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function OW(t,e){const r=At(t),n=At(e),i=+r-iE(r),a=+n-iE(n);return Math.round((i-a)/kW)}function CW(t){const e=i5(t),r=ra(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),mp(r)}function MW(t,e){const r=e*7;return e5(t,r)}function DW(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $W(t){if(!DW(t)&&typeof t!="number")return!1;const e=Dr(t);return!isNaN(Number(e))}function ei(t){const e=Dr(t);return e.setHours(23,59,59,999),e}function a5(t){const e=Dr(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function s5(t){const e=Dr(t);return e.setDate(1),e.setHours(0,0,0,0),e}function IW(t){const e=Dr(t),r=ra(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function o5(t,e){var o,l,u,d;const r=Bh(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Dr(t),a=i.getDay(),s=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const RW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},FW=(t,e,r)=>{let n;const i=RW[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function ka(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const LW={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},BW={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},UW={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zW={date:ka({formats:LW,defaultWidth:"full"}),time:ka({formats:BW,defaultWidth:"full"}),dateTime:ka({formats:UW,defaultWidth:"full"})},WW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},VW=(t,e,r,n)=>WW[t];function en(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const HW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qW={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},GW={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},KW={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},YW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},XW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},QW=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},JW={ordinalNumber:QW,era:en({values:HW,defaultWidth:"wide"}),quarter:en({values:qW,defaultWidth:"wide",argumentCallback:t=>t-1}),month:en({values:GW,defaultWidth:"wide"}),day:en({values:KW,defaultWidth:"wide"}),dayPeriod:en({values:YW,defaultWidth:"wide",formattingValues:XW,defaultFormattingWidth:"wide"})};function tn(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?eV(o,f=>f.test(s)):ZW(o,f=>f.test(s));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function ZW(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function eV(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function h2(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=r.valueCallback?r.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const tV=/^(\d+)(th|st|nd|rd)?/i,rV=/\d+/i,nV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iV={any:[/^b/i,/^(a|c)/i]},aV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sV={any:[/1/i,/2/i,/3/i,/4/i]},oV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hV={ordinalNumber:h2({matchPattern:tV,parsePattern:rV,valueCallback:t=>parseInt(t,10)}),era:tn({matchPatterns:nV,defaultMatchWidth:"wide",parsePatterns:iV,defaultParseWidth:"any"}),quarter:tn({matchPatterns:aV,defaultMatchWidth:"wide",parsePatterns:sV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:tn({matchPatterns:oV,defaultMatchWidth:"wide",parsePatterns:lV,defaultParseWidth:"any"}),day:tn({matchPatterns:cV,defaultMatchWidth:"wide",parsePatterns:uV,defaultParseWidth:"any"}),dayPeriod:tn({matchPatterns:dV,defaultMatchWidth:"any",parsePatterns:fV,defaultParseWidth:"any"})},Oc={code:"en-US",formatDistance:FW,formatLong:zW,formatRelative:VW,localize:JW,match:hV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mV(t){const e=Dr(t);return OW(e,IW(e))+1}function pV(t){const e=Dr(t),r=+mp(e)-+CW(e);return Math.round(r/t5)+1}function l5(t,e){var d,f,h,m;const r=Dr(t),n=r.getFullYear(),i=Bh(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(h=i.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,s=ra(t,0);s.setFullYear(n+1,0,a),s.setHours(0,0,0,0);const o=qo(s,e),l=ra(t,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const u=qo(l,e);return r.getTime()>=o.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function gV(t,e){var o,l,u,d;const r=Bh(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=l5(t,e),a=ra(t,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),qo(a,e)}function xV(t,e){const r=Dr(t),n=+qo(r,e)-+gV(r,e);return Math.round(n/t5)+1}function ot(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const rs={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return ot(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):ot(r+1,2)},d(t,e){return ot(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return ot(t.getHours()%12||12,e.length)},H(t,e){return ot(t.getHours(),e.length)},m(t,e){return ot(t.getMinutes(),e.length)},s(t,e){return ot(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return ot(i,e.length)}},Sl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},aE={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return rs.y(t,e)},Y:function(t,e,r,n){const i=l5(t,n),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return ot(s,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):ot(a,e.length)},R:function(t,e){const r=i5(t);return ot(r,e.length)},u:function(t,e){const r=t.getFullYear();return ot(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return ot(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return ot(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return rs.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return ot(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=xV(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):ot(i,e.length)},I:function(t,e,r){const n=pV(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):ot(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):rs.d(t,e)},D:function(t,e,r){const n=mV(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ot(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return ot(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return ot(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return ot(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Sl.noon:n===0?i=Sl.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Sl.evening:n>=12?i=Sl.afternoon:n>=4?i=Sl.morning:i=Sl.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return rs.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):rs.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ot(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):ot(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):rs.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):rs.s(t,e)},S:function(t,e){return rs.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return oE(n);case"XXXX":case"XX":return fo(n);case"XXXXX":case"XXX":default:return fo(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return oE(n);case"xxxx":case"xx":return fo(n);case"xxxxx":case"xxx":default:return fo(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+sE(n,":");case"OOOO":default:return"GMT"+fo(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+sE(n,":");case"zzzz":default:return"GMT"+fo(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return ot(n,e.length)},T:function(t,e,r){const n=t.getTime();return ot(n,e.length)}};function sE(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+e+ot(a,2)}function oE(t,e){return t%60===0?(t>0?"-":"+")+ot(Math.abs(t)/60,2):fo(t,e)}function fo(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=ot(Math.trunc(n/60),2),a=ot(n%60,2);return r+i+e+a}const lE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},c5=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vV=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return lE(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",lE(n,e)).replace("{{time}}",c5(i,e))},yV={p:c5,P:vV},bV=/^D+$/,wV=/^Y+$/,_V=["D","DD","YY","YYYY"];function SV(t){return bV.test(t)}function NV(t){return wV.test(t)}function jV(t,e,r){const n=EV(t,e,r);if(console.warn(n),_V.includes(t))throw new RangeError(n)}function EV(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const TV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kV=/^'([^]*?)'?$/,AV=/''/g,OV=/[a-zA-Z]/;function $e(t,e,r){var d,f,h,m,g,p,x,v;const n=Bh(),i=(r==null?void 0:r.locale)??n.locale??Oc,a=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,s=(r==null?void 0:r.weekStartsOn)??((p=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((v=(x=n.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)??0,o=Dr(t);if(!$W(o))throw new RangeError("Invalid time value");let l=e.match(PV).map(b=>{const y=b[0];if(y==="p"||y==="P"){const _=yV[y];return _(b,i.formatLong)}return b}).join("").match(TV).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const y=b[0];if(y==="'")return{isToken:!1,value:CV(b)};if(aE[y])return{isToken:!0,value:b};if(y.match(OV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(b=>{if(!b.isToken)return b.value;const y=b.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&NV(y)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&SV(y))&&jV(y,e,String(t));const _=aE[y[0]];return _(o,y,i.localize,u)}).join("")}function CV(t){const e=t.match(kV);return e?e[1].replace(AV,"'"):t}function lc(t,e){return e5(t,-e)}function cE(t,e){const n=IV(t);let i;if(n.date){const l=RV(n.date,2);i=FV(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const a=i.getTime();let s=0,o;if(n.time&&(s=LV(n.time),isNaN(s)))return new Date(NaN);if(n.timezone){if(o=BV(n.timezone),isNaN(o))return new Date(NaN)}else{const l=new Date(a+s),u=new Date(0);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return new Date(a+s+o)}const Am={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},MV=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,DV=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,$V=/^([+-])(\d{2})(?::?(\d{2}))?$/;function IV(t){const e={},r=t.split(Am.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],Am.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Am.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=Am.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function RV(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?i:a*100,restDateString:t.slice((n[1]||n[2]).length)}}function FV(t,e){if(e===null)return new Date(NaN);const r=t.match(MV);if(!r)return new Date(NaN);const n=!!r[4],i=Zu(r[1]),a=Zu(r[2])-1,s=Zu(r[3]),o=Zu(r[4]),l=Zu(r[5])-1;if(n)return HV(e,o,l)?UV(e,o,l):new Date(NaN);{const u=new Date(0);return!WV(e,a,s)||!VV(e,i)?new Date(NaN):(u.setUTCFullYear(e,a,Math.max(i,s)),u)}}function Zu(t){return t?parseInt(t):1}function LV(t){const e=t.match(DV);if(!e)return NaN;const r=sy(e[1]),n=sy(e[2]),i=sy(e[3]);return qV(r,n,i)?r*n5+n*r5+i*1e3:NaN}function sy(t){return t&&parseFloat(t.replace(",","."))||0}function BV(t){if(t==="Z")return 0;const e=t.match($V);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return GV(n,i)?r*(n*n5+i*r5):NaN}function UV(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,a=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+a),n}const zV=[31,null,31,30,31,30,31,31,30,31,30,31];function u5(t){return t%400===0||t%4===0&&t%100!==0}function WV(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(zV[e]||(u5(t)?29:28))}function VV(t,e){return e>=1&&e<=(u5(t)?366:365)}function HV(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function qV(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function GV(t,e){return e>=0&&e<=59}function Cf(t,e){return PW(t,-e)}function d5(t,e){return MW(t,-e)}const Mf={en:{dashboard:"Dashboard",totalBranches:"Total Branches",totalTransactions:"Total Transactions",totalAmount:"Total Amount",averagePerTransaction:"Average Per Transaction",branchTransactions:"Branch Transactions",branchAmount:"Branch Amount",paymentMethods:"Payment Methods",recentTransactions:"Recent Transactions",date:"Date",type:"Type",amount:"Amount",percentage:"Percentage",paymentMethod:"Payment Method",currency:"OMR",cash:"Cash",card:"Card",online:"Online",insights:"Insights",refresh:"Refresh",loading:"Loading...",error:"Error loading data",errorTitle:"Error",noData:"No data available",noDataAvailable:"No data available for the selected period",from:"from",yesterday:"yesterday",thisWeek:"This Week",thisMonth:"This Month",allBranches:"All Branches",selectPeriod:"Select Time Period",selectBranch:"Select Branch",today:"Today",last3Months:"Last 3 Months",custom:"Custom Range",startDate:"Start Date",endDate:"End Date",totalProfit:"Total Profit",profitMargin:"Profit Margin",transactionTypes:"Transaction Types",topVendors:"Top Vendors",vendorName:"Vendor Name",transactions:"Transactions",vendor_withdrawal:"Vendor Withdrawal",vendor_sale:"Vendor Sale",vendor_deposit:"Vendor Deposit",sale:"Direct Sale",rental_income:"Rental Income",tax:"Monthly Tax on Vendors",businessProducts:"Business Products",activeBranches:"Active Branches",branchComparison:"Branch Performance",transactionTrend:"Transaction Volume",transactionCount:"Number of Transactions",cash_addition:"Cash Addition",cash_removal:"Cash Removal",topVendorsTable:{title:"Top Vendors & Products",columns:{name:"Name",transactions:"Transactions",amount:"Total Amount",profit:"Total Profit"}}},ar:{dashboard:"لوحة التحكم",totalBranches:"إجمالي الفروع",totalTransactions:"إجمالي المعاملات",totalAmount:"إجمالي المبلغ",averagePerTransaction:"متوسط المعاملة",branchTransactions:"معاملات الفرع",branchAmount:"مبلغ الفرع",paymentMethods:"طرق الدفع",recentTransactions:"المعاملات الأخيرة",date:"التاريخ",type:"النوع",amount:"المبلغ",percentage:"النسبة",paymentMethod:"طريقة الدفع",currency:"ر.ع",cash:"نقدي",card:"بطاقة بنكية",online:"تحويل بنكي",insights:"التحليلات",refresh:"تحديث",loading:"جاري التحميل...",error:"خطأ في تحميل البيانات",errorTitle:"خطأ",noData:"لا توجد بيانات متاحة",noDataAvailable:"لا توجد بيانات متاحة للفترة المحددة",from:"من",yesterday:"الأمس",thisWeek:"هذا الأسبوع",thisMonth:"هذا الشهر",allBranches:"جميع الفروع",selectPeriod:"اختر الفترة الزمنية",selectBranch:"اختر الفرع",today:"اليوم",last3Months:"آخر 3 أشهر",custom:"فترة مخصصة",startDate:"تاريخ البداية",endDate:"تاريخ النهاية",totalProfit:"إجمالي الربح",profitMargin:"هامش الربح",transactionTypes:"أنواع المعاملات",topVendors:"أفضل الموردين",vendorName:"اسم المورد",transactions:"المعاملات",vendor_withdrawal:"سحب مبلغ من المورد",vendor_sale:"مبيعات المورد",vendor_deposit:"إيداع مبلغ للمورد",sale:"مبيعات مباشرة",rental_income:"دخل الإيجار",tax:"الضريبة الشهرية للموردين",tax_deduction:"الضريبة الشهرية للموردين",businessProducts:"منتجات المتجر",activeBranches:"الفروع النشطة",branchComparison:"أداء الفروع",transactionTrend:"حجم المعاملات",transactionCount:"عدد المعاملات",cash_addition:"إضافة نقدي",cash_removal:"سحب نقدي",topVendorsTable:{title:"أفضل البائعين والمنتجات",columns:{name:"الاسم",transactions:"المعاملات",amount:"المبلغ الإجمالي",profit:"الربح الإجمالي"}}}};function f5({branches:t,selectedBranch:e,onBranchChange:r}){const{language:n}=_e(),i=Mf[n];return c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:i.selectBranch}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>r("all"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${e==="all"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:i.allBranches}),t.map(a=>c.jsx("button",{onClick:()=>r(a.branch_name),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${e===a.branch_name?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.branch_name},a.branch_name))]})]})}function KV({selectedPeriod:t,onPeriodChange:e,onCustomDateChange:r,customStartDate:n,customEndDate:i}){const{language:a}=_e(),s=Mf[a],o=l=>{const{name:u,value:d}=l.target;u==="startDate"?r(d,i||""):r(n||"",d)};return c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:s.selectPeriod}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:[c.jsx("button",{onClick:()=>e("day"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="day"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.today}),c.jsx("button",{onClick:()=>e("week"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="week"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.thisWeek}),c.jsx("button",{onClick:()=>e("month"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="month"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.thisMonth}),c.jsx("button",{onClick:()=>e("3months"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="3months"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.last3Months}),c.jsx("button",{onClick:()=>e("custom"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="custom"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.custom})]}),t==="custom"&&c.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:s.startDate}),c.jsx("input",{type:"date",id:"startDate",name:"startDate",value:n||"",onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-white",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:s.endDate}),c.jsx("input",{type:"date",id:"endDate",name:"endDate",value:i||"",onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-white",dir:"ltr"})]})]})]})}function h5(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=h5(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Ve(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=h5(t))&&(n&&(n+=" "),n+=e);return n}var YV=Array.isArray,jn=YV,XV=typeof Wr=="object"&&Wr&&Wr.Object===Object&&Wr,m5=XV,QV=m5,JV=typeof self=="object"&&self&&self.Object===Object&&self,ZV=QV||JV||Function("return this")(),oa=ZV,eH=oa,tH=eH.Symbol,Uh=tH,uE=Uh,p5=Object.prototype,rH=p5.hasOwnProperty,nH=p5.toString,ed=uE?uE.toStringTag:void 0;function iH(t){var e=rH.call(t,ed),r=t[ed];try{t[ed]=void 0;var n=!0}catch{}var i=nH.call(t);return n&&(e?t[ed]=r:delete t[ed]),i}var aH=iH,sH=Object.prototype,oH=sH.toString;function lH(t){return oH.call(t)}var cH=lH,dE=Uh,uH=aH,dH=cH,fH="[object Null]",hH="[object Undefined]",fE=dE?dE.toStringTag:void 0;function mH(t){return t==null?t===void 0?hH:fH:fE&&fE in Object(t)?uH(t):dH(t)}var Qa=mH;function pH(t){return t!=null&&typeof t=="object"}var Ja=pH,gH=Qa,xH=Ja,vH="[object Symbol]";function yH(t){return typeof t=="symbol"||xH(t)&&gH(t)==vH}var vu=yH,bH=jn,wH=vu,_H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,SH=/^\w*$/;function NH(t,e){if(bH(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||wH(t)?!0:SH.test(t)||!_H.test(t)||e!=null&&t in Object(e)}var m2=NH;function jH(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ks=jH;const yu=at(Ks);var EH=Qa,TH=Ks,PH="[object AsyncFunction]",kH="[object Function]",AH="[object GeneratorFunction]",OH="[object Proxy]";function CH(t){if(!TH(t))return!1;var e=EH(t);return e==kH||e==AH||e==PH||e==OH}var p2=CH;const Ie=at(p2);var MH=oa,DH=MH["__core-js_shared__"],$H=DH,oy=$H,hE=function(){var t=/[^.]+$/.exec(oy&&oy.keys&&oy.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function IH(t){return!!hE&&hE in t}var RH=IH,FH=Function.prototype,LH=FH.toString;function BH(t){if(t!=null){try{return LH.call(t)}catch{}try{return t+""}catch{}}return""}var g5=BH,UH=p2,zH=RH,WH=Ks,VH=g5,HH=/[\\^$.*+?()[\]{}|]/g,qH=/^\[object .+?Constructor\]$/,GH=Function.prototype,KH=Object.prototype,YH=GH.toString,XH=KH.hasOwnProperty,QH=RegExp("^"+YH.call(XH).replace(HH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JH(t){if(!WH(t)||zH(t))return!1;var e=UH(t)?QH:qH;return e.test(VH(t))}var ZH=JH;function eq(t,e){return t==null?void 0:t[e]}var tq=eq,rq=ZH,nq=tq;function iq(t,e){var r=nq(t,e);return rq(r)?r:void 0}var ol=iq,aq=ol,sq=aq(Object,"create"),yx=sq,mE=yx;function oq(){this.__data__=mE?mE(null):{},this.size=0}var lq=oq;function cq(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var uq=cq,dq=yx,fq="__lodash_hash_undefined__",hq=Object.prototype,mq=hq.hasOwnProperty;function pq(t){var e=this.__data__;if(dq){var r=e[t];return r===fq?void 0:r}return mq.call(e,t)?e[t]:void 0}var gq=pq,xq=yx,vq=Object.prototype,yq=vq.hasOwnProperty;function bq(t){var e=this.__data__;return xq?e[t]!==void 0:yq.call(e,t)}var wq=bq,_q=yx,Sq="__lodash_hash_undefined__";function Nq(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=_q&&e===void 0?Sq:e,this}var jq=Nq,Eq=lq,Tq=uq,Pq=gq,kq=wq,Aq=jq;function bu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}bu.prototype.clear=Eq;bu.prototype.delete=Tq;bu.prototype.get=Pq;bu.prototype.has=kq;bu.prototype.set=Aq;var Oq=bu;function Cq(){this.__data__=[],this.size=0}var Mq=Cq;function Dq(t,e){return t===e||t!==t&&e!==e}var g2=Dq,$q=g2;function Iq(t,e){for(var r=t.length;r--;)if($q(t[r][0],e))return r;return-1}var bx=Iq,Rq=bx,Fq=Array.prototype,Lq=Fq.splice;function Bq(t){var e=this.__data__,r=Rq(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Lq.call(e,r,1),--this.size,!0}var Uq=Bq,zq=bx;function Wq(t){var e=this.__data__,r=zq(e,t);return r<0?void 0:e[r][1]}var Vq=Wq,Hq=bx;function qq(t){return Hq(this.__data__,t)>-1}var Gq=qq,Kq=bx;function Yq(t,e){var r=this.__data__,n=Kq(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Xq=Yq,Qq=Mq,Jq=Uq,Zq=Vq,eG=Gq,tG=Xq;function wu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}wu.prototype.clear=Qq;wu.prototype.delete=Jq;wu.prototype.get=Zq;wu.prototype.has=eG;wu.prototype.set=tG;var wx=wu,rG=ol,nG=oa,iG=rG(nG,"Map"),x2=iG,pE=Oq,aG=wx,sG=x2;function oG(){this.size=0,this.__data__={hash:new pE,map:new(sG||aG),string:new pE}}var lG=oG;function cG(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var uG=cG,dG=uG;function fG(t,e){var r=t.__data__;return dG(e)?r[typeof e=="string"?"string":"hash"]:r.map}var _x=fG,hG=_x;function mG(t){var e=hG(this,t).delete(t);return this.size-=e?1:0,e}var pG=mG,gG=_x;function xG(t){return gG(this,t).get(t)}var vG=xG,yG=_x;function bG(t){return yG(this,t).has(t)}var wG=bG,_G=_x;function SG(t,e){var r=_G(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var NG=SG,jG=lG,EG=pG,TG=vG,PG=wG,kG=NG;function _u(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_u.prototype.clear=jG;_u.prototype.delete=EG;_u.prototype.get=TG;_u.prototype.has=PG;_u.prototype.set=kG;var v2=_u,x5=v2,AG="Expected a function";function y2(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(AG);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(y2.Cache||x5),r}y2.Cache=x5;var v5=y2;const OG=at(v5);var CG=v5,MG=500;function DG(t){var e=CG(t,function(n){return r.size===MG&&r.clear(),n}),r=e.cache;return e}var $G=DG,IG=$G,RG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,FG=/\\(\\)?/g,LG=IG(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(RG,function(r,n,i,a){e.push(i?a.replace(FG,"$1"):n||r)}),e}),BG=LG;function UG(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var b2=UG,gE=Uh,zG=b2,WG=jn,VG=vu,HG=1/0,xE=gE?gE.prototype:void 0,vE=xE?xE.toString:void 0;function y5(t){if(typeof t=="string")return t;if(WG(t))return zG(t,y5)+"";if(VG(t))return vE?vE.call(t):"";var e=t+"";return e=="0"&&1/t==-HG?"-0":e}var qG=y5,GG=qG;function KG(t){return t==null?"":GG(t)}var b5=KG,YG=jn,XG=m2,QG=BG,JG=b5;function ZG(t,e){return YG(t)?t:XG(t,e)?[t]:QG(JG(t))}var w5=ZG,eK=vu,tK=1/0;function rK(t){if(typeof t=="string"||eK(t))return t;var e=t+"";return e=="0"&&1/t==-tK?"-0":e}var Sx=rK,nK=w5,iK=Sx;function aK(t,e){e=nK(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[iK(e[r++])];return r&&r==n?t:void 0}var w2=aK,sK=w2;function oK(t,e,r){var n=t==null?void 0:sK(t,e);return n===void 0?r:n}var _5=oK;const Bn=at(_5);function lK(t){return t==null}var cK=lK;const Be=at(cK);var uK=Qa,dK=jn,fK=Ja,hK="[object String]";function mK(t){return typeof t=="string"||!dK(t)&&fK(t)&&uK(t)==hK}var pK=mK;const zh=at(pK);var S5={exports:{}},ht={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2=Symbol.for("react.element"),S2=Symbol.for("react.portal"),Nx=Symbol.for("react.fragment"),jx=Symbol.for("react.strict_mode"),Ex=Symbol.for("react.profiler"),Tx=Symbol.for("react.provider"),Px=Symbol.for("react.context"),gK=Symbol.for("react.server_context"),kx=Symbol.for("react.forward_ref"),Ax=Symbol.for("react.suspense"),Ox=Symbol.for("react.suspense_list"),Cx=Symbol.for("react.memo"),Mx=Symbol.for("react.lazy"),xK=Symbol.for("react.offscreen"),N5;N5=Symbol.for("react.module.reference");function fi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case _2:switch(t=t.type,t){case Nx:case Ex:case jx:case Ax:case Ox:return t;default:switch(t=t&&t.$$typeof,t){case gK:case Px:case kx:case Mx:case Cx:case Tx:return t;default:return e}}case S2:return e}}}ht.ContextConsumer=Px;ht.ContextProvider=Tx;ht.Element=_2;ht.ForwardRef=kx;ht.Fragment=Nx;ht.Lazy=Mx;ht.Memo=Cx;ht.Portal=S2;ht.Profiler=Ex;ht.StrictMode=jx;ht.Suspense=Ax;ht.SuspenseList=Ox;ht.isAsyncMode=function(){return!1};ht.isConcurrentMode=function(){return!1};ht.isContextConsumer=function(t){return fi(t)===Px};ht.isContextProvider=function(t){return fi(t)===Tx};ht.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===_2};ht.isForwardRef=function(t){return fi(t)===kx};ht.isFragment=function(t){return fi(t)===Nx};ht.isLazy=function(t){return fi(t)===Mx};ht.isMemo=function(t){return fi(t)===Cx};ht.isPortal=function(t){return fi(t)===S2};ht.isProfiler=function(t){return fi(t)===Ex};ht.isStrictMode=function(t){return fi(t)===jx};ht.isSuspense=function(t){return fi(t)===Ax};ht.isSuspenseList=function(t){return fi(t)===Ox};ht.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Nx||t===Ex||t===jx||t===Ax||t===Ox||t===xK||typeof t=="object"&&t!==null&&(t.$$typeof===Mx||t.$$typeof===Cx||t.$$typeof===Tx||t.$$typeof===Px||t.$$typeof===kx||t.$$typeof===N5||t.getModuleId!==void 0)};ht.typeOf=fi;S5.exports=ht;var vK=S5.exports,yK=Qa,bK=Ja,wK="[object Number]";function _K(t){return typeof t=="number"||bK(t)&&yK(t)==wK}var j5=_K;const SK=at(j5);var NK=j5;function jK(t){return NK(t)&&t!=+t}var EK=jK;const Wh=at(EK);var rn=function(e){return e===0?0:e>0?1:-1},To=function(e){return zh(e)&&e.indexOf("%")===e.length-1},be=function(e){return SK(e)&&!Wh(e)},lr=function(e){return be(e)||zh(e)},TK=0,Su=function(e){var r=++TK;return"".concat(e||"").concat(r)},nn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!be(e)&&!zh(e))return n;var a;if(To(e)){var s=e.indexOf("%");a=r*parseFloat(e.slice(0,s))/100}else a=+e;return Wh(a)&&(a=n),i&&a>r&&(a=r),a},xs=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},PK=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Dn=function(e,r){return be(e)&&be(r)?function(n){return e+n*(r-e)}:function(){return r}};function pp(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Bn(n,e))===r})}function cc(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function c1(t){"@babel/helpers - typeof";return c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c1(t)}var kK=["viewBox","children"],AK=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],yE=["points","pathLength"],ly={svg:kK,polygon:yE,polyline:yE},N2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],gp=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(j.isValidElement(e)&&(n=e.props),!yu(n))return null;var i={};return Object.keys(n).forEach(function(a){N2.includes(a)&&(i[a]=r||function(s){return n[a](n,s)})}),i},OK=function(e,r,n){return function(i){return e(r,n,i),null}},Go=function(e,r,n){if(!yu(e)||c1(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];N2.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=OK(s,r,n))}),i},CK=["children"],MK=["children"];function bE(t,e){if(t==null)return{};var r=DK(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function DK(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function u1(t){"@babel/helpers - typeof";return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u1(t)}var wE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Aa=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},_E=null,cy=null,j2=function t(e){if(e===_E&&Array.isArray(cy))return cy;var r=[];return j.Children.forEach(e,function(n){Be(n)||(vK.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),cy=r,_E=e,r};function Un(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return Aa(i)}):n=[Aa(e)],j2(t).forEach(function(i){var a=Bn(i,"type.displayName")||Bn(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function On(t,e){var r=Un(t,e);return r&&r[0]}var SE=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!be(n)||n<=0||!be(i)||i<=0)},$K=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],IK=function(e){return e&&e.type&&zh(e.type)&&$K.indexOf(e.type)>=0},RK=function(e){return e&&u1(e)==="object"&&"clipDot"in e},FK=function(e,r,n,i){var a,s=(a=ly==null?void 0:ly[i])!==null&&a!==void 0?a:[];return!Ie(e)&&(i&&s.includes(r)||AK.includes(r))||n&&N2.includes(r)},Me=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(j.isValidElement(e)&&(i=e.props),!yu(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;FK((o=i)===null||o===void 0?void 0:o[s],s,r,n)&&(a[s]=i[s])}),a},d1=function t(e,r){if(e===r)return!0;var n=j.Children.count(e);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return NE(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=e[i],s=r[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!NE(a,s))return!1}return!0},NE=function(e,r){if(Be(e)&&Be(r))return!0;if(!Be(e)&&!Be(r)){var n=e.props||{},i=n.children,a=bE(n,CK),s=r.props||{},o=s.children,l=bE(s,MK);return i&&o?cc(a,l)&&d1(i,o):!i&&!o?cc(a,l):!1}return!1},jE=function(e,r){var n=[],i={};return j2(e).forEach(function(a,s){if(IK(a))n.push(a);else if(a){var o=Aa(a.type),l=r[o]||{},u=l.handler,d=l.once;if(u&&(!d||!i[o])){var f=u(a,o,s);n.push(f),i[o]=!0}}}),n},LK=function(e){var r=e&&e.type;return r&&wE[r]?wE[r]:null},BK=function(e,r){return j2(r).indexOf(e)},UK=["children","width","height","viewBox","className","style","title","desc"];function f1(){return f1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f1.apply(this,arguments)}function zK(t,e){if(t==null)return{};var r=WK(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function WK(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function h1(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,l=t.desc,u=zK(t,UK),d=i||{width:r,height:n,x:0,y:0},f=Ve("recharts-surface",a);return X.createElement("svg",f1({},Me(u,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),X.createElement("title",null,o),X.createElement("desc",null,l),e)}var VK=["children","className"];function m1(){return m1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m1.apply(this,arguments)}function HK(t,e){if(t==null)return{};var r=qK(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qK(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Je=X.forwardRef(function(t,e){var r=t.children,n=t.className,i=HK(t,VK),a=Ve("recharts-layer",n);return X.createElement("g",m1({className:a},Me(i,!0),{ref:e}),r)}),Ci=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function GK(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(i);++n<i;)a[n]=t[n+e];return a}var KK=GK,YK=KK;function XK(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:YK(t,e,r)}var QK=XK,JK="\\ud800-\\udfff",ZK="\\u0300-\\u036f",eY="\\ufe20-\\ufe2f",tY="\\u20d0-\\u20ff",rY=ZK+eY+tY,nY="\\ufe0e\\ufe0f",iY="\\u200d",aY=RegExp("["+iY+JK+rY+nY+"]");function sY(t){return aY.test(t)}var E5=sY;function oY(t){return t.split("")}var lY=oY,T5="\\ud800-\\udfff",cY="\\u0300-\\u036f",uY="\\ufe20-\\ufe2f",dY="\\u20d0-\\u20ff",fY=cY+uY+dY,hY="\\ufe0e\\ufe0f",mY="["+T5+"]",p1="["+fY+"]",g1="\\ud83c[\\udffb-\\udfff]",pY="(?:"+p1+"|"+g1+")",P5="[^"+T5+"]",k5="(?:\\ud83c[\\udde6-\\uddff]){2}",A5="[\\ud800-\\udbff][\\udc00-\\udfff]",gY="\\u200d",O5=pY+"?",C5="["+hY+"]?",xY="(?:"+gY+"(?:"+[P5,k5,A5].join("|")+")"+C5+O5+")*",vY=C5+O5+xY,yY="(?:"+[P5+p1+"?",p1,k5,A5,mY].join("|")+")",bY=RegExp(g1+"(?="+g1+")|"+yY+vY,"g");function wY(t){return t.match(bY)||[]}var _Y=wY,SY=lY,NY=E5,jY=_Y;function EY(t){return NY(t)?jY(t):SY(t)}var TY=EY,PY=QK,kY=E5,AY=TY,OY=b5;function CY(t){return function(e){e=OY(e);var r=kY(e)?AY(e):void 0,n=r?r[0]:e.charAt(0),i=r?PY(r,1).join(""):e.slice(1);return n[t]()+i}}var MY=CY,DY=MY,$Y=DY("toUpperCase"),IY=$Y;const Dx=at(IY);function wt(t){return function(){return t}}const M5=Math.cos,xp=Math.sin,Ri=Math.sqrt,vp=Math.PI,$x=2*vp,x1=Math.PI,v1=2*x1,ho=1e-6,RY=v1-ho;function D5(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function FY(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return D5;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class LY{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?D5:FY(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-e,u=i-r,d=s-e,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>ho)if(!(Math.abs(f*l-u*d)>ho)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-s,g=i-o,p=l*l+u*u,x=m*m+g*g,v=Math.sqrt(p),b=Math.sqrt(h),y=a*Math.tan((x1-Math.acos((p+h-x)/(2*v*b)))/2),_=y/b,w=y/v;Math.abs(_-1)>ho&&this._append`L${e+_*d},${r+_*f}`,this._append`A${a},${a},0,0,${+(f*m>d*g)},${this._x1=e+w*l},${this._y1=r+w*u}`}}arc(e,r,n,i,a,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),u=e+o,d=r+l,f=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ho||Math.abs(this._y1-d)>ho)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%v1+v1),h>RY?this._append`A${n},${n},0,1,${f},${e-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>ho&&this._append`A${n},${n},0,${+(h>=x1)},${f},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function E2(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new LY(e)}function T2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $5(t){this._context=t}$5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ix(t){return new $5(t)}function I5(t){return t[0]}function R5(t){return t[1]}function F5(t,e){var r=wt(!0),n=null,i=Ix,a=null,s=E2(o);t=typeof t=="function"?t:t===void 0?I5:wt(t),e=typeof e=="function"?e:e===void 0?R5:wt(e);function o(l){var u,d=(l=T2(l)).length,f,h=!1,m;for(n==null&&(a=i(m=s())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,u,l),+e(f,u,l));if(m)return a=null,m+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:wt(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:wt(+l),o):e},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:wt(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function Om(t,e,r){var n=null,i=wt(!0),a=null,s=Ix,o=null,l=E2(u);t=typeof t=="function"?t:t===void 0?I5:wt(+t),e=typeof e=="function"?e:wt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?R5:wt(+r);function u(f){var h,m,g,p=(f=T2(f)).length,x,v=!1,b,y=new Array(p),_=new Array(p);for(a==null&&(o=s(b=l())),h=0;h<=p;++h){if(!(h<p&&i(x=f[h],h,f))===v)if(v=!v)m=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=m;--g)o.point(y[g],_[g]);o.lineEnd(),o.areaEnd()}v&&(y[h]=+t(x,h,f),_[h]=+e(x,h,f),o.point(n?+n(x,h,f):y[h],r?+r(x,h,f):_[h]))}if(b)return o=null,b+""||null}function d(){return F5().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:wt(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:wt(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:wt(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:wt(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:wt(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:wt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:wt(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class L5{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function BY(t){return new L5(t,!0)}function UY(t){return new L5(t,!1)}const P2={draw(t,e){const r=Ri(e/vp);t.moveTo(r,0),t.arc(0,0,r,0,$x)}},zY={draw(t,e){const r=Ri(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},B5=Ri(1/3),WY=B5*2,VY={draw(t,e){const r=Ri(e/WY),n=r*B5;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},HY={draw(t,e){const r=Ri(e),n=-r/2;t.rect(n,n,r,r)}},qY=.8908130915292852,U5=xp(vp/10)/xp(7*vp/10),GY=xp($x/10)*U5,KY=-M5($x/10)*U5,YY={draw(t,e){const r=Ri(e*qY),n=GY*r,i=KY*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const s=$x*a/5,o=M5(s),l=xp(s);t.lineTo(l*r,-o*r),t.lineTo(o*n-l*i,l*n+o*i)}t.closePath()}},uy=Ri(3),XY={draw(t,e){const r=-Ri(e/(uy*3));t.moveTo(0,r*2),t.lineTo(-uy*r,-r),t.lineTo(uy*r,-r),t.closePath()}},qn=-.5,Gn=Ri(3)/2,y1=1/Ri(12),QY=(y1/2+1)*3,JY={draw(t,e){const r=Ri(e/QY),n=r/2,i=r*y1,a=n,s=r*y1+r,o=-a,l=s;t.moveTo(n,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(qn*n-Gn*i,Gn*n+qn*i),t.lineTo(qn*a-Gn*s,Gn*a+qn*s),t.lineTo(qn*o-Gn*l,Gn*o+qn*l),t.lineTo(qn*n+Gn*i,qn*i-Gn*n),t.lineTo(qn*a+Gn*s,qn*s-Gn*a),t.lineTo(qn*o+Gn*l,qn*l-Gn*o),t.closePath()}};function ZY(t,e){let r=null,n=E2(i);t=typeof t=="function"?t:wt(t||P2),e=typeof e=="function"?e:wt(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:wt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:wt(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function yp(){}function bp(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function z5(t){this._context=t}z5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eX(t){return new z5(t)}function W5(t){this._context=t}W5.prototype={areaStart:yp,areaEnd:yp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:bp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tX(t){return new W5(t)}function V5(t){this._context=t}V5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:bp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rX(t){return new V5(t)}function H5(t){this._context=t}H5.prototype={areaStart:yp,areaEnd:yp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function nX(t){return new H5(t)}function EE(t){return t<0?-1:1}function TE(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(EE(a)+EE(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function PE(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function dy(t,e,r){var n=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-n)/3;t._context.bezierCurveTo(n+o,i+o*e,a-o,s-o*r,a,s)}function wp(t){this._context=t}wp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dy(this,this._t0,PE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,dy(this,PE(this,r=TE(this,t,e)),r);break;default:dy(this,this._t0,r=TE(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function q5(t){this._context=new G5(t)}(q5.prototype=Object.create(wp.prototype)).point=function(t,e){wp.prototype.point.call(this,e,t)};function G5(t){this._context=t}G5.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function iX(t){return new wp(t)}function aX(t){return new q5(t)}function K5(t){this._context=t}K5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=kE(t),i=kE(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function kE(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function sX(t){return new K5(t)}function Rx(t,e){this._context=t,this._t=e}Rx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function oX(t){return new Rx(t,.5)}function lX(t){return new Rx(t,0)}function cX(t){return new Rx(t,1)}function Cc(t,e){if((s=t.length)>1)for(var r=1,n,i,a=t[e[0]],s,o=a.length;r<s;++r)for(i=a,a=t[e[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function b1(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function uX(t,e){return t[e]}function dX(t){const e=[];return e.key=t,e}function fX(){var t=wt([]),e=b1,r=Cc,n=uX;function i(a){var s=Array.from(t.apply(this,arguments),dX),o,l=s.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+n(f,s[o].key,u,a)]).data=f;for(o=0,d=T2(e(s));o<l;++o)s[d[o]].index=o;return r(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:wt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:wt(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?b1:typeof a=="function"?a:wt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??Cc,i):r},i}function hX(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}Cc(t,e)}}function mX(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=t[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Cc(t,e)}}function pX(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,u=0;o<s;++o){for(var d=t[e[o]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<o;++g){var p=t[e[g]],x=p[n][1]||0,v=p[n-1][1]||0;m+=x-v}l+=f,u+=m*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,Cc(t,e)}}function Df(t){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Df(t)}var gX=["type","size","sizeType"];function w1(){return w1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w1.apply(this,arguments)}function AE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function OE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AE(Object(r),!0).forEach(function(n){xX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xX(t,e,r){return e=vX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vX(t){var e=yX(t,"string");return Df(e)=="symbol"?e:e+""}function yX(t,e){if(Df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bX(t,e){if(t==null)return{};var r=wX(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wX(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Y5={symbolCircle:P2,symbolCross:zY,symbolDiamond:VY,symbolSquare:HY,symbolStar:YY,symbolTriangle:XY,symbolWye:JY},_X=Math.PI/180,SX=function(e){var r="symbol".concat(Dx(e));return Y5[r]||P2},NX=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*_X;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},jX=function(e,r){Y5["symbol".concat(Dx(e))]=r},k2=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,l=bX(e,gX),u=OE(OE({},l),{},{type:n,size:a,sizeType:o}),d=function(){var x=SX(n),v=ZY().type(x).size(NX(a,o,n));return v()},f=u.className,h=u.cx,m=u.cy,g=Me(u,!0);return h===+h&&m===+m&&a===+a?X.createElement("path",w1({},g,{className:Ve("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};k2.registerSymbol=jX;function Mc(t){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(t)}function _1(){return _1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_1.apply(this,arguments)}function CE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function EX(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CE(Object(r),!0).forEach(function(n){$f(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q5(n.key),n)}}function kX(t,e,r){return e&&PX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function AX(t,e,r){return e=_p(e),OX(t,X5()?Reflect.construct(e,r||[],_p(t).constructor):e.apply(t,r))}function OX(t,e){if(e&&(Mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CX(t)}function CX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X5=function(){return!!t})()}function _p(t){return _p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_p(t)}function MX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S1(t,e)}function S1(t,e){return S1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},S1(t,e)}function $f(t,e,r){return e=Q5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q5(t){var e=DX(t,"string");return Mc(e)=="symbol"?e:e+""}function DX(t,e){if(Mc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kn=32,A2=function(t){function e(){return TX(this,e),AX(this,e,arguments)}return MX(e,t),kX(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=Kn/2,s=Kn/6,o=Kn/3,l=n.inactive?i:n.color;if(n.type==="plainline")return X.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:Kn,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return X.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Kn,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return X.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Kn/8,"h").concat(Kn,"v").concat(Kn*3/4,"h").concat(-Kn,"z"),className:"recharts-legend-icon"});if(X.isValidElement(n.legendIcon)){var u=EX({},n);return delete u.legendIcon,X.cloneElement(n.legendIcon,u)}return X.createElement(k2,{fill:l,cx:a,cy:a,size:Kn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Kn,height:Kn},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,g){var p=m.formatter||l,x=Ve($f($f({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var v=Ie(m.value)?null:m.value;Ci(!Ie(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return X.createElement("li",_1({className:x,style:f,key:"legend-item-".concat(g)},Go(n.props,m,g)),X.createElement(h1,{width:s,height:s,viewBox:d,style:h},n.renderIcon(m)),X.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(v,m,g):v))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,s=n.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return X.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(j.PureComponent);$f(A2,"displayName","Legend");$f(A2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var $X=wx;function IX(){this.__data__=new $X,this.size=0}var RX=IX;function FX(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var LX=FX;function BX(t){return this.__data__.get(t)}var UX=BX;function zX(t){return this.__data__.has(t)}var WX=zX,VX=wx,HX=x2,qX=v2,GX=200;function KX(t,e){var r=this.__data__;if(r instanceof VX){var n=r.__data__;if(!HX||n.length<GX-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qX(n)}return r.set(t,e),this.size=r.size,this}var YX=KX,XX=wx,QX=RX,JX=LX,ZX=UX,eQ=WX,tQ=YX;function Nu(t){var e=this.__data__=new XX(t);this.size=e.size}Nu.prototype.clear=QX;Nu.prototype.delete=JX;Nu.prototype.get=ZX;Nu.prototype.has=eQ;Nu.prototype.set=tQ;var J5=Nu,rQ="__lodash_hash_undefined__";function nQ(t){return this.__data__.set(t,rQ),this}var iQ=nQ;function aQ(t){return this.__data__.has(t)}var sQ=aQ,oQ=v2,lQ=iQ,cQ=sQ;function Sp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new oQ;++e<r;)this.add(t[e])}Sp.prototype.add=Sp.prototype.push=lQ;Sp.prototype.has=cQ;var Z5=Sp;function uQ(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var eD=uQ;function dQ(t,e){return t.has(e)}var tD=dQ,fQ=Z5,hQ=eD,mQ=tD,pQ=1,gQ=2;function xQ(t,e,r,n,i,a){var s=r&pQ,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var f=-1,h=!0,m=r&gQ?new fQ:void 0;for(a.set(t,e),a.set(e,t);++f<o;){var g=t[f],p=e[f];if(n)var x=s?n(p,g,f,e,t,a):n(g,p,f,t,e,a);if(x!==void 0){if(x)continue;h=!1;break}if(m){if(!hQ(e,function(v,b){if(!mQ(m,b)&&(g===v||i(g,v,r,n,a)))return m.push(b)})){h=!1;break}}else if(!(g===p||i(g,p,r,n,a))){h=!1;break}}return a.delete(t),a.delete(e),h}var rD=xQ,vQ=oa,yQ=vQ.Uint8Array,bQ=yQ;function wQ(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var _Q=wQ;function SQ(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var O2=SQ,ME=Uh,DE=bQ,NQ=g2,jQ=rD,EQ=_Q,TQ=O2,PQ=1,kQ=2,AQ="[object Boolean]",OQ="[object Date]",CQ="[object Error]",MQ="[object Map]",DQ="[object Number]",$Q="[object RegExp]",IQ="[object Set]",RQ="[object String]",FQ="[object Symbol]",LQ="[object ArrayBuffer]",BQ="[object DataView]",$E=ME?ME.prototype:void 0,fy=$E?$E.valueOf:void 0;function UQ(t,e,r,n,i,a,s){switch(r){case BQ:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case LQ:return!(t.byteLength!=e.byteLength||!a(new DE(t),new DE(e)));case AQ:case OQ:case DQ:return NQ(+t,+e);case CQ:return t.name==e.name&&t.message==e.message;case $Q:case RQ:return t==e+"";case MQ:var o=EQ;case IQ:var l=n&PQ;if(o||(o=TQ),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;n|=kQ,s.set(t,e);var d=jQ(o(t),o(e),n,i,a,s);return s.delete(t),d;case FQ:if(fy)return fy.call(t)==fy.call(e)}return!1}var zQ=UQ;function WQ(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var nD=WQ,VQ=nD,HQ=jn;function qQ(t,e,r){var n=e(t);return HQ(t)?n:VQ(n,r(t))}var GQ=qQ;function KQ(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[i++]=s)}return a}var YQ=KQ;function XQ(){return[]}var QQ=XQ,JQ=YQ,ZQ=QQ,eJ=Object.prototype,tJ=eJ.propertyIsEnumerable,IE=Object.getOwnPropertySymbols,rJ=IE?function(t){return t==null?[]:(t=Object(t),JQ(IE(t),function(e){return tJ.call(t,e)}))}:ZQ,nJ=rJ;function iJ(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var aJ=iJ,sJ=Qa,oJ=Ja,lJ="[object Arguments]";function cJ(t){return oJ(t)&&sJ(t)==lJ}var uJ=cJ,RE=uJ,dJ=Ja,iD=Object.prototype,fJ=iD.hasOwnProperty,hJ=iD.propertyIsEnumerable,mJ=RE(function(){return arguments}())?RE:function(t){return dJ(t)&&fJ.call(t,"callee")&&!hJ.call(t,"callee")},C2=mJ,Np={exports:{}};function pJ(){return!1}var gJ=pJ;Np.exports;(function(t,e){var r=oa,n=gJ,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?r.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||n;t.exports=u})(Np,Np.exports);var aD=Np.exports,xJ=9007199254740991,vJ=/^(?:0|[1-9]\d*)$/;function yJ(t,e){var r=typeof t;return e=e??xJ,!!e&&(r=="number"||r!="symbol"&&vJ.test(t))&&t>-1&&t%1==0&&t<e}var M2=yJ,bJ=9007199254740991;function wJ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bJ}var D2=wJ,_J=Qa,SJ=D2,NJ=Ja,jJ="[object Arguments]",EJ="[object Array]",TJ="[object Boolean]",PJ="[object Date]",kJ="[object Error]",AJ="[object Function]",OJ="[object Map]",CJ="[object Number]",MJ="[object Object]",DJ="[object RegExp]",$J="[object Set]",IJ="[object String]",RJ="[object WeakMap]",FJ="[object ArrayBuffer]",LJ="[object DataView]",BJ="[object Float32Array]",UJ="[object Float64Array]",zJ="[object Int8Array]",WJ="[object Int16Array]",VJ="[object Int32Array]",HJ="[object Uint8Array]",qJ="[object Uint8ClampedArray]",GJ="[object Uint16Array]",KJ="[object Uint32Array]",jt={};jt[BJ]=jt[UJ]=jt[zJ]=jt[WJ]=jt[VJ]=jt[HJ]=jt[qJ]=jt[GJ]=jt[KJ]=!0;jt[jJ]=jt[EJ]=jt[FJ]=jt[TJ]=jt[LJ]=jt[PJ]=jt[kJ]=jt[AJ]=jt[OJ]=jt[CJ]=jt[MJ]=jt[DJ]=jt[$J]=jt[IJ]=jt[RJ]=!1;function YJ(t){return NJ(t)&&SJ(t.length)&&!!jt[_J(t)]}var XJ=YJ;function QJ(t){return function(e){return t(e)}}var sD=QJ,jp={exports:{}};jp.exports;(function(t,e){var r=m5,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,s=a&&r.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o})(jp,jp.exports);var JJ=jp.exports,ZJ=XJ,eZ=sD,FE=JJ,LE=FE&&FE.isTypedArray,tZ=LE?eZ(LE):ZJ,oD=tZ,rZ=aJ,nZ=C2,iZ=jn,aZ=aD,sZ=M2,oZ=oD,lZ=Object.prototype,cZ=lZ.hasOwnProperty;function uZ(t,e){var r=iZ(t),n=!r&&nZ(t),i=!r&&!n&&aZ(t),a=!r&&!n&&!i&&oZ(t),s=r||n||i||a,o=s?rZ(t.length,String):[],l=o.length;for(var u in t)(e||cZ.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||sZ(u,l)))&&o.push(u);return o}var dZ=uZ,fZ=Object.prototype;function hZ(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||fZ;return t===r}var mZ=hZ;function pZ(t,e){return function(r){return t(e(r))}}var lD=pZ,gZ=lD,xZ=gZ(Object.keys,Object),vZ=xZ,yZ=mZ,bZ=vZ,wZ=Object.prototype,_Z=wZ.hasOwnProperty;function SZ(t){if(!yZ(t))return bZ(t);var e=[];for(var r in Object(t))_Z.call(t,r)&&r!="constructor"&&e.push(r);return e}var NZ=SZ,jZ=p2,EZ=D2;function TZ(t){return t!=null&&EZ(t.length)&&!jZ(t)}var Vh=TZ,PZ=dZ,kZ=NZ,AZ=Vh;function OZ(t){return AZ(t)?PZ(t):kZ(t)}var Fx=OZ,CZ=GQ,MZ=nJ,DZ=Fx;function $Z(t){return CZ(t,DZ,MZ)}var IZ=$Z,BE=IZ,RZ=1,FZ=Object.prototype,LZ=FZ.hasOwnProperty;function BZ(t,e,r,n,i,a){var s=r&RZ,o=BE(t),l=o.length,u=BE(e),d=u.length;if(l!=d&&!s)return!1;for(var f=l;f--;){var h=o[f];if(!(s?h in e:LZ.call(e,h)))return!1}var m=a.get(t),g=a.get(e);if(m&&g)return m==e&&g==t;var p=!0;a.set(t,e),a.set(e,t);for(var x=s;++f<l;){h=o[f];var v=t[h],b=e[h];if(n)var y=s?n(b,v,h,e,t,a):n(v,b,h,t,e,a);if(!(y===void 0?v===b||i(v,b,r,n,a):y)){p=!1;break}x||(x=h=="constructor")}if(p&&!x){var _=t.constructor,w=e.constructor;_!=w&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof w=="function"&&w instanceof w)&&(p=!1)}return a.delete(t),a.delete(e),p}var UZ=BZ,zZ=ol,WZ=oa,VZ=zZ(WZ,"DataView"),HZ=VZ,qZ=ol,GZ=oa,KZ=qZ(GZ,"Promise"),YZ=KZ,XZ=ol,QZ=oa,JZ=XZ(QZ,"Set"),cD=JZ,ZZ=ol,eee=oa,tee=ZZ(eee,"WeakMap"),ree=tee,N1=HZ,j1=x2,E1=YZ,T1=cD,P1=ree,uD=Qa,ju=g5,UE="[object Map]",nee="[object Object]",zE="[object Promise]",WE="[object Set]",VE="[object WeakMap]",HE="[object DataView]",iee=ju(N1),aee=ju(j1),see=ju(E1),oee=ju(T1),lee=ju(P1),mo=uD;(N1&&mo(new N1(new ArrayBuffer(1)))!=HE||j1&&mo(new j1)!=UE||E1&&mo(E1.resolve())!=zE||T1&&mo(new T1)!=WE||P1&&mo(new P1)!=VE)&&(mo=function(t){var e=uD(t),r=e==nee?t.constructor:void 0,n=r?ju(r):"";if(n)switch(n){case iee:return HE;case aee:return UE;case see:return zE;case oee:return WE;case lee:return VE}return e});var cee=mo,hy=J5,uee=rD,dee=zQ,fee=UZ,qE=cee,GE=jn,KE=aD,hee=oD,mee=1,YE="[object Arguments]",XE="[object Array]",Cm="[object Object]",pee=Object.prototype,QE=pee.hasOwnProperty;function gee(t,e,r,n,i,a){var s=GE(t),o=GE(e),l=s?XE:qE(t),u=o?XE:qE(e);l=l==YE?Cm:l,u=u==YE?Cm:u;var d=l==Cm,f=u==Cm,h=l==u;if(h&&KE(t)){if(!KE(e))return!1;s=!0,d=!1}if(h&&!d)return a||(a=new hy),s||hee(t)?uee(t,e,r,n,i,a):dee(t,e,l,r,n,i,a);if(!(r&mee)){var m=d&&QE.call(t,"__wrapped__"),g=f&&QE.call(e,"__wrapped__");if(m||g){var p=m?t.value():t,x=g?e.value():e;return a||(a=new hy),i(p,x,r,n,a)}}return h?(a||(a=new hy),fee(t,e,r,n,i,a)):!1}var xee=gee,vee=xee,JE=Ja;function dD(t,e,r,n,i){return t===e?!0:t==null||e==null||!JE(t)&&!JE(e)?t!==t&&e!==e:vee(t,e,r,n,dD,i)}var $2=dD,yee=J5,bee=$2,wee=1,_ee=2;function See(t,e,r,n){var i=r.length,a=i,s=!n;if(t==null)return!a;for(t=Object(t);i--;){var o=r[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=r[i];var l=o[0],u=t[l],d=o[1];if(s&&o[2]){if(u===void 0&&!(l in t))return!1}else{var f=new yee;if(n)var h=n(u,d,l,t,e,f);if(!(h===void 0?bee(d,u,wee|_ee,n,f):h))return!1}}return!0}var Nee=See,jee=Ks;function Eee(t){return t===t&&!jee(t)}var fD=Eee,Tee=fD,Pee=Fx;function kee(t){for(var e=Pee(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Tee(i)]}return e}var Aee=kee;function Oee(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var hD=Oee,Cee=Nee,Mee=Aee,Dee=hD;function $ee(t){var e=Mee(t);return e.length==1&&e[0][2]?Dee(e[0][0],e[0][1]):function(r){return r===t||Cee(r,t,e)}}var Iee=$ee;function Ree(t,e){return t!=null&&e in Object(t)}var Fee=Ree,Lee=w5,Bee=C2,Uee=jn,zee=M2,Wee=D2,Vee=Sx;function Hee(t,e,r){e=Lee(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var s=Vee(e[n]);if(!(a=t!=null&&r(t,s)))break;t=t[s]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&Wee(i)&&zee(s,i)&&(Uee(t)||Bee(t)))}var qee=Hee,Gee=Fee,Kee=qee;function Yee(t,e){return t!=null&&Kee(t,e,Gee)}var Xee=Yee,Qee=$2,Jee=_5,Zee=Xee,ete=m2,tte=fD,rte=hD,nte=Sx,ite=1,ate=2;function ste(t,e){return ete(t)&&tte(e)?rte(nte(t),e):function(r){var n=Jee(r,t);return n===void 0&&n===e?Zee(r,t):Qee(e,n,ite|ate)}}var ote=ste;function lte(t){return t}var Eu=lte;function cte(t){return function(e){return e==null?void 0:e[t]}}var ute=cte,dte=w2;function fte(t){return function(e){return dte(e,t)}}var hte=fte,mte=ute,pte=hte,gte=m2,xte=Sx;function vte(t){return gte(t)?mte(xte(t)):pte(t)}var yte=vte,bte=Iee,wte=ote,_te=Eu,Ste=jn,Nte=yte;function jte(t){return typeof t=="function"?t:t==null?_te:typeof t=="object"?Ste(t)?wte(t[0],t[1]):bte(t):Nte(t)}var la=jte;function Ete(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var mD=Ete;function Tte(t){return t!==t}var Pte=Tte;function kte(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var Ate=kte,Ote=mD,Cte=Pte,Mte=Ate;function Dte(t,e,r){return e===e?Mte(t,e,r):Ote(t,Cte,r)}var $te=Dte,Ite=$te;function Rte(t,e){var r=t==null?0:t.length;return!!r&&Ite(t,e,0)>-1}var Fte=Rte;function Lte(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var Bte=Lte;function Ute(){}var zte=Ute,my=cD,Wte=zte,Vte=O2,Hte=1/0,qte=my&&1/Vte(new my([,-0]))[1]==Hte?function(t){return new my(t)}:Wte,Gte=qte,Kte=Z5,Yte=Fte,Xte=Bte,Qte=tD,Jte=Gte,Zte=O2,ere=200;function tre(t,e,r){var n=-1,i=Yte,a=t.length,s=!0,o=[],l=o;if(r)s=!1,i=Xte;else if(a>=ere){var u=e?null:Jte(t);if(u)return Zte(u);s=!1,i=Qte,l=new Kte}else l=e?[]:o;e:for(;++n<a;){var d=t[n],f=e?e(d):d;if(d=r||d!==0?d:0,s&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),o.push(d)}else i(l,f,r)||(l!==o&&l.push(f),o.push(d))}return o}var rre=tre,nre=la,ire=rre;function are(t,e){return t&&t.length?ire(t,nre(e)):[]}var sre=are;const ZE=at(sre);function pD(t,e,r){return e===!0?ZE(t,r):Ie(e)?ZE(t,e):t}function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}var ore=["ref"];function eT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eT(Object(r),!0).forEach(function(n){Lx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xD(n.key),n)}}function cre(t,e,r){return e&&tT(t.prototype,e),r&&tT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ure(t,e,r){return e=Ep(e),dre(t,gD()?Reflect.construct(e,r||[],Ep(t).constructor):e.apply(t,r))}function dre(t,e){if(e&&(Dc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fre(t)}function fre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gD=function(){return!!t})()}function Ep(t){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ep(t)}function hre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k1(t,e)}function k1(t,e){return k1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},k1(t,e)}function Lx(t,e,r){return e=xD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xD(t){var e=mre(t,"string");return Dc(e)=="symbol"?e:e+""}function mre(t,e){if(Dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pre(t,e){if(t==null)return{};var r=gre(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function xre(t){return t.value}function vre(t,e){if(X.isValidElement(t))return X.cloneElement(t,e);if(typeof t=="function")return X.createElement(t,e);e.ref;var r=pre(e,ore);return X.createElement(A2,r)}var rT=1,uc=function(t){function e(){var r;lre(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=ure(this,e,[].concat(i)),Lx(r,"lastBoundingBox",{width:-1,height:-1}),r}return hre(e,t),cre(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>rT||Math.abs(i.height-this.lastBoundingBox.height)>rT)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?fa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,u=i.chartWidth,d=i.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return fa(fa({},f),h)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=fa(fa({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return X.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},vre(a,fa(fa({},this.props),{},{payload:pD(d,u,xre)})))}}],[{key:"getWithHeight",value:function(n,i){var a=fa(fa({},this.defaultProps),n.props),s=a.layout;return s==="vertical"&&be(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])}(j.PureComponent);Lx(uc,"displayName","Legend");Lx(uc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var nT=Uh,yre=C2,bre=jn,iT=nT?nT.isConcatSpreadable:void 0;function wre(t){return bre(t)||yre(t)||!!(iT&&t&&t[iT])}var _re=wre,Sre=nD,Nre=_re;function vD(t,e,r,n,i){var a=-1,s=t.length;for(r||(r=Nre),i||(i=[]);++a<s;){var o=t[a];e>0&&r(o)?e>1?vD(o,e-1,r,n,i):Sre(i,o):n||(i[i.length]=o)}return i}var yD=vD;function jre(t){return function(e,r,n){for(var i=-1,a=Object(e),s=n(e),o=s.length;o--;){var l=s[t?o:++i];if(r(a[l],l,a)===!1)break}return e}}var Ere=jre,Tre=Ere,Pre=Tre(),kre=Pre,Are=kre,Ore=Fx;function Cre(t,e){return t&&Are(t,e,Ore)}var bD=Cre,Mre=Vh;function Dre(t,e){return function(r,n){if(r==null)return r;if(!Mre(r))return t(r,n);for(var i=r.length,a=e?i:-1,s=Object(r);(e?a--:++a<i)&&n(s[a],a,s)!==!1;);return r}}var $re=Dre,Ire=bD,Rre=$re,Fre=Rre(Ire),I2=Fre,Lre=I2,Bre=Vh;function Ure(t,e){var r=-1,n=Bre(t)?Array(t.length):[];return Lre(t,function(i,a,s){n[++r]=e(i,a,s)}),n}var wD=Ure;function zre(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Wre=zre,aT=vu;function Vre(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,a=aT(t),s=e!==void 0,o=e===null,l=e===e,u=aT(e);if(!o&&!u&&!a&&t>e||a&&s&&l&&!o&&!u||n&&s&&l||!r&&l||!i)return 1;if(!n&&!a&&!u&&t<e||u&&r&&i&&!n&&!a||o&&r&&i||!s&&i||!l)return-1}return 0}var Hre=Vre,qre=Hre;function Gre(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,s=i.length,o=r.length;++n<s;){var l=qre(i[n],a[n]);if(l){if(n>=o)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return t.index-e.index}var Kre=Gre,py=b2,Yre=w2,Xre=la,Qre=wD,Jre=Wre,Zre=sD,ene=Kre,tne=Eu,rne=jn;function nne(t,e,r){e.length?e=py(e,function(a){return rne(a)?function(s){return Yre(s,a.length===1?a[0]:a)}:a}):e=[tne];var n=-1;e=py(e,Zre(Xre));var i=Qre(t,function(a,s,o){var l=py(e,function(u){return u(a)});return{criteria:l,index:++n,value:a}});return Jre(i,function(a,s){return ene(a,s,r)})}var ine=nne;function ane(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var sne=ane,one=sne,sT=Math.max;function lne(t,e,r){return e=sT(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=sT(n.length-e,0),s=Array(a);++i<a;)s[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=r(s),one(t,this,o)}}var cne=lne;function une(t){return function(){return t}}var dne=une,fne=ol,hne=function(){try{var t=fne(Object,"defineProperty");return t({},"",{}),t}catch{}}(),_D=hne,mne=dne,oT=_D,pne=Eu,gne=oT?function(t,e){return oT(t,"toString",{configurable:!0,enumerable:!1,value:mne(e),writable:!0})}:pne,xne=gne,vne=800,yne=16,bne=Date.now;function wne(t){var e=0,r=0;return function(){var n=bne(),i=yne-(n-r);if(r=n,i>0){if(++e>=vne)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var _ne=wne,Sne=xne,Nne=_ne,jne=Nne(Sne),Ene=jne,Tne=Eu,Pne=cne,kne=Ene;function Ane(t,e){return kne(Pne(t,e,Tne),t+"")}var One=Ane,Cne=g2,Mne=Vh,Dne=M2,$ne=Ks;function Ine(t,e,r){if(!$ne(r))return!1;var n=typeof e;return(n=="number"?Mne(r)&&Dne(e,r.length):n=="string"&&e in r)?Cne(r[e],t):!1}var Bx=Ine,Rne=yD,Fne=ine,Lne=One,lT=Bx,Bne=Lne(function(t,e){if(t==null)return[];var r=e.length;return r>1&&lT(t,e[0],e[1])?e=[]:r>2&&lT(e[0],e[1],e[2])&&(e=[e[0]]),Fne(t,Rne(e,1),[])}),Une=Bne;const R2=at(Une);function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function A1(){return A1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},A1.apply(this,arguments)}function zne(t,e){return qne(t)||Hne(t,e)||Vne(t,e)||Wne()}function Wne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vne(t,e){if(t){if(typeof t=="string")return cT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cT(t,e)}}function cT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hne(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function qne(t){if(Array.isArray(t))return t}function uT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uT(Object(r),!0).forEach(function(n){Gne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gne(t,e,r){return e=Kne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kne(t){var e=Yne(t,"string");return If(e)=="symbol"?e:e+""}function Yne(t,e){if(If(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xne(t){return Array.isArray(t)&&lr(t[0])&&lr(t[1])?t.join(" ~ "):t}var Qne=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,d=e.payload,f=e.formatter,h=e.itemSorter,m=e.wrapperClassName,g=e.labelClassName,p=e.label,x=e.labelFormatter,v=e.accessibilityLayer,b=v===void 0?!1:v,y=function(){if(d&&d.length){var k={padding:0,margin:0},F=(h?R2(d,h):d).map(function(H,M){if(H.type==="none")return null;var O=gy({display:"block",paddingTop:4,paddingBottom:4,color:H.color||"#000"},o),L=H.formatter||f||Xne,R=H.value,z=H.name,J=R,W=z;if(L&&J!=null&&W!=null){var C=L(R,z,H,M,d);if(Array.isArray(C)){var G=zne(C,2);J=G[0],W=G[1]}else J=C}return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:O},lr(W)?X.createElement("span",{className:"recharts-tooltip-item-name"},W):null,lr(W)?X.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,X.createElement("span",{className:"recharts-tooltip-item-value"},J),X.createElement("span",{className:"recharts-tooltip-item-unit"},H.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:k},F)}return null},_=gy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=gy({margin:0},u),N=!Be(p),S=N?p:"",E=Ve("recharts-default-tooltip",m),T=Ve("recharts-tooltip-label",g);N&&x&&d!==void 0&&d!==null&&(S=x(p,d));var P=b?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",A1({className:E,style:_},P),X.createElement("p",{className:T,style:w},X.isValidElement(S)?S:"".concat(S)),y())};function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function Mm(t,e,r){return e=Jne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jne(t){var e=Zne(t,"string");return Rf(e)=="symbol"?e:e+""}function Zne(t,e){if(Rf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var td="recharts-tooltip-wrapper",eie={visibility:"hidden"};function tie(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Ve(td,Mm(Mm(Mm(Mm({},"".concat(td,"-right"),be(r)&&e&&be(e.x)&&r>=e.x),"".concat(td,"-left"),be(r)&&e&&be(e.x)&&r<e.x),"".concat(td,"-bottom"),be(n)&&e&&be(e.y)&&n>=e.y),"".concat(td,"-top"),be(n)&&e&&be(e.y)&&n<e.y))}function dT(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&be(a[n]))return a[n];var d=r[n]-o-i,f=r[n]+i;if(e[n])return s[n]?d:f;if(s[n]){var h=d,m=l[n];return h<m?Math.max(f,l[n]):Math.max(d,l[n])}var g=f+o,p=l[n]+u;return g>p?Math.max(d,l[n]):Math.max(f,l[n])}function rie(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function nie(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,u,d,f;return s.height>0&&s.width>0&&r?(d=dT({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=dT({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=rie({translateX:d,translateY:f,useTranslate3d:o})):u=eie,{cssProperties:u,cssClasses:tie({translateX:d,translateY:f,coordinate:r})}}function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function fT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fT(Object(r),!0).forEach(function(n){C1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ND(n.key),n)}}function sie(t,e,r){return e&&aie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oie(t,e,r){return e=Tp(e),lie(t,SD()?Reflect.construct(e,r||[],Tp(t).constructor):e.apply(t,r))}function lie(t,e){if(e&&($c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cie(t)}function cie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SD=function(){return!!t})()}function Tp(t){return Tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tp(t)}function uie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O1(t,e)}function O1(t,e){return O1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},O1(t,e)}function C1(t,e,r){return e=ND(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ND(t){var e=die(t,"string");return $c(e)=="symbol"?e:e+""}function die(t,e){if($c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if($c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mT=1,fie=function(t){function e(){var r;iie(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=oie(this,e,[].concat(i)),C1(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),C1(r,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return uie(e,t),sie(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>mT||Math.abs(n.height-this.state.lastBoundingBox.height)>mT)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,m=i.offset,g=i.position,p=i.reverseDirection,x=i.useTranslate3d,v=i.viewBox,b=i.wrapperStyle,y=nie({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:v}),_=y.cssClasses,w=y.cssProperties,N=hT(hT({transition:h&&a?"transform ".concat(o,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return X.createElement("div",{tabIndex:-1,className:_,style:N,ref:function(E){n.wrapperNode=E}},u)}}])}(j.PureComponent),hie=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ji={isSsr:hie(),get:function(e){return Ji[e]},set:function(e,r){if(typeof e=="string")Ji[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(i){Ji[i]=e[i]})}}};function Ic(t){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(t)}function pT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pT(Object(r),!0).forEach(function(n){F2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ED(n.key),n)}}function gie(t,e,r){return e&&pie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xie(t,e,r){return e=Pp(e),vie(t,jD()?Reflect.construct(e,r||[],Pp(t).constructor):e.apply(t,r))}function vie(t,e){if(e&&(Ic(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yie(t)}function yie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jD=function(){return!!t})()}function Pp(t){return Pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pp(t)}function bie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M1(t,e)}function M1(t,e){return M1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},M1(t,e)}function F2(t,e,r){return e=ED(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ED(t){var e=wie(t,"string");return Ic(e)=="symbol"?e:e+""}function wie(t,e){if(Ic(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _ie(t){return t.dataKey}function Sie(t,e){return X.isValidElement(t)?X.cloneElement(t,e):typeof t=="function"?X.createElement(t,e):X.createElement(Qne,e)}var Cn=function(t){function e(){return mie(this,e),xie(this,e,arguments)}return bie(e,t),gie(e,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,m=i.offset,g=i.payload,p=i.payloadUniqBy,x=i.position,v=i.reverseDirection,b=i.useTranslate3d,y=i.viewBox,_=i.wrapperStyle,w=g??[];f&&w.length&&(w=pD(g.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),p,_ie));var N=w.length>0;return X.createElement(fie,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:h,active:a,coordinate:d,hasPayload:N,offset:m,position:x,reverseDirection:v,useTranslate3d:b,viewBox:y,wrapperStyle:_},Sie(u,gT(gT({},this.props),{},{payload:w})))}}])}(j.PureComponent);F2(Cn,"displayName","Tooltip");F2(Cn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ji.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Nie=oa,jie=function(){return Nie.Date.now()},Eie=jie,Tie=/\s/;function Pie(t){for(var e=t.length;e--&&Tie.test(t.charAt(e)););return e}var kie=Pie,Aie=kie,Oie=/^\s+/;function Cie(t){return t&&t.slice(0,Aie(t)+1).replace(Oie,"")}var Mie=Cie,Die=Mie,xT=Ks,$ie=vu,vT=NaN,Iie=/^[-+]0x[0-9a-f]+$/i,Rie=/^0b[01]+$/i,Fie=/^0o[0-7]+$/i,Lie=parseInt;function Bie(t){if(typeof t=="number")return t;if($ie(t))return vT;if(xT(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=xT(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Die(t);var r=Rie.test(t);return r||Fie.test(t)?Lie(t.slice(2),r?2:8):Iie.test(t)?vT:+t}var TD=Bie,Uie=Ks,xy=Eie,yT=TD,zie="Expected a function",Wie=Math.max,Vie=Math.min;function Hie(t,e,r){var n,i,a,s,o,l,u=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(zie);e=yT(e)||0,Uie(r)&&(d=!!r.leading,f="maxWait"in r,a=f?Wie(yT(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h);function m(N){var S=n,E=i;return n=i=void 0,u=N,s=t.apply(E,S),s}function g(N){return u=N,o=setTimeout(v,e),d?m(N):s}function p(N){var S=N-l,E=N-u,T=e-S;return f?Vie(T,a-E):T}function x(N){var S=N-l,E=N-u;return l===void 0||S>=e||S<0||f&&E>=a}function v(){var N=xy();if(x(N))return b(N);o=setTimeout(v,p(N))}function b(N){return o=void 0,h&&n?m(N):(n=i=void 0,s)}function y(){o!==void 0&&clearTimeout(o),u=0,n=l=i=o=void 0}function _(){return o===void 0?s:b(xy())}function w(){var N=xy(),S=x(N);if(n=arguments,i=this,l=N,S){if(o===void 0)return g(l);if(f)return clearTimeout(o),o=setTimeout(v,e),m(l)}return o===void 0&&(o=setTimeout(v,e)),s}return w.cancel=y,w.flush=_,w}var qie=Hie,Gie=qie,Kie=Ks,Yie="Expected a function";function Xie(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(Yie);return Kie(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Gie(t,e,{leading:n,maxWait:e,trailing:i})}var Qie=Xie;const PD=at(Qie);function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}function bT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Dm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bT(Object(r),!0).forEach(function(n){Jie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jie(t,e,r){return e=Zie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zie(t){var e=eae(t,"string");return Ff(e)=="symbol"?e:e+""}function eae(t,e){if(Ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tae(t,e){return aae(t)||iae(t,e)||nae(t,e)||rae()}function rae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nae(t,e){if(t){if(typeof t=="string")return wT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wT(t,e)}}function wT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iae(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function aae(t){if(Array.isArray(t))return t}var $m=j.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=t.width,s=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,h=t.maxHeight,m=t.children,g=t.debounce,p=g===void 0?0:g,x=t.id,v=t.className,b=t.onResize,y=t.style,_=y===void 0?{}:y,w=j.useRef(null),N=j.useRef();N.current=b,j.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var S=j.useState({containerWidth:i.width,containerHeight:i.height}),E=tae(S,2),T=E[0],P=E[1],A=j.useCallback(function(F,H){P(function(M){var O=Math.round(F),L=Math.round(H);return M.containerWidth===O&&M.containerHeight===L?M:{containerWidth:O,containerHeight:L}})},[]);j.useEffect(function(){var F=function(z){var J,W=z[0].contentRect,C=W.width,G=W.height;A(C,G),(J=N.current)===null||J===void 0||J.call(N,C,G)};p>0&&(F=PD(F,p,{trailing:!0,leading:!1}));var H=new ResizeObserver(F),M=w.current.getBoundingClientRect(),O=M.width,L=M.height;return A(O,L),H.observe(w.current),function(){H.disconnect()}},[A,p]);var k=j.useMemo(function(){var F=T.containerWidth,H=T.containerHeight;if(F<0||H<0)return null;Ci(To(s)||To(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),Ci(!r||r>0,"The aspect(%s) must be greater than zero.",r);var M=To(s)?F:s,O=To(l)?H:l;r&&r>0&&(M?O=M/r:O&&(M=O*r),h&&O>h&&(O=h)),Ci(M>0||O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,O,s,l,d,f,r);var L=!Array.isArray(m)&&Aa(m.type).endsWith("Chart");return X.Children.map(m,function(R){return X.isValidElement(R)?j.cloneElement(R,Dm({width:M,height:O},L?{style:Dm({height:"100%",width:"100%",maxHeight:O,maxWidth:M},R.props.style)}:{})):R})},[r,m,l,h,f,d,T,s]);return X.createElement("div",{id:x?"".concat(x):void 0,className:Ve("recharts-responsive-container",v),style:Dm(Dm({},_),{},{width:s,height:l,minWidth:d,minHeight:f,maxHeight:h}),ref:w},k)}),Lf=function(e){return null};Lf.displayName="Cell";function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function _T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function D1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_T(Object(r),!0).forEach(function(n){sae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_T(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sae(t,e,r){return e=oae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oae(t){var e=lae(t,"string");return Bf(e)=="symbol"?e:e+""}function lae(t,e){if(Bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nl={widthCache:{},cacheCount:0},cae=2e3,uae={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ST="recharts_measurement_span";function dae(t){var e=D1({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var zd=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ji.isSsr)return{width:0,height:0};var n=dae(r),i=JSON.stringify({text:e,copyStyle:n});if(Nl.widthCache[i])return Nl.widthCache[i];try{var a=document.getElementById(ST);a||(a=document.createElement("span"),a.setAttribute("id",ST),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=D1(D1({},uae),n);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return Nl.widthCache[i]=l,++Nl.cacheCount>cae&&(Nl.cacheCount=0,Nl.widthCache={}),l}catch{return{width:0,height:0}}},fae=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Uf(t){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(t)}function kp(t,e){return gae(t)||pae(t,e)||mae(t,e)||hae()}function hae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mae(t,e){if(t){if(typeof t=="string")return NT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NT(t,e)}}function NT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pae(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function gae(t){if(Array.isArray(t))return t}function xae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yae(n.key),n)}}function vae(t,e,r){return e&&jT(t.prototype,e),r&&jT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yae(t){var e=bae(t,"string");return Uf(e)=="symbol"?e:e+""}function bae(t,e){if(Uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ET=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wae=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_ae=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Sae=Object.keys(kD),Yl="NaN";function Nae(t,e){return t*kD[e]}var Im=function(){function t(e,r){xae(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!wae.test(r)&&(this.num=NaN,this.unit=""),Sae.includes(r)&&(this.num=Nae(e,r),this.unit="px")}return vae(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=_ae.exec(r))!==null&&n!==void 0?n:[],a=kp(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function AD(t){if(t.includes(Yl))return Yl;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=ET.exec(e))!==null&&r!==void 0?r:[],i=kp(n,4),a=i[1],s=i[2],o=i[3],l=Im.parse(a??""),u=Im.parse(o??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Yl;e=e.replace(ET,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=TT.exec(e))!==null&&f!==void 0?f:[],m=kp(h,4),g=m[1],p=m[2],x=m[3],v=Im.parse(g??""),b=Im.parse(x??""),y=p==="+"?v.add(b):v.subtract(b);if(y.isNaN())return Yl;e=e.replace(TT,y.toString())}return e}var PT=/\(([^()]*)\)/;function jae(t){for(var e=t;e.includes("(");){var r=PT.exec(e),n=kp(r,2),i=n[1];e=e.replace(PT,AD(i))}return e}function Eae(t){var e=t.replace(/\s+/g,"");return e=jae(e),e=AD(e),e}function Tae(t){try{return Eae(t)}catch{return Yl}}function vy(t){var e=Tae(t.slice(5,-1));return e===Yl?"":e}var Pae=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],kae=["dx","dy","angle","className","breakAll"];function $1(){return $1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$1.apply(this,arguments)}function kT(t,e){if(t==null)return{};var r=Aae(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Aae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function AT(t,e){return Dae(t)||Mae(t,e)||Cae(t,e)||Oae()}function Oae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cae(t,e){if(t){if(typeof t=="string")return OT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OT(t,e)}}function OT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mae(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Dae(t){if(Array.isArray(t))return t}var OD=/[ \f\n\r\t\v\u2028\u2029]+/,CD=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var a=[];Be(r)||(n?a=r.toString().split(""):a=r.toString().split(OD));var s=a.map(function(l){return{word:l,width:zd(l,i).width}}),o=n?0:zd(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},$ae=function(e,r,n,i,a){var s=e.maxLines,o=e.children,l=e.style,u=e.breakAll,d=be(s),f=o,h=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(function(O,L){var R=L.word,z=L.width,J=O[O.length-1];if(J&&(i==null||a||J.width+z+n<Number(i)))J.words.push(R),J.width+=z+n;else{var W={words:[R],width:z};O.push(W)}return O},[])},m=h(r),g=function(M){return M.reduce(function(O,L){return O.width>L.width?O:L})};if(!d)return m;for(var p="…",x=function(M){var O=f.slice(0,M),L=CD({breakAll:u,style:l,children:O+p}).wordsWithComputedWidth,R=h(L),z=R.length>s||g(R).width>Number(i);return[z,R]},v=0,b=f.length-1,y=0,_;v<=b&&y<=f.length-1;){var w=Math.floor((v+b)/2),N=w-1,S=x(N),E=AT(S,2),T=E[0],P=E[1],A=x(w),k=AT(A,1),F=k[0];if(!T&&!F&&(v=w+1),T&&F&&(b=w-1),!T&&F){_=P;break}y++}return _||m},CT=function(e){var r=Be(e)?[]:e.toString().split(OD);return[{words:r}]},Iae=function(e){var r=e.width,n=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((r||n)&&!Ji.isSsr){var l,u,d=CD({breakAll:s,children:i,style:a});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;l=f,u=h}else return CT(i);return $ae({breakAll:s,children:i,maxLines:o,style:a},l,u,r,n)}return CT(i)},MT="#808080",Ko=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,m=h===void 0?"start":h,g=e.verticalAnchor,p=g===void 0?"end":g,x=e.fill,v=x===void 0?MT:x,b=kT(e,Pae),y=j.useMemo(function(){return Iae({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),_=b.dx,w=b.dy,N=b.angle,S=b.className,E=b.breakAll,T=kT(b,kae);if(!lr(n)||!lr(a))return null;var P=n+(be(_)?_:0),A=a+(be(w)?w:0),k;switch(p){case"start":k=vy("calc(".concat(u,")"));break;case"middle":k=vy("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:k=vy("calc(".concat(y.length-1," * -").concat(o,")"));break}var F=[];if(f){var H=y[0].width,M=b.width;F.push("scale(".concat((be(M)?M/H:1)/H,")"))}return N&&F.push("rotate(".concat(N,", ").concat(P,", ").concat(A,")")),F.length&&(T.transform=F.join(" ")),X.createElement("text",$1({},Me(T,!0),{x:P,y:A,className:Ve("recharts-text",S),textAnchor:m,fill:v.includes("url")?MT:v}),y.map(function(O,L){var R=O.words.join(E?"":" ");return X.createElement("tspan",{x:P,dy:L===0?k:o,key:"".concat(R,"-").concat(L)},R)}))};function $s(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rae(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function L2(t){let e,r,n;t.length!==2?(e=$s,r=(o,l)=>$s(t(o),l),n=(o,l)=>t(o)-l):(e=t===$s||t===Rae?t:Fae,r=t,n=t);function i(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){const f=i(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function Fae(){return 0}function MD(t){return t===null?NaN:+t}function*Lae(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Bae=L2($s),Hh=Bae.right;L2(MD).center;class DT extends Map{constructor(e,r=Wae){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get($T(this,e))}has(e){return super.has($T(this,e))}set(e,r){return super.set(Uae(this,e),r)}delete(e){return super.delete(zae(this,e))}}function $T({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Uae({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function zae({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Wae(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Vae(t=$s){if(t===$s)return DD;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function DD(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Hae=Math.sqrt(50),qae=Math.sqrt(10),Gae=Math.sqrt(2);function Ap(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=Hae?10:a>=qae?5:a>=Gae?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=r&&r<2?Ap(t,e,r*2):[o,l,u]}function I1(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,s]=n?Ap(e,t,r):Ap(t,e,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function R1(t,e,r){return e=+e,t=+t,r=+r,Ap(t,e,r)[2]}function F1(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?R1(e,t,r):R1(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function IT(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function RT(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function $D(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?DD:Vae(i);n>r;){if(n-r>600){const l=n-r+1,u=e-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),m=Math.max(r,Math.floor(e-u*f/l+h)),g=Math.min(n,Math.floor(e+(l-u)*f/l+h));$D(t,e,m,g,i)}const a=t[e];let s=r,o=n;for(rd(t,r,e),i(t[n],a)>0&&rd(t,r,n);s<o;){for(rd(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[r],a)===0?rd(t,r,o):(++o,rd(t,o,n)),o<=e&&(r=o+1),e<=o&&(n=o-1)}return t}function rd(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Kae(t,e,r){if(t=Float64Array.from(Lae(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return RT(t);if(e>=1)return IT(t);var n,i=(n-1)*e,a=Math.floor(i),s=IT($D(t,a).subarray(0,a+1)),o=RT(t.subarray(a+1));return s+(o-s)*(i-a)}}function Yae(t,e,r=MD){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),s=+r(t[a],a,t),o=+r(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function Xae(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function hi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Za(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const L1=Symbol("implicit");function B2(){var t=new DT,e=[],r=[],n=L1;function i(a){let s=t.get(a);if(s===void 0){if(n!==L1)return n;t.set(a,s=e.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new DT;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return B2(e,r).unknown(n)},hi.apply(i,arguments),i}function zf(){var t=B2().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,s,o=!1,l=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,m=i<n,g=m?i:n,p=m?n:i;a=(p-g)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),g+=(p-g-a*(h-l))*d,s=a*(1-l),o&&(g=Math.round(g),s=Math.round(s));var x=Xae(h).map(function(v){return g+a*v});return r(m?x.reverse():x)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(o=!!h,f()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return zf(e(),[n,i]).round(o).paddingInner(l).paddingOuter(u).align(d)},hi.apply(f(),arguments)}function ID(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ID(e())},t}function Wd(){return ID(zf.apply(null,arguments).paddingInner(1))}function U2(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function RD(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function qh(){}var Wf=.7,Op=1/Wf,dc="\\s*([+-]?\\d+)\\s*",Vf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qae=/^#([0-9a-f]{3,8})$/,Jae=new RegExp(`^rgb\\(${dc},${dc},${dc}\\)$`),Zae=new RegExp(`^rgb\\(${Zi},${Zi},${Zi}\\)$`),ese=new RegExp(`^rgba\\(${dc},${dc},${dc},${Vf}\\)$`),tse=new RegExp(`^rgba\\(${Zi},${Zi},${Zi},${Vf}\\)$`),rse=new RegExp(`^hsl\\(${Vf},${Zi},${Zi}\\)$`),nse=new RegExp(`^hsla\\(${Vf},${Zi},${Zi},${Vf}\\)$`),FT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U2(qh,Hf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:LT,formatHex:LT,formatHex8:ise,formatHsl:ase,formatRgb:BT,toString:BT});function LT(){return this.rgb().formatHex()}function ise(){return this.rgb().formatHex8()}function ase(){return FD(this).formatHsl()}function BT(){return this.rgb().formatRgb()}function Hf(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Qae.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?UT(e):r===3?new xn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Rm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Rm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Jae.exec(t))?new xn(e[1],e[2],e[3],1):(e=Zae.exec(t))?new xn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ese.exec(t))?Rm(e[1],e[2],e[3],e[4]):(e=tse.exec(t))?Rm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rse.exec(t))?VT(e[1],e[2]/100,e[3]/100,1):(e=nse.exec(t))?VT(e[1],e[2]/100,e[3]/100,e[4]):FT.hasOwnProperty(t)?UT(FT[t]):t==="transparent"?new xn(NaN,NaN,NaN,0):null}function UT(t){return new xn(t>>16&255,t>>8&255,t&255,1)}function Rm(t,e,r,n){return n<=0&&(t=e=r=NaN),new xn(t,e,r,n)}function sse(t){return t instanceof qh||(t=Hf(t)),t?(t=t.rgb(),new xn(t.r,t.g,t.b,t.opacity)):new xn}function B1(t,e,r,n){return arguments.length===1?sse(t):new xn(t,e,r,n??1)}function xn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}U2(xn,B1,RD(qh,{brighter(t){return t=t==null?Op:Math.pow(Op,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wf:Math.pow(Wf,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xn(Io(this.r),Io(this.g),Io(this.b),Cp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zT,formatHex:zT,formatHex8:ose,formatRgb:WT,toString:WT}));function zT(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}`}function ose(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}${Po((isNaN(this.opacity)?1:this.opacity)*255)}`}function WT(){const t=Cp(this.opacity);return`${t===1?"rgb(":"rgba("}${Io(this.r)}, ${Io(this.g)}, ${Io(this.b)}${t===1?")":`, ${t})`}`}function Cp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Io(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Po(t){return t=Io(t),(t<16?"0":"")+t.toString(16)}function VT(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ei(t,e,r,n)}function FD(t){if(t instanceof Ei)return new Ei(t.h,t.s,t.l,t.opacity);if(t instanceof qh||(t=Hf(t)),!t)return new Ei;if(t instanceof Ei)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-e)/o+2:s=(e-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Ei(s,o,l,t.opacity)}function lse(t,e,r,n){return arguments.length===1?FD(t):new Ei(t,e,r,n??1)}function Ei(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}U2(Ei,lse,RD(qh,{brighter(t){return t=t==null?Op:Math.pow(Op,t),new Ei(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wf:Math.pow(Wf,t),new Ei(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new xn(yy(t>=240?t-240:t+120,i,n),yy(t,i,n),yy(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Ei(HT(this.h),Fm(this.s),Fm(this.l),Cp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Cp(this.opacity);return`${t===1?"hsl(":"hsla("}${HT(this.h)}, ${Fm(this.s)*100}%, ${Fm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function HT(t){return t=(t||0)%360,t<0?t+360:t}function Fm(t){return Math.max(0,Math.min(1,t||0))}function yy(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const z2=t=>()=>t;function cse(t,e){return function(r){return t+r*e}}function use(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function dse(t){return(t=+t)==1?LD:function(e,r){return r-e?use(e,r,t):z2(isNaN(e)?r:e)}}function LD(t,e){var r=e-t;return r?cse(t,r):z2(isNaN(t)?e:t)}const qT=function t(e){var r=dse(e);function n(i,a){var s=r((i=B1(i)).r,(a=B1(a)).r),o=r(i.g,a.g),l=r(i.b,a.b),u=LD(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return n.gamma=t,n}(1);function fse(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function hse(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mse(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=Tu(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function pse(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Mp(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function gse(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Tu(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var U1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,by=new RegExp(U1.source,"g");function xse(t){return function(){return t}}function vse(t){return function(e){return t(e)+""}}function yse(t,e){var r=U1.lastIndex=by.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(n=U1.exec(t))&&(i=by.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Mp(n,i)})),r=by.lastIndex;return r<e.length&&(a=e.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?vse(l[0].x):xse(e):(e=l.length,function(u){for(var d=0,f;d<e;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function Tu(t,e){var r=typeof e,n;return e==null||r==="boolean"?z2(e):(r==="number"?Mp:r==="string"?(n=Hf(e))?(e=n,qT):yse:e instanceof Hf?qT:e instanceof Date?pse:hse(e)?fse:Array.isArray(e)?mse:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gse:Mp)(t,e)}function W2(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function bse(t,e){e===void 0&&(e=t,t=Tu);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function wse(t){return function(){return t}}function Dp(t){return+t}var GT=[0,1];function an(t){return t}function z1(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:wse(isNaN(e)?NaN:.5)}function _se(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Sse(t,e,r){var n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(n=z1(i,n),a=r(s,a)):(n=z1(n,i),a=r(a,s)),function(o){return a(n(o))}}function Nse(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=z1(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(o){var l=Hh(t,o,1,n)-1;return a[l](i[l](o))}}function Gh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ux(){var t=GT,e=GT,r=Tu,n,i,a,s=an,o,l,u;function d(){var h=Math.min(t.length,e.length);return s!==an&&(s=_se(t[0],t[h-1])),o=h>2?Nse:Sse,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=o(t.map(n),e,r)))(n(s(h)))}return f.invert=function(h){return s(i((u||(u=o(e,t.map(n),Mp)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Dp),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=W2,d()},f.clamp=function(h){return arguments.length?(s=h?!0:an,d()):s!==an},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,m){return n=h,i=m,d()}}function V2(){return Ux()(an,an)}function jse(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function $p(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Rc(t){return t=$p(Math.abs(t)),t?t[1]:NaN}function Ese(t,e){return function(r,n){for(var i=r.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Tse(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Pse=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qf(t){if(!(e=Pse.exec(t)))throw new Error("invalid format: "+t);var e;return new H2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}qf.prototype=H2.prototype;function H2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}H2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kse(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var BD;function Ase(t,e){var r=$p(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(BD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+$p(t,Math.max(0,e+a-1))[0]}function KT(t,e){var r=$p(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const YT={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:jse,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>KT(t*100,e),r:KT,s:Ase,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function XT(t){return t}var QT=Array.prototype.map,JT=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ose(t){var e=t.grouping===void 0||t.thousands===void 0?XT:Ese(QT.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?XT:Tse(QT.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=qf(f);var h=f.fill,m=f.align,g=f.sign,p=f.symbol,x=f.zero,v=f.width,b=f.comma,y=f.precision,_=f.trim,w=f.type;w==="n"?(b=!0,w="g"):YT[w]||(y===void 0&&(y=12),_=!0,w="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var N=p==="$"?r:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=p==="$"?n:/[%p]/.test(w)?s:"",E=YT[w],T=/[defgprs%]/.test(w);y=y===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function P(A){var k=N,F=S,H,M,O;if(w==="c")F=E(A)+F,A="";else{A=+A;var L=A<0||1/A<0;if(A=isNaN(A)?l:E(Math.abs(A),y),_&&(A=kse(A)),L&&+A==0&&g!=="+"&&(L=!1),k=(L?g==="("?g:o:g==="-"||g==="("?"":g)+k,F=(w==="s"?JT[8+BD/3]:"")+F+(L&&g==="("?")":""),T){for(H=-1,M=A.length;++H<M;)if(O=A.charCodeAt(H),48>O||O>57){F=(O===46?i+A.slice(H+1):A.slice(H))+F,A=A.slice(0,H);break}}}b&&!x&&(A=e(A,1/0));var R=k.length+A.length+F.length,z=R<v?new Array(v-R+1).join(h):"";switch(b&&x&&(A=e(z+A,z.length?v-F.length:1/0),z=""),m){case"<":A=k+A+F+z;break;case"=":A=k+z+A+F;break;case"^":A=z.slice(0,R=z.length>>1)+k+A+F+z.slice(R);break;default:A=z+k+A+F;break}return a(A)}return P.toString=function(){return f+""},P}function d(f,h){var m=u((f=qf(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Rc(h)/3)))*3,p=Math.pow(10,-g),x=JT[8+g/3];return function(v){return m(p*v)+x}}return{format:u,formatPrefix:d}}var Lm,q2,UD;Cse({thousands:",",grouping:[3],currency:["$",""]});function Cse(t){return Lm=Ose(t),q2=Lm.format,UD=Lm.formatPrefix,Lm}function Mse(t){return Math.max(0,-Rc(Math.abs(t)))}function Dse(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rc(e)/3)))*3-Rc(Math.abs(t)))}function $se(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rc(e)-Rc(t))+1}function zD(t,e,r,n){var i=F1(t,e,r),a;switch(n=qf(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=Dse(i,s))&&(n.precision=a),UD(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=$se(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Mse(i))&&(n.precision=a-(n.type==="%")*2);break}}return q2(n)}function Ys(t){var e=t.domain;return t.ticks=function(r){var n=e();return I1(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return zD(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,s=n[i],o=n[a],l,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=R1(s,o,r),u===l)return n[i]=s,n[a]=o,e(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function Ip(){var t=V2();return t.copy=function(){return Gh(t,Ip())},hi.apply(t,arguments),Ys(t)}function WD(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Dp),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return WD(t).unknown(e)},t=arguments.length?Array.from(t,Dp):[0,1],Ys(r)}function VD(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),t[r]=e.floor(i),t[n]=e.ceil(a),t}function ZT(t){return Math.log(t)}function eP(t){return Math.exp(t)}function Ise(t){return-Math.log(-t)}function Rse(t){return-Math.exp(-t)}function Fse(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Lse(t){return t===10?Fse:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Bse(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function tP(t){return(e,r)=>-t(-e,r)}function G2(t){const e=t(ZT,eP),r=e.domain;let n=10,i,a;function s(){return i=Bse(n),a=Lse(n),r()[0]<0?(i=tP(i),a=tP(a),t(Ise,Rse)):t(ZT,eP),e}return e.base=function(o){return arguments.length?(n=+o,s()):n},e.domain=function(o){return arguments.length?(r(o),s()):r()},e.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),m=i(d),g,p;const x=o==null?10:+o;let v=[];if(!(n%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(p=h<0?g/a(-h):g*a(h),!(p<u)){if(p>d)break;v.push(p)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(p=h>0?g/a(-h):g*a(h),!(p<u)){if(p>d)break;v.push(p)}v.length*2<x&&(v=I1(u,d,x))}else v=I1(h,m,Math.min(m-h,x)).map(a);return f?v.reverse():v},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=qf(l)).precision==null&&(l.trim=!0),l=q2(l)),o===1/0)return l;const u=Math.max(1,n*o/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},e.nice=()=>r(VD(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function HD(){const t=G2(Ux()).domain([1,10]);return t.copy=()=>Gh(t,HD()).base(t.base()),hi.apply(t,arguments),t}function rP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function nP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function K2(t){var e=1,r=t(rP(e),nP(e));return r.constant=function(n){return arguments.length?t(rP(e=+n),nP(e)):e},Ys(r)}function qD(){var t=K2(Ux());return t.copy=function(){return Gh(t,qD()).constant(t.constant())},hi.apply(t,arguments)}function iP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Use(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function zse(t){return t<0?-t*t:t*t}function Y2(t){var e=t(an,an),r=1;function n(){return r===1?t(an,an):r===.5?t(Use,zse):t(iP(r),iP(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Ys(e)}function X2(){var t=Y2(Ux());return t.copy=function(){return Gh(t,X2()).exponent(t.exponent())},hi.apply(t,arguments),t}function Wse(){return X2.apply(null,arguments).exponent(.5)}function aP(t){return Math.sign(t)*t*t}function Vse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function GD(){var t=V2(),e=[0,1],r=!1,n;function i(a){var s=Vse(t(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return t.invert(aP(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Dp)).map(aP)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return GD(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},hi.apply(i,arguments),Ys(i)}function KD(){var t=[],e=[],r=[],n;function i(){var s=0,o=Math.max(1,e.length);for(r=new Array(o-1);++s<o;)r[s-1]=Yae(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:e[Hh(r,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:t[0],o<r.length?r[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort($s),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return KD().domain(t).range(e).unknown(n)},hi.apply(a,arguments)}function YD(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[Hh(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return YD().domain([t,e]).range(i).unknown(a)},hi.apply(Ys(s),arguments)}function XD(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[Hh(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return XD().domain(t).range(e).unknown(r)},hi.apply(i,arguments)}const wy=new Date,_y=new Date;function cr(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},i.filter=a=>cr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),r&&(i.count=(a,s)=>(wy.setTime(+a),_y.setTime(+s),t(wy),t(_y),Math.floor(r(wy,_y))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Rp=cr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Rp.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?cr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Rp);Rp.range;const Na=1e3,ni=Na*60,ja=ni*60,Ba=ja*24,Q2=Ba*7,sP=Ba*30,Sy=Ba*365,ko=cr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Na)},(t,e)=>(e-t)/Na,t=>t.getUTCSeconds());ko.range;const J2=cr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Na)},(t,e)=>{t.setTime(+t+e*ni)},(t,e)=>(e-t)/ni,t=>t.getMinutes());J2.range;const Z2=cr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ni)},(t,e)=>(e-t)/ni,t=>t.getUTCMinutes());Z2.range;const eS=cr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Na-t.getMinutes()*ni)},(t,e)=>{t.setTime(+t+e*ja)},(t,e)=>(e-t)/ja,t=>t.getHours());eS.range;const tS=cr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ja)},(t,e)=>(e-t)/ja,t=>t.getUTCHours());tS.range;const Kh=cr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ni)/Ba,t=>t.getDate()-1);Kh.range;const zx=cr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ba,t=>t.getUTCDate()-1);zx.range;const QD=cr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ba,t=>Math.floor(t/Ba));QD.range;function ll(t){return cr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ni)/Q2)}const Wx=ll(0),Fp=ll(1),Hse=ll(2),qse=ll(3),Fc=ll(4),Gse=ll(5),Kse=ll(6);Wx.range;Fp.range;Hse.range;qse.range;Fc.range;Gse.range;Kse.range;function cl(t){return cr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/Q2)}const Vx=cl(0),Lp=cl(1),Yse=cl(2),Xse=cl(3),Lc=cl(4),Qse=cl(5),Jse=cl(6);Vx.range;Lp.range;Yse.range;Xse.range;Lc.range;Qse.range;Jse.range;const rS=cr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());rS.range;const nS=cr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());nS.range;const Ua=cr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ua.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:cr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Ua.range;const za=cr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());za.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:cr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});za.range;function JD(t,e,r,n,i,a){const s=[[ko,1,Na],[ko,5,5*Na],[ko,15,15*Na],[ko,30,30*Na],[a,1,ni],[a,5,5*ni],[a,15,15*ni],[a,30,30*ni],[i,1,ja],[i,3,3*ja],[i,6,6*ja],[i,12,12*ja],[n,1,Ba],[n,2,2*Ba],[r,1,Q2],[e,1,sP],[e,3,3*sP],[t,1,Sy]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:l(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function l(u,d,f){const h=Math.abs(d-u)/f,m=L2(([,,x])=>x).right(s,h);if(m===s.length)return t.every(F1(u/Sy,d/Sy,f));if(m===0)return Rp.every(Math.max(F1(u,d,f),1));const[g,p]=s[h/s[m-1][2]<s[m][2]/h?m-1:m];return g.every(p)}return[o,l]}const[Zse,eoe]=JD(za,nS,Vx,QD,tS,Z2),[toe,roe]=JD(Ua,rS,Wx,Kh,eS,J2);function Ny(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jy(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function nd(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function noe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=id(i),d=ad(i),f=id(a),h=ad(a),m=id(s),g=ad(s),p=id(o),x=ad(o),v=id(l),b=ad(l),y={a:L,A:R,b:z,B:J,c:null,d:fP,e:fP,f:Eoe,g:Ioe,G:Foe,H:Soe,I:Noe,j:joe,L:ZD,m:Toe,M:Poe,p:W,q:C,Q:pP,s:gP,S:koe,u:Aoe,U:Ooe,V:Coe,w:Moe,W:Doe,x:null,X:null,y:$oe,Y:Roe,Z:Loe,"%":mP},_={a:G,A:Y,b:I,B:Q,c:null,d:hP,e:hP,f:Woe,g:Zoe,G:tle,H:Boe,I:Uoe,j:zoe,L:t$,m:Voe,M:Hoe,p:fe,q:me,Q:pP,s:gP,S:qoe,u:Goe,U:Koe,V:Yoe,w:Xoe,W:Qoe,x:null,X:null,y:Joe,Y:ele,Z:rle,"%":mP},w={a:P,A,b:k,B:F,c:H,d:uP,e:uP,f:yoe,g:cP,G:lP,H:dP,I:dP,j:poe,L:voe,m:moe,M:goe,p:T,q:hoe,Q:woe,s:_oe,S:xoe,u:loe,U:coe,V:uoe,w:ooe,W:doe,x:M,X:O,y:cP,Y:lP,Z:foe,"%":boe};y.x=N(r,y),y.X=N(n,y),y.c=N(e,y),_.x=N(r,_),_.X=N(n,_),_.c=N(e,_);function N(ee,le){return function(te){var Z=[],ke=-1,Ee=0,et=ee.length,Re,we,Dt;for(te instanceof Date||(te=new Date(+te));++ke<et;)ee.charCodeAt(ke)===37&&(Z.push(ee.slice(Ee,ke)),(we=oP[Re=ee.charAt(++ke)])!=null?Re=ee.charAt(++ke):we=Re==="e"?" ":"0",(Dt=le[Re])&&(Re=Dt(te,we)),Z.push(Re),Ee=ke+1);return Z.push(ee.slice(Ee,ke)),Z.join("")}}function S(ee,le){return function(te){var Z=nd(1900,void 0,1),ke=E(Z,ee,te+="",0),Ee,et;if(ke!=te.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(Ee=jy(nd(Z.y,0,1)),et=Ee.getUTCDay(),Ee=et>4||et===0?Lp.ceil(Ee):Lp(Ee),Ee=zx.offset(Ee,(Z.V-1)*7),Z.y=Ee.getUTCFullYear(),Z.m=Ee.getUTCMonth(),Z.d=Ee.getUTCDate()+(Z.w+6)%7):(Ee=Ny(nd(Z.y,0,1)),et=Ee.getDay(),Ee=et>4||et===0?Fp.ceil(Ee):Fp(Ee),Ee=Kh.offset(Ee,(Z.V-1)*7),Z.y=Ee.getFullYear(),Z.m=Ee.getMonth(),Z.d=Ee.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),et="Z"in Z?jy(nd(Z.y,0,1)).getUTCDay():Ny(nd(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(et+5)%7:Z.w+Z.U*7-(et+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,jy(Z)):Ny(Z)}}function E(ee,le,te,Z){for(var ke=0,Ee=le.length,et=te.length,Re,we;ke<Ee;){if(Z>=et)return-1;if(Re=le.charCodeAt(ke++),Re===37){if(Re=le.charAt(ke++),we=w[Re in oP?le.charAt(ke++):Re],!we||(Z=we(ee,te,Z))<0)return-1}else if(Re!=te.charCodeAt(Z++))return-1}return Z}function T(ee,le,te){var Z=u.exec(le.slice(te));return Z?(ee.p=d.get(Z[0].toLowerCase()),te+Z[0].length):-1}function P(ee,le,te){var Z=m.exec(le.slice(te));return Z?(ee.w=g.get(Z[0].toLowerCase()),te+Z[0].length):-1}function A(ee,le,te){var Z=f.exec(le.slice(te));return Z?(ee.w=h.get(Z[0].toLowerCase()),te+Z[0].length):-1}function k(ee,le,te){var Z=v.exec(le.slice(te));return Z?(ee.m=b.get(Z[0].toLowerCase()),te+Z[0].length):-1}function F(ee,le,te){var Z=p.exec(le.slice(te));return Z?(ee.m=x.get(Z[0].toLowerCase()),te+Z[0].length):-1}function H(ee,le,te){return E(ee,e,le,te)}function M(ee,le,te){return E(ee,r,le,te)}function O(ee,le,te){return E(ee,n,le,te)}function L(ee){return s[ee.getDay()]}function R(ee){return a[ee.getDay()]}function z(ee){return l[ee.getMonth()]}function J(ee){return o[ee.getMonth()]}function W(ee){return i[+(ee.getHours()>=12)]}function C(ee){return 1+~~(ee.getMonth()/3)}function G(ee){return s[ee.getUTCDay()]}function Y(ee){return a[ee.getUTCDay()]}function I(ee){return l[ee.getUTCMonth()]}function Q(ee){return o[ee.getUTCMonth()]}function fe(ee){return i[+(ee.getUTCHours()>=12)]}function me(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var le=N(ee+="",y);return le.toString=function(){return ee},le},parse:function(ee){var le=S(ee+="",!1);return le.toString=function(){return ee},le},utcFormat:function(ee){var le=N(ee+="",_);return le.toString=function(){return ee},le},utcParse:function(ee){var le=S(ee+="",!0);return le.toString=function(){return ee},le}}}var oP={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,ioe=/^%/,aoe=/[\\^$*+?|[\]().{}]/g;function Ze(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function soe(t){return t.replace(aoe,"\\$&")}function id(t){return new RegExp("^(?:"+t.map(soe).join("|")+")","i")}function ad(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function ooe(t,e,r){var n=wr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function loe(t,e,r){var n=wr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function coe(t,e,r){var n=wr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function uoe(t,e,r){var n=wr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function doe(t,e,r){var n=wr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function lP(t,e,r){var n=wr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function cP(t,e,r){var n=wr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function foe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function hoe(t,e,r){var n=wr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function moe(t,e,r){var n=wr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function uP(t,e,r){var n=wr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function poe(t,e,r){var n=wr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function dP(t,e,r){var n=wr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function goe(t,e,r){var n=wr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function xoe(t,e,r){var n=wr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function voe(t,e,r){var n=wr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function yoe(t,e,r){var n=wr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function boe(t,e,r){var n=ioe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function woe(t,e,r){var n=wr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function _oe(t,e,r){var n=wr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function fP(t,e){return Ze(t.getDate(),e,2)}function Soe(t,e){return Ze(t.getHours(),e,2)}function Noe(t,e){return Ze(t.getHours()%12||12,e,2)}function joe(t,e){return Ze(1+Kh.count(Ua(t),t),e,3)}function ZD(t,e){return Ze(t.getMilliseconds(),e,3)}function Eoe(t,e){return ZD(t,e)+"000"}function Toe(t,e){return Ze(t.getMonth()+1,e,2)}function Poe(t,e){return Ze(t.getMinutes(),e,2)}function koe(t,e){return Ze(t.getSeconds(),e,2)}function Aoe(t){var e=t.getDay();return e===0?7:e}function Ooe(t,e){return Ze(Wx.count(Ua(t)-1,t),e,2)}function e$(t){var e=t.getDay();return e>=4||e===0?Fc(t):Fc.ceil(t)}function Coe(t,e){return t=e$(t),Ze(Fc.count(Ua(t),t)+(Ua(t).getDay()===4),e,2)}function Moe(t){return t.getDay()}function Doe(t,e){return Ze(Fp.count(Ua(t)-1,t),e,2)}function $oe(t,e){return Ze(t.getFullYear()%100,e,2)}function Ioe(t,e){return t=e$(t),Ze(t.getFullYear()%100,e,2)}function Roe(t,e){return Ze(t.getFullYear()%1e4,e,4)}function Foe(t,e){var r=t.getDay();return t=r>=4||r===0?Fc(t):Fc.ceil(t),Ze(t.getFullYear()%1e4,e,4)}function Loe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ze(e/60|0,"0",2)+Ze(e%60,"0",2)}function hP(t,e){return Ze(t.getUTCDate(),e,2)}function Boe(t,e){return Ze(t.getUTCHours(),e,2)}function Uoe(t,e){return Ze(t.getUTCHours()%12||12,e,2)}function zoe(t,e){return Ze(1+zx.count(za(t),t),e,3)}function t$(t,e){return Ze(t.getUTCMilliseconds(),e,3)}function Woe(t,e){return t$(t,e)+"000"}function Voe(t,e){return Ze(t.getUTCMonth()+1,e,2)}function Hoe(t,e){return Ze(t.getUTCMinutes(),e,2)}function qoe(t,e){return Ze(t.getUTCSeconds(),e,2)}function Goe(t){var e=t.getUTCDay();return e===0?7:e}function Koe(t,e){return Ze(Vx.count(za(t)-1,t),e,2)}function r$(t){var e=t.getUTCDay();return e>=4||e===0?Lc(t):Lc.ceil(t)}function Yoe(t,e){return t=r$(t),Ze(Lc.count(za(t),t)+(za(t).getUTCDay()===4),e,2)}function Xoe(t){return t.getUTCDay()}function Qoe(t,e){return Ze(Lp.count(za(t)-1,t),e,2)}function Joe(t,e){return Ze(t.getUTCFullYear()%100,e,2)}function Zoe(t,e){return t=r$(t),Ze(t.getUTCFullYear()%100,e,2)}function ele(t,e){return Ze(t.getUTCFullYear()%1e4,e,4)}function tle(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Lc(t):Lc.ceil(t),Ze(t.getUTCFullYear()%1e4,e,4)}function rle(){return"+0000"}function mP(){return"%"}function pP(t){return+t}function gP(t){return Math.floor(+t/1e3)}var jl,n$,i$;nle({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nle(t){return jl=noe(t),n$=jl.format,jl.parse,i$=jl.utcFormat,jl.utcParse,jl}function ile(t){return new Date(t)}function ale(t){return t instanceof Date?+t:+new Date(+t)}function iS(t,e,r,n,i,a,s,o,l,u){var d=V2(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),p=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),b=u("%b %d"),y=u("%B"),_=u("%Y");function w(N){return(l(N)<N?m:o(N)<N?g:s(N)<N?p:a(N)<N?x:n(N)<N?i(N)<N?v:b:r(N)<N?y:_)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?h(Array.from(N,ale)):h().map(ile)},d.ticks=function(N){var S=h();return t(S[0],S[S.length-1],N??10)},d.tickFormat=function(N,S){return S==null?w:u(S)},d.nice=function(N){var S=h();return(!N||typeof N.range!="function")&&(N=e(S[0],S[S.length-1],N??10)),N?h(VD(S,N)):d},d.copy=function(){return Gh(d,iS(t,e,r,n,i,a,s,o,l,u))},d}function sle(){return hi.apply(iS(toe,roe,Ua,rS,Wx,Kh,eS,J2,ko,n$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ole(){return hi.apply(iS(Zse,eoe,za,nS,Vx,zx,tS,Z2,ko,i$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hx(){var t=0,e=1,r,n,i,a,s=an,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,s=f(m,g),u):[s(0),s(1)]}}return u.range=d(Tu),u.rangeRound=d(W2),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),u}}function Xs(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function a$(){var t=Ys(Hx()(an));return t.copy=function(){return Xs(t,a$())},Za.apply(t,arguments)}function s$(){var t=G2(Hx()).domain([1,10]);return t.copy=function(){return Xs(t,s$()).base(t.base())},Za.apply(t,arguments)}function o$(){var t=K2(Hx());return t.copy=function(){return Xs(t,o$()).constant(t.constant())},Za.apply(t,arguments)}function aS(){var t=Y2(Hx());return t.copy=function(){return Xs(t,aS()).exponent(t.exponent())},Za.apply(t,arguments)}function lle(){return aS.apply(null,arguments).exponent(.5)}function l$(){var t=[],e=an;function r(n){if(n!=null&&!isNaN(n=+n))return e((Hh(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort($s),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>Kae(t,a/n))},r.copy=function(){return l$(e).domain(t)},Za.apply(r,arguments)}function qx(){var t=0,e=.5,r=1,n=1,i,a,s,o,l,u=an,d,f=!1,h;function m(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-a)*(n*p<n*a?o:l),u(f?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([t,e,r]=p,i=d(t=+t),a=d(e=+e),s=d(r=+r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,m):[t,e,r]},m.clamp=function(p){return arguments.length?(f=!!p,m):f},m.interpolator=function(p){return arguments.length?(u=p,m):u};function g(p){return function(x){var v,b,y;return arguments.length?([v,b,y]=x,u=bse(p,[v,b,y]),m):[u(0),u(.5),u(1)]}}return m.range=g(Tu),m.rangeRound=g(W2),m.unknown=function(p){return arguments.length?(h=p,m):h},function(p){return d=p,i=p(t),a=p(e),s=p(r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,m}}function c$(){var t=Ys(qx()(an));return t.copy=function(){return Xs(t,c$())},Za.apply(t,arguments)}function u$(){var t=G2(qx()).domain([.1,1,10]);return t.copy=function(){return Xs(t,u$()).base(t.base())},Za.apply(t,arguments)}function d$(){var t=K2(qx());return t.copy=function(){return Xs(t,d$()).constant(t.constant())},Za.apply(t,arguments)}function sS(){var t=Y2(qx());return t.copy=function(){return Xs(t,sS()).exponent(t.exponent())},Za.apply(t,arguments)}function cle(){return sS.apply(null,arguments).exponent(.5)}const xP=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:zf,scaleDiverging:c$,scaleDivergingLog:u$,scaleDivergingPow:sS,scaleDivergingSqrt:cle,scaleDivergingSymlog:d$,scaleIdentity:WD,scaleImplicit:L1,scaleLinear:Ip,scaleLog:HD,scaleOrdinal:B2,scalePoint:Wd,scalePow:X2,scaleQuantile:KD,scaleQuantize:YD,scaleRadial:GD,scaleSequential:a$,scaleSequentialLog:s$,scaleSequentialPow:aS,scaleSequentialQuantile:l$,scaleSequentialSqrt:lle,scaleSequentialSymlog:o$,scaleSqrt:Wse,scaleSymlog:qD,scaleThreshold:XD,scaleTime:sle,scaleUtc:ole,tickFormat:zD},Symbol.toStringTag,{value:"Module"}));var ule=vu;function dle(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],s=e(a);if(s!=null&&(o===void 0?s===s&&!ule(s):r(s,o)))var o=s,l=a}return l}var Gx=dle;function fle(t,e){return t>e}var f$=fle,hle=Gx,mle=f$,ple=Eu;function gle(t){return t&&t.length?hle(t,ple,mle):void 0}var xle=gle;const Kx=at(xle);function vle(t,e){return t<e}var h$=vle,yle=Gx,ble=h$,wle=Eu;function _le(t){return t&&t.length?yle(t,wle,ble):void 0}var Sle=_le;const Yx=at(Sle);var Nle=b2,jle=la,Ele=wD,Tle=jn;function Ple(t,e){var r=Tle(t)?Nle:Ele;return r(t,jle(e))}var kle=Ple,Ale=yD,Ole=kle;function Cle(t,e){return Ale(Ole(t,e),1)}var Mle=Cle;const Dle=at(Mle);var $le=$2;function Ile(t,e){return $le(t,e)}var Rle=Ile;const Yh=at(Rle);var Pu=1e9,Fle={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lS,Mt=!0,ci="[DecimalError] ",Ro=ci+"Invalid argument: ",oS=ci+"Exponent out of range: ",ku=Math.floor,po=Math.pow,Lle=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rn,fr=1e7,Tt=7,m$=9007199254740991,Bp=ku(m$/Tt),Pe={};Pe.absoluteValue=Pe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Pe.comparedTo=Pe.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Pe.decimalPlaces=Pe.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Tt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Pe.dividedBy=Pe.div=function(t){return Oa(this,new this.constructor(t))};Pe.dividedToIntegerBy=Pe.idiv=function(t){var e=this,r=e.constructor;return gt(Oa(e,new r(t),0,1),r.precision)};Pe.equals=Pe.eq=function(t){return!this.cmp(t)};Pe.exponent=function(){return Zt(this)};Pe.greaterThan=Pe.gt=function(t){return this.cmp(t)>0};Pe.greaterThanOrEqualTo=Pe.gte=function(t){return this.cmp(t)>=0};Pe.isInteger=Pe.isint=function(){return this.e>this.d.length-2};Pe.isNegative=Pe.isneg=function(){return this.s<0};Pe.isPositive=Pe.ispos=function(){return this.s>0};Pe.isZero=function(){return this.s===0};Pe.lessThan=Pe.lt=function(t){return this.cmp(t)<0};Pe.lessThanOrEqualTo=Pe.lte=function(t){return this.cmp(t)<1};Pe.logarithm=Pe.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Rn))throw Error(ci+"NaN");if(r.s<1)throw Error(ci+(r.s?"NaN":"-Infinity"));return r.eq(Rn)?new n(0):(Mt=!1,e=Oa(Gf(r,a),Gf(t,a),a),Mt=!0,gt(e,i))};Pe.minus=Pe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?x$(e,t):p$(e,(t.s=-t.s,t))};Pe.modulo=Pe.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(ci+"NaN");return r.s?(Mt=!1,e=Oa(r,t,0,1).times(t),Mt=!0,r.minus(e)):gt(new n(r),i)};Pe.naturalExponential=Pe.exp=function(){return g$(this)};Pe.naturalLogarithm=Pe.ln=function(){return Gf(this)};Pe.negated=Pe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Pe.plus=Pe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?p$(e,t):x$(e,(t.s=-t.s,t))};Pe.precision=Pe.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ro+t);if(e=Zt(i)+1,n=i.d.length-1,r=n*Tt+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Pe.squareRoot=Pe.sqrt=function(){var t,e,r,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(ci+"NaN")}for(t=Zt(o),Mt=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Ki(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ku((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(a=n,n=a.plus(Oa(o,a,s+2)).times(.5),Ki(a.d).slice(0,s)===(e=Ki(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(gt(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(e!="9999")break;s+=4}return Mt=!0,gt(n,r)};Pe.times=Pe.mul=function(t){var e,r,n,i,a,s,o,l,u,d=this,f=d.constructor,h=d.d,m=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,l=h.length,u=m.length,l<u&&(a=h,h=m,m=a,s=l,l=u,u=s),a=[],s=l+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=a[i]+m[n]*h[i-n-1]+e,a[i--]=o%fr|0,e=o/fr|0;a[i]=(a[i]+e)%fr|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,Mt?gt(t,f.precision):t};Pe.toDecimalPlaces=Pe.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(na(t,0,Pu),e===void 0?e=n.rounding:na(e,0,8),gt(r,t+Zt(r)+1,e))};Pe.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Yo(n,!0):(na(t,0,Pu),e===void 0?e=i.rounding:na(e,0,8),n=gt(new i(n),t+1,e),r=Yo(n,!0,t+1)),r};Pe.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?Yo(i):(na(t,0,Pu),e===void 0?e=a.rounding:na(e,0,8),n=gt(new a(i),t+Zt(i)+1,e),r=Yo(n.abs(),!1,t+Zt(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Pe.toInteger=Pe.toint=function(){var t=this,e=t.constructor;return gt(new e(t),Zt(t)+1,e.rounding)};Pe.toNumber=function(){return+this};Pe.toPower=Pe.pow=function(t){var e,r,n,i,a,s,o=this,l=o.constructor,u=12,d=+(t=new l(t));if(!t.s)return new l(Rn);if(o=new l(o),!o.s){if(t.s<1)throw Error(ci+"Infinity");return o}if(o.eq(Rn))return o;if(n=l.precision,t.eq(Rn))return gt(o,n);if(e=t.e,r=t.d.length-1,s=e>=r,a=o.s,s){if((r=d<0?-d:d)<=m$){for(i=new l(Rn),e=Math.ceil(n/Tt+4),Mt=!1;r%2&&(i=i.times(o),yP(i.d,e)),r=ku(r/2),r!==0;)o=o.times(o),yP(o.d,e);return Mt=!0,t.s<0?new l(Rn).div(i):gt(i,n)}}else if(a<0)throw Error(ci+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,o.s=1,Mt=!1,i=t.times(Gf(o,n+u)),Mt=!0,i=g$(i),i.s=a,i};Pe.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=Zt(i),n=Yo(i,r<=a.toExpNeg||r>=a.toExpPos)):(na(t,1,Pu),e===void 0?e=a.rounding:na(e,0,8),i=gt(new a(i),t,e),r=Zt(i),n=Yo(i,t<=r||r<=a.toExpNeg,t)),n};Pe.toSignificantDigits=Pe.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(na(t,1,Pu),e===void 0?e=n.rounding:na(e,0,8)),gt(new n(r),t,e)};Pe.toString=Pe.valueOf=Pe.val=Pe.toJSON=Pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Zt(t),r=t.constructor;return Yo(t,e<=r.toExpNeg||e>=r.toExpPos)};function p$(t,e){var r,n,i,a,s,o,l,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Mt?gt(e,f):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=u.length):(n=u,i=s,o=l.length),s=Math.ceil(f/Tt),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,n=u,u=l,l=n),r=0;a;)r=(l[--a]=l[a]+u[a]+r)/fr|0,l[a]%=fr;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,Mt?gt(e,f):e}function na(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ro+t)}function Ki(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=Tt-n.length,r&&(a+=hs(r)),a+=n;s=t[e],n=s+"",r=Tt-n.length,r&&(a+=hs(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Oa=function(){function t(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%fr|0,s=a/fr|0;return s&&n.unshift(s),n}function e(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*fr+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,u,d,f,h,m,g,p,x,v,b,y,_,w,N,S,E,T=n.constructor,P=n.s==i.s?1:-1,A=n.d,k=i.d;if(!n.s)return new T(n);if(!i.s)throw Error(ci+"Division by zero");for(l=n.e-i.e,S=k.length,w=A.length,m=new T(P),g=m.d=[],u=0;k[u]==(A[u]||0);)++u;if(k[u]>(A[u]||0)&&--l,a==null?b=a=T.precision:s?b=a+(Zt(n)-Zt(i))+1:b=a,b<0)return new T(0);if(b=b/Tt+2|0,u=0,S==1)for(d=0,k=k[0],b++;(u<w||d)&&b--;u++)y=d*fr+(A[u]||0),g[u]=y/k|0,d=y%k|0;else{for(d=fr/(k[0]+1)|0,d>1&&(k=t(k,d),A=t(A,d),S=k.length,w=A.length),_=S,p=A.slice(0,S),x=p.length;x<S;)p[x++]=0;E=k.slice(),E.unshift(0),N=k[0],k[1]>=fr/2&&++N;do d=0,o=e(k,p,S,x),o<0?(v=p[0],S!=x&&(v=v*fr+(p[1]||0)),d=v/N|0,d>1?(d>=fr&&(d=fr-1),f=t(k,d),h=f.length,x=p.length,o=e(f,p,h,x),o==1&&(d--,r(f,S<h?E:k,h))):(d==0&&(o=d=1),f=k.slice()),h=f.length,h<x&&f.unshift(0),r(p,f,x),o==-1&&(x=p.length,o=e(k,p,S,x),o<1&&(d++,r(p,S<x?E:k,x))),x=p.length):o===0&&(d++,p=[0]),g[u++]=d,o&&p[0]?p[x++]=A[_]||0:(p=[A[_]],x=1);while((_++<w||p[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=l,gt(m,s?a+Zt(m)+1:a)}}();function g$(t,e){var r,n,i,a,s,o,l=0,u=0,d=t.constructor,f=d.precision;if(Zt(t)>16)throw Error(oS+Zt(t));if(!t.s)return new d(Rn);for(e==null?(Mt=!1,o=f):o=e,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(n=Math.log(po(2,u))/Math.LN10*2+5|0,o+=n,r=i=a=new d(Rn),d.precision=o;;){if(i=gt(i.times(t),o),r=r.times(++l),s=a.plus(Oa(i,r,o)),Ki(s.d).slice(0,o)===Ki(a.d).slice(0,o)){for(;u--;)a=gt(a.times(a),o);return d.precision=f,e==null?(Mt=!0,gt(a,f)):a}a=s}}function Zt(t){for(var e=t.e*Tt,r=t.d[0];r>=10;r/=10)e++;return e}function Ey(t,e,r){if(e>t.LN10.sd())throw Mt=!0,r&&(t.precision=r),Error(ci+"LN10 precision limit exceeded");return gt(new t(t.LN10),e)}function hs(t){for(var e="";t--;)e+="0";return e}function Gf(t,e){var r,n,i,a,s,o,l,u,d,f=1,h=10,m=t,g=m.d,p=m.constructor,x=p.precision;if(m.s<1)throw Error(ci+(m.s?"NaN":"-Infinity"));if(m.eq(Rn))return new p(0);if(e==null?(Mt=!1,u=x):u=e,m.eq(10))return e==null&&(Mt=!0),Ey(p,u);if(u+=h,p.precision=u,r=Ki(g),n=r.charAt(0),a=Zt(m),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=Ki(m.d),n=r.charAt(0),f++;a=Zt(m),n>1?(m=new p("0."+r),a++):m=new p(n+"."+r.slice(1))}else return l=Ey(p,u+2,x).times(a+""),m=Gf(new p(n+"."+r.slice(1)),u-h).plus(l),p.precision=x,e==null?(Mt=!0,gt(m,x)):m;for(o=s=m=Oa(m.minus(Rn),m.plus(Rn),u),d=gt(m.times(m),u),i=3;;){if(s=gt(s.times(d),u),l=o.plus(Oa(s,new p(i),u)),Ki(l.d).slice(0,u)===Ki(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(Ey(p,u+2,x).times(a+""))),o=Oa(o,new p(f),u),p.precision=x,e==null?(Mt=!0,gt(o,x)):o;o=l,i+=2}}function vP(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=ku(r/Tt),t.d=[],n=(r+1)%Tt,r<0&&(n+=Tt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Tt;n<i;)t.d.push(+e.slice(n,n+=Tt));e=e.slice(n),n=Tt-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Mt&&(t.e>Bp||t.e<-Bp))throw Error(oS+r)}else t.s=0,t.e=0,t.d=[0];return t}function gt(t,e,r){var n,i,a,s,o,l,u,d,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=Tt,i=e,u=f[d=0];else{if(d=Math.ceil((n+1)/Tt),a=f.length,d>=a)return t;for(u=a=f[d],s=1;a>=10;a/=10)s++;n%=Tt,i=n-Tt+s}if(r!==void 0&&(a=po(10,s-i-1),o=u/a%10|0,l=e<0||f[d+1]!==void 0||u%a,l=r<4?(o||l)&&(r==0||r==(t.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?u/po(10,s-i):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return l?(a=Zt(t),f.length=1,e=e-a-1,f[0]=po(10,(Tt-e%Tt)%Tt),t.e=ku(-e/Tt)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=po(10,Tt-n),f[d]=i>0?(u/po(10,s-i)%po(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==fr&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=fr)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Mt&&(t.e>Bp||t.e<-Bp))throw Error(oS+Zt(t));return t}function x$(t,e){var r,n,i,a,s,o,l,u,d,f,h=t.constructor,m=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Mt?gt(e,m):e;if(l=t.d,f=e.d,n=e.e,u=t.e,l=l.slice(),s=u-n,s){for(d=s<0,d?(r=l,s=-s,o=f.length):(r=f,n=u,o=l.length),i=Math.max(Math.ceil(m/Tt),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}s=0}for(d&&(r=l,l=f,f=r,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=fr-1;--l[a],l[i]+=fr}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,Mt?gt(e,m):e):new h(0)}function Yo(t,e,r){var n,i=Zt(t),a=Ki(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+hs(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+hs(-i-1)+a,r&&(n=r-s)>0&&(a+=hs(n))):i>=s?(a+=hs(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+hs(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=hs(n))),t.s<0?"-"+a:a}function yP(t,e){if(t.length>e)return t.length=e,!0}function v$(t){var e,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Ro+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return vP(s,a.toString())}else if(typeof a!="string")throw Error(Ro+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Lle.test(a))vP(s,a);else throw Error(Ro+a)}if(i.prototype=Pe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=v$,i.config=i.set=Ble,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function Ble(t){if(!t||typeof t!="object")throw Error(ci+"Object expected");var e,r,n,i=["precision",1,Pu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(ku(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(Ro+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ro+r+": "+n);return this}var lS=v$(Fle);Rn=new lS(1);const mt=lS;function Ule(t){return Hle(t)||Vle(t)||Wle(t)||zle()}function zle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wle(t,e){if(t){if(typeof t=="string")return W1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W1(t,e)}}function Vle(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Hle(t){if(Array.isArray(t))return W1(t)}function W1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var qle=function(e){return e},y$={"@@functional/placeholder":!0},b$=function(e){return e===y$},bP=function(e){return function r(){return arguments.length===0||arguments.length===1&&b$(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Gle=function t(e,r){return e===1?r:bP(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==y$}).length;return s>=e?r.apply(void 0,i):t(e-s,bP(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=i.map(function(f){return b$(f)?l.shift():f});return r.apply(void 0,Ule(d).concat(l))}))})},Xx=function(e){return Gle(e.length,e)},V1=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},Kle=Xx(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Yle=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return qle;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},H1=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},w$=function(e){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r&&a.every(function(o,l){return o===r[l]})||(r=a,n=e.apply(void 0,a)),n}};function Xle(t){var e;return t===0?e=1:e=Math.floor(new mt(t).abs().log(10).toNumber())+1,e}function Qle(t,e,r){for(var n=new mt(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var Jle=Xx(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),Zle=Xx(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),ece=Xx(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Qx={rangeStep:Qle,getDigitCount:Xle,interpolateNumber:Jle,uninterpolateNumber:Zle,uninterpolateTruncation:ece};function q1(t){return nce(t)||rce(t)||_$(t)||tce()}function tce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rce(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function nce(t){if(Array.isArray(t))return G1(t)}function Kf(t,e){return sce(t)||ace(t,e)||_$(t,e)||ice()}function ice(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _$(t,e){if(t){if(typeof t=="string")return G1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G1(t,e)}}function G1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ace(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function sce(t){if(Array.isArray(t))return t}function S$(t){var e=Kf(t,2),r=e[0],n=e[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function N$(t,e,r){if(t.lte(0))return new mt(0);var n=Qx.getDigitCount(t.toNumber()),i=new mt(10).pow(n),a=t.div(i),s=n!==1?.05:.1,o=new mt(Math.ceil(a.div(s).toNumber())).add(r).mul(s),l=o.mul(i);return e?l:new mt(Math.ceil(l))}function oce(t,e,r){var n=1,i=new mt(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new mt(10).pow(Qx.getDigitCount(t)-1),i=new mt(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new mt(Math.floor(t)))}else t===0?i=new mt(Math.floor((e-1)/2)):r||(i=new mt(Math.floor(t)));var s=Math.floor((e-1)/2),o=Yle(Kle(function(l){return i.add(new mt(l-s).mul(n)).toNumber()}),V1);return o(0,e)}function j$(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var a=N$(new mt(e).sub(t).div(r-1),n,i),s;t<=0&&e>=0?s=new mt(0):(s=new mt(t).add(e).div(2),s=s.sub(new mt(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),l=Math.ceil(new mt(e).sub(s).div(a).toNumber()),u=o+l+1;return u>r?j$(t,e,r,n,i+1):(u<r&&(l=e>0?l+(r-u):l,o=e>0?o:o+(r-u)),{step:a,tickMin:s.sub(new mt(o).mul(a)),tickMax:s.add(new mt(l).mul(a))})}function lce(t){var e=Kf(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=S$([r,n]),l=Kf(o,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(q1(V1(0,i-1).map(function(){return 1/0}))):[].concat(q1(V1(0,i-1).map(function(){return-1/0})),[d]);return r>n?H1(f):f}if(u===d)return oce(u,i,a);var h=j$(u,d,s,a),m=h.step,g=h.tickMin,p=h.tickMax,x=Qx.rangeStep(g,p.add(new mt(.1).mul(m)),m);return r>n?H1(x):x}function cce(t,e){var r=Kf(t,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=S$([n,i]),o=Kf(s,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[n,i];if(l===u)return[l];var d=Math.max(e,2),f=N$(new mt(u).sub(l).div(d-1),a,0),h=[].concat(q1(Qx.rangeStep(new mt(l),new mt(u).sub(new mt(.99).mul(f)),f)),[u]);return n>i?H1(h):h}var uce=w$(lce),dce=w$(cce),fce="Invariant failed";function Xo(t,e){throw new Error(fce)}var hce=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Bc(t){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(t)}function Up(){return Up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Up.apply(this,arguments)}function mce(t,e){return vce(t)||xce(t,e)||gce(t,e)||pce()}function pce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gce(t,e){if(t){if(typeof t=="string")return wP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wP(t,e)}}function wP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xce(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function vce(t){if(Array.isArray(t))return t}function yce(t,e){if(t==null)return{};var r=bce(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bce(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function wce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P$(n.key),n)}}function Sce(t,e,r){return e&&_ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nce(t,e,r){return e=zp(e),jce(t,E$()?Reflect.construct(e,r||[],zp(t).constructor):e.apply(t,r))}function jce(t,e){if(e&&(Bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ece(t)}function Ece(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E$=function(){return!!t})()}function zp(t){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zp(t)}function Tce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K1(t,e)}function K1(t,e){return K1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},K1(t,e)}function T$(t,e,r){return e=P$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P$(t){var e=Pce(t,"string");return Bc(e)=="symbol"?e:e+""}function Pce(t,e){if(Bc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xh=function(t){function e(){return wce(this,e),Nce(this,e,arguments)}return Tce(e,t),Sce(e,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,s=n.width,o=n.dataKey,l=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=yce(n,hce),m=Me(h,!1);this.props.direction==="x"&&d.type!=="number"&&Xo();var g=l.map(function(p){var x=u(p,o),v=x.x,b=x.y,y=x.value,_=x.errorVal;if(!_)return null;var w=[],N,S;if(Array.isArray(_)){var E=mce(_,2);N=E[0],S=E[1]}else N=S=_;if(a==="vertical"){var T=d.scale,P=b+i,A=P+s,k=P-s,F=T(y-N),H=T(y+S);w.push({x1:H,y1:A,x2:H,y2:k}),w.push({x1:F,y1:P,x2:H,y2:P}),w.push({x1:F,y1:A,x2:F,y2:k})}else if(a==="horizontal"){var M=f.scale,O=v+i,L=O-s,R=O+s,z=M(y-N),J=M(y+S);w.push({x1:L,y1:J,x2:R,y2:J}),w.push({x1:O,y1:z,x2:O,y2:J}),w.push({x1:L,y1:z,x2:R,y2:z})}return X.createElement(Je,Up({className:"recharts-errorBar",key:"bar-".concat(w.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},m),w.map(function(W){return X.createElement("line",Up({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return X.createElement(Je,{className:"recharts-errorBars"},g)}}])}(X.Component);T$(Xh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});T$(Xh,"displayName","ErrorBar");function Yf(t){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(t)}function _P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ro(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_P(Object(r),!0).forEach(function(n){kce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kce(t,e,r){return e=Ace(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ace(t){var e=Oce(t,"string");return Yf(e)=="symbol"?e:e+""}function Oce(t,e){if(Yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k$=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=On(r,uc);if(!s)return null;var o=uc.defaultProps,l=o!==void 0?ro(ro({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(p){return{type:s.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?ro(ro({},h),f.props):{},g=m.dataKey,p=m.name,x=m.legendType,v=m.hide;return{inactive:v,dataKey:g,type:l.iconType||x||"square",color:cS(f),value:p||g,payload:m}}),ro(ro(ro({},l),uc.getWithHeight(s,i)),{},{payload:u,item:s})};function Xf(t){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(t)}function SP(t){return $ce(t)||Dce(t)||Mce(t)||Cce()}function Cce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mce(t,e){if(t){if(typeof t=="string")return Y1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y1(t,e)}}function Dce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ce(t){if(Array.isArray(t))return Y1(t)}function Y1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function NP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NP(Object(r),!0).forEach(function(n){fc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fc(t,e,r){return e=Ice(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ice(t){var e=Rce(t,"string");return Xf(e)=="symbol"?e:e+""}function Rce(t,e){if(Xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sr(t,e,r){return Be(t)||Be(e)?r:lr(e)?Bn(t,e,r):Ie(e)?e(t):r}function Vd(t,e,r,n){var i=Dle(t,function(o){return sr(o,e)});if(r==="number"){var a=i.filter(function(o){return be(o)||parseFloat(o)});return a.length?[Yx(a),Kx(a)]:[1/0,-1/0]}var s=n?i.filter(function(o){return!Be(o)}):i;return s.map(function(o){return lr(o)||o instanceof Date?o:""})}var Fce=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,f=i[u].coordinate,h=u>=o-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if(rn(f-d)!==rn(h-f)){var g=[];if(rn(h-f)===rn(l[1]-l[0])){m=h;var p=f+l[1]-l[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{m=d;var x=h+l[1]-l[0];g[0]=Math.min(f,(x+f)/2),g[1]=Math.max(f,(x+f)/2)}var v=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(e>v[0]&&e<=v[1]||e>=g[0]&&e<=g[1]){s=i[u].index;break}}else{var b=Math.min(d,h),y=Math.max(d,h);if(e>(b+f)/2&&e<=(y+f)/2){s=i[u].index;break}}}else for(var _=0;_<o;_++)if(_===0&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<o-1&&e>(n[_].coordinate+n[_-1].coordinate)/2&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_===o-1&&e>(n[_].coordinate+n[_-1].coordinate)/2){s=n[_].index;break}return s},cS=function(e){var r,n=e,i=n.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Wt(Wt({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},Lce=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var d=a[o[l]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var g=d[f[h]],p=g.items,x=g.cateAxisId,v=p.filter(function(S){return Aa(S.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,y=b!==void 0?Wt(Wt({},b),v[0].props):v[0].props,_=y.barSize,w=y[x];s[w]||(s[w]=[]);var N=Be(_)?r:_;s[w].push({item:v[0],stackList:v.slice(1),barSize:Be(N)?void 0:nn(N,n,0)})}}return s},Bce=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var u=nn(r,i,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var h=!1,m=i/l,g=s.reduce(function(_,w){return _+w.barSize||0},0);g+=(l-1)*u,g>=i&&(g-=(l-1)*u,u=0),g>=i&&m>0&&(h=!0,m*=.9,g=l*m);var p=(i-g)/2>>0,x={offset:p-u,size:0};d=s.reduce(function(_,w){var N={item:w.item,position:{offset:x.offset+x.size+u,size:h?m:w.barSize}},S=[].concat(SP(_),[N]);return x=S[S.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){S.push({item:E,position:x})}),S},f)}else{var v=nn(n,i,0,!0);i-2*v-(l-1)*u<=0&&(u=0);var b=(i-2*v-(l-1)*u)/l;b>1&&(b>>=0);var y=o===+o?Math.min(b,o):b;d=s.reduce(function(_,w,N){var S=[].concat(SP(_),[{item:w.item,position:{offset:v+(b+u)*N+(b-y)/2,size:y}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){S.push({item:E,position:S[S.length-1].position})}),S},f)}return d},Uce=function(e,r,n,i){var a=n.children,s=n.width,o=n.margin,l=s-(o.left||0)-(o.right||0),u=k$({children:a,legendWidth:l});if(u){var d=i||{},f=d.width,h=d.height,m=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&be(e[m]))return Wt(Wt({},e),{},fc({},m,e[m]+(f||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&be(e[g]))return Wt(Wt({},e),{},fc({},g,e[g]+(h||0)))}return e},zce=function(e,r,n){return Be(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},A$=function(e,r,n,i,a){var s=r.props.children,o=Un(s,Xh).filter(function(u){return zce(i,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=sr(d,n);if(Be(f))return u;var h=Array.isArray(f)?[Yx(f),Kx(f)]:[f,f],m=l.reduce(function(g,p){var x=sr(d,p,0),v=h[0]-Math.abs(Array.isArray(x)?x[0]:x),b=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(v,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},Wce=function(e,r,n,i,a){var s=r.map(function(o){return A$(e,o,n,a,i)}).filter(function(o){return!Be(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},O$=function(e,r,n,i,a){var s=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&A$(e,l,u,i)||Vd(e,u,n,a)});if(n==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,l.push(u[d]));return l},[])},C$=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},M$=function(e,r,n,i){if(i)return e.map(function(l){return l.coordinate});var a,s,o=e.map(function(l){return l.coordinate===r&&(a=!0),l.coordinate===n&&(s=!0),l.coordinate});return a||o.push(r),s||o.push(n),o},Ea=function(e,r,n){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?rn(o[0]-o[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=a?a.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return d.filter(function(f){return!Wh(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:a?a[f]:f,index:h,offset:u}})},Ty=new WeakMap,Bm=function(e,r){if(typeof r!="function")return e;Ty.has(e)||Ty.set(e,new WeakMap);var n=Ty.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},D$=function(e,r,n){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:zf(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Ip(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Wd(),realScaleType:"point"}:a==="category"?{scale:zf(),realScaleType:"band"}:{scale:Ip(),realScaleType:"linear"};if(zh(i)){var l="scale".concat(Dx(i));return{scale:(xP[l]||Wd)(),realScaleType:xP[l]?l:"point"}}return Ie(i)?{scale:i}:{scale:Wd(),realScaleType:"point"}},jP=1e-4,$$=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),a=Math.min(i[0],i[1])-jP,s=Math.max(i[0],i[1])+jP,o=e(r[0]),l=e(r[n-1]);(o<a||o>s||l<a||l>s)&&e.domain([r[0],r[n-1]])}},Vce=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},Hce=function(e,r){if(!r||r.length!==2||!be(r[0])||!be(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!be(e[0])||e[0]<n)&&(a[0]=n),(!be(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},qce=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0,o=0;o<r;++o){var l=Wh(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=a,e[o][n][1]=a+l,a=e[o][n][1]):(e[o][n][0]=s,e[o][n][1]=s+l,s=e[o][n][1])}},Gce=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0;s<r;++s){var o=Wh(e[s][n][1])?e[s][n][0]:e[s][n][1];o>=0?(e[s][n][0]=a,e[s][n][1]=a+o,a=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},Kce={sign:qce,expand:hX,none:Cc,silhouette:mX,wiggle:pX,positive:Gce},Yce=function(e,r,n){var i=r.map(function(o){return o.props.dataKey}),a=Kce[n],s=fX().keys(i).value(function(o,l){return+sr(o,l,0)}).order(b1).offset(a);return s(e)},Xce=function(e,r,n,i,a,s){if(!e)return null;var o=s?r.reverse():r,l={},u=o.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Wt(Wt({},h.type.defaultProps),h.props):h.props,p=g.stackId,x=g.hide;if(x)return f;var v=g[n],b=f[v]||{hasStack:!1,stackGroups:{}};if(lr(p)){var y=b.stackGroups[p]||{numericAxisId:n,cateAxisId:i,items:[]};y.items.push(h),b.hasStack=!0,b.stackGroups[p]=y}else b.stackGroups[Su("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return Wt(Wt({},f),{},fc({},v,b))},l),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,x){var v=m.stackGroups[x];return Wt(Wt({},p),{},fc({},x,{numericAxisId:n,cateAxisId:i,items:v.items,stackedData:Yce(e,v.items,a)}))},g)}return Wt(Wt({},f),{},fc({},h,m))},d)},I$=function(e,r){var n=r.realScaleType,i=r.type,a=r.tickCount,s=r.originalDomain,o=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=uce(u,a,o);return e.domain([Yx(d),Kx(d)]),{niceTicks:d}}if(a&&i==="number"){var f=e.domain(),h=dce(f,a,o);return{niceTicks:h}}return null};function EP(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Be(i[e.dataKey])){var o=pp(r,"value",i[e.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=sr(i,Be(s)?e.dataKey:s);return Be(l)?null:e.scale(l)}var TP=function(e){var r=e.axis,n=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(r.type==="category")return n[o]?n[o].coordinate+i:null;var l=sr(s,r.dataKey,r.domain[o]);return Be(l)?null:r.scale(l)-a/2+i},Qce=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},Jce=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Wt(Wt({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(lr(a)){var s=r[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},Zce=function(e){return e.reduce(function(r,n){return[Yx(n.concat([r[0]]).filter(be)),Kx(n.concat([r[1]]).filter(be))]},[1/0,-1/0])},R$=function(e,r,n){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,l=o.reduce(function(u,d){var f=Zce(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},PP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,X1=function(e,r,n){if(Ie(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(be(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(PP.test(e[0])){var a=+PP.exec(e[0])[1];i[0]=r[0]-a}else Ie(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(be(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(kP.test(e[1])){var s=+kP.exec(e[1])[1];i[1]=r[1]+s}else Ie(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},Wp=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var a=R2(r,function(f){return f.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],d=a[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},AP=function(e,r,n){return!e||!e.length||Yh(e,Bn(n,"type.defaultProps.domain"))?r:e},F$=function(e,r){var n=e.type.defaultProps?Wt(Wt({},e.type.defaultProps),e.props):e.props,i=n.dataKey,a=n.name,s=n.unit,o=n.formatter,l=n.tooltipType,u=n.chartType,d=n.hide;return Wt(Wt({},Me(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:cS(e),value:sr(r,i),type:l,payload:r,chartType:u,hide:d})};function Qf(t){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qf(t)}function OP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ya(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(r),!0).forEach(function(n){L$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function L$(t,e,r){return e=eue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eue(t){var e=tue(t,"string");return Qf(e)=="symbol"?e:e+""}function tue(t,e){if(Qf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rue(t,e){return sue(t)||aue(t,e)||iue(t,e)||nue()}function nue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iue(t,e){if(t){if(typeof t=="string")return CP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CP(t,e)}}function CP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function aue(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function sue(t){if(Array.isArray(t))return t}var Vp=Math.PI/180,oue=function(e){return e*180/Math.PI},St=function(e,r,n,i){return{x:e+Math.cos(-Vp*i)*n,y:r+Math.sin(-Vp*i)*n}},B$=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},lue=function(e,r,n,i,a){var s=e.width,o=e.height,l=e.startAngle,u=e.endAngle,d=nn(e.cx,s,s/2),f=nn(e.cy,o,o/2),h=B$(s,o,n),m=nn(e.innerRadius,h,0),g=nn(e.outerRadius,h,h*.8),p=Object.keys(r);return p.reduce(function(x,v){var b=r[v],y=b.domain,_=b.reversed,w;if(Be(b.range))i==="angleAxis"?w=[l,u]:i==="radiusAxis"&&(w=[m,g]),_&&(w=[w[1],w[0]]);else{w=b.range;var N=w,S=rue(N,2);l=S[0],u=S[1]}var E=D$(b,a),T=E.realScaleType,P=E.scale;P.domain(y).range(w),$$(P);var A=I$(P,ya(ya({},b),{},{realScaleType:T})),k=ya(ya(ya({},b),A),{},{range:w,radius:g,realScaleType:T,scale:P,cx:d,cy:f,innerRadius:m,outerRadius:g,startAngle:l,endAngle:u});return ya(ya({},x),{},L$({},v,k))},{})},cue=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2))},uue=function(e,r){var n=e.x,i=e.y,a=r.cx,s=r.cy,o=cue({x:n,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(n-a)/o,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:o,angle:oue(u),angleInRadian:u}},due=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:r-s*360,endAngle:n-s*360}},fue=function(e,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},MP=function(e,r){var n=e.x,i=e.y,a=uue({x:n,y:i},r),s=a.radius,o=a.angle,l=r.innerRadius,u=r.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var d=due(r),f=d.startAngle,h=d.endAngle,m=o,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?ya(ya({},r),{},{radius:s,angle:fue(m,r)}):null},U$=function(e){return!j.isValidElement(e)&&!Ie(e)&&typeof e!="boolean"?e.className:""};function Jf(t){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jf(t)}var hue=["offset"];function mue(t){return vue(t)||xue(t)||gue(t)||pue()}function pue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gue(t,e){if(t){if(typeof t=="string")return Q1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q1(t,e)}}function xue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vue(t){if(Array.isArray(t))return Q1(t)}function Q1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yue(t,e){if(t==null)return{};var r=bue(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function DP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(r),!0).forEach(function(n){wue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wue(t,e,r){return e=_ue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _ue(t){var e=Sue(t,"string");return Jf(e)=="symbol"?e:e+""}function Sue(t,e){if(Jf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zf(){return Zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zf.apply(this,arguments)}var Nue=function(e){var r=e.value,n=e.formatter,i=Be(e.children)?r:e.children;return Ie(n)?n(i):i},jue=function(e,r){var n=rn(r-e),i=Math.min(Math.abs(r-e),360);return n*i},Eue=function(e,r,n){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,u=l.cx,d=l.cy,f=l.innerRadius,h=l.outerRadius,m=l.startAngle,g=l.endAngle,p=l.clockWise,x=(f+h)/2,v=jue(m,g),b=v>=0?1:-1,y,_;i==="insideStart"?(y=m+b*s,_=p):i==="insideEnd"?(y=g-b*s,_=!p):i==="end"&&(y=g+b*s,_=p),_=v<=0?_:!_;var w=St(u,d,x,y),N=St(u,d,x,y+(_?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(_?0:1,`,
    `).concat(N.x,",").concat(N.y),E=Be(e.id)?Su("recharts-radial-line-"):e.id;return X.createElement("text",Zf({},n,{dominantBaseline:"central",className:Ve("recharts-radial-bar-label",o)}),X.createElement("defs",null,X.createElement("path",{id:E,d:S})),X.createElement("textPath",{xlinkHref:"#".concat(E)},r))},Tue=function(e){var r=e.viewBox,n=e.offset,i=e.position,a=r,s=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,d=a.startAngle,f=a.endAngle,h=(d+f)/2;if(i==="outside"){var m=St(s,o,u+n,h),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,v=St(s,o,x,h),b=v.x,y=v.y;return{x:b,y,textAnchor:"middle",verticalAnchor:"middle"}},Pue=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,a=e.position,s=r,o=s.x,l=s.y,u=s.width,d=s.height,f=d>=0?1:-1,h=f*i,m=f>0?"end":"start",g=f>0?"start":"end",p=u>=0?1:-1,x=p*i,v=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:o+u/2,y:l-f*i,textAnchor:"middle",verticalAnchor:m};return nr(nr({},y),n?{height:Math.max(l-n.y,0),width:u}:{})}if(a==="bottom"){var _={x:o+u/2,y:l+d+h,textAnchor:"middle",verticalAnchor:g};return nr(nr({},_),n?{height:Math.max(n.y+n.height-(l+d),0),width:u}:{})}if(a==="left"){var w={x:o-x,y:l+d/2,textAnchor:v,verticalAnchor:"middle"};return nr(nr({},w),n?{width:Math.max(w.x-n.x,0),height:d}:{})}if(a==="right"){var N={x:o+u+x,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return nr(nr({},N),n?{width:Math.max(n.x+n.width-N.x,0),height:d}:{})}var S=n?{width:u,height:d}:{};return a==="insideLeft"?nr({x:o+x,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},S):a==="insideRight"?nr({x:o+u-x,y:l+d/2,textAnchor:v,verticalAnchor:"middle"},S):a==="insideTop"?nr({x:o+u/2,y:l+h,textAnchor:"middle",verticalAnchor:g},S):a==="insideBottom"?nr({x:o+u/2,y:l+d-h,textAnchor:"middle",verticalAnchor:m},S):a==="insideTopLeft"?nr({x:o+x,y:l+h,textAnchor:b,verticalAnchor:g},S):a==="insideTopRight"?nr({x:o+u-x,y:l+h,textAnchor:v,verticalAnchor:g},S):a==="insideBottomLeft"?nr({x:o+x,y:l+d-h,textAnchor:b,verticalAnchor:m},S):a==="insideBottomRight"?nr({x:o+u-x,y:l+d-h,textAnchor:v,verticalAnchor:m},S):yu(a)&&(be(a.x)||To(a.x))&&(be(a.y)||To(a.y))?nr({x:o+nn(a.x,u),y:l+nn(a.y,d),textAnchor:"end",verticalAnchor:"end"},S):nr({x:o+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},kue=function(e){return"cx"in e&&be(e.cx)};function mr(t){var e=t.offset,r=e===void 0?5:e,n=yue(t,hue),i=nr({offset:r},n),a=i.viewBox,s=i.position,o=i.value,l=i.children,u=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!a||Be(o)&&Be(l)&&!j.isValidElement(u)&&!Ie(u))return null;if(j.isValidElement(u))return j.cloneElement(u,i);var m;if(Ie(u)){if(m=j.createElement(u,i),j.isValidElement(m))return m}else m=Nue(i);var g=kue(a),p=Me(i,!0);if(g&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Eue(i,m,p);var x=g?Tue(i):Pue(i);return X.createElement(Ko,Zf({className:Ve("recharts-label",f)},p,x,{breakAll:h}),m)}mr.displayName="Label";var z$=function(e){var r=e.cx,n=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,m=e.top,g=e.left,p=e.width,x=e.height,v=e.clockWise,b=e.labelViewBox;if(b)return b;if(be(p)&&be(x)){if(be(f)&&be(h))return{x:f,y:h,width:p,height:x};if(be(m)&&be(g))return{x:m,y:g,width:p,height:x}}return be(f)&&be(h)?{x:f,y:h,width:0,height:0}:be(r)&&be(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||l||o||0,clockWise:v}:e.viewBox?e.viewBox:{}},Aue=function(e,r){return e?e===!0?X.createElement(mr,{key:"label-implicit",viewBox:r}):lr(e)?X.createElement(mr,{key:"label-implicit",viewBox:r,value:e}):j.isValidElement(e)?e.type===mr?j.cloneElement(e,{key:"label-implicit",viewBox:r}):X.createElement(mr,{key:"label-implicit",content:e,viewBox:r}):Ie(e)?X.createElement(mr,{key:"label-implicit",content:e,viewBox:r}):yu(e)?X.createElement(mr,Zf({viewBox:r},e,{key:"label-implicit"})):null:null},Oue=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=z$(e),s=Un(i,mr).map(function(l,u){return j.cloneElement(l,{viewBox:r||a,key:"label-".concat(u)})});if(!n)return s;var o=Aue(e.label,r||a);return[o].concat(mue(s))};mr.parseViewBox=z$;mr.renderCallByParent=Oue;function Cue(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Mue=Cue;const Due=at(Mue);function eh(t){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eh(t)}var $ue=["valueAccessor"],Iue=["data","dataKey","clockWise","id","textBreakAll"];function Rue(t){return Uue(t)||Bue(t)||Lue(t)||Fue()}function Fue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lue(t,e){if(t){if(typeof t=="string")return J1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J1(t,e)}}function Bue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Uue(t){if(Array.isArray(t))return J1(t)}function J1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hp(){return Hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hp.apply(this,arguments)}function $P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function IP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$P(Object(r),!0).forEach(function(n){zue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$P(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zue(t,e,r){return e=Wue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wue(t){var e=Vue(t,"string");return eh(e)=="symbol"?e:e+""}function Vue(t,e){if(eh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(eh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RP(t,e){if(t==null)return{};var r=Hue(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var que=function(e){return Array.isArray(e.value)?Due(e.value):e.value};function Ca(t){var e=t.valueAccessor,r=e===void 0?que:e,n=RP(t,$ue),i=n.data,a=n.dataKey,s=n.clockWise,o=n.id,l=n.textBreakAll,u=RP(n,Iue);return!i||!i.length?null:X.createElement(Je,{className:"recharts-label-list"},i.map(function(d,f){var h=Be(a)?r(d,f):sr(d&&d.payload,a),m=Be(o)?{}:{id:"".concat(o,"-").concat(f)};return X.createElement(mr,Hp({},Me(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:mr.parseViewBox(Be(s)?d:IP(IP({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}Ca.displayName="LabelList";function Gue(t,e){return t?t===!0?X.createElement(Ca,{key:"labelList-implicit",data:e}):X.isValidElement(t)||Ie(t)?X.createElement(Ca,{key:"labelList-implicit",data:e,content:t}):yu(t)?X.createElement(Ca,Hp({data:e},t,{key:"labelList-implicit"})):null:null}function Kue(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Un(n,Ca).map(function(s,o){return j.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!r)return i;var a=Gue(t.label,e);return[a].concat(Rue(i))}Ca.renderCallByParent=Kue;function th(t){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(t)}function Z1(){return Z1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Z1.apply(this,arguments)}function FP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(r),!0).forEach(function(n){Yue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yue(t,e,r){return e=Xue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xue(t){var e=Que(t,"string");return th(e)=="symbol"?e:e+""}function Que(t,e){if(th(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jue=function(e,r){var n=rn(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},Um=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,d=l*(o?1:-1)+i,f=Math.asin(l/d)/Vp,h=u?a:a+s*f,m=St(r,n,d,h),g=St(r,n,i,h),p=u?a-s*f:a,x=St(r,n,d*Math.cos(f*Vp),p);return{center:m,circleTangency:g,lineTangency:x,theta:f}},W$=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=Jue(s,o),u=s+l,d=St(r,n,a,s),f=St(r,n,a,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var m=St(r,n,i,s),g=St(r,n,i,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},Zue=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=rn(d-u),h=Um({cx:r,cy:n,radius:a,angle:u,sign:f,cornerRadius:s,cornerIsExternal:l}),m=h.circleTangency,g=h.lineTangency,p=h.theta,x=Um({cx:r,cy:n,radius:a,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:l}),v=x.circleTangency,b=x.lineTangency,y=x.theta,_=l?Math.abs(u-d):Math.abs(u-d)-p-y;if(_<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):W$({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var w="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var N=Um({cx:r,cy:n,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),S=N.circleTangency,E=N.lineTangency,T=N.theta,P=Um({cx:r,cy:n,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),A=P.circleTangency,k=P.lineTangency,F=P.theta,H=l?Math.abs(u-d):Math.abs(u-d)-T-F;if(H<0&&s===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(H>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},ede={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},V$=function(e){var r=LP(LP({},ede),e),n=r.cx,i=r.cy,a=r.innerRadius,s=r.outerRadius,o=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(s<a||d===f)return null;var m=Ve("recharts-sector",h),g=s-a,p=nn(o,g,0,!0),x;return p>0&&Math.abs(d-f)<360?x=Zue({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(p,g/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):x=W$({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f}),X.createElement("path",Z1({},Me(r,!0),{className:m,d:x,role:"img"}))};function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function ew(){return ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ew.apply(this,arguments)}function BP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function UP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BP(Object(r),!0).forEach(function(n){tde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tde(t,e,r){return e=rde(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rde(t){var e=nde(t,"string");return rh(e)=="symbol"?e:e+""}function nde(t,e){if(rh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zP={curveBasisClosed:tX,curveBasisOpen:rX,curveBasis:eX,curveBumpX:BY,curveBumpY:UY,curveLinearClosed:nX,curveLinear:Ix,curveMonotoneX:iX,curveMonotoneY:aX,curveNatural:sX,curveStep:oX,curveStepAfter:cX,curveStepBefore:lX},zm=function(e){return e.x===+e.x&&e.y===+e.y},sd=function(e){return e.x},od=function(e){return e.y},ide=function(e,r){if(Ie(e))return e;var n="curve".concat(Dx(e));return(n==="curveMonotone"||n==="curveBump")&&r?zP["".concat(n).concat(r==="vertical"?"Y":"X")]:zP[n]||Ix},ade=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,d=ide(n,o),f=u?a.filter(function(p){return zm(p)}):a,h;if(Array.isArray(s)){var m=u?s.filter(function(p){return zm(p)}):s,g=f.map(function(p,x){return UP(UP({},p),{},{base:m[x]})});return o==="vertical"?h=Om().y(od).x1(sd).x0(function(p){return p.base.x}):h=Om().x(sd).y1(od).y0(function(p){return p.base.y}),h.defined(zm).curve(d),h(g)}return o==="vertical"&&be(s)?h=Om().y(od).x1(sd).x0(s):be(s)?h=Om().x(sd).y1(od).y0(s):h=F5().x(sd).y(od),h.defined(zm).curve(d),h(f)},qp=function(e){var r=e.className,n=e.points,i=e.path,a=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?ade(e):i;return X.createElement("path",ew({},Me(e,!1),gp(e),{className:Ve("recharts-curve",r),d:s,ref:a}))},H$={exports:{}},sde="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ode=sde,lde=ode;function q$(){}function G$(){}G$.resetWarningCache=q$;var cde=function(){function t(n,i,a,s,o,l){if(l!==lde){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:G$,resetWarningCache:q$};return r.PropTypes=r,r};H$.exports=cde();var ude=H$.exports;const it=at(ude);var dde=Object.getOwnPropertyNames,fde=Object.getOwnPropertySymbols,hde=Object.prototype.hasOwnProperty;function WP(t,e){return function(n,i,a){return t(n,i,a)&&e(n,i,a)}}function Wm(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var a=i.cache,s=a.get(r),o=a.get(n);if(s&&o)return s===n&&o===r;a.set(r,n),a.set(n,r);var l=t(r,n,i);return a.delete(r),a.delete(n),l}}function VP(t){return dde(t).concat(fde(t))}var mde=Object.hasOwn||function(t,e){return hde.call(t,e)};function ul(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var pde="__v",gde="__o",xde="_owner",HP=Object.getOwnPropertyDescriptor,qP=Object.keys;function vde(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function yde(t,e){return ul(t.getTime(),e.getTime())}function bde(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function wde(t,e){return t===e}function GP(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),a=t.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var u=e.entries(),d=!1,f=0;(o=u.next())&&!o.done;){if(i[f]){f++;continue}var h=s.value,m=o.value;if(r.equals(h[0],m[0],l,f,t,e,r)&&r.equals(h[1],m[1],h[0],m[0],t,e,r)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}var _de=ul;function Sde(t,e,r){var n=qP(t),i=n.length;if(qP(e).length!==i)return!1;for(;i-- >0;)if(!K$(t,e,r,n[i]))return!1;return!0}function ld(t,e,r){var n=VP(t),i=n.length;if(VP(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=n[i],!K$(t,e,r,a)||(s=HP(t,a),o=HP(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Nde(t,e){return ul(t.valueOf(),e.valueOf())}function jde(t,e){return t.source===e.source&&t.flags===e.flags}function KP(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var l=e.values(),u=!1,d=0;(o=l.next())&&!o.done;){if(!i[d]&&r.equals(s.value,o.value,s.value,o.value,t,e,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Ede(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Tde(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function K$(t,e,r,n){return(n===xde||n===gde||n===pde)&&(t.$$typeof||e.$$typeof)?!0:mde(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var Pde="[object Arguments]",kde="[object Boolean]",Ade="[object Date]",Ode="[object Error]",Cde="[object Map]",Mde="[object Number]",Dde="[object Object]",$de="[object RegExp]",Ide="[object Set]",Rde="[object String]",Fde="[object URL]",Lde=Array.isArray,YP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,XP=Object.assign,Bde=Object.prototype.toString.call.bind(Object.prototype.toString);function Ude(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(g,p,x){if(g===p)return!0;if(g==null||p==null)return!1;var v=typeof g;if(v!==typeof p)return!1;if(v!=="object")return v==="number"?s(g,p,x):v==="function"?i(g,p,x):!1;var b=g.constructor;if(b!==p.constructor)return!1;if(b===Object)return o(g,p,x);if(Lde(g))return e(g,p,x);if(YP!=null&&YP(g))return f(g,p,x);if(b===Date)return r(g,p,x);if(b===RegExp)return u(g,p,x);if(b===Map)return a(g,p,x);if(b===Set)return d(g,p,x);var y=Bde(g);return y===Ade?r(g,p,x):y===$de?u(g,p,x):y===Cde?a(g,p,x):y===Ide?d(g,p,x):y===Dde?typeof g.then!="function"&&typeof p.then!="function"&&o(g,p,x):y===Fde?h(g,p,x):y===Ode?n(g,p,x):y===Pde?o(g,p,x):y===kde||y===Mde||y===Rde?l(g,p,x):!1}}function zde(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?ld:vde,areDatesEqual:yde,areErrorsEqual:bde,areFunctionsEqual:wde,areMapsEqual:n?WP(GP,ld):GP,areNumbersEqual:_de,areObjectsEqual:n?ld:Sde,arePrimitiveWrappersEqual:Nde,areRegExpsEqual:jde,areSetsEqual:n?WP(KP,ld):KP,areTypedArraysEqual:n?ld:Ede,areUrlsEqual:Tde};if(r&&(i=XP({},i,r(i))),e){var a=Wm(i.areArraysEqual),s=Wm(i.areMapsEqual),o=Wm(i.areObjectsEqual),l=Wm(i.areSetsEqual);i=XP({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function Wde(t){return function(e,r,n,i,a,s,o){return t(e,r,o)}}function Vde(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,a=t.strict;if(n)return function(l,u){var d=n(),f=d.cache,h=f===void 0?e?new WeakMap:void 0:f,m=d.meta;return r(l,u,{cache:h,equals:i,meta:m,strict:a})};if(e)return function(l,u){return r(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return r(l,u,s)}}var Hde=Qs();Qs({strict:!0});Qs({circular:!0});Qs({circular:!0,strict:!0});Qs({createInternalComparator:function(){return ul}});Qs({strict:!0,createInternalComparator:function(){return ul}});Qs({circular:!0,createInternalComparator:function(){return ul}});Qs({circular:!0,createInternalComparator:function(){return ul},strict:!0});function Qs(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=zde(t),l=Ude(o),u=n?n(l):Wde(l);return Vde({circular:r,comparator:l,createState:i,equals:u,strict:s})}function qde(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function QP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>e?(t(a),r=-1):qde(i)};requestAnimationFrame(n)}function tw(t){"@babel/helpers - typeof";return tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tw(t)}function Gde(t){return Qde(t)||Xde(t)||Yde(t)||Kde()}function Kde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yde(t,e){if(t){if(typeof t=="string")return JP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JP(t,e)}}function JP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qde(t){if(Array.isArray(t))return t}function Jde(){var t={},e=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var s=a,o=Gde(s),l=o[0],u=o.slice(1);if(typeof l=="number"){QP(i.bind(null,u),l);return}i(l),QP(i.bind(null,u));return}tw(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}function ZP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ek(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZP(Object(r),!0).forEach(function(n){Y$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y$(t,e,r){return e=Zde(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zde(t){var e=efe(t,"string");return nh(e)==="symbol"?e:String(e)}function efe(t,e){if(nh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(nh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tfe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},rfe=function(e){return e},nfe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Hd=function(e,r){return Object.keys(r).reduce(function(n,i){return ek(ek({},n),{},Y$({},i,e(i,r[i])))},{})},tk=function(e,r,n){return e.map(function(i){return"".concat(nfe(i)," ").concat(r,"ms ").concat(n)}).join(",")};function ife(t,e){return ofe(t)||sfe(t,e)||X$(t,e)||afe()}function afe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sfe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ofe(t){if(Array.isArray(t))return t}function lfe(t){return dfe(t)||ufe(t)||X$(t)||cfe()}function cfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X$(t,e){if(t){if(typeof t=="string")return rw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rw(t,e)}}function ufe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dfe(t){if(Array.isArray(t))return rw(t)}function rw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Gp=1e-4,Q$=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},J$=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},rk=function(e,r){return function(n){var i=Q$(e,r);return J$(i,n)}},ffe=function(e,r){return function(n){var i=Q$(e,r),a=[].concat(lfe(i.map(function(s,o){return s*o}).slice(1)),[0]);return J$(a,n)}},nk=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],a=r[1],s=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=ife(u,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var f=rk(i,s),h=rk(a,o),m=ffe(i,s),g=function(v){return v>1?1:v<0?0:v},p=function(v){for(var b=v>1?1:v,y=b,_=0;_<8;++_){var w=f(y)-b,N=m(y);if(Math.abs(w-b)<Gp||N<Gp)return h(y);y=g(y-w/N)}return h(y)};return p.isStepper=!1,p},hfe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,l=function(d,f,h){var m=-(d-f)*n,g=h*a,p=h+(m-g)*o/1e3,x=h*o/1e3+d;return Math.abs(x-f)<Gp&&Math.abs(p)<Gp?[f,0]:[x,p]};return l.isStepper=!0,l.dt=o,l},mfe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return nk(i);case"spring":return hfe();default:if(i.split("(")[0]==="cubic-bezier")return nk(i)}return typeof i=="function"?i:null};function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}function ik(t){return xfe(t)||gfe(t)||Z$(t)||pfe()}function pfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xfe(t){if(Array.isArray(t))return iw(t)}function ak(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function jr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ak(Object(r),!0).forEach(function(n){nw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ak(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nw(t,e,r){return e=vfe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vfe(t){var e=yfe(t,"string");return ih(e)==="symbol"?e:String(e)}function yfe(t,e){if(ih(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ih(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bfe(t,e){return Sfe(t)||_fe(t,e)||Z$(t,e)||wfe()}function wfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z$(t,e){if(t){if(typeof t=="string")return iw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iw(t,e)}}function iw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _fe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Sfe(t){if(Array.isArray(t))return t}var Kp=function(e,r,n){return e+(r-e)*n},aw=function(e){var r=e.from,n=e.to;return r!==n},Nfe=function t(e,r,n){var i=Hd(function(a,s){if(aw(s)){var o=e(s.from,s.to,s.velocity),l=bfe(o,2),u=l[0],d=l[1];return jr(jr({},s),{},{from:u,velocity:d})}return s},r);return n<1?Hd(function(a,s){return aw(s)?jr(jr({},s),{},{velocity:Kp(s.velocity,i[a].velocity,n),from:Kp(s.from,i[a].from,n)}):s},r):t(e,i,n-1)};const jfe=function(t,e,r,n,i){var a=tfe(t,e),s=a.reduce(function(x,v){return jr(jr({},x),{},nw({},v,[t[v],e[v]]))},{}),o=a.reduce(function(x,v){return jr(jr({},x),{},nw({},v,{from:t[v],velocity:0,to:e[v]}))},{}),l=-1,u,d,f=function(){return null},h=function(){return Hd(function(v,b){return b.from},o)},m=function(){return!Object.values(o).filter(aw).length},g=function(v){u||(u=v);var b=v-u,y=b/r.dt;o=Nfe(r,o,y),i(jr(jr(jr({},t),e),h())),u=v,m()||(l=requestAnimationFrame(f))},p=function(v){d||(d=v);var b=(v-d)/n,y=Hd(function(w,N){return Kp.apply(void 0,ik(N).concat([r(b)]))},s);if(i(jr(jr(jr({},t),e),y)),b<1)l=requestAnimationFrame(f);else{var _=Hd(function(w,N){return Kp.apply(void 0,ik(N).concat([r(1)]))},s);i(jr(jr(jr({},t),e),_))}};return f=r.isStepper?g:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}var Efe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Tfe(t,e){if(t==null)return{};var r=Pfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pfe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Py(t){return Cfe(t)||Ofe(t)||Afe(t)||kfe()}function kfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Afe(t,e){if(t){if(typeof t=="string")return sw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sw(t,e)}}function Ofe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cfe(t){if(Array.isArray(t))return sw(t)}function sw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sk(Object(r),!0).forEach(function(n){Sd(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sd(t,e,r){return e=eI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dfe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eI(n.key),n)}}function $fe(t,e,r){return e&&Dfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eI(t){var e=Ife(t,"string");return Uc(e)==="symbol"?e:String(e)}function Ife(t,e){if(Uc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Uc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ow(t,e)}function ow(t,e){return ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ow(t,e)}function Ffe(t){var e=Lfe();return function(){var n=Yp(t),i;if(e){var a=Yp(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return lw(this,i)}}function lw(t,e){if(e&&(Uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cw(t)}function cw(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yp(t){return Yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yp(t)}var ia=function(t){Rfe(r,t);var e=Ffe(r);function r(n,i){var a;Mfe(this,r),a=e.call(this,n,i);var s=a.props,o=s.isActive,l=s.attributeName,u=s.from,d=s.to,f=s.steps,h=s.children,m=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(cw(a)),a.changeStyle=a.changeStyle.bind(cw(a)),!o||m<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:d}),lw(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof h=="function")return a.state={style:u},lw(a);a.state={style:l?Sd({},l,u):u}}else a.state={style:{}};return a}return $fe(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,d=a.to,f=a.from,h=this.state.style;if(o){if(!s){var m={style:l?Sd({},l,d):d};this.state&&h&&(l&&h[l]!==d||!l&&h!==d)&&this.setState(m);return}if(!(Hde(i.to,d)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?f:i.to;if(this.state&&h){var x={style:l?Sd({},l,p):p};(l&&h[l]!==p||!l&&h!==p)&&this.setState(x)}this.runAnimation(xi(xi({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,m=jfe(s,o,mfe(u),l,this.changeStyle),g=function(){a.stopJSAnimation=m()};this.manager.start([h,d,g,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,u=s[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(p,x,v){if(v===0)return p;var b=x.duration,y=x.easing,_=y===void 0?"ease":y,w=x.style,N=x.properties,S=x.onAnimationEnd,E=v>0?s[v-1]:x,T=N||Object.keys(w);if(typeof _=="function"||_==="spring")return[].concat(Py(p),[a.runJSAnimation.bind(a,{from:E.style,to:w,duration:b,easing:_}),b]);var P=tk(T,b,_),A=xi(xi(xi({},E.style),w),{},{transition:P});return[].concat(Py(p),[A,b,S]).filter(rfe)};return this.manager.start([l].concat(Py(s.reduce(m,[d,Math.max(h,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Jde());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,m=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var p=o?Sd({},o,l):l,x=tk(Object.keys(p),s,u);g.start([d,a,xi(xi({},p),{},{transition:x}),s,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Tfe(i,Efe),u=j.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||s<=0)return a;var f=function(m){var g=m.props,p=g.style,x=p===void 0?{}:p,v=g.className,b=j.cloneElement(m,xi(xi({},l),{},{style:xi(xi({},x),d),className:v}));return b};return u===1?f(j.Children.only(a)):X.createElement("div",null,j.Children.map(a,function(h){return f(h)}))}}]),r}(j.PureComponent);ia.displayName="Animate";ia.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ia.propTypes={from:it.oneOfType([it.object,it.string]),to:it.oneOfType([it.object,it.string]),attributeName:it.string,duration:it.number,begin:it.number,easing:it.oneOfType([it.string,it.func]),steps:it.arrayOf(it.shape({duration:it.number.isRequired,style:it.object.isRequired,easing:it.oneOfType([it.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),it.func]),properties:it.arrayOf("string"),onAnimationEnd:it.func})),children:it.oneOfType([it.node,it.func]),isActive:it.bool,canBegin:it.bool,onAnimationEnd:it.func,shouldReAnimate:it.bool,onAnimationStart:it.func,onAnimationReStart:it.func};function ah(t){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ah(t)}function Xp(){return Xp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xp.apply(this,arguments)}function Bfe(t,e){return Vfe(t)||Wfe(t,e)||zfe(t,e)||Ufe()}function Ufe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zfe(t,e){if(t){if(typeof t=="string")return ok(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ok(t,e)}}function ok(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wfe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Vfe(t){if(Array.isArray(t))return t}function lk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ck(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lk(Object(r),!0).forEach(function(n){Hfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hfe(t,e,r){return e=qfe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qfe(t){var e=Gfe(t,"string");return ah(e)=="symbol"?e:e+""}function Gfe(t,e){if(ah(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uk=function(e,r,n,i,a){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),o=i>=0?1:-1,l=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,d;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=a[h]>s?s:a[h];d="M".concat(e,",").concat(r+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+l*f[0],",").concat(r)),d+="L ".concat(e+n-l*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+o*f[1])),d+="L ".concat(e+n,",").concat(r+i-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+n-l*f[2],",").concat(r+i)),d+="L ".concat(e+l*f[3],",").concat(r+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+i-o*f[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var g=Math.min(s,a);d="M ".concat(e,",").concat(r+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+l*g,",").concat(r,`
            L `).concat(e+n-l*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+n,",").concat(r+o*g,`
            L `).concat(e+n,",").concat(r+i-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+n-l*g,",").concat(r+i,`
            L `).concat(e+l*g,",").concat(r+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e,",").concat(r+i-o*g," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},Kfe=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,a=r.x,s=r.y,o=r.width,l=r.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),f=Math.min(s,s+l),h=Math.max(s,s+l);return n>=u&&n<=d&&i>=f&&i<=h}return!1},Yfe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uS=function(e){var r=ck(ck({},Yfe),e),n=j.useRef(),i=j.useState(-1),a=Bfe(i,2),s=a[0],o=a[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&o(_)}catch{}},[]);var l=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,g=r.animationEasing,p=r.animationDuration,x=r.animationBegin,v=r.isAnimationActive,b=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var y=Ve("recharts-rectangle",m);return b?X.createElement(ia,{canBegin:s>0,from:{width:d,height:f,x:l,y:u},to:{width:d,height:f,x:l,y:u},duration:p,animationEasing:g,isActive:b},function(_){var w=_.width,N=_.height,S=_.x,E=_.y;return X.createElement(ia,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:p,isActive:v,easing:g},X.createElement("path",Xp({},Me(r,!0),{className:y,d:uk(S,E,w,N,h),ref:n})))}):X.createElement("path",Xp({},Me(r,!0),{className:y,d:uk(l,u,d,f,h)}))},Xfe=["points","className","baseLinePoints","connectNulls"];function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xl.apply(this,arguments)}function Qfe(t,e){if(t==null)return{};var r=Jfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function dk(t){return rhe(t)||the(t)||ehe(t)||Zfe()}function Zfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ehe(t,e){if(t){if(typeof t=="string")return uw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uw(t,e)}}function the(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rhe(t){if(Array.isArray(t))return uw(t)}function uw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fk=function(e){return e&&e.x===+e.x&&e.y===+e.y},nhe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){fk(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),fk(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},qd=function(e,r){var n=nhe(e);r&&(n=[n.reduce(function(a,s){return[].concat(dk(a),dk(s))},[])]);var i=n.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},ihe=function(e,r,n){var i=qd(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(qd(r.reverse(),n).slice(1))},ahe=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,a=e.connectNulls,s=Qfe(e,Xfe);if(!r||!r.length)return null;var o=Ve("recharts-polygon",n);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",u=ihe(r,i,a);return X.createElement("g",{className:o},X.createElement("path",Xl({},Me(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),l?X.createElement("path",Xl({},Me(s,!0),{fill:"none",d:qd(r,a)})):null,l?X.createElement("path",Xl({},Me(s,!0),{fill:"none",d:qd(i,a)})):null)}var d=qd(r,a);return X.createElement("path",Xl({},Me(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:o,d}))};function dw(){return dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dw.apply(this,arguments)}var Jx=function(e){var r=e.cx,n=e.cy,i=e.r,a=e.className,s=Ve("recharts-dot",a);return r===+r&&n===+n&&i===+i?X.createElement("circle",dw({},Me(e,!1),gp(e),{className:s,cx:r,cy:n,r:i})):null};function sh(t){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(t)}var she=["x","y","top","left","width","height","className"];function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fw.apply(this,arguments)}function hk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ohe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(r),!0).forEach(function(n){lhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lhe(t,e,r){return e=che(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function che(t){var e=uhe(t,"string");return sh(e)=="symbol"?e:e+""}function uhe(t,e){if(sh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dhe(t,e){if(t==null)return{};var r=fhe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var hhe=function(e,r,n,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},mhe=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,l=e.left,u=l===void 0?0:l,d=e.width,f=d===void 0?0:d,h=e.height,m=h===void 0?0:h,g=e.className,p=dhe(e,she),x=ohe({x:n,y:a,top:o,left:u,width:f,height:m},p);return!be(n)||!be(a)||!be(f)||!be(m)||!be(o)||!be(u)?null:X.createElement("path",fw({},Me(x,!0),{className:Ve("recharts-cross",g),d:hhe(n,a,f,m,o,u)}))},phe=Gx,ghe=f$,xhe=la;function vhe(t,e){return t&&t.length?phe(t,xhe(e),ghe):void 0}var yhe=vhe;const bhe=at(yhe);var whe=Gx,_he=la,She=h$;function Nhe(t,e){return t&&t.length?whe(t,_he(e),She):void 0}var jhe=Nhe;const Ehe=at(jhe);var The=["cx","cy","angle","ticks","axisLine"],Phe=["ticks","tick","angle","tickFormatter","stroke"];function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function Gd(){return Gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gd.apply(this,arguments)}function mk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function no(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mk(Object(r),!0).forEach(function(n){Zx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pk(t,e){if(t==null)return{};var r=khe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function khe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ahe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rI(n.key),n)}}function Ohe(t,e,r){return e&&gk(t.prototype,e),r&&gk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Che(t,e,r){return e=Qp(e),Mhe(t,tI()?Reflect.construct(e,r||[],Qp(t).constructor):e.apply(t,r))}function Mhe(t,e){if(e&&(zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dhe(t)}function Dhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tI=function(){return!!t})()}function Qp(t){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qp(t)}function $he(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hw(t,e)}function hw(t,e){return hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hw(t,e)}function Zx(t,e,r){return e=rI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rI(t){var e=Ihe(t,"string");return zc(e)=="symbol"?e:e+""}function Ihe(t,e){if(zc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ev=function(t){function e(){return Ahe(this,e),Che(this,e,arguments)}return $he(e,t),Ohe(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return St(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,o=n.ticks,l=bhe(o,function(d){return d.coordinate||0}),u=Ehe(o,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,o=n.ticks,l=n.axisLine,u=pk(n,The),d=o.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),f=St(i,a,d[0],s),h=St(i,a,d[1],s),m=no(no(no({},Me(u,!1)),{},{fill:"none"},Me(l,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return X.createElement("line",Gd({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,u=i.stroke,d=pk(i,Phe),f=this.getTickTextAnchor(),h=Me(d,!1),m=Me(s,!1),g=a.map(function(p,x){var v=n.getTickValueCoord(p),b=no(no(no(no({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(v.x,", ").concat(v.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:x},v),{},{payload:p});return X.createElement(Je,Gd({className:Ve("recharts-polar-radius-axis-tick",U$(s)),key:"tick-".concat(p.coordinate)},Go(n.props,p,x)),e.renderTickItem(s,b,l?l(p.value,x):p.value))});return X.createElement(Je,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,s=n.tick;return!i||!i.length?null:X.createElement(Je,{className:Ve("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),mr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return X.isValidElement(n)?s=X.cloneElement(n,i):Ie(n)?s=n(i):s=X.createElement(Ko,Gd({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(j.PureComponent);Zx(ev,"displayName","PolarRadiusAxis");Zx(ev,"axisType","radiusAxis");Zx(ev,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function yo(){return yo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yo.apply(this,arguments)}function xk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function io(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(r),!0).forEach(function(n){tv(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iI(n.key),n)}}function Fhe(t,e,r){return e&&vk(t.prototype,e),r&&vk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lhe(t,e,r){return e=Jp(e),Bhe(t,nI()?Reflect.construct(e,r||[],Jp(t).constructor):e.apply(t,r))}function Bhe(t,e){if(e&&(Wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uhe(t)}function Uhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nI=function(){return!!t})()}function Jp(t){return Jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jp(t)}function zhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mw(t,e)}function mw(t,e){return mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mw(t,e)}function tv(t,e,r){return e=iI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iI(t){var e=Whe(t,"string");return Wc(e)=="symbol"?e:e+""}function Whe(t,e){if(Wc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vhe=Math.PI/180,yk=1e-5,rv=function(t){function e(){return Rhe(this,e),Lhe(this,e,arguments)}return zhe(e,t),Fhe(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,u=i.tickSize,d=u||8,f=St(a,s,o,n.coordinate),h=St(a,s,o+(l==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*Vhe),s;return a>yk?s=i==="outer"?"start":"end":a<-yk?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.radius,o=n.axisLine,l=n.axisLineType,u=io(io({},Me(this.props,!1)),{},{fill:"none"},Me(o,!1));if(l==="circle")return X.createElement(Jx,yo({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var d=this.props.ticks,f=d.map(function(h){return St(i,a,s,h.coordinate)});return X.createElement(ahe,yo({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,u=i.stroke,d=Me(this.props,!1),f=Me(s,!1),h=io(io({},d),{},{fill:"none"},Me(o,!1)),m=a.map(function(g,p){var x=n.getTickLineCoord(g),v=n.getTickTextAnchor(g),b=io(io(io({textAnchor:v},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:g,x:x.x2,y:x.y2});return X.createElement(Je,yo({className:Ve("recharts-polar-angle-axis-tick",U$(s)),key:"tick-".concat(g.coordinate)},Go(n.props,g,p)),o&&X.createElement("line",yo({className:"recharts-polar-angle-axis-tick-line"},h,x)),s&&e.renderTickItem(s,b,l?l(g.value,p):g.value))});return X.createElement(Je,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,s=n.axisLine;return a<=0||!i||!i.length?null:X.createElement(Je,{className:Ve("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var s;return X.isValidElement(n)?s=X.cloneElement(n,i):Ie(n)?s=n(i):s=X.createElement(Ko,yo({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(j.PureComponent);tv(rv,"displayName","PolarAngleAxis");tv(rv,"axisType","angleAxis");tv(rv,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Hhe=lD,qhe=Hhe(Object.getPrototypeOf,Object),Ghe=qhe,Khe=Qa,Yhe=Ghe,Xhe=Ja,Qhe="[object Object]",Jhe=Function.prototype,Zhe=Object.prototype,aI=Jhe.toString,eme=Zhe.hasOwnProperty,tme=aI.call(Object);function rme(t){if(!Xhe(t)||Khe(t)!=Qhe)return!1;var e=Yhe(t);if(e===null)return!0;var r=eme.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&aI.call(r)==tme}var nme=rme;const ime=at(nme);var ame=Qa,sme=Ja,ome="[object Boolean]";function lme(t){return t===!0||t===!1||sme(t)&&ame(t)==ome}var cme=lme;const ume=at(cme);function oh(t){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(t)}function Zp(){return Zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zp.apply(this,arguments)}function dme(t,e){return pme(t)||mme(t,e)||hme(t,e)||fme()}function fme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hme(t,e){if(t){if(typeof t=="string")return bk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bk(t,e)}}function bk(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function pme(t){if(Array.isArray(t))return t}function wk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _k(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wk(Object(r),!0).forEach(function(n){gme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gme(t,e,r){return e=xme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xme(t){var e=vme(t,"string");return oh(e)=="symbol"?e:e+""}function vme(t,e){if(oh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sk=function(e,r,n,i,a){var s=n-i,o;return o="M ".concat(e,",").concat(r),o+="L ".concat(e+n,",").concat(r),o+="L ".concat(e+n-s/2,",").concat(r+a),o+="L ".concat(e+n-s/2-i,",").concat(r+a),o+="L ".concat(e,",").concat(r," Z"),o},yme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bme=function(e){var r=_k(_k({},yme),e),n=j.useRef(),i=j.useState(-1),a=dme(i,2),s=a[0],o=a[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&o(y)}catch{}},[]);var l=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,g=r.animationEasing,p=r.animationDuration,x=r.animationBegin,v=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var b=Ve("recharts-trapezoid",m);return v?X.createElement(ia,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:l,y:u},duration:p,animationEasing:g,isActive:v},function(y){var _=y.upperWidth,w=y.lowerWidth,N=y.height,S=y.x,E=y.y;return X.createElement(ia,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:p,easing:g},X.createElement("path",Zp({},Me(r,!0),{className:b,d:Sk(S,E,_,w,N),ref:n})))}):X.createElement("g",null,X.createElement("path",Zp({},Me(r,!0),{className:b,d:Sk(l,u,d,f,h)})))},wme=["option","shapeType","propTransformer","activeClassName","isActive"];function lh(t){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(t)}function _me(t,e){if(t==null)return{};var r=Sme(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Sme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Nk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nk(Object(r),!0).forEach(function(n){Nme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nme(t,e,r){return e=jme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jme(t){var e=Eme(t,"string");return lh(e)=="symbol"?e:e+""}function Eme(t,e){if(lh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tme(t,e){return eg(eg({},e),t)}function Pme(t,e){return t==="symbols"}function jk(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return X.createElement(uS,r);case"trapezoid":return X.createElement(bme,r);case"sector":return X.createElement(V$,r);case"symbols":if(Pme(e))return X.createElement(k2,r);break;default:return null}}function kme(t){return j.isValidElement(t)?t.props:t}function sI(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?Tme:n,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,l=_me(t,wme),u;if(j.isValidElement(e))u=j.cloneElement(e,eg(eg({},l),kme(e)));else if(Ie(e))u=e(l);else if(ime(e)&&!ume(e)){var d=i(e,l);u=X.createElement(jk,{shapeType:r,elementProps:d})}else{var f=l;u=X.createElement(jk,{shapeType:r,elementProps:f})}return o?X.createElement(Je,{className:s},u):u}function nv(t,e){return e!=null&&"trapezoids"in t.props}function iv(t,e){return e!=null&&"sectors"in t.props}function ch(t,e){return e!=null&&"points"in t.props}function Ame(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&a}function Ome(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function Cme(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function Mme(t,e){var r;return nv(t,e)?r=Ame:iv(t,e)?r=Ome:ch(t,e)&&(r=Cme),r}function Dme(t,e){var r;return nv(t,e)?r="trapezoids":iv(t,e)?r="sectors":ch(t,e)&&(r="points"),r}function $me(t,e){if(nv(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(iv(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return ch(t,e)?e.payload:{}}function Ime(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=Dme(r,e),a=$me(r,e),s=n.filter(function(l,u){var d=Yh(a,l),f=r.props[i].filter(function(g){var p=Mme(r,e);return p(g,e)}),h=r.props[i].indexOf(f[f.length-1]),m=u===h;return d&&m}),o=n.indexOf(s[s.length-1]);return o}var O0;function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ql.apply(this,arguments)}function Ek(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ek(Object(r),!0).forEach(function(n){ti(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ek(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lI(n.key),n)}}function Fme(t,e,r){return e&&Tk(t.prototype,e),r&&Tk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lme(t,e,r){return e=tg(e),Bme(t,oI()?Reflect.construct(e,r||[],tg(t).constructor):e.apply(t,r))}function Bme(t,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ume(t)}function Ume(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oI=function(){return!!t})()}function tg(t){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tg(t)}function zme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pw(t,e)}function pw(t,e){return pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},pw(t,e)}function ti(t,e,r){return e=lI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lI(t){var e=Wme(t,"string");return Vc(e)=="symbol"?e:e+""}function Wme(t,e){if(Vc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aa=function(t){function e(r){var n;return Rme(this,e),n=Lme(this,e,[r]),ti(n,"pieRef",null),ti(n,"sectorRefs",[]),ti(n,"id",Su("recharts-pie-")),ti(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ie(i)&&i()}),ti(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ie(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return zme(e,t),Fme(e,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,u=a.valueKey,d=Me(this.props,!1),f=Me(s,!1),h=Me(o,!1),m=s&&s.offsetRadius||20,g=n.map(function(p,x){var v=(p.startAngle+p.endAngle)/2,b=St(p.cx,p.cy,p.outerRadius+m,v),y=bt(bt(bt(bt({},d),p),{},{stroke:"none"},f),{},{index:x,textAnchor:e.getTextAnchor(b.x,p.cx)},b),_=bt(bt(bt(bt({},d),p),{},{fill:"none",stroke:p.fill},h),{},{index:x,points:[St(p.cx,p.cy,p.outerRadius,v),b]}),w=l;return Be(l)&&Be(u)?w="value":Be(l)&&(w=u),X.createElement(Je,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},o&&e.renderLabelLineItem(o,_,"line"),e.renderLabelItem(s,y,sr(p,w)))});return X.createElement(Je,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=i.isActiveIndex(d),h=l&&i.hasActiveIndex()?l:null,m=f?s:h,g=bt(bt({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return X.createElement(Je,Ql({ref:function(x){x&&!i.sectorRefs.includes(x)&&i.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Go(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),X.createElement(sI,Ql({option:m,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return X.createElement(ia,{begin:o,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,x=[],v=a&&a[0],b=v.startAngle;return a.forEach(function(y,_){var w=h&&h[_],N=_>0?Bn(y,"paddingAngle",0):0;if(w){var S=Dn(w.endAngle-w.startAngle,y.endAngle-y.startAngle),E=bt(bt({},y),{},{startAngle:b+N,endAngle:b+S(p)+N});x.push(E),b=E.endAngle}else{var T=y.endAngle,P=y.startAngle,A=Dn(0,T-P),k=A(p),F=bt(bt({},y),{},{startAngle:b+N,endAngle:b+k+N});x.push(F),b=F.endAngle}}),X.createElement(Je,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,a=n.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Yh(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,u=i.cx,d=i.cy,f=i.innerRadius,h=i.outerRadius,m=i.isAnimationActive,g=this.state.isAnimationFinished;if(a||!s||!s.length||!be(u)||!be(d)||!be(f)||!be(h))return null;var p=Ve("recharts-pie",o);return X.createElement(Je,{tabIndex:this.props.rootTabIndex,className:p,ref:function(v){n.pieRef=v}},this.renderSectors(),l&&this.renderLabels(s),mr.renderCallByParent(this.props,null,!1),(!m||g)&&Ca.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,a){if(X.isValidElement(n))return X.cloneElement(n,i);if(Ie(n))return n(i);var s=Ve("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return X.createElement(qp,Ql({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,i,a){if(X.isValidElement(n))return X.cloneElement(n,i);var s=a;if(Ie(n)&&(s=n(i),X.isValidElement(s)))return s;var o=Ve("recharts-pie-label-text",typeof n!="boolean"&&!Ie(n)?n.className:"");return X.createElement(Ko,Ql({},i,{alignmentBaseline:"middle",className:o}),s)}}])}(j.PureComponent);O0=aa;ti(aa,"displayName","Pie");ti(aa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ji.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ti(aa,"parseDeltaAngle",function(t,e){var r=rn(e-t),n=Math.min(Math.abs(e-t),360);return r*n});ti(aa,"getRealPieData",function(t){var e=t.data,r=t.children,n=Me(t,!1),i=Un(r,Lf);return e&&e.length?e.map(function(a,s){return bt(bt(bt({payload:a},n),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return bt(bt({},n),a.props)}):[]});ti(aa,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,i=e.width,a=e.height,s=B$(i,a),o=n+nn(t.cx,i,i/2),l=r+nn(t.cy,a,a/2),u=nn(t.innerRadius,s,0),d=nn(t.outerRadius,s,s*.8),f=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:u,outerRadius:d,maxRadius:f}});ti(aa,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?bt(bt({},e.type.defaultProps),e.props):e.props,i=O0.getRealPieData(n);if(!i||!i.length)return null;var a=n.cornerRadius,s=n.startAngle,o=n.endAngle,l=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),g=O0.parseCoordinateOfPie(n,r),p=O0.parseDeltaAngle(s,o),x=Math.abs(p),v=u;Be(u)&&Be(f)?(Ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):Be(u)&&(Ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=f);var b=i.filter(function(E){return sr(E,v,0)!==0}).length,y=(x>=360?b:b-1)*l,_=x-b*m-y,w=i.reduce(function(E,T){var P=sr(T,v,0);return E+(be(P)?P:0)},0),N;if(w>0){var S;N=i.map(function(E,T){var P=sr(E,v,0),A=sr(E,d,T),k=(be(P)?P:0)/w,F;T?F=S.endAngle+rn(p)*l*(P!==0?1:0):F=s;var H=F+rn(p)*((P!==0?m:0)+k*_),M=(F+H)/2,O=(g.innerRadius+g.outerRadius)/2,L=[{name:A,value:P,payload:E,dataKey:v,type:h}],R=St(g.cx,g.cy,O,M);return S=bt(bt(bt({percent:k,cornerRadius:a,name:A,tooltipPayload:L,midAngle:M,middleRadius:O,tooltipPosition:R},E),g),{},{value:sr(E,v),startAngle:F,endAngle:H,payload:E,paddingAngle:rn(p)*l}),S})}return bt(bt({},g),{},{sectors:N,data:i})});var Vme=Math.ceil,Hme=Math.max;function qme(t,e,r,n){for(var i=-1,a=Hme(Vme((e-t)/(r||1)),0),s=Array(a);a--;)s[n?a:++i]=t,t+=r;return s}var Gme=qme,Kme=TD,Pk=1/0,Yme=17976931348623157e292;function Xme(t){if(!t)return t===0?t:0;if(t=Kme(t),t===Pk||t===-Pk){var e=t<0?-1:1;return e*Yme}return t===t?t:0}var cI=Xme,Qme=Gme,Jme=Bx,ky=cI;function Zme(t){return function(e,r,n){return n&&typeof n!="number"&&Jme(e,r,n)&&(r=n=void 0),e=ky(e),r===void 0?(r=e,e=0):r=ky(r),n=n===void 0?e<r?1:-1:ky(n),Qme(e,r,n,t)}}var e0e=Zme,t0e=e0e,r0e=t0e(),n0e=r0e;const rg=at(n0e);function uh(t){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(t)}function kk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ak(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kk(Object(r),!0).forEach(function(n){uI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uI(t,e,r){return e=i0e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i0e(t){var e=a0e(t,"string");return uh(e)=="symbol"?e:e+""}function a0e(t,e){if(uh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s0e=["Webkit","Moz","O","ms"],o0e=function(e,r){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=s0e.reduce(function(a,s){return Ak(Ak({},a),{},uI({},s+n,r))},{});return i[e]=r,i};function Hc(t){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(t)}function ng(){return ng=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ng.apply(this,arguments)}function Ok(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ay(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ok(Object(r),!0).forEach(function(n){Pn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ck(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fI(n.key),n)}}function c0e(t,e,r){return e&&Ck(t.prototype,e),r&&Ck(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u0e(t,e,r){return e=ig(e),d0e(t,dI()?Reflect.construct(e,r||[],ig(t).constructor):e.apply(t,r))}function d0e(t,e){if(e&&(Hc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f0e(t)}function f0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dI=function(){return!!t})()}function ig(t){return ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ig(t)}function h0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gw(t,e)}function gw(t,e){return gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gw(t,e)}function Pn(t,e,r){return e=fI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fI(t){var e=m0e(t,"string");return Hc(e)=="symbol"?e:e+""}function m0e(t,e){if(Hc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p0e=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=Wd().domain(rg(0,l)).range([a,a+s-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:d}},Mk=function(e){return e.changedTouches&&!!e.changedTouches.length},qc=function(t){function e(r){var n;return l0e(this,e),n=u0e(this,e,[r]),Pn(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Pn(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Pn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),n.detachDragEndListener()}),Pn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Pn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Pn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Pn(n,"handleSlideDragStart",function(i){var a=Mk(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return h0e(e,t),c0e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,s=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,d=u.length-1,f=Math.min(i,a),h=Math.max(i,a),m=e.getIndexInRange(s,f),g=e.getIndexInRange(s,h);return{startIndex:m-m%l,endIndex:g===d?d:g-g%l}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=sr(a[n],o,n);return Ie(s)?s(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,u=l.x,d=l.width,f=l.travellerWidth,h=l.startIndex,m=l.endIndex,g=l.onChange,p=n.pageX-a;p>0?p=Math.min(p,u+d-f-o,u+d-f-s):p<0&&(p=Math.max(p,u-s,u-o));var x=this.getIndex({startX:s+p,endX:o+p});(x.startIndex!==h||x.endIndex!==m)&&g&&g(x),this.setState({startX:s+p,endX:o+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=Mk(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,u=this.state[s],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,g=d.onChange,p=d.gap,x=d.data,v={startX:this.state.startX,endX:this.state.endX},b=n.pageX-a;b>0?b=Math.min(b,f+h-m-u):b<0&&(b=Math.max(b,f-u)),v[s]=u+b;var y=this.getIndex(v),_=y.startIndex,w=y.endIndex,N=function(){var E=x.length-1;return s==="startX"&&(o>l?_%p===0:w%p===0)||o<l&&w===E||s==="endX"&&(o>l?w%p===0:_%p===0)||o>l&&w===E};this.setState(Pn(Pn({},s,u+b),"brushMoveStartX",n.pageX),function(){g&&N()&&g(y)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,u=s.endX,d=this.state[i],f=o.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=o.length)){var m=o[h];i==="startX"&&m>=u||i==="endX"&&m<=l||this.setState(Pn({},i,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,o=n.height,l=n.fill,u=n.stroke;return X.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,o=n.height,l=n.data,u=n.children,d=n.padding,f=j.Children.only(u);return f?X.cloneElement(f,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,s,o=this,l=this.props,u=l.y,d=l.travellerWidth,f=l.height,h=l.traveller,m=l.ariaLabel,g=l.data,p=l.startIndex,x=l.endIndex,v=Math.max(n,this.props.x),b=Ay(Ay({},Me(this.props,!1)),{},{x:v,y:u,width:d,height:f}),y=m||"Min value: ".concat((a=g[p])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=g[x])===null||s===void 0?void 0:s.name);return X.createElement(Je,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),o.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,d=Math.min(n,i)+u,f=Math.max(Math.abs(i-n)-u,0);return X.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:s,width:f,height:o})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,s=n.y,o=n.height,l=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,g={pointerEvents:"none",fill:u};return X.createElement(Je,{className:"recharts-brush-texts"},X.createElement(Ko,ng({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:s+o/2},g),this.getTextOfTick(i)),X.createElement(Ko,ng({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+m,y:s+o/2},g),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,s=n.children,o=n.x,l=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,g=h.endX,p=h.isTextActive,x=h.isSlideMoving,v=h.isTravellerMoving,b=h.isTravellerFocused;if(!i||!i.length||!be(o)||!be(l)||!be(u)||!be(d)||u<=0||d<=0)return null;var y=Ve("recharts-brush",a),_=X.Children.count(s)===1,w=o0e("userSelect","none");return X.createElement(Je,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||x||v||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,s=n.width,o=n.height,l=n.stroke,u=Math.floor(a+o/2)-1;return X.createElement(X.Fragment,null,X.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),X.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),X.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return X.isValidElement(n)?a=X.cloneElement(n,i):Ie(n)?a=n(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,s=n.width,o=n.x,l=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return Ay({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?p0e({data:a,width:s,x:o,travellerWidth:l,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var h=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);n[l]>i?o=l:s=l}return i>=n[o]?o:s}}])}(j.PureComponent);Pn(qc,"displayName","Brush");Pn(qc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var g0e=I2;function x0e(t,e){var r;return g0e(t,function(n,i,a){return r=e(n,i,a),!r}),!!r}var v0e=x0e,y0e=eD,b0e=la,w0e=v0e,_0e=jn,S0e=Bx;function N0e(t,e,r){var n=_0e(t)?y0e:w0e;return r&&S0e(t,e,r)&&(e=void 0),n(t,b0e(e))}var j0e=N0e;const E0e=at(j0e);var ea=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},Dk=_D;function T0e(t,e,r){e=="__proto__"&&Dk?Dk(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var P0e=T0e,k0e=P0e,A0e=bD,O0e=la;function C0e(t,e){var r={};return e=O0e(e),A0e(t,function(n,i,a){k0e(r,i,e(n,i,a))}),r}var M0e=C0e;const D0e=at(M0e);function $0e(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var I0e=$0e,R0e=I2;function F0e(t,e){var r=!0;return R0e(t,function(n,i,a){return r=!!e(n,i,a),r}),r}var L0e=F0e,B0e=I0e,U0e=L0e,z0e=la,W0e=jn,V0e=Bx;function H0e(t,e,r){var n=W0e(t)?B0e:U0e;return r&&V0e(t,e,r)&&(e=void 0),n(t,z0e(e))}var q0e=H0e;const hI=at(q0e);var G0e=["x","y"];function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}function xw(){return xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xw.apply(this,arguments)}function $k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$k(Object(r),!0).forEach(function(n){K0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$k(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K0e(t,e,r){return e=Y0e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y0e(t){var e=X0e(t,"string");return dh(e)=="symbol"?e:e+""}function X0e(t,e){if(dh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q0e(t,e){if(t==null)return{};var r=J0e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function J0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Z0e(t,e){var r=t.x,n=t.y,i=Q0e(t,G0e),a="".concat(r),s=parseInt(a,10),o="".concat(n),l=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return cd(cd(cd(cd(cd({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function Ik(t){return X.createElement(sI,xw({shapeType:"rectangle",propTransformer:Z0e,activeClassName:"recharts-active-bar"},t))}var epe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var a=typeof n=="number";return a?e(n,i):(a||Xo(),r)}},tpe=["value","background"],mI;function Gc(t){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(t)}function rpe(t,e){if(t==null)return{};var r=npe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function npe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ag(){return ag=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ag.apply(this,arguments)}function Rk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(r),!0).forEach(function(n){_s(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ipe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gI(n.key),n)}}function ape(t,e,r){return e&&Fk(t.prototype,e),r&&Fk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function spe(t,e,r){return e=sg(e),ope(t,pI()?Reflect.construct(e,r||[],sg(t).constructor):e.apply(t,r))}function ope(t,e){if(e&&(Gc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lpe(t)}function lpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pI=function(){return!!t})()}function sg(t){return sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sg(t)}function cpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vw(t,e)}function vw(t,e){return vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},vw(t,e)}function _s(t,e,r){return e=gI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gI(t){var e=upe(t,"string");return Gc(e)=="symbol"?e:e+""}function upe(t,e){if(Gc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ls=function(t){function e(){var r;ipe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=spe(this,e,[].concat(i)),_s(r,"state",{isAnimationFinished:!1}),_s(r,"id",Su("recharts-bar-")),_s(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),_s(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return cpe(e,t),ape(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,d=Me(this.props,!1);return n&&n.map(function(f,h){var m=h===l,g=m?u:s,p=Qt(Qt(Qt({},d),f),{},{isActive:m,option:g,index:h,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return X.createElement(Je,ag({className:"recharts-bar-rectangle"},Go(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),X.createElement(Ik,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return X.createElement(ia,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=a.map(function(x,v){var b=h&&h[v];if(b){var y=Dn(b.x,x.x),_=Dn(b.y,x.y),w=Dn(b.width,x.width),N=Dn(b.height,x.height);return Qt(Qt({},x),{},{x:y(g),y:_(g),width:w(g),height:N(g)})}if(s==="horizontal"){var S=Dn(0,x.height),E=S(g);return Qt(Qt({},x),{},{y:x.y+x.height-E,height:E})}var T=Dn(0,x.width),P=T(g);return Qt(Qt({},x),{},{width:P})});return X.createElement(Je,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Yh(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=Me(this.props.background,!1);return a.map(function(u,d){u.value;var f=u.background,h=rpe(u,tpe);if(!f)return null;var m=Qt(Qt(Qt(Qt(Qt({},h),{},{fill:"#eee"},f),l),Go(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return X.createElement(Ik,ag({key:"background-bar-".concat(d),option:n.props.background,isActive:d===o},m))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=Un(d,Xh);if(!f)return null;var h=u==="vertical"?s[0].height/2:s[0].width/2,m=function(x,v){var b=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:b,errorVal:sr(x,v)}},g={clipPath:n?"url(#clipPath-".concat(i,")"):null};return X.createElement(Je,g,f.map(function(p){return X.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,s=n.className,o=n.xAxis,l=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,g=n.background,p=n.id;if(i||!a||!a.length)return null;var x=this.state.isAnimationFinished,v=Ve("recharts-bar",s),b=o&&o.allowDataOverflow,y=l&&l.allowDataOverflow,_=b||y,w=Be(p)?this.id:p;return X.createElement(Je,{className:v},b||y?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(w)},X.createElement("rect",{x:b?u:u-f/2,y:y?d:d-h/2,width:b?f:f*2,height:y?h:h*2}))):null,X.createElement(Je,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!m||x)&&Ca.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(j.PureComponent);mI=Ls;_s(Ls,"displayName","Bar");_s(Ls,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ji.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_s(Ls,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,m=Vce(n,r);if(!m)return null;var g=e.layout,p=r.type.defaultProps,x=p!==void 0?Qt(Qt({},p),r.props):r.props,v=x.dataKey,b=x.children,y=x.minPointSize,_=g==="horizontal"?s:a,w=u?_.scale.domain():null,N=Qce({numericAxis:_}),S=Un(b,Lf),E=f.map(function(T,P){var A,k,F,H,M,O;u?A=Hce(u[d+P],w):(A=sr(T,v),Array.isArray(A)||(A=[N,A]));var L=epe(y,mI.defaultProps.minPointSize)(A[1],P);if(g==="horizontal"){var R,z=[s.scale(A[0]),s.scale(A[1])],J=z[0],W=z[1];k=TP({axis:a,ticks:o,bandSize:i,offset:m.offset,entry:T,index:P}),F=(R=W??J)!==null&&R!==void 0?R:void 0,H=m.size;var C=J-W;if(M=Number.isNaN(C)?0:C,O={x:k,y:s.y,width:H,height:s.height},Math.abs(L)>0&&Math.abs(M)<Math.abs(L)){var G=rn(M||L)*(Math.abs(L)-Math.abs(M));F-=G,M+=G}}else{var Y=[a.scale(A[0]),a.scale(A[1])],I=Y[0],Q=Y[1];if(k=I,F=TP({axis:s,ticks:l,bandSize:i,offset:m.offset,entry:T,index:P}),H=Q-I,M=m.size,O={x:a.x,y:F,width:a.width,height:M},Math.abs(L)>0&&Math.abs(H)<Math.abs(L)){var fe=rn(H||L)*(Math.abs(L)-Math.abs(H));H+=fe}}return Qt(Qt(Qt({},T),{},{x:k,y:F,width:H,height:M,value:u?A:A[1],payload:T,background:O},S&&S[P]&&S[P].props),{},{tooltipPayload:[F$(r,T)],tooltipPosition:{x:k+H/2,y:F+M/2}})});return Qt({data:E,layout:g},h)});function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function dpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xI(n.key),n)}}function fpe(t,e,r){return e&&Lk(t.prototype,e),r&&Lk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Si(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bk(Object(r),!0).forEach(function(n){av(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function av(t,e,r){return e=xI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xI(t){var e=hpe(t,"string");return fh(e)=="symbol"?e:e+""}function hpe(t,e){if(fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vI=function(e,r,n,i,a){var s=e.width,o=e.height,l=e.layout,u=e.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},h=!!On(u,Ls);return d.reduce(function(m,g){var p=r[g],x=p.orientation,v=p.domain,b=p.padding,y=b===void 0?{}:b,_=p.mirror,w=p.reversed,N="".concat(x).concat(_?"Mirror":""),S,E,T,P,A;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var k=v[1]-v[0],F=1/0,H=p.categoricalDomain.sort();if(H.forEach(function(Y,I){I>0&&(F=Math.min((Y||0)-(H[I-1]||0),F))}),Number.isFinite(F)){var M=F/k,O=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(S=M*O/2),p.padding==="no-gap"){var L=nn(e.barCategoryGap,M*O),R=M*O/2;S=R-L-(R-L)/O*L}}}i==="xAxis"?E=[n.left+(y.left||0)+(S||0),n.left+n.width-(y.right||0)-(S||0)]:i==="yAxis"?E=l==="horizontal"?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(S||0),n.top+n.height-(y.bottom||0)-(S||0)]:E=p.range,w&&(E=[E[1],E[0]]);var z=D$(p,a,h),J=z.scale,W=z.realScaleType;J.domain(v).range(E),$$(J);var C=I$(J,Si(Si({},p),{},{realScaleType:W}));i==="xAxis"?(A=x==="top"&&!_||x==="bottom"&&_,T=n.left,P=f[N]-A*p.height):i==="yAxis"&&(A=x==="left"&&!_||x==="right"&&_,T=f[N]-A*p.width,P=n.top);var G=Si(Si(Si({},p),C),{},{realScaleType:W,x:T,y:P,scale:J,width:i==="xAxis"?n.width:p.width,height:i==="yAxis"?n.height:p.height});return G.bandSize=Wp(G,C),!p.hide&&i==="xAxis"?f[N]+=(A?-1:1)*G.height:p.hide||(f[N]+=(A?-1:1)*G.width),Si(Si({},m),{},av({},g,G))},{})},yI=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return{x:Math.min(n,a),y:Math.min(i,s),width:Math.abs(a-n),height:Math.abs(s-i)}},mpe=function(e){var r=e.x1,n=e.y1,i=e.x2,a=e.y2;return yI({x:r,y:n},{x:i,y:a})},bI=function(){function t(e){dpe(this,t),this.scale=e}return fpe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();av(bI,"EPS",1e-4);var dS=function(e){var r=Object.keys(e).reduce(function(n,i){return Si(Si({},n),{},av({},i,bI.create(e[i])))},{});return Si(Si({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return D0e(i,function(l,u){return r[u].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return hI(i,function(a,s){return r[s].isInRange(a)})}})};function ppe(t){return(t%180+180)%180}var gpe=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=ppe(i),s=a*Math.PI/180,o=Math.atan(n/r),l=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)},xpe=la,vpe=Vh,ype=Fx;function bpe(t){return function(e,r,n){var i=Object(e);if(!vpe(e)){var a=xpe(r);e=ype(e),r=function(o){return a(i[o],o,i)}}var s=t(e,r,n);return s>-1?i[a?e[s]:s]:void 0}}var wpe=bpe,_pe=cI;function Spe(t){var e=_pe(t),r=e%1;return e===e?r?e-r:e:0}var Npe=Spe,jpe=mD,Epe=la,Tpe=Npe,Ppe=Math.max;function kpe(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Tpe(r);return i<0&&(i=Ppe(n+i,0)),jpe(t,Epe(e),i)}var Ape=kpe,Ope=wpe,Cpe=Ape,Mpe=Ope(Cpe),Dpe=Mpe;const $pe=at(Dpe);var Ipe=OG(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),fS=j.createContext(void 0),hS=j.createContext(void 0),wI=j.createContext(void 0),_I=j.createContext({}),SI=j.createContext(void 0),NI=j.createContext(0),jI=j.createContext(0),Uk=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,s=e.clipPathId,o=e.children,l=e.width,u=e.height,d=Ipe(a);return X.createElement(fS.Provider,{value:n},X.createElement(hS.Provider,{value:i},X.createElement(_I.Provider,{value:a},X.createElement(wI.Provider,{value:d},X.createElement(SI.Provider,{value:s},X.createElement(NI.Provider,{value:u},X.createElement(jI.Provider,{value:l},o)))))))},Rpe=function(){return j.useContext(SI)},EI=function(e){var r=j.useContext(fS);r==null&&Xo();var n=r[e];return n==null&&Xo(),n},Fpe=function(){var e=j.useContext(fS);return xs(e)},Lpe=function(){var e=j.useContext(hS),r=$pe(e,function(n){return hI(n.domain,Number.isFinite)});return r||xs(e)},TI=function(e){var r=j.useContext(hS);r==null&&Xo();var n=r[e];return n==null&&Xo(),n},Bpe=function(){var e=j.useContext(wI);return e},Upe=function(){return j.useContext(_I)},mS=function(){return j.useContext(jI)},pS=function(){return j.useContext(NI)};function Kc(t){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(t)}function zpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kI(n.key),n)}}function Vpe(t,e,r){return e&&Wpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hpe(t,e,r){return e=og(e),qpe(t,PI()?Reflect.construct(e,r||[],og(t).constructor):e.apply(t,r))}function qpe(t,e){if(e&&(Kc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gpe(t)}function Gpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PI=function(){return!!t})()}function og(t){return og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},og(t)}function Kpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yw(t,e)}function yw(t,e){return yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},yw(t,e)}function zk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(r),!0).forEach(function(n){gS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gS(t,e,r){return e=kI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kI(t){var e=Ype(t,"string");return Kc(e)=="symbol"?e:e+""}function Ype(t,e){if(Kc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xpe(t,e){return ege(t)||Zpe(t,e)||Jpe(t,e)||Qpe()}function Qpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jpe(t,e){if(t){if(typeof t=="string")return Vk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vk(t,e)}}function Vk(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zpe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ege(t){if(Array.isArray(t))return t}function bw(){return bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bw.apply(this,arguments)}var tge=function(e,r){var n;return X.isValidElement(e)?n=X.cloneElement(e,r):Ie(e)?n=e(r):n=X.createElement("line",bw({},r,{className:"recharts-reference-line-line"})),n},rge=function(e,r,n,i,a,s,o,l,u){var d=a.x,f=a.y,h=a.width,m=a.height;if(n){var g=u.y,p=e.y.apply(g,{position:s});if(ea(u,"discard")&&!e.y.isInRange(p))return null;var x=[{x:d+h,y:p},{x:d,y:p}];return l==="left"?x.reverse():x}if(r){var v=u.x,b=e.x.apply(v,{position:s});if(ea(u,"discard")&&!e.x.isInRange(b))return null;var y=[{x:b,y:f+m},{x:b,y:f}];return o==="top"?y.reverse():y}if(i){var _=u.segment,w=_.map(function(N){return e.apply(N,{position:s})});return ea(u,"discard")&&E0e(w,function(N){return!e.isInRange(N)})?null:w}return null};function nge(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,l=t.alwaysShow,u=Rpe(),d=EI(i),f=TI(a),h=Bpe();if(!u||!h)return null;Ci(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=dS({x:d.scale,y:f.scale}),g=lr(e),p=lr(r),x=n&&n.length===2,v=rge(m,g,p,x,h,t.position,d.orientation,f.orientation,t);if(!v)return null;var b=Xpe(v,2),y=b[0],_=y.x,w=y.y,N=b[1],S=N.x,E=N.y,T=ea(t,"hidden")?"url(#".concat(u,")"):void 0,P=Wk(Wk({clipPath:T},Me(t,!0)),{},{x1:_,y1:w,x2:S,y2:E});return X.createElement(Je,{className:Ve("recharts-reference-line",o)},tge(s,P),mr.renderCallByParent(t,mpe({x1:_,y1:w,x2:S,y2:E})))}var xS=function(t){function e(){return zpe(this,e),Hpe(this,e,arguments)}return Kpe(e,t),Vpe(e,[{key:"render",value:function(){return X.createElement(nge,this.props)}}])}(X.Component);gS(xS,"displayName","ReferenceLine");gS(xS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ww(){return ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ww.apply(this,arguments)}function Yc(t){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(t)}function Hk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hk(Object(r),!0).forEach(function(n){sv(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ige(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function age(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OI(n.key),n)}}function sge(t,e,r){return e&&age(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oge(t,e,r){return e=lg(e),lge(t,AI()?Reflect.construct(e,r||[],lg(t).constructor):e.apply(t,r))}function lge(t,e){if(e&&(Yc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cge(t)}function cge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AI=function(){return!!t})()}function lg(t){return lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lg(t)}function uge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_w(t,e)}function _w(t,e){return _w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_w(t,e)}function sv(t,e,r){return e=OI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OI(t){var e=dge(t,"string");return Yc(e)=="symbol"?e:e+""}function dge(t,e){if(Yc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fge=function(e){var r=e.x,n=e.y,i=e.xAxis,a=e.yAxis,s=dS({x:i.scale,y:a.scale}),o=s.apply({x:r,y:n},{bandAware:!0});return ea(e,"discard")&&!s.isInRange(o)?null:o},ov=function(t){function e(){return ige(this,e),oge(this,e,arguments)}return uge(e,t),sge(e,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,s=n.r,o=n.alwaysShow,l=n.clipPathId,u=lr(i),d=lr(a);if(Ci(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=fge(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,p=g.shape,x=g.className,v=ea(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=qk(qk({clipPath:v},Me(this.props,!0)),{},{cx:h,cy:m});return X.createElement(Je,{className:Ve("recharts-reference-dot",x)},e.renderDot(p,b),mr.renderCallByParent(this.props,{x:h-s,y:m-s,width:2*s,height:2*s}))}}])}(X.Component);sv(ov,"displayName","ReferenceDot");sv(ov,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});sv(ov,"renderDot",function(t,e){var r;return X.isValidElement(t)?r=X.cloneElement(t,e):Ie(t)?r=t(e):r=X.createElement(Jx,ww({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function Sw(){return Sw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sw.apply(this,arguments)}function Xc(t){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(t)}function Gk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gk(Object(r),!0).forEach(function(n){lv(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MI(n.key),n)}}function pge(t,e,r){return e&&mge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gge(t,e,r){return e=cg(e),xge(t,CI()?Reflect.construct(e,r||[],cg(t).constructor):e.apply(t,r))}function xge(t,e){if(e&&(Xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vge(t)}function vge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CI=function(){return!!t})()}function cg(t){return cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cg(t)}function yge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nw(t,e)}function Nw(t,e){return Nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Nw(t,e)}function lv(t,e,r){return e=MI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MI(t){var e=bge(t,"string");return Xc(e)=="symbol"?e:e+""}function bge(t,e){if(Xc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wge=function(e,r,n,i,a){var s=a.x1,o=a.x2,l=a.y1,u=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var h=dS({x:d.scale,y:f.scale}),m={x:e?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ea(a,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:yI(m,g)},cv=function(t){function e(){return hge(this,e),gge(this,e,arguments)}return yge(e,t),pge(e,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,s=n.y1,o=n.y2,l=n.className,u=n.alwaysShow,d=n.clipPathId;Ci(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=lr(i),h=lr(a),m=lr(s),g=lr(o),p=this.props.shape;if(!f&&!h&&!m&&!g&&!p)return null;var x=wge(f,h,m,g,this.props);if(!x&&!p)return null;var v=ea(this.props,"hidden")?"url(#".concat(d,")"):void 0;return X.createElement(Je,{className:Ve("recharts-reference-area",l)},e.renderRect(p,Kk(Kk({clipPath:v},Me(this.props,!0)),x)),mr.renderCallByParent(this.props,x))}}])}(X.Component);lv(cv,"displayName","ReferenceArea");lv(cv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});lv(cv,"renderRect",function(t,e){var r;return X.isValidElement(t)?r=X.cloneElement(t,e):Ie(t)?r=t(e):r=X.createElement(uS,Sw({},e,{className:"recharts-reference-area-rect"})),r});function DI(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function _ge(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return gpe(n,r)}function Sge(t,e,r){var n=r==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function ug(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function Nge(t,e){return DI(t,e+1)}function jge(t,e,r,n,i){for(var a=(n||[]).slice(),s=e.start,o=e.end,l=0,u=1,d=s,f=function(){var g=n==null?void 0:n[l];if(g===void 0)return{v:DI(n,u)};var p=l,x,v=function(){return x===void 0&&(x=r(g,p)),x},b=g.coordinate,y=l===0||ug(t,b,v,d,o);y||(l=0,d=s,u+=1),y&&(d=b+t*(v()/2+i),l+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function Yk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Br(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(r),!0).forEach(function(n){Ege(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ege(t,e,r){return e=Tge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tge(t){var e=Pge(t,"string");return hh(e)=="symbol"?e:e+""}function Pge(t,e){if(hh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kge(t,e,r,n,i){for(var a=(n||[]).slice(),s=a.length,o=e.start,l=e.end,u=function(h){var m=a[h],g,p=function(){return g===void 0&&(g=r(m,h)),g};if(h===s-1){var x=t*(m.coordinate+t*p()/2-l);a[h]=m=Br(Br({},m),{},{tickCoord:x>0?m.coordinate-x*t:m.coordinate})}else a[h]=m=Br(Br({},m),{},{tickCoord:m.coordinate});var v=ug(t,m.tickCoord,p,o,l);v&&(l=m.tickCoord-t*(p()/2+i),a[h]=Br(Br({},m),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function Age(t,e,r,n,i,a){var s=(n||[]).slice(),o=s.length,l=e.start,u=e.end;if(a){var d=n[o-1],f=r(d,o-1),h=t*(d.coordinate+t*f/2-u);s[o-1]=d=Br(Br({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var m=ug(t,d.tickCoord,function(){return f},l,u);m&&(u=d.tickCoord-t*(f/2+i),s[o-1]=Br(Br({},d),{},{isShow:!0}))}for(var g=a?o-1:o,p=function(b){var y=s[b],_,w=function(){return _===void 0&&(_=r(y,b)),_};if(b===0){var N=t*(y.coordinate-t*w()/2-l);s[b]=y=Br(Br({},y),{},{tickCoord:N<0?y.coordinate-N*t:y.coordinate})}else s[b]=y=Br(Br({},y),{},{tickCoord:y.coordinate});var S=ug(t,y.tickCoord,w,l,u);S&&(l=y.tickCoord+t*(w()/2+i),s[b]=Br(Br({},y),{},{isShow:!0}))},x=0;x<g;x++)p(x);return s}function vS(t,e,r){var n=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,l=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!n)return[];if(be(l)||Ji.isSsr)return Nge(i,typeof l=="number"&&be(l)?l:0);var h=[],m=o==="top"||o==="bottom"?"width":"height",g=d&&m==="width"?zd(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},p=function(y,_){var w=Ie(u)?u(y.value,_):y.value;return m==="width"?_ge(zd(w,{fontSize:e,letterSpacing:r}),g,f):zd(w,{fontSize:e,letterSpacing:r})[m]},x=i.length>=2?rn(i[1].coordinate-i[0].coordinate):1,v=Sge(a,x,m);return l==="equidistantPreserveStart"?jge(x,v,p,i,s):(l==="preserveStart"||l==="preserveStartEnd"?h=Age(x,v,p,i,s,l==="preserveStartEnd"):h=kge(x,v,p,i,s),h.filter(function(b){return b.isShow}))}var Oge=["viewBox"],Cge=["viewBox"],Mge=["ticks"];function Qc(t){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(t)}function Jl(){return Jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jl.apply(this,arguments)}function Xk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xk(Object(r),!0).forEach(function(n){yS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Oy(t,e){if(t==null)return{};var r=Dge(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Dge(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,II(n.key),n)}}function Ige(t,e,r){return e&&Qk(t.prototype,e),r&&Qk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rge(t,e,r){return e=dg(e),Fge(t,$I()?Reflect.construct(e,r||[],dg(t).constructor):e.apply(t,r))}function Fge(t,e){if(e&&(Qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lge(t)}function Lge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $I(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($I=function(){return!!t})()}function dg(t){return dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dg(t)}function Bge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jw(t,e)}function jw(t,e){return jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},jw(t,e)}function yS(t,e,r){return e=II(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function II(t){var e=Uge(t,"string");return Qc(e)=="symbol"?e:e+""}function Uge(t,e){if(Qc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Au=function(t){function e(r){var n;return $ge(this,e),n=Rge(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return Bge(e,t),Ige(e,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,s=Oy(n,Oge),o=this.props,l=o.viewBox,u=Oy(o,Cge);return!cc(a,l)||!cc(s,u)||!cc(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,m,g,p,x,v,b,y=f?-1:1,_=n.tickSize||d,w=be(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=g=n.coordinate,x=s+ +!f*l,p=x-y*_,b=p-y*h,v=w;break;case"left":p=x=n.coordinate,g=a+ +!f*o,m=g-y*_,v=m-y*h,b=w;break;case"right":p=x=n.coordinate,g=a+ +f*o,m=g+y*_,v=m+y*h,b=w;break;default:m=g=n.coordinate,x=s+ +f*l,p=x+y*_,b=p+y*h,v=w;break}return{line:{x1:m,y1:p,x2:g,y2:x},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,o=n.height,l=n.orientation,u=n.mirror,d=n.axisLine,f=Xr(Xr(Xr({},Me(this.props,!1)),Me(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);f=Xr(Xr({},f),{},{x1:i,y1:a+h*o,x2:i+s,y2:a+h*o})}else{var m=+(l==="left"&&!u||l==="right"&&u);f=Xr(Xr({},f),{},{x1:i+m*s,y1:a,x2:i+m*s,y2:a+o})}return X.createElement("line",Jl({},f,{className:Ve("recharts-cartesian-axis-line",Bn(d,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var s=this,o=this.props,l=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,h=o.unit,m=vS(Xr(Xr({},this.props),{},{ticks:n}),i,a),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),x=Me(this.props,!1),v=Me(d,!1),b=Xr(Xr({},x),{},{fill:"none"},Me(l,!1)),y=m.map(function(_,w){var N=s.getTickLineCoord(_),S=N.line,E=N.tick,T=Xr(Xr(Xr(Xr({textAnchor:g,verticalAnchor:p},x),{},{stroke:"none",fill:u},v),E),{},{index:w,payload:_,visibleTicksCount:m.length,tickFormatter:f});return X.createElement(Je,Jl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Go(s.props,_,w)),l&&X.createElement("line",Jl({},b,S,{className:Ve("recharts-cartesian-axis-tick-line",Bn(l,"className"))})),d&&e.renderTickItem(d,T,"".concat(Ie(f)?f(_.value,w):_.value).concat(h||"")))});return X.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,m=Oy(f,Mge),g=h;return Ie(l)&&(g=h&&h.length>0?l(this.props):l(m)),s<=0||o<=0||!g||!g.length?null:X.createElement(Je,{className:Ve("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},a&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),mr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return X.isValidElement(n)?s=X.cloneElement(n,i):Ie(n)?s=n(i):s=X.createElement(Ko,Jl({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(j.Component);yS(Au,"displayName","CartesianAxis");yS(Au,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zge=["x1","y1","x2","y2","key"],Wge=["offset"];function Qo(t){"@babel/helpers - typeof";return Qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(t)}function Jk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jk(Object(r),!0).forEach(function(n){Vge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vge(t,e,r){return e=Hge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hge(t){var e=qge(t,"string");return Qo(e)=="symbol"?e:e+""}function qge(t,e){if(Qo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ao(){return Ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ao.apply(this,arguments)}function Zk(t,e){if(t==null)return{};var r=Gge(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Gge(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Kge=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.ry;return X.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function RI(t,e){var r;if(X.isValidElement(t))r=X.cloneElement(t,e);else if(Ie(t))r=t(e);else{var n=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,l=Zk(e,zge),u=Me(l,!1);u.offset;var d=Zk(u,Wge);r=X.createElement("line",Ao({},d,{x1:n,y1:i,x2:a,y2:s,fill:"none",key:o}))}return r}function Yge(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=zr(zr({},t),{},{x1:e,y1:o,x2:e+r,y2:o,key:"line-".concat(l),index:l});return RI(i,u)});return X.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Xge(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=zr(zr({},t),{},{x1:o,y1:e,x2:o,y2:e+r,key:"line-".concat(l),index:l});return RI(i,u)});return X.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Qge(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var d=o.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?i+s-h:d[m+1]-h;if(p<=0)return null;var x=m%e.length;return X.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:p,width:a,stroke:"none",fill:e[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Jge(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?a+o-h:d[m+1]-h;if(p<=0)return null;var x=m%n.length;return X.createElement("rect",{key:"react-".concat(m),x:h,y:s,width:p,height:l,stroke:"none",fill:n[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Zge=function(e,r){var n=e.xAxis,i=e.width,a=e.height,s=e.offset;return M$(vS(zr(zr(zr({},Au.defaultProps),n),{},{ticks:Ea(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,r)},exe=function(e,r){var n=e.yAxis,i=e.width,a=e.height,s=e.offset;return M$(vS(zr(zr(zr({},Au.defaultProps),n),{},{ticks:Ea(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,r)},El={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ew(t){var e,r,n,i,a,s,o=mS(),l=pS(),u=Upe(),d=zr(zr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:El.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:El.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:El.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:El.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:El.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:El.verticalFill,x:be(t.x)?t.x:u.left,y:be(t.y)?t.y:u.top,width:be(t.width)?t.width:u.width,height:be(t.height)?t.height:u.height}),f=d.x,h=d.y,m=d.width,g=d.height,p=d.syncWithTicks,x=d.horizontalValues,v=d.verticalValues,b=Fpe(),y=Lpe();if(!be(m)||m<=0||!be(g)||g<=0||!be(f)||f!==+f||!be(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||Zge,w=d.horizontalCoordinatesGenerator||exe,N=d.horizontalPoints,S=d.verticalPoints;if((!N||!N.length)&&Ie(w)){var E=x&&x.length,T=w({yAxis:y?zr(zr({},y),{},{ticks:E?x:y.ticks}):void 0,width:o,height:l,offset:u},E?!0:p);Ci(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Qo(T),"]")),Array.isArray(T)&&(N=T)}if((!S||!S.length)&&Ie(_)){var P=v&&v.length,A=_({xAxis:b?zr(zr({},b),{},{ticks:P?v:b.ticks}):void 0,width:o,height:l,offset:u},P?!0:p);Ci(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Qo(A),"]")),Array.isArray(A)&&(S=A)}return X.createElement("g",{className:"recharts-cartesian-grid"},X.createElement(Kge,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),X.createElement(Yge,Ao({},d,{offset:u,horizontalPoints:N,xAxis:b,yAxis:y})),X.createElement(Xge,Ao({},d,{offset:u,verticalPoints:S,xAxis:b,yAxis:y})),X.createElement(Qge,Ao({},d,{horizontalPoints:N})),X.createElement(Jge,Ao({},d,{verticalPoints:S})))}Ew.displayName="CartesianGrid";var txe=["type","layout","connectNulls","ref"],rxe=["key"];function Jc(t){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(t)}function eA(t,e){if(t==null)return{};var r=nxe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kd.apply(this,arguments)}function tA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tA(Object(r),!0).forEach(function(n){Ni(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tl(t){return oxe(t)||sxe(t)||axe(t)||ixe()}function ixe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function axe(t,e){if(t){if(typeof t=="string")return Tw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tw(t,e)}}function sxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oxe(t){if(Array.isArray(t))return Tw(t)}function Tw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LI(n.key),n)}}function cxe(t,e,r){return e&&rA(t.prototype,e),r&&rA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function uxe(t,e,r){return e=fg(e),dxe(t,FI()?Reflect.construct(e,r||[],fg(t).constructor):e.apply(t,r))}function dxe(t,e){if(e&&(Jc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fxe(t)}function fxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FI=function(){return!!t})()}function fg(t){return fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fg(t)}function hxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pw(t,e)}function Pw(t,e){return Pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Pw(t,e)}function Ni(t,e,r){return e=LI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LI(t){var e=mxe(t,"string");return Jc(e)=="symbol"?e:e+""}function mxe(t,e){if(Jc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qh=function(t){function e(){var r;lxe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=uxe(this,e,[].concat(i)),Ni(r,"state",{isAnimationFinished:!0,totalLength:0}),Ni(r,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),Ni(r,"getStrokeDasharray",function(s,o,l){var u=l.reduce(function(v,b){return v+b});if(!u)return r.generateSimpleStrokeDasharray(o,s);for(var d=Math.floor(s/u),f=s%u,h=o-s,m=[],g=0,p=0;g<l.length;p+=l[g],++g)if(p+l[g]>f){m=[].concat(Tl(l.slice(0,g)),[f-p]);break}var x=m.length%2===0?[0,h]:[h];return[].concat(Tl(e.repeat(l,d)),Tl(m),x).map(function(v){return"".concat(v,"px")}).join(", ")}),Ni(r,"id",Su("recharts-line-")),Ni(r,"pathRef",function(s){r.mainCurve=s}),Ni(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ni(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return hxe(e,t),cxe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=Un(d,Xh);if(!f)return null;var h=function(p,x){return{x:p.x,y:p.y,value:p.value,errorVal:sr(p.payload,x)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return X.createElement(Je,m,f.map(function(g){return X.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,u=o.points,d=o.dataKey,f=Me(this.props,!1),h=Me(l,!0),m=u.map(function(p,x){var v=En(En(En({key:"dot-".concat(x),r:3},f),h),{},{value:p.value,dataKey:d,cx:p.x,cy:p.y,index:x,payload:p.payload});return e.renderDotItem(l,v)}),g={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return X.createElement(Je,Kd({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(n,i,a,s){var o=this.props,l=o.type,u=o.layout,d=o.connectNulls;o.ref;var f=eA(o,txe),h=En(En(En({},Me(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:n},s),{},{type:l,layout:u,connectNulls:d});return X.createElement(qp,Kd({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var a=this,s=this.props,o=s.points,l=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,h=s.animationEasing,m=s.animationId,g=s.animateNewValues,p=s.width,x=s.height,v=this.state,b=v.prevPoints,y=v.totalLength;return X.createElement(ia,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var w=_.t;if(b){var N=b.length/o.length,S=o.map(function(k,F){var H=Math.floor(F*N);if(b[H]){var M=b[H],O=Dn(M.x,k.x),L=Dn(M.y,k.y);return En(En({},k),{},{x:O(w),y:L(w)})}if(g){var R=Dn(p*2,k.x),z=Dn(x/2,k.y);return En(En({},k),{},{x:R(w),y:z(w)})}return En(En({},k),{},{x:k.x,y:k.y})});return a.renderCurveStatically(S,n,i)}var E=Dn(0,y),T=E(w),P;if(l){var A="".concat(l).split(/[,\s]+/gim).map(function(k){return parseFloat(k)});P=a.getStrokeDasharray(T,y,A)}else P=a.generateSimpleStrokeDasharray(y,T);return a.renderCurveStatically(o,n,i,{strokeDasharray:P})})}},{key:"renderCurve",value:function(n,i){var a=this.props,s=a.points,o=a.isAnimationActive,l=this.state,u=l.prevPoints,d=l.totalLength;return o&&s&&s.length&&(!u&&d>0||!Yh(u,s))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(s,n,i)}},{key:"render",value:function(){var n,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,u=i.xAxis,d=i.yAxis,f=i.top,h=i.left,m=i.width,g=i.height,p=i.isAnimationActive,x=i.id;if(a||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=o.length===1,y=Ve("recharts-line",l),_=u&&u.allowDataOverflow,w=d&&d.allowDataOverflow,N=_||w,S=Be(x)?this.id:x,E=(n=Me(s,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},T=E.r,P=T===void 0?3:T,A=E.strokeWidth,k=A===void 0?2:A,F=RK(s)?s:{},H=F.clipDot,M=H===void 0?!0:H,O=P*2+k;return X.createElement(Je,{className:y},_||w?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(S)},X.createElement("rect",{x:_?h:h-m/2,y:w?f:f-g/2,width:_?m:m*2,height:w?g:g*2})),!M&&X.createElement("clipPath",{id:"clipPath-dots-".concat(S)},X.createElement("rect",{x:h-O/2,y:f-O/2,width:m+O,height:g+O}))):null,!b&&this.renderCurve(N,S),this.renderErrorBar(N,S),(b||s)&&this.renderDots(N,M,S),(!p||v)&&Ca.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var a=n.length%2!==0?[].concat(Tl(n),[0]):n,s=[],o=0;o<i;++o)s=[].concat(Tl(s),Tl(a));return s}},{key:"renderDotItem",value:function(n,i){var a;if(X.isValidElement(n))a=X.cloneElement(n,i);else if(Ie(n))a=n(i);else{var s=i.key,o=eA(i,rxe),l=Ve("recharts-line-dot",typeof n!="boolean"?n.className:"");a=X.createElement(Jx,Kd({key:s},o,{className:l}))}return a}}])}(j.PureComponent);Ni(Qh,"displayName","Line");Ni(Qh,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ji.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ni(Qh,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,l=t.displayedData,u=t.offset,d=e.layout,f=l.map(function(h,m){var g=sr(h,s);return d==="horizontal"?{x:EP({axis:r,ticks:i,bandSize:o,entry:h,index:m}),y:Be(g)?null:n.scale(g),value:g,payload:h}:{x:Be(g)?null:r.scale(g),y:EP({axis:n,ticks:a,bandSize:o,entry:h,index:m}),value:g,payload:h}});return En({points:f,layout:d},u)});function Zc(t){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(t)}function pxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gxe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zI(n.key),n)}}function xxe(t,e,r){return e&&gxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vxe(t,e,r){return e=hg(e),yxe(t,BI()?Reflect.construct(e,r||[],hg(t).constructor):e.apply(t,r))}function yxe(t,e){if(e&&(Zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bxe(t)}function bxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BI=function(){return!!t})()}function hg(t){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hg(t)}function wxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kw(t,e)}function kw(t,e){return kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},kw(t,e)}function UI(t,e,r){return e=zI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zI(t){var e=_xe(t,"string");return Zc(e)=="symbol"?e:e+""}function _xe(t,e){if(Zc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aw(){return Aw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Aw.apply(this,arguments)}function Sxe(t){var e=t.xAxisId,r=mS(),n=pS(),i=EI(e);return i==null?null:X.createElement(Au,Aw({},i,{className:Ve("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return Ea(s,!0)}}))}var eu=function(t){function e(){return pxe(this,e),vxe(this,e,arguments)}return wxe(e,t),xxe(e,[{key:"render",value:function(){return X.createElement(Sxe,this.props)}}])}(X.Component);UI(eu,"displayName","XAxis");UI(eu,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function tu(t){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tu(t)}function Nxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jxe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HI(n.key),n)}}function Exe(t,e,r){return e&&jxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Txe(t,e,r){return e=mg(e),Pxe(t,WI()?Reflect.construct(e,r||[],mg(t).constructor):e.apply(t,r))}function Pxe(t,e){if(e&&(tu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kxe(t)}function kxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WI=function(){return!!t})()}function mg(t){return mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mg(t)}function Axe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ow(t,e)}function Ow(t,e){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ow(t,e)}function VI(t,e,r){return e=HI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HI(t){var e=Oxe(t,"string");return tu(e)=="symbol"?e:e+""}function Oxe(t,e){if(tu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cw(){return Cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cw.apply(this,arguments)}var Cxe=function(e){var r=e.yAxisId,n=mS(),i=pS(),a=TI(r);return a==null?null:X.createElement(Au,Cw({},a,{className:Ve("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(o){return Ea(o,!0)}}))},ru=function(t){function e(){return Nxe(this,e),Txe(this,e,arguments)}return Axe(e,t),Exe(e,[{key:"render",value:function(){return X.createElement(Cxe,this.props)}}])}(X.Component);VI(ru,"displayName","YAxis");VI(ru,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function nA(t){return Ixe(t)||$xe(t)||Dxe(t)||Mxe()}function Mxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dxe(t,e){if(t){if(typeof t=="string")return Mw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mw(t,e)}}function $xe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ixe(t){if(Array.isArray(t))return Mw(t)}function Mw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Dw=function(e,r,n,i,a){var s=Un(e,xS),o=Un(e,ov),l=[].concat(nA(s),nA(o)),u=Un(e,cv),d="".concat(i,"Id"),f=i[0],h=r;if(l.length&&(h=l.reduce(function(p,x){if(x.props[d]===n&&ea(x.props,"extendDomain")&&be(x.props[f])){var v=x.props[f];return[Math.min(p[0],v),Math.max(p[1],v)]}return p},h)),u.length){var m="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(p,x){if(x.props[d]===n&&ea(x.props,"extendDomain")&&be(x.props[m])&&be(x.props[g])){var v=x.props[m],b=x.props[g];return[Math.min(p[0],v,b),Math.max(p[1],v,b)]}return p},h)}return a&&a.length&&(h=a.reduce(function(p,x){return be(x)?[Math.min(p[0],x),Math.max(p[1],x)]:p},h)),h},qI={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||l,h),g=r?r+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],m]:l._events[g].push(m):(l._events[g]=m,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,m,g){var p=r?r+u:u;if(!this._events[p])return!1;var x=this._events[p],v=arguments.length,b,y;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,h),!0;case 5:return x.fn.call(x.context,d,f,h,m),!0;case 6:return x.fn.call(x.context,d,f,h,m,g),!0}for(y=1,b=new Array(v-1);y<v;y++)b[y-1]=arguments[y];x.fn.apply(x.context,b)}else{var _=x.length,w;for(y=0;y<_;y++)switch(x[y].once&&this.removeListener(u,x[y].fn,void 0,!0),v){case 1:x[y].fn.call(x[y].context);break;case 2:x[y].fn.call(x[y].context,d);break;case 3:x[y].fn.call(x[y].context,d,f);break;case 4:x[y].fn.call(x[y].context,d,f,h);break;default:if(!b)for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];x[y].fn.apply(x[y].context,b)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return s(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&s(this,m);else{for(var p=0,x=[],v=g.length;p<v;p++)(g[p].fn!==d||h&&!g[p].once||f&&g[p].context!==f)&&x.push(g[p]);x.length?this._events[m]=x.length===1?x[0]:x:s(this,m)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(qI);var Rxe=qI.exports;const Fxe=at(Rxe);var Cy=new Fxe,My="recharts.syncMouseEvents";function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}function Lxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bxe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GI(n.key),n)}}function Uxe(t,e,r){return e&&Bxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dy(t,e,r){return e=GI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GI(t){var e=zxe(t,"string");return mh(e)=="symbol"?e:e+""}function zxe(t,e){if(mh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wxe=function(){function t(){Lxe(this,t),Dy(this,"activeIndex",0),Dy(this,"coordinateList",[]),Dy(this,"layout","horizontal")}return Uxe(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,s=r.container,o=s===void 0?null:s,l=r.layout,u=l===void 0?null:l,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=a+l+u,h=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function Vxe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&be(n)&&be(i))return!0}return!1}function Hxe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function KI(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,a=t.endAngle,s=St(e,r,n,i),o=St(e,r,n,a);return{points:[s,o],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function qxe(t,e,r){var n,i,a,s;if(t==="horizontal")n=e.x,a=n,i=r.top,s=r.top+r.height;else if(t==="vertical")i=e.y,s=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,h=St(o,l,u,f),m=St(o,l,d,f);n=h.x,i=h.y,a=m.x,s=m.y}else return KI(e);return[{x:n,y:i},{x:a,y:s}]}function ph(t){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ph(t)}function iA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iA(Object(r),!0).forEach(function(n){Gxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gxe(t,e,r){return e=Kxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kxe(t){var e=Yxe(t,"string");return ph(e)=="symbol"?e:e+""}function Yxe(t,e){if(ph(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xxe(t){var e,r,n=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,l=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,m=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!a||!s||h!=="ScatterChart"&&i!=="axis")return null;var g,p=qp;if(h==="ScatterChart")g=s,p=mhe;else if(h==="BarChart")g=Hxe(f,s,l,d),p=uS;else if(f==="radial"){var x=KI(s),v=x.cx,b=x.cy,y=x.radius,_=x.startAngle,w=x.endAngle;g={cx:v,cy:b,startAngle:_,endAngle:w,innerRadius:y,outerRadius:y},p=V$}else g={points:qxe(f,s,l)},p=qp;var N=Vm(Vm(Vm(Vm({stroke:"#ccc",pointerEvents:"none"},l),g),Me(m,!1)),{},{payload:o,payloadIndex:u,className:Ve("recharts-tooltip-cursor",m.className)});return j.isValidElement(m)?j.cloneElement(m,N):j.createElement(p,N)}var Qxe=["item"],Jxe=["children","className","width","height","style","compact","title","desc"];function nu(t){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(t)}function Zl(){return Zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zl.apply(this,arguments)}function aA(t,e){return tve(t)||eve(t,e)||XI(t,e)||Zxe()}function Zxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function tve(t){if(Array.isArray(t))return t}function sA(t,e){if(t==null)return{};var r=rve(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function nve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ive(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QI(n.key),n)}}function ave(t,e,r){return e&&ive(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sve(t,e,r){return e=pg(e),ove(t,YI()?Reflect.construct(e,r||[],pg(t).constructor):e.apply(t,r))}function ove(t,e){if(e&&(nu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lve(t)}function lve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YI=function(){return!!t})()}function pg(t){return pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pg(t)}function cve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$w(t,e)}function $w(t,e){return $w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$w(t,e)}function iu(t){return fve(t)||dve(t)||XI(t)||uve()}function uve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XI(t,e){if(t){if(typeof t=="string")return Iw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Iw(t,e)}}function dve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fve(t){if(Array.isArray(t))return Iw(t)}function Iw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ue(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oA(Object(r),!0).forEach(function(n){De(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function De(t,e,r){return e=QI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QI(t){var e=hve(t,"string");return nu(e)=="symbol"?e:e+""}function hve(t,e){if(nu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mve={xAxis:["bottom","top"],yAxis:["left","right"]},pve={width:"100%",height:"100%"},JI={x:0,y:0};function Hm(t){return t}var gve=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},xve=function(e,r,n,i){var a=r.find(function(d){return d&&d.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return ue(ue(ue({},i),St(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,u=i.angle;return ue(ue(ue({},i),St(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return JI},uv=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,s=(n??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat(iu(o),iu(u)):o},[]);return s.length>0?s:e&&e.length&&be(i)&&be(a)?e.slice(i,a+1):[]};function ZI(t){return t==="number"?[0,"auto"]:void 0}var Rw=function(e,r,n,i){var a=e.graphicalItems,s=e.tooltipAxis,o=uv(r,e);return n<0||!a||!a.length||n>=o.length?null:a.reduce(function(l,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var m=f===void 0?o:f;h=pp(m,s.dataKey,i)}else h=f&&f[n]||o[n];return h?[].concat(iu(l),[F$(u,h)]):l},[])},lA=function(e,r,n,i){var a=i||{x:e.chartX,y:e.chartY},s=gve(a,n),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,d=Fce(s,o,u,l);if(d>=0&&u){var f=u[d]&&u[d].value,h=Rw(e,r,d,f),m=xve(n,o,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},vve=function(e,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,s=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,m=C$(d,a);return n.reduce(function(g,p){var x,v=p.type.defaultProps!==void 0?ue(ue({},p.type.defaultProps),p.props):p.props,b=v.type,y=v.dataKey,_=v.allowDataOverflow,w=v.allowDuplicatedCategory,N=v.scale,S=v.ticks,E=v.includeHidden,T=v[s];if(g[T])return g;var P=uv(e.data,{graphicalItems:i.filter(function(C){var G,Y=s in C.props?C.props[s]:(G=C.type.defaultProps)===null||G===void 0?void 0:G[s];return Y===T}),dataStartIndex:l,dataEndIndex:u}),A=P.length,k,F,H;Vxe(v.domain,_,b)&&(k=X1(v.domain,null,_),m&&(b==="number"||N!=="auto")&&(H=Vd(P,y,"category")));var M=ZI(b);if(!k||k.length===0){var O,L=(O=v.domain)!==null&&O!==void 0?O:M;if(y){if(k=Vd(P,y,b),b==="category"&&m){var R=PK(k);w&&R?(F=k,k=rg(0,A)):w||(k=AP(L,k,p).reduce(function(C,G){return C.indexOf(G)>=0?C:[].concat(iu(C),[G])},[]))}else if(b==="category")w?k=k.filter(function(C){return C!==""&&!Be(C)}):k=AP(L,k,p).reduce(function(C,G){return C.indexOf(G)>=0||G===""||Be(G)?C:[].concat(iu(C),[G])},[]);else if(b==="number"){var z=Wce(P,i.filter(function(C){var G,Y,I=s in C.props?C.props[s]:(G=C.type.defaultProps)===null||G===void 0?void 0:G[s],Q="hide"in C.props?C.props.hide:(Y=C.type.defaultProps)===null||Y===void 0?void 0:Y.hide;return I===T&&(E||!Q)}),y,a,d);z&&(k=z)}m&&(b==="number"||N!=="auto")&&(H=Vd(P,y,"category"))}else m?k=rg(0,A):o&&o[T]&&o[T].hasStack&&b==="number"?k=h==="expand"?[0,1]:R$(o[T].stackGroups,l,u):k=O$(P,i.filter(function(C){var G=s in C.props?C.props[s]:C.type.defaultProps[s],Y="hide"in C.props?C.props.hide:C.type.defaultProps.hide;return G===T&&(E||!Y)}),b,d,!0);if(b==="number")k=Dw(f,k,T,a,S),L&&(k=X1(L,k,_));else if(b==="category"&&L){var J=L,W=k.every(function(C){return J.indexOf(C)>=0});W&&(k=J)}}return ue(ue({},g),{},De({},T,ue(ue({},v),{},{axisType:a,domain:k,categoricalDomain:H,duplicateDomain:F,originalDomain:(x=v.domain)!==null&&x!==void 0?x:M,isCategorical:m,layout:d})))},{})},yve=function(e,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,s=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,h=uv(e.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),m=h.length,g=C$(d,a),p=-1;return n.reduce(function(x,v){var b=v.type.defaultProps!==void 0?ue(ue({},v.type.defaultProps),v.props):v.props,y=b[s],_=ZI("number");if(!x[y]){p++;var w;return g?w=rg(0,m):o&&o[y]&&o[y].hasStack?(w=R$(o[y].stackGroups,l,u),w=Dw(f,w,y,a)):(w=X1(_,O$(h,n.filter(function(N){var S,E,T=s in N.props?N.props[s]:(S=N.type.defaultProps)===null||S===void 0?void 0:S[s],P="hide"in N.props?N.props.hide:(E=N.type.defaultProps)===null||E===void 0?void 0:E.hide;return T===y&&!P}),"number",d),i.defaultProps.allowDataOverflow),w=Dw(f,w,y,a)),ue(ue({},x),{},De({},y,ue(ue({axisType:a},i.defaultProps),{},{hide:!0,orientation:Bn(mve,"".concat(a,".").concat(p%2),null),domain:w,originalDomain:_,isCategorical:g,layout:d})))}return x},{})},bve=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,s=r.graphicalItems,o=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=e.children,f="".concat(i,"Id"),h=Un(d,a),m={};return h&&h.length?m=vve(e,{axes:h,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(m=yve(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),m},wve=function(e){var r=xs(e),n=Ea(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:R2(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Wp(r,n)}},cA=function(e){var r=e.children,n=e.defaultShowTooltip,i=On(r,qc),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},_ve=function(e){return!e||!e.length?!1:e.some(function(r){var n=Aa(r&&r.type);return n&&n.indexOf("Bar")>=0})},uA=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Sve=function(e,r){var n=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=On(f,qc),g=On(f,uc),p=Object.keys(l).reduce(function(w,N){var S=l[N],E=S.orientation;return!S.mirror&&!S.hide?ue(ue({},w),{},De({},E,w[E]+S.width)):w},{left:h.left||0,right:h.right||0}),x=Object.keys(s).reduce(function(w,N){var S=s[N],E=S.orientation;return!S.mirror&&!S.hide?ue(ue({},w),{},De({},E,Bn(w,"".concat(E))+S.height)):w},{top:h.top||0,bottom:h.bottom||0}),v=ue(ue({},x),p),b=v.bottom;m&&(v.bottom+=m.props.height||qc.defaultProps.height),g&&r&&(v=Uce(v,i,n,r));var y=u-v.left-v.right,_=d-v.top-v.bottom;return ue(ue({brushBottom:b},v),{},{width:Math.max(y,0),height:Math.max(_,0)})},Nve=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},bS=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(v,b){var y=b.graphicalItems,_=b.stackGroups,w=b.offset,N=b.updateId,S=b.dataStartIndex,E=b.dataEndIndex,T=v.barSize,P=v.layout,A=v.barGap,k=v.barCategoryGap,F=v.maxBarSize,H=uA(P),M=H.numericAxisName,O=H.cateAxisName,L=_ve(y),R=[];return y.forEach(function(z,J){var W=uv(v.data,{graphicalItems:[z],dataStartIndex:S,dataEndIndex:E}),C=z.type.defaultProps!==void 0?ue(ue({},z.type.defaultProps),z.props):z.props,G=C.dataKey,Y=C.maxBarSize,I=C["".concat(M,"Id")],Q=C["".concat(O,"Id")],fe={},me=l.reduce(function($t,$r){var pi=b["".concat($r.axisType,"Map")],_r=C["".concat($r.axisType,"Id")];pi&&pi[_r]||$r.axisType==="zAxis"||Xo();var ca=pi[_r];return ue(ue({},$t),{},De(De({},$r.axisType,ca),"".concat($r.axisType,"Ticks"),Ea(ca)))},fe),ee=me[O],le=me["".concat(O,"Ticks")],te=_&&_[I]&&_[I].hasStack&&Jce(z,_[I].stackGroups),Z=Aa(z.type).indexOf("Bar")>=0,ke=Wp(ee,le),Ee=[],et=L&&Lce({barSize:T,stackGroups:_,totalSize:Nve(me,O)});if(Z){var Re,we,Dt=Be(Y)?F:Y,ur=(Re=(we=Wp(ee,le,!0))!==null&&we!==void 0?we:Dt)!==null&&Re!==void 0?Re:0;Ee=Bce({barGap:A,barCategoryGap:k,bandSize:ur!==ke?ur:ke,sizeList:et[Q],maxBarSize:Dt}),ur!==ke&&(Ee=Ee.map(function($t){return ue(ue({},$t),{},{position:ue(ue({},$t.position),{},{offset:$t.position.offset-ur/2})})}))}var un=z&&z.type&&z.type.getComposedData;un&&R.push({props:ue(ue({},un(ue(ue({},me),{},{displayedData:W,props:v,dataKey:G,item:z,bandSize:ke,barPosition:Ee,offset:w,stackedData:te,layout:P,dataStartIndex:S,dataEndIndex:E}))),{},De(De(De({key:z.key||"item-".concat(J)},M,me[M]),O,me[O]),"animationId",N)),childIndex:BK(z,v.children),item:z})}),R},m=function(v,b){var y=v.props,_=v.dataStartIndex,w=v.dataEndIndex,N=v.updateId;if(!SE({props:y}))return null;var S=y.children,E=y.layout,T=y.stackOffset,P=y.data,A=y.reverseStackOrder,k=uA(E),F=k.numericAxisName,H=k.cateAxisName,M=Un(S,n),O=Xce(P,M,"".concat(F,"Id"),"".concat(H,"Id"),T,A),L=l.reduce(function(C,G){var Y="".concat(G.axisType,"Map");return ue(ue({},C),{},De({},Y,bve(y,ue(ue({},G),{},{graphicalItems:M,stackGroups:G.axisType===F&&O,dataStartIndex:_,dataEndIndex:w}))))},{}),R=Sve(ue(ue({},L),{},{props:y,graphicalItems:M}),b==null?void 0:b.legendBBox);Object.keys(L).forEach(function(C){L[C]=d(y,L[C],R,C.replace("Map",""),r)});var z=L["".concat(H,"Map")],J=wve(z),W=h(y,ue(ue({},L),{},{dataStartIndex:_,dataEndIndex:w,updateId:N,graphicalItems:M,stackGroups:O,offset:R}));return ue(ue({formattedGraphicalItems:W,graphicalItems:M,offset:R,stackGroups:O},J),L)},g=function(x){function v(b){var y,_,w;return nve(this,v),w=sve(this,v,[b]),De(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),De(w,"accessibilityManager",new Wxe),De(w,"handleLegendBBoxUpdate",function(N){if(N){var S=w.state,E=S.dataStartIndex,T=S.dataEndIndex,P=S.updateId;w.setState(ue({legendBBox:N},m({props:w.props,dataStartIndex:E,dataEndIndex:T,updateId:P},ue(ue({},w.state),{},{legendBBox:N}))))}}),De(w,"handleReceiveSyncEvent",function(N,S,E){if(w.props.syncId===N){if(E===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(S)}}),De(w,"handleBrushChange",function(N){var S=N.startIndex,E=N.endIndex;if(S!==w.state.dataStartIndex||E!==w.state.dataEndIndex){var T=w.state.updateId;w.setState(function(){return ue({dataStartIndex:S,dataEndIndex:E},m({props:w.props,dataStartIndex:S,dataEndIndex:E,updateId:T},w.state))}),w.triggerSyncEvent({dataStartIndex:S,dataEndIndex:E})}}),De(w,"handleMouseEnter",function(N){var S=w.getMouseInfo(N);if(S){var E=ue(ue({},S),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var T=w.props.onMouseEnter;Ie(T)&&T(E,N)}}),De(w,"triggeredAfterMouseMove",function(N){var S=w.getMouseInfo(N),E=S?ue(ue({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var T=w.props.onMouseMove;Ie(T)&&T(E,N)}),De(w,"handleItemMouseEnter",function(N){w.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),De(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),De(w,"handleMouseMove",function(N){N.persist(),w.throttleTriggeredAfterMouseMove(N)}),De(w,"handleMouseLeave",function(N){w.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var E=w.props.onMouseLeave;Ie(E)&&E(S,N)}),De(w,"handleOuterEvent",function(N){var S=LK(N),E=Bn(w.props,"".concat(S));if(S&&Ie(E)){var T,P;/.*touch.*/i.test(S)?P=w.getMouseInfo(N.changedTouches[0]):P=w.getMouseInfo(N),E((T=P)!==null&&T!==void 0?T:{},N)}}),De(w,"handleClick",function(N){var S=w.getMouseInfo(N);if(S){var E=ue(ue({},S),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var T=w.props.onClick;Ie(T)&&T(E,N)}}),De(w,"handleMouseDown",function(N){var S=w.props.onMouseDown;if(Ie(S)){var E=w.getMouseInfo(N);S(E,N)}}),De(w,"handleMouseUp",function(N){var S=w.props.onMouseUp;if(Ie(S)){var E=w.getMouseInfo(N);S(E,N)}}),De(w,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),De(w,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&w.handleMouseDown(N.changedTouches[0])}),De(w,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&w.handleMouseUp(N.changedTouches[0])}),De(w,"handleDoubleClick",function(N){var S=w.props.onDoubleClick;if(Ie(S)){var E=w.getMouseInfo(N);S(E,N)}}),De(w,"handleContextMenu",function(N){var S=w.props.onContextMenu;if(Ie(S)){var E=w.getMouseInfo(N);S(E,N)}}),De(w,"triggerSyncEvent",function(N){w.props.syncId!==void 0&&Cy.emit(My,w.props.syncId,N,w.eventEmitterSymbol)}),De(w,"applySyncEvent",function(N){var S=w.props,E=S.layout,T=S.syncMethod,P=w.state.updateId,A=N.dataStartIndex,k=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)w.setState(ue({dataStartIndex:A,dataEndIndex:k},m({props:w.props,dataStartIndex:A,dataEndIndex:k,updateId:P},w.state)));else if(N.activeTooltipIndex!==void 0){var F=N.chartX,H=N.chartY,M=N.activeTooltipIndex,O=w.state,L=O.offset,R=O.tooltipTicks;if(!L)return;if(typeof T=="function")M=T(R,N);else if(T==="value"){M=-1;for(var z=0;z<R.length;z++)if(R[z].value===N.activeLabel){M=z;break}}var J=ue(ue({},L),{},{x:L.left,y:L.top}),W=Math.min(F,J.x+J.width),C=Math.min(H,J.y+J.height),G=R[M]&&R[M].value,Y=Rw(w.state,w.props.data,M),I=R[M]?{x:E==="horizontal"?R[M].coordinate:W,y:E==="horizontal"?C:R[M].coordinate}:JI;w.setState(ue(ue({},N),{},{activeLabel:G,activeCoordinate:I,activePayload:Y,activeTooltipIndex:M}))}else w.setState(N)}),De(w,"renderCursor",function(N){var S,E=w.state,T=E.isTooltipActive,P=E.activeCoordinate,A=E.activePayload,k=E.offset,F=E.activeTooltipIndex,H=E.tooltipAxisBandSize,M=w.getTooltipEventType(),O=(S=N.props.active)!==null&&S!==void 0?S:T,L=w.props.layout,R=N.key||"_recharts-cursor";return X.createElement(Xxe,{key:R,activeCoordinate:P,activePayload:A,activeTooltipIndex:F,chartName:r,element:N,isActive:O,layout:L,offset:k,tooltipAxisBandSize:H,tooltipEventType:M})}),De(w,"renderPolarAxis",function(N,S,E){var T=Bn(N,"type.axisType"),P=Bn(w.state,"".concat(T,"Map")),A=N.type.defaultProps,k=A!==void 0?ue(ue({},A),N.props):N.props,F=P&&P[k["".concat(T,"Id")]];return j.cloneElement(N,ue(ue({},F),{},{className:Ve(T,F.className),key:N.key||"".concat(S,"-").concat(E),ticks:Ea(F,!0)}))}),De(w,"renderPolarGrid",function(N){var S=N.props,E=S.radialLines,T=S.polarAngles,P=S.polarRadius,A=w.state,k=A.radiusAxisMap,F=A.angleAxisMap,H=xs(k),M=xs(F),O=M.cx,L=M.cy,R=M.innerRadius,z=M.outerRadius;return j.cloneElement(N,{polarAngles:Array.isArray(T)?T:Ea(M,!0).map(function(J){return J.coordinate}),polarRadius:Array.isArray(P)?P:Ea(H,!0).map(function(J){return J.coordinate}),cx:O,cy:L,innerRadius:R,outerRadius:z,key:N.key||"polar-grid",radialLines:E})}),De(w,"renderLegend",function(){var N=w.state.formattedGraphicalItems,S=w.props,E=S.children,T=S.width,P=S.height,A=w.props.margin||{},k=T-(A.left||0)-(A.right||0),F=k$({children:E,formattedGraphicalItems:N,legendWidth:k,legendContent:u});if(!F)return null;var H=F.item,M=sA(F,Qxe);return j.cloneElement(H,ue(ue({},M),{},{chartWidth:T,chartHeight:P,margin:A,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),De(w,"renderTooltip",function(){var N,S=w.props,E=S.children,T=S.accessibilityLayer,P=On(E,Cn);if(!P)return null;var A=w.state,k=A.isTooltipActive,F=A.activeCoordinate,H=A.activePayload,M=A.activeLabel,O=A.offset,L=(N=P.props.active)!==null&&N!==void 0?N:k;return j.cloneElement(P,{viewBox:ue(ue({},O),{},{x:O.left,y:O.top}),active:L,label:M,payload:L?H:[],coordinate:F,accessibilityLayer:T})}),De(w,"renderBrush",function(N){var S=w.props,E=S.margin,T=S.data,P=w.state,A=P.offset,k=P.dataStartIndex,F=P.dataEndIndex,H=P.updateId;return j.cloneElement(N,{key:N.key||"_recharts-brush",onChange:Bm(w.handleBrushChange,N.props.onChange),data:T,x:be(N.props.x)?N.props.x:A.left,y:be(N.props.y)?N.props.y:A.top+A.height+A.brushBottom-(E.bottom||0),width:be(N.props.width)?N.props.width:A.width,startIndex:k,endIndex:F,updateId:"brush-".concat(H)})}),De(w,"renderReferenceElement",function(N,S,E){if(!N)return null;var T=w,P=T.clipPathId,A=w.state,k=A.xAxisMap,F=A.yAxisMap,H=A.offset,M=N.type.defaultProps||{},O=N.props,L=O.xAxisId,R=L===void 0?M.xAxisId:L,z=O.yAxisId,J=z===void 0?M.yAxisId:z;return j.cloneElement(N,{key:N.key||"".concat(S,"-").concat(E),xAxis:k[R],yAxis:F[J],viewBox:{x:H.left,y:H.top,width:H.width,height:H.height},clipPathId:P})}),De(w,"renderActivePoints",function(N){var S=N.item,E=N.activePoint,T=N.basePoint,P=N.childIndex,A=N.isRange,k=[],F=S.props.key,H=S.item.type.defaultProps!==void 0?ue(ue({},S.item.type.defaultProps),S.item.props):S.item.props,M=H.activeDot,O=H.dataKey,L=ue(ue({index:P,dataKey:O,cx:E.x,cy:E.y,r:4,fill:cS(S.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},Me(M,!1)),gp(M));return k.push(v.renderActiveDot(M,L,"".concat(F,"-activePoint-").concat(P))),T?k.push(v.renderActiveDot(M,ue(ue({},L),{},{cx:T.x,cy:T.y}),"".concat(F,"-basePoint-").concat(P))):A&&k.push(null),k}),De(w,"renderGraphicChild",function(N,S,E){var T=w.filterFormatItem(N,S,E);if(!T)return null;var P=w.getTooltipEventType(),A=w.state,k=A.isTooltipActive,F=A.tooltipAxis,H=A.activeTooltipIndex,M=A.activeLabel,O=w.props.children,L=On(O,Cn),R=T.props,z=R.points,J=R.isRange,W=R.baseLine,C=T.item.type.defaultProps!==void 0?ue(ue({},T.item.type.defaultProps),T.item.props):T.item.props,G=C.activeDot,Y=C.hide,I=C.activeBar,Q=C.activeShape,fe=!!(!Y&&k&&L&&(G||I||Q)),me={};P!=="axis"&&L&&L.props.trigger==="click"?me={onClick:Bm(w.handleItemMouseEnter,N.props.onClick)}:P!=="axis"&&(me={onMouseLeave:Bm(w.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:Bm(w.handleItemMouseEnter,N.props.onMouseEnter)});var ee=j.cloneElement(N,ue(ue({},T.props),me));function le($r){return typeof F.dataKey=="function"?F.dataKey($r.payload):null}if(fe)if(H>=0){var te,Z;if(F.dataKey&&!F.allowDuplicatedCategory){var ke=typeof F.dataKey=="function"?le:"payload.".concat(F.dataKey.toString());te=pp(z,ke,M),Z=J&&W&&pp(W,ke,M)}else te=z==null?void 0:z[H],Z=J&&W&&W[H];if(Q||I){var Ee=N.props.activeIndex!==void 0?N.props.activeIndex:H;return[j.cloneElement(N,ue(ue(ue({},T.props),me),{},{activeIndex:Ee})),null,null]}if(!Be(te))return[ee].concat(iu(w.renderActivePoints({item:T,activePoint:te,basePoint:Z,childIndex:H,isRange:J})))}else{var et,Re=(et=w.getItemByXY(w.state.activeCoordinate))!==null&&et!==void 0?et:{graphicalItem:ee},we=Re.graphicalItem,Dt=we.item,ur=Dt===void 0?N:Dt,un=we.childIndex,$t=ue(ue(ue({},T.props),me),{},{activeIndex:un});return[j.cloneElement(ur,$t),null,null]}return J?[ee,null,null]:[ee,null]}),De(w,"renderCustomized",function(N,S,E){return j.cloneElement(N,ue(ue({key:"recharts-customized-".concat(E)},w.props),w.state))}),De(w,"renderMap",{CartesianGrid:{handler:Hm,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Hm},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Hm},YAxis:{handler:Hm},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((y=b.id)!==null&&y!==void 0?y:Su("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=PD(w.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),w.state={},w}return cve(v,x),ave(v,[{key:"componentDidMount",value:function(){var y,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,_=y.children,w=y.data,N=y.height,S=y.layout,E=On(_,Cn);if(E){var T=E.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,A=Rw(this.state,w,T,P),k=this.state.tooltipTicks[T].coordinate,F=(this.state.offset.top+N)/2,H=S==="horizontal",M=H?{x:k,y:F}:{y:k,x:F},O=this.state.formattedGraphicalItems.find(function(R){var z=R.item;return z.type.name==="Scatter"});O&&(M=ue(ue({},M),O.props.points[T].tooltipPosition),A=O.props.points[T].tooltipPayload);var L={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:P,activePayload:A,activeCoordinate:M};this.setState(L),this.renderCursor(E),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var w,N;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(y){d1([On(y.children,Cn)],[On(this.props.children,Cn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=On(this.props.children,Cn);if(y&&typeof y.props.shared=="boolean"){var _=y.props.shared?"axis":"item";return o.indexOf(_)>=0?_:a}return a}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var _=this.container,w=_.getBoundingClientRect(),N=fae(w),S={chartX:Math.round(y.pageX-N.left),chartY:Math.round(y.pageY-N.top)},E=w.width/_.offsetWidth||1,T=this.inRange(S.chartX,S.chartY,E);if(!T)return null;var P=this.state,A=P.xAxisMap,k=P.yAxisMap,F=this.getTooltipEventType();if(F!=="axis"&&A&&k){var H=xs(A).scale,M=xs(k).scale,O=H&&H.invert?H.invert(S.chartX):null,L=M&&M.invert?M.invert(S.chartY):null;return ue(ue({},S),{},{xValue:O,yValue:L})}var R=lA(this.state,this.props.data,this.props.layout,T);return R?ue(ue({},S),R):null}},{key:"inRange",value:function(y,_){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,S=y/w,E=_/w;if(N==="horizontal"||N==="vertical"){var T=this.state.offset,P=S>=T.left&&S<=T.left+T.width&&E>=T.top&&E<=T.top+T.height;return P?{x:S,y:E}:null}var A=this.state,k=A.angleAxisMap,F=A.radiusAxisMap;if(k&&F){var H=xs(k);return MP({x:S,y:E},H)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,_=this.getTooltipEventType(),w=On(y,Cn),N={};w&&_==="axis"&&(w.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=gp(this.props,this.handleOuterEvent);return ue(ue({},S),N)}},{key:"addListener",value:function(){Cy.on(My,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Cy.removeListener(My,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,_,w){for(var N=this.state.formattedGraphicalItems,S=0,E=N.length;S<E;S++){var T=N[S];if(T.item===y||T.props.key===y.key||_===Aa(T.item.type)&&w===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,_=this.state.offset,w=_.left,N=_.top,S=_.height,E=_.width;return X.createElement("defs",null,X.createElement("clipPath",{id:y},X.createElement("rect",{x:w,y:N,height:S,width:E})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(_,w){var N=aA(w,2),S=N[0],E=N[1];return ue(ue({},_),{},De({},S,E.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(_,w){var N=aA(w,2),S=N[0],E=N[1];return ue(ue({},_),{},De({},S,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[y])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(y){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[y])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(y){var _=this.state,w=_.formattedGraphicalItems,N=_.activeItem;if(w&&w.length)for(var S=0,E=w.length;S<E;S++){var T=w[S],P=T.props,A=T.item,k=A.type.defaultProps!==void 0?ue(ue({},A.type.defaultProps),A.props):A.props,F=Aa(A.type);if(F==="Bar"){var H=(P.data||[]).find(function(R){return Kfe(y,R)});if(H)return{graphicalItem:T,payload:H}}else if(F==="RadialBar"){var M=(P.data||[]).find(function(R){return MP(y,R)});if(M)return{graphicalItem:T,payload:M}}else if(nv(T,N)||iv(T,N)||ch(T,N)){var O=Ime({graphicalItem:T,activeTooltipItem:N,itemData:k.data}),L=k.activeIndex===void 0?O:k.activeIndex;return{graphicalItem:ue(ue({},T),{},{childIndex:L}),payload:ch(T,N)?k.data[O]:T.props.data[O]}}}return null}},{key:"render",value:function(){var y=this;if(!SE(this))return null;var _=this.props,w=_.children,N=_.className,S=_.width,E=_.height,T=_.style,P=_.compact,A=_.title,k=_.desc,F=sA(_,Jxe),H=Me(F,!1);if(P)return X.createElement(Uk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement(h1,Zl({},H,{width:S,height:E,title:A,desc:k}),this.renderClipPath(),jE(w,this.renderMap)));if(this.props.accessibilityLayer){var M,O;H.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,H.role=(O=this.props.role)!==null&&O!==void 0?O:"application",H.onKeyDown=function(R){y.accessibilityManager.keyboardEvent(R)},H.onFocus=function(){y.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return X.createElement(Uk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement("div",Zl({className:Ve("recharts-wrapper",N),style:ue({position:"relative",cursor:"default",width:S,height:E},T)},L,{ref:function(z){y.container=z}}),X.createElement(h1,Zl({},H,{width:S,height:E,title:A,desc:k,style:pve}),this.renderClipPath(),jE(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);De(g,"displayName",r),De(g,"defaultProps",ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),De(g,"getDerivedStateFromProps",function(x,v){var b=x.dataKey,y=x.data,_=x.children,w=x.width,N=x.height,S=x.layout,E=x.stackOffset,T=x.margin,P=v.dataStartIndex,A=v.dataEndIndex;if(v.updateId===void 0){var k=cA(x);return ue(ue(ue({},k),{},{updateId:0},m(ue(ue({props:x},k),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:y,prevWidth:w,prevHeight:N,prevLayout:S,prevStackOffset:E,prevMargin:T,prevChildren:_})}if(b!==v.prevDataKey||y!==v.prevData||w!==v.prevWidth||N!==v.prevHeight||S!==v.prevLayout||E!==v.prevStackOffset||!cc(T,v.prevMargin)){var F=cA(x),H={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},M=ue(ue({},lA(v,y,S)),{},{updateId:v.updateId+1}),O=ue(ue(ue({},F),H),M);return ue(ue(ue({},O),m(ue({props:x},O),v)),{},{prevDataKey:b,prevData:y,prevWidth:w,prevHeight:N,prevLayout:S,prevStackOffset:E,prevMargin:T,prevChildren:_})}if(!d1(_,v.prevChildren)){var L,R,z,J,W=On(_,qc),C=W&&(L=(R=W.props)===null||R===void 0?void 0:R.startIndex)!==null&&L!==void 0?L:P,G=W&&(z=(J=W.props)===null||J===void 0?void 0:J.endIndex)!==null&&z!==void 0?z:A,Y=C!==P||G!==A,I=!Be(y),Q=I&&!Y?v.updateId:v.updateId+1;return ue(ue({updateId:Q},m(ue(ue({props:x},v),{},{updateId:Q,dataStartIndex:C,dataEndIndex:G}),v)),{},{prevChildren:_,dataStartIndex:C,dataEndIndex:G})}return null}),De(g,"renderActiveDot",function(x,v,b){var y;return j.isValidElement(x)?y=j.cloneElement(x,v):Ie(x)?y=x(v):y=X.createElement(Jx,v),X.createElement(Je,{className:"recharts-active-dot",key:b},y)});var p=j.forwardRef(function(v,b){return X.createElement(g,Zl({},v,{ref:b}))});return p.displayName=g.displayName,p},jve=bS({chartName:"LineChart",GraphicalChild:Qh,axisComponents:[{axisType:"xAxis",AxisComp:eu},{axisType:"yAxis",AxisComp:ru}],formatAxisMap:vI}),Eve=bS({chartName:"BarChart",GraphicalChild:Ls,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:eu},{axisType:"yAxis",AxisComp:ru}],formatAxisMap:vI}),dA=bS({chartName:"PieChart",GraphicalChild:aa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:rv},{axisType:"radiusAxis",AxisComp:ev}],formatAxisMap:lue,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ns=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6"],$l=t=>`${t.toFixed(2)} ر.ع.`,Tve=t=>`${(t*100).toFixed(2)}%`,fA=({active:t,payload:e})=>t&&e&&e.length?c.jsxs("div",{className:"bg-white p-2 border border-gray-200 rounded shadow-sm",children:[c.jsx("p",{className:"text-sm font-medium",children:e[0].name}),c.jsx("p",{className:"text-sm text-gray-600",children:$l(e[0].value)}),c.jsxs("p",{className:"text-sm text-gray-600",children:[(e[0].value/e[0].payload.total*100).toFixed(2),"%"]})]}):null;function Pve({data:t,selectedBranch:e,branchData:r,transactionTrend:n}){const{language:i}=_e(),a=Mf[i],s=t.totalAmount>0?t.totalProfit/t.totalAmount:0,o=Object.entries(t.byPaymentMethod).filter(([u,d])=>d.amount>0).map(([u,d])=>({name:a[u]||u,value:Number(d.amount.toFixed(2)),total:t.totalAmount})),l=Object.entries(t.byTransactionType).filter(([u,d])=>d.amount>0).map(([u,d])=>({name:a[u]||u,value:Number(d.amount.toFixed(2)),total:t.totalAmount}));return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-100 shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:a.totalTransactions}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.transactionCount.toLocaleString()})]}),c.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 p-6 rounded-xl border border-emerald-100 shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:a.totalAmount}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:$l(t.totalAmount)})]}),c.jsxs("div",{className:"bg-gradient-to-br from-violet-50 to-purple-50 p-6 rounded-xl border border-violet-100 shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:a.totalProfit}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:$l(t.totalProfit)})]}),c.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 p-6 rounded-xl border border-amber-100 shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:a.profitMargin}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Tve(s)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:a.paymentMethods}),o.length>0?c.jsxs("div",{className:"flex flex-col",children:[c.jsx("div",{className:"h-[300px]",children:c.jsx($m,{width:"100%",height:"100%",children:c.jsxs(dA,{children:[c.jsx(aa,{data:o,cx:"50%",cy:"50%",innerRadius:70,outerRadius:120,fill:"#8884d8",paddingAngle:3,dataKey:"value",children:o.map((u,d)=>c.jsx(Lf,{fill:ns[d%ns.length]},`cell-${d}`))}),c.jsx(Cn,{content:c.jsx(fA,{})})]})})}),c.jsx("div",{className:"mt-4 px-2",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b",children:[c.jsx("th",{className:"text-start py-2 px-4 font-medium text-gray-600",children:a.type}),c.jsx("th",{className:"text-end py-2 px-4 font-medium text-gray-600",children:a.amount}),c.jsx("th",{className:"text-end py-2 px-4 font-medium text-gray-600",children:a.percentage})]})}),c.jsx("tbody",{children:o.map((u,d)=>c.jsxs("tr",{className:"border-b border-gray-100",children:[c.jsxs("td",{className:"py-2 px-4 flex items-center",children:[c.jsx("span",{className:"w-3 h-3 rounded-full ml-1 mr-3",style:{backgroundColor:ns[d%ns.length]}}),c.jsx("span",{className:"font-medium text-gray-900",children:u.name})]}),c.jsx("td",{className:"text-end py-2 px-4 text-gray-900 font-medium",children:$l(u.value)}),c.jsxs("td",{className:"text-end py-2 px-4 text-gray-600",children:[(u.value/u.total*100).toFixed(1),"%"]})]},`row-${d}`))})]})})]}):c.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-500",children:a.noDataAvailable})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:a.transactionTypes}),l.length>0?c.jsxs("div",{className:"flex flex-col",children:[c.jsx("div",{className:"h-[300px]",children:c.jsx($m,{width:"100%",height:"100%",children:c.jsxs(dA,{children:[c.jsx(aa,{data:l,cx:"50%",cy:"50%",innerRadius:70,outerRadius:120,fill:"#8884d8",paddingAngle:3,dataKey:"value",children:l.map((u,d)=>c.jsx(Lf,{fill:ns[d%ns.length]},`cell-${d}`))}),c.jsx(Cn,{content:c.jsx(fA,{})})]})})}),c.jsx("div",{className:"mt-4 px-2",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b",children:[c.jsx("th",{className:"text-start py-2 px-4 font-medium text-gray-600",children:a.type}),c.jsx("th",{className:"text-end py-2 px-4 font-medium text-gray-600",children:a.amount}),c.jsx("th",{className:"text-end py-2 px-4 font-medium text-gray-600",children:a.percentage})]})}),c.jsx("tbody",{children:l.map((u,d)=>c.jsxs("tr",{className:"border-b border-gray-100",children:[c.jsxs("td",{className:"py-2 px-4 flex items-center",children:[c.jsx("span",{className:"w-3 h-3 rounded-full ml-1 mr-3",style:{backgroundColor:ns[d%ns.length]}}),c.jsx("span",{className:"font-medium text-gray-900",children:u.name})]}),c.jsx("td",{className:"text-end py-2 px-4 text-gray-900 font-medium",children:$l(u.value)}),c.jsxs("td",{className:"text-end py-2 px-4 text-gray-600",children:[(u.value/u.total*100).toFixed(1),"%"]})]},`row-${d}`))})]})})]}):c.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-500",children:a.noDataAvailable})]})]}),e==="all"&&r&&r.length>0&&c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:a.branchComparison}),c.jsx("div",{className:"h-[300px]",children:c.jsx($m,{width:"100%",height:"100%",children:c.jsxs(Eve,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[c.jsx(Ew,{strokeDasharray:"3 3"}),c.jsx(eu,{dataKey:"branch_name",tick:{fontSize:12},interval:0,angle:-45,textAnchor:"end"}),c.jsx(ru,{}),c.jsx(Cn,{formatter:u=>$l(u),labelStyle:{color:"#374151"}}),c.jsx(Ls,{dataKey:"total_amount",fill:"#4F46E5",name:a.totalAmount}),c.jsx(Ls,{dataKey:"total_profit",fill:"#10B981",name:a.totalProfit})]})})})]}),n&&n.length>0&&c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:[a.transactionTrend,e!=="all"&&c.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",e,")"]})]}),c.jsx("div",{className:"h-[300px]",children:c.jsx($m,{width:"100%",height:"100%",children:c.jsxs(jve,{data:n,margin:{top:20,right:30,left:20,bottom:5},children:[c.jsx(Ew,{strokeDasharray:"3 3"}),c.jsx(eu,{dataKey:"date",tick:{fontSize:12},interval:"preserveStartEnd"}),c.jsx(ru,{}),c.jsx(Cn,{formatter:u=>u.toLocaleString(),labelFormatter:u=>new Date(u).toLocaleDateString(i==="ar"?"ar":"en-US",{month:"short",day:"numeric"})}),c.jsx(Qh,{type:"monotone",dataKey:"count",stroke:"#8B5CF6",strokeWidth:2,dot:!1,name:a.transactionCount})]})})})]})]})}const hA=t=>new Intl.NumberFormat("en-OM",{style:"currency",currency:"OMR",minimumFractionDigits:3,maximumFractionDigits:3,numberingSystem:"latn"}).format(t);function kve(){var A;const{language:t}=_e(),{userProfile:e,fetchUserProfile:r}=f2(),{t:n,i18n:i}=TW();j.useState(null);const[a,s]=j.useState(!0),[o,l]=j.useState(null),[u,d]=j.useState(0),[f,h]=j.useState("all"),[m,g]=j.useState("today"),[p,x]=j.useState([]);j.useState(null),j.useState(null),j.useState(null);const[v,b]=j.useState(null),[y,_]=j.useState(null),[w,N]=j.useState(null),[S,E]=j.useState(()=>{const k=ei(new Date),F=At(lc(k,1));return{startDate:$e(F,"yyyy-MM-dd"),endDate:$e(k,"yyyy-MM-dd")}});j.useEffect(()=>{console.log("User Profile Effect:",{userProfile:e,isLoading:a})},[e,r,a]),j.useEffect(()=>{i.changeLanguage(t)},[t]);const T=k=>{if(console.log("Updating period:",k),g(k),k!=="custom"){const F=ei(new Date);let H=At(F);switch(k){case"day":H=At(lc(F,1));break;case"week":H=At(d5(F,1));break;case"month":H=At(Cf(F,1));break;case"3months":H=At(Cf(F,3));break}E({startDate:$e(H,"yyyy-MM-dd"),endDate:$e(F,"yyyy-MM-dd")})}},P=(k,F)=>{console.log("Custom date change:",{startDate:k,endDate:F}),E({startDate:k,endDate:F}),g("custom")};return j.useEffect(()=>{const k=async()=>{try{s(!0);const F=new Date(S.startDate),H=new Date(S.endDate),M=Math.ceil((H.getTime()-F.getTime())/(1e3*3600*24)),O=Array.from({length:M+1},(J,W)=>{const C=new Date(F);C.setDate(F.getDate()+W);const G=$e(C,"yyyy-MM-dd");return ay("Hkso03",G,G,f==="all"?void 0:f)}),[L,R,z]=await Promise.all([ay("Hkso03",S.startDate,S.endDate,f==="all"?void 0:f),f==="all"?Promise.all(p.map(J=>ay("Hkso03",S.startDate,S.endDate,J.branch_name))):null,Promise.all(O)]);b(L),_(R?R.map((J,W)=>({branch_name:p[W].branch_name,total_amount:J.totalAmount,total_profit:J.totalProfit,transaction_count:J.transactionCount})):null),N(z.map((J,W)=>{const C=new Date(F);return C.setDate(F.getDate()+W),{date:$e(C,"yyyy-MM-dd"),count:J.transactionCount}})),l(null)}catch(F){l(F instanceof Error?F.message:"Failed to fetch dashboard data"),_(null),N(null)}finally{s(!1)}};p.length>0&&k()},[f,S,p]),j.useEffect(()=>{(async()=>{try{const F=await Z3("Hkso03");x(F),d(F.length)}catch(F){console.error("Error fetching branches:",F)}})()},[]),a?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):o?c.jsx("div",{className:"flex items-center justify-center h-96 bg-red-50 rounded-lg",children:c.jsxs("div",{className:"text-center",children:[c.jsx(il,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:n("errorTitle")}),c.jsx("p",{className:"text-red-600",children:o})]})}):c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n("dashboard")}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString(t==="ar"?"ar":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),c.jsx("button",{onClick:()=>window.location.reload(),className:"p-2 hover:bg-gray-100 rounded-full transition-colors duration-200",title:n("refresh"),children:c.jsx(a9,{className:"w-5 h-5 text-gray-600"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-sm border border-blue-100 overflow-hidden",children:c.jsx("div",{className:"p-1",children:c.jsx(KV,{selectedPeriod:m,onPeriodChange:T,onCustomDateChange:P,customStartDate:S.startDate,customEndDate:S.endDate})})}),c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl shadow-sm border border-purple-100 overflow-hidden",children:c.jsx("div",{className:"p-1",children:c.jsx(f5,{branches:p,selectedBranch:f,onBranchChange:h})})})]}),c.jsx("div",{className:"space-y-6",children:a?c.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"}),c.jsx("p",{className:"text-gray-500",children:n("loading")})]}):v?c.jsx(Pve,{data:v,selectedBranch:f,branchData:y??void 0,transactionTrend:w??void 0}):c.jsx("div",{className:"text-center text-gray-500",children:c.jsx("p",{children:n("noDataAvailable")})})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:n("topVendorsTable.title")}),c.jsx("div",{className:"overflow-x-auto",children:a?c.jsx("div",{className:"flex items-center justify-center h-48",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):(A=v==null?void 0:v.topVendors)!=null&&A.length?c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("topVendorsTable.columns.name")}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("topVendorsTable.columns.transactions")}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("topVendorsTable.columns.amount")}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("topVendorsTable.columns.profit")})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.topVendors.map((k,F)=>c.jsxs("tr",{className:`${k.vendor_name==="BUSINESS_PRODUCTS"?"bg-blue-50 hover:bg-blue-100 font-semibold":F%2===0?"bg-white hover:bg-gray-50":"bg-gray-50 hover:bg-gray-100"} transition-colors duration-150`,children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(Pa,{className:"w-5 h-5 text-gray-400 mr-2"}),c.jsx("span",{children:k.vendor_name==="BUSINESS_PRODUCTS"?n("businessProducts"):k.vendor_name})]})}),c.jsx("td",{className:"px-6 py-4 text-right whitespace-nowrap",children:k.transaction_count.toLocaleString()}),c.jsx("td",{className:"px-6 py-4 text-right whitespace-nowrap",children:hA(k.total_amount)}),c.jsx("td",{className:"px-6 py-4 text-right whitespace-nowrap font-medium",children:hA(k.total_profit)})]},k.vendor_name))})]}):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Pa,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),c.jsx("p",{children:n("noData")})]})})]})]})}const Fi={ar:{pointOfSale:"نقطة البيع",searchProduct:"ابحث عن منتج...",loading:"جاري التحميل...",retry:"إعادة المحاولة",errorLoadingProducts:"حدث خطأ أثناء تحميل المنتجات",errorLoadingBranches:"حدث خطأ أثناء تحميل الفروع",invalidBranch:"الفرع المحدد غير صالح",expiryDate:"تاريخ الانتهاء",inStock:"المتوفر",scanBarcode:"مسح الباركود",scannerActive:"وضع المسح نشط",enterManually:"أدخل الباركود يدوياً...",readyToScan:"جاهز للمسح...",cart:"سلة المشتريات",noItems:"لم يتم إضافة منتجات بعد",customerPhone:"رقم هاتف العميل...",customerName:"اسم العميل",search:"بحث",searching:"جاري البحث...",customerNotFound:"لم يتم العثور على العميل",addNewCustomer:"إضافة عميل جديد",guestCustomer:"عميل عابر",errorSearchingCustomer:"حدث خطأ أثناء البحث عن العميل",errorCreatingCustomer:"حدث خطأ أثناء إضافة العميل",discount:"الخصم",fixed:"ثابت",percentage:"نسبة",value:"القيمة...",apply:"تطبيق",coupon:"كوبون الخصم",enterCoupon:"أدخل رمز الكوبون...",total:"المجموع",checkout:"إتمام الشراء",addNotes:"إضافة ملاحظات",editNotes:"تعديل الملاحظات",removeFromCart:"إزالة من السلة",food:"طعام",product:"منتج",save:"حفظ",cancel:"إلغاء",currency:"ر.ع",subtotal:"المجموع الفرعي",tax:"الضريبة",discountApplied:"الخصم المطبق",discountExceedsTotal:"قيمة الخصم تتجاوز المجموع",invalidPercentage:"النسبة المئوية يجب أن تكون بين 0 و 100",invalidCoupon:"كوبون غير صالح",cartNotes:"ملاحظات الطلب",showNotes:"إظهار الملاحظات",hideNotes:"إخفاء الملاحظات",addCartNotes:"أضف ملاحظات للطلب...",paymentMethod:"طريقة الدفع",cashPayment:"نقدي",creditPayment:"بطاقة ائتمان",onlinePayment:"دفع إلكتروني",confirmPayment:"تأكيد الدفع",confirm:"تأكيد",processing:"جاري المعالجة...",confirmCheckout:"تأكيد عملية البيع",customer:"العميل",confirmCashMessage:"هل تم استلام المبلغ النقدي بالكامل؟",confirmCashRequired:"يجب تأكيد استلام النقد قبل إتمام العملية",allBranches:"جميع الفروع",selectBranch:"اختر الفرع",cashReceived:"المبلغ المستلم",changeDue:"المبلغ المتبقي",enterCashAmount:"أدخل المبلغ المستلم",insufficientCash:"المبلغ المستلم أقل من المطلوب",noBranchSelected:"الرجاء اختيار الفرع",saleError:"حدث خطأ أثناء معالجة عملية البيع",vendorProduct:"منتج مورد",shareToWhatsApp:"مشاركة الفاتورة عبر واتساب",printReceipt:"طباعة الفاتورة",printerSize:"حجم الطابعة",printerSize57mm:"57mm",printerSize80mm:"80mm",printerSize85mm:"85mm",available:"المتوفر",insufficientQuantity:"الكمية المطلوبة غير متوفرة",startScanning:"بدء المسح الضوئي",stopScanning:"إيقاف المسح الضوئي",readyToScan:"جاهز للمسح الضوئي...",enterManually:"أدخل الباركود يدوياً",scannerActive:"المسح الضوئي نشط",outOfStock:"{product} نفذت من المخزون"},en:{pointOfSale:"Point of Sale",searchProduct:"Search for a product...",loading:"Loading...",retry:"Retry",errorLoadingProducts:"Error loading products",errorLoadingBranches:"Error loading branches",invalidBranch:"Selected branch is invalid",expiryDate:"Expiry Date",inStock:"In Stock",scanBarcode:"Scan Barcode",scannerActive:"Scanner Active",enterManually:"Enter barcode manually...",readyToScan:"Ready to scan...",cart:"Shopping Cart",noItems:"No items added yet",customerPhone:"Customer phone number...",customerName:"Customer Name",search:"Search",searching:"Searching...",customerNotFound:"Customer not found",addNewCustomer:"Add New Customer",guestCustomer:"Guest Customer",errorSearchingCustomer:"Error searching for customer",errorCreatingCustomer:"Error creating customer",discount:"Discount",fixed:"Fixed",percentage:"Percentage",value:"Value...",apply:"Apply",coupon:"Coupon",enterCoupon:"Enter coupon code...",total:"Total",checkout:"Checkout",addNotes:"Add Notes",editNotes:"Edit Notes",removeFromCart:"Remove from Cart",food:"Food",product:"Product",save:"Save",cancel:"Cancel",currency:"OMR",subtotal:"Subtotal",tax:"Tax",discountApplied:"Discount Applied",discountExceedsTotal:"Discount amount exceeds total",invalidPercentage:"Percentage must be between 0 and 100",invalidCoupon:"Invalid coupon",cartNotes:"Order Notes",showNotes:"Show Notes",hideNotes:"Hide Notes",addCartNotes:"Add notes to the order...",paymentMethod:"Payment Method",cashPayment:"Cash",creditPayment:"Credit Card",onlinePayment:"Online Payment",confirmPayment:"Confirm Payment",confirm:"Confirm",processing:"Processing...",confirmCheckout:"Confirm Checkout",customer:"Customer",confirmCashMessage:"Have you received the full cash amount?",confirmCashRequired:"You must confirm cash receipt before proceeding",allBranches:"All Branches",selectBranch:"Select Branch",cashReceived:"Cash Received",changeDue:"Change Due",enterCashAmount:"Enter received amount",insufficientCash:"Received amount is less than required",noBranchSelected:"Please select a branch",saleError:"An error occurred while processing the sale",vendorProduct:"Vendor Product",shareToWhatsApp:"Share Receipt via WhatsApp",printReceipt:"Print Receipt",printerSize:"Printer Size",printerSize57mm:"57mm",printerSize80mm:"80mm",printerSize85mm:"85mm",available:"Available",insufficientQuantity:"Requested quantity not available",startScanning:"Start Scanning",stopScanning:"Stop Scanning",readyToScan:"Ready to scan...",enterManually:"Enter barcode manually",scannerActive:"Scanner active",outOfStock:"{product} is out of stock"}};function Ave({onSubmit:t,onCancel:e,initialPhone:r}){const{language:n}=_e(),i=Fi[n],a=s=>{s.preventDefault();const o=new FormData(s.currentTarget);t({name:o.get("name"),phone:o.get("phone"),points:0})};return c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:i.addNewCustomer}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-500",children:"×"})]}),c.jsxs("form",{onSubmit:a,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.customerName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"name",required:!0,autoFocus:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:n==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.customerPhone," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"tel",name:"phone",defaultValue:r,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:i.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:i.save})]})]})]})})}async function Ove(t){const{data:e,error:r}=await oe.from("customers").select("*").eq("business_code",t).order("customer_name",{ascending:!0});if(r)throw console.error("Error fetching customers:",r),r;return e||[]}async function Cve(t,e){const{data:r,error:n}=await oe.from("customers").select("*").eq("phone_number",t).eq("business_code",e).single();if(n){if(n.code==="PGRST116")return null;throw console.error("Error fetching customer:",n),n}return r}async function eR(t){const{data:e,error:r}=await oe.from("customers").insert([{...t,number_of_orders:0}]).select().single();if(r)throw console.error("Error creating customer:",r),r;return e}async function Mve(t,e){const{data:r,error:n}=await oe.from("customers").update(e).eq("customer_id",t).select().single();if(n)throw console.error("Error updating customer:",n),n;return r}async function Dve(t){const{error:e}=await oe.from("customers").delete().eq("customer_id",t);if(e)throw console.error("Error deleting customer:",e),e;return!0}async function $ve(t,e){try{const{data:r,error:n}=await oe.from("customers").select("number_of_orders").match({customer_id:t,business_code:e}).single();if(n)throw console.error("Error fetching customer data:",n),new Error("Failed to fetch customer data");const{error:i}=await oe.from("customers").update({number_of_orders:((r==null?void 0:r.number_of_orders)||0)+1,last_order:new Date().toISOString()}).match({customer_id:t,business_code:e});if(i)throw console.error("Error updating customer order info:",i),new Error("Failed to update customer order information")}catch(r){throw console.error("Error in updateCustomerOrderInfo:",r),r}}function Ive({onCustomerSelect:t}){const{language:e}=_e(),{user:r}=qe(),n=Fi[e],[i,a]=j.useState(""),[s,o]=j.useState(!1),[l,u]=j.useState(!1),[d,f]=j.useState(!1),[h,m]=j.useState(null),g=async()=>{if(i){f(!0),m(null),o(!1);try{const x=await Cve(i,r.businessCode);x?(t({id:x.customer_id,name:x.customer_name,phone:x.phone_number,points:0}),a("")):(t(null),o(!0))}catch(x){console.error("Error searching customer:",x),m(n.errorSearchingCustomer),t(null)}finally{f(!1)}}},p=async x=>{try{m(null);const v=await eR({...x,business_code:r.businessCode,number_of_orders:0});t({id:v.customer_id,name:v.customer_name,phone:v.phone_number,points:0}),u(!1),o(!1),a("")}catch(v){console.error("Error creating customer:",v),m(n.errorCreatingCustomer)}};return c.jsxs("div",{className:"p-4 border-b",children:[c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"tel",placeholder:n.customerPhone,value:i,onChange:x=>a(x.target.value),onKeyDown:x=>x.key==="Enter"&&g(),className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:e==="ar"?"rtl":"ltr"})]}),c.jsx("button",{onClick:g,disabled:d||!i,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?n.searching:n.search})]}),h&&c.jsx("div",{className:"mt-2 text-sm text-red-600",children:h}),s&&c.jsxs("div",{className:"mt-2 flex items-center justify-between p-2 bg-yellow-50 rounded-md",children:[c.jsx("span",{className:"text-sm text-yellow-800",children:n.customerNotFound}),c.jsxs("button",{onClick:()=>u(!0),className:"flex items-center text-sm text-indigo-600 hover:text-indigo-800",children:[c.jsx(f9,{className:"w-4 h-4 ml-1"}),n.addNewCustomer]})]}),l&&c.jsx(Ave,{onSubmit:p,onCancel:()=>u(!1),initialPhone:i})]})}let is=null;function Rve(){try{is||(is=new AudioContext);const t=is.createOscillator(),e=is.createGain();t.type="sine",t.frequency.setValueAtTime(800,is.currentTime),e.gain.setValueAtTime(.1,is.currentTime),t.connect(e),e.connect(is.destination),t.start(),t.stop(is.currentTime+.1)}catch(t){console.error("Error playing beep sound:",t)}}const Fve=20,mA=100,Lve=1e3,pA=50;function Bve({onScan:t,onPartialMatch:e}){const{language:r}=_e(),n=Fi[r],[i,a]=j.useState(""),[s,o]=j.useState(!1),l=j.useRef(null),u=j.useRef(0),d=j.useRef(null),f=j.useRef(""),h=j.useRef(null),m=j.useRef(!1),g=j.useRef([]),p=j.useRef(""),x=j.useRef(0),v=()=>{if(g.current.length===0)return mA;const S=g.current.slice(-5),E=S.reduce((T,P)=>T+P,0)/S.length;return Math.min(Math.max(E+20,Fve),mA)},b=(S,E=!1)=>{const T=Date.now();if(S===p.current&&T-x.current<v()){console.log("Preventing duplicate scan:",S);return}S.length===7&&(Rve(),p.current=S,x.current=T,t(S),a(""),f.current="",m.current=!1)},y=(S=!1)=>{h.current&&(window.clearTimeout(h.current),h.current=null);const E=f.current;E.length===7?b(E,m.current):E.length>7?b(E.slice(-7),m.current):S&&E.length>0&&(a(""),f.current="")};j.useEffect(()=>{var S;if(s){(S=l.current)==null||S.focus(),d.current=window.setInterval(()=>{var T;document.activeElement!==l.current&&((T=l.current)==null||T.focus())},100);const E=T=>{var P;s&&(T.preventDefault(),(P=l.current)==null||P.focus())};return document.addEventListener("click",E,!0),()=>{d.current&&window.clearInterval(d.current),document.removeEventListener("click",E,!0)}}else d.current&&window.clearInterval(d.current)},[s]),j.useEffect(()=>{const S=E=>{if(!s)return;const T=Date.now(),P=T-u.current;if(P<pA&&(g.current.push(P),g.current.length>10&&g.current.shift()),m.current=P>pA,u.current=T,/\d/.test(E.key)&&E.key.length===1){E.preventDefault(),f.current+=E.key,a(f.current),f.current.length>=5&&(e==null||e(f.current)),h.current&&window.clearTimeout(h.current);const A=m.current?Lve:v();h.current=window.setTimeout(()=>y(),A)}E.key==="Enter"&&(E.preventDefault(),f.current.length>0&&y())};return window.addEventListener("keydown",S,!0),()=>window.removeEventListener("keydown",S,!0)},[s,t,e]);const _=S=>{if(s)return;const E=S.target.value.replace(/\D/g,"").slice(0,7);m.current=!0,f.current=E,a(E),E.length>=5&&(e==null||e(E)),E.length===7&&setTimeout(()=>y(),100)},w=()=>{var S;y(!0),o(!s),a(""),f.current="",m.current=!1,g.current=[],s||(S=l.current)==null||S.focus()},N=()=>{s||y(!0)};return c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsx("input",{ref:l,type:"text",maxLength:7,value:i,onChange:_,onBlur:N,placeholder:s?n.readyToScan:n.enterManually,className:`flex-1 pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${s?"bg-green-50":""}`,dir:r==="ar"?"rtl":"ltr",readOnly:s}),c.jsx("button",{onClick:w,className:`px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${s?"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500":"bg-gray-200 text-gray-700 hover:bg-gray-300 focus:ring-gray-500"}`,title:s?n.stopScanning:n.startScanning,children:c.jsx(o9,{className:"w-5 h-5"})})]}),s&&c.jsx("div",{className:"absolute -bottom-6 right-0 text-sm text-green-600",children:n.scannerActive})]})}function Uve({item:t,availableQuantity:e,isTrackable:r,onUpdateQuantity:n,onRemove:i}){const{language:a}=_e(),s=Fi[a],[o,l]=j.useState(!1),u=f=>{const h=parseInt(f.target.value,10);if(!isNaN(h)&&h>=0){if(!r&&h>e){l(!0),setTimeout(()=>l(!1),3e3);return}n(t.id,h)}},d=()=>{if(!r&&t.quantity>=e){l(!0),setTimeout(()=>l(!1),3e3);return}n(t.id,t.quantity+1)};return c.jsx("div",{className:"border-b last:border-b-0 py-2",dir:a==="ar"?"rtl":"ltr",children:c.jsxs("div",{className:"flex justify-between",children:[t.imageUrl&&c.jsx("div",{className:"w-16 h-16 mr-4 flex-shrink-0",children:c.jsx("img",{src:t.imageUrl,alt:t.nameAr,className:"w-full h-full object-cover rounded",onError:f=>{f.target.style.display="none"}})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.nameAr}),c.jsxs("span",{className:"text-sm text-gray-500",children:[t.price.toFixed(3)," ",s.currency]})]}),!r&&c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.available,": ",e]}),o&&!r&&c.jsxs("div",{className:"flex items-center text-xs text-red-600 mt-1",children:[c.jsx(il,{className:"w-3 h-3 mr-1"}),s.insufficientQuantity]})]}),c.jsxs("div",{className:"flex items-start space-x-2 space-x-reverse mr-2",children:[c.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[c.jsx("button",{onClick:()=>n(t.id,Math.max(0,t.quantity-1)),className:"w-7 h-7 flex items-center justify-center border rounded hover:bg-gray-100 text-lg font-medium",children:"-"}),c.jsx("input",{type:"number",min:"0",max:r?void 0:e,value:t.quantity,onChange:u,className:`w-12 text-center text-lg font-medium border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${!r&&t.quantity>e?"border-red-500":""}`,dir:"ltr"}),c.jsx("button",{onClick:d,className:`w-7 h-7 flex items-center justify-center border rounded hover:bg-gray-100 text-lg font-medium ${!r&&t.quantity>=e?"opacity-50 cursor-not-allowed":""}`,disabled:!r&&t.quantity>=e,children:"+"})]}),c.jsx("button",{onClick:()=>i(t.id),className:"text-red-500 hover:text-red-700",title:s.removeFromCart,children:c.jsx(x3,{className:"w-5 h-5"})})]})]})})}const zve={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},Wve=(t,e,r)=>{const n=zve[t];let i;return typeof n=="string"?i=n:e===1?i=n.one:e===2?i=n.two:e<=10?i=n.threeToTen.replace("{{count}}",String(e)):i=n.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"خلال "+i:"منذ "+i:i},Vve={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},Hve={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},qve={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Gve={date:ka({formats:Vve,defaultWidth:"full"}),time:ka({formats:Hve,defaultWidth:"full"}),dateTime:ka({formats:qve,defaultWidth:"full"})},Kve={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},Yve=t=>Kve[t],Xve={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},Qve={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},Jve={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},Zve={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},eye={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},tye={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},rye=t=>String(t),nye={ordinalNumber:rye,era:en({values:Xve,defaultWidth:"wide"}),quarter:en({values:Qve,defaultWidth:"wide",argumentCallback:t=>t-1}),month:en({values:Jve,defaultWidth:"wide"}),day:en({values:Zve,defaultWidth:"wide"}),dayPeriod:en({values:eye,defaultWidth:"wide",formattingValues:tye,defaultFormattingWidth:"wide"})},iye=/^(\d+)(th|st|nd|rd)?/i,aye=/\d+/i,sye={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},oye={any:[/قبل/,/بعد/]},lye={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},cye={any:[/1/i,/2/i,/3/i,/4/i]},uye={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},dye={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},fye={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},hye={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},mye={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},pye={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},gye={ordinalNumber:h2({matchPattern:iye,parsePattern:aye,valueCallback:t=>parseInt(t,10)}),era:tn({matchPatterns:sye,defaultMatchWidth:"wide",parsePatterns:oye,defaultParseWidth:"any"}),quarter:tn({matchPatterns:lye,defaultMatchWidth:"wide",parsePatterns:cye,defaultParseWidth:"any",valueCallback:t=>t+1}),month:tn({matchPatterns:uye,defaultMatchWidth:"wide",parsePatterns:dye,defaultParseWidth:"any"}),day:tn({matchPatterns:fye,defaultMatchWidth:"wide",parsePatterns:hye,defaultParseWidth:"any"}),dayPeriod:tn({matchPatterns:mye,defaultMatchWidth:"any",parsePatterns:pye,defaultParseWidth:"any"})},Fw={code:"ar",formatDistance:Wve,formatLong:Gve,formatRelative:Yve,localize:nye,match:gye,options:{weekStartsOn:6,firstWeekContainsDate:1}},xye={lessThanXSeconds:{one:"أقل من ثانية واحدة",two:"أقل من ثانتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانتين",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتين",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريباً",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتين",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومين",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريباً",two:"أسبوعين تقريباً",threeToTen:"{{count}} أسابيع تقريباً",other:"{{count}} أسبوع تقريباً"},xWeeks:{one:"أسبوع واحد",two:"أسبوعين",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوع"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريباً",threeToTen:"{{count}} أشهر تقريباً",other:"{{count}} شهر تقريباً"},xMonths:{one:"شهر واحد",two:"شهرين",threeToTen:"{{count}} أشهر",other:"{{count}} شهر"},aboutXYears:{one:"عام واحد تقريباً",two:"عامين تقريباً",threeToTen:"{{count}} أعوام تقريباً",other:"{{count}} عام تقريباً"},xYears:{one:"عام واحد",two:"عامين",threeToTen:"{{count}} أعوام",other:"{{count}} عام"},overXYears:{one:"أكثر من عام",two:"أكثر من عامين",threeToTen:"أكثر من {{count}} أعوام",other:"أكثر من {{count}} عام"},almostXYears:{one:"عام واحد تقريباً",two:"عامين تقريباً",threeToTen:"{{count}} أعوام تقريباً",other:"{{count}} عام تقريباً"}},vye=(t,e,r)=>{let n;const i=xye[t];return typeof i=="string"?n=i:e===1?n=i.one:e===2?n=i.two:e<=10?n=i.threeToTen.replace("{{count}}",String(e)):n=i.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"في خلال "+n:"منذ "+n:n},yye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wye={full:"{{date}} 'عند' {{time}}",long:"{{date}} 'عند' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_ye={date:ka({formats:yye,defaultWidth:"full"}),time:ka({formats:bye,defaultWidth:"full"}),dateTime:ka({formats:wye,defaultWidth:"full"})},Sye={lastWeek:"'أخر' eeee 'عند' p",yesterday:"'أمس عند' p",today:"'اليوم عند' p",tomorrow:"'غداً عند' p",nextWeek:"eeee 'عند' p",other:"P"},Nye=(t,e,r,n)=>Sye[t],jye={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},Eye={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},Tye={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["ينا","فبر","مارس","أبريل","مايو","يونـ","يولـ","أغسـ","سبتـ","أكتـ","نوفـ","ديسـ"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},Pye={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنـ","ثلا","أربـ","خميـ","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},kye={narrow:{am:"ص",pm:"م",midnight:"ن",noon:"ظ",morning:"صباحاً",afternoon:"بعد الظهر",evening:"مساءاً",night:"ليلاً"},abbreviated:{am:"ص",pm:"م",midnight:"نصف الليل",noon:"ظهر",morning:"صباحاً",afternoon:"بعد الظهر",evening:"مساءاً",night:"ليلاً"},wide:{am:"ص",pm:"م",midnight:"نصف الليل",noon:"ظهر",morning:"صباحاً",afternoon:"بعد الظهر",evening:"مساءاً",night:"ليلاً"}},Aye={narrow:{am:"ص",pm:"م",midnight:"ن",noon:"ظ",morning:"في الصباح",afternoon:"بعد الظـهر",evening:"في المساء",night:"في الليل"},abbreviated:{am:"ص",pm:"م",midnight:"نصف الليل",noon:"ظهر",morning:"في الصباح",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل"},wide:{am:"ص",pm:"م",midnight:"نصف الليل",noon:"ظهر",morning:"صباحاً",afternoon:"بعد الظـهر",evening:"في المساء",night:"في الليل"}},Oye=t=>String(t),Cye={ordinalNumber:Oye,era:en({values:jye,defaultWidth:"wide"}),quarter:en({values:Eye,defaultWidth:"wide",argumentCallback:t=>t-1}),month:en({values:Tye,defaultWidth:"wide"}),day:en({values:Pye,defaultWidth:"wide"}),dayPeriod:en({values:kye,defaultWidth:"wide",formattingValues:Aye,defaultFormattingWidth:"wide"})},Mye=/^(\d+)(th|st|nd|rd)?/i,Dye=/\d+/i,$ye={narrow:/^(ق|ب)/i,abbreviated:/^(ق\.?\s?م\.?|ق\.?\s?م\.?\s?|a\.?\s?d\.?|c\.?\s?)/i,wide:/^(قبل الميلاد|قبل الميلاد|بعد الميلاد|بعد الميلاد)/i},Iye={any:[/^قبل/i,/^بعد/i]},Rye={narrow:/^[1234]/i,abbreviated:/^ر[1234]/i,wide:/^الربع [1234]/i},Fye={any:[/1/i,/2/i,/3/i,/4/i]},Lye={narrow:/^[يفمأمسند]/i,abbreviated:/^(ين|ف|مار|أب|ماي|يون|يول|أغ|س|أك|ن|د)/i,wide:/^(ين|ف|مار|أب|ماي|يون|يول|أغ|س|أك|ن|د)/i},Bye={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^ين/i,/^ف/i,/^مار/i,/^أب/i,/^ماي/i,/^يون/i,/^يول/i,/^أغ/i,/^س/i,/^أك/i,/^ن/i,/^د/i]},Uye={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثن|ثلا|أرب|خمي|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},zye={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},Wye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Hye={ordinalNumber:h2({matchPattern:Mye,parsePattern:Dye,valueCallback:t=>parseInt(t,10)}),era:tn({matchPatterns:$ye,defaultMatchWidth:"wide",parsePatterns:Iye,defaultParseWidth:"any"}),quarter:tn({matchPatterns:Rye,defaultMatchWidth:"wide",parsePatterns:Fye,defaultParseWidth:"any",valueCallback:t=>t+1}),month:tn({matchPatterns:Lye,defaultMatchWidth:"wide",parsePatterns:Bye,defaultParseWidth:"any"}),day:tn({matchPatterns:Uye,defaultMatchWidth:"wide",parsePatterns:zye,defaultParseWidth:"any"}),dayPeriod:tn({matchPatterns:Wye,defaultMatchWidth:"any",parsePatterns:Vye,defaultParseWidth:"any"})},gh={code:"ar-SA",formatDistance:vye,formatLong:_ye,formatRelative:Nye,localize:Cye,match:Hye,options:{weekStartsOn:0,firstWeekContainsDate:1}};async function qye(t){const{data:e,error:r}=await oe.from("business_settings").select("*").eq("business_code_",t).single();return r?(console.error("Error fetching business settings:",r),null):e}function qm(t){return`${t.toFixed(3)} OMR`}function Gye(t){return $e(new Date(t),"PPpp",{locale:gh})}async function Kye(t,e,r="80mm"){try{const n=await qye(t.business_code),i=r==="57mm"?9:12,a=r==="57mm"?8:11,s=r==="57mm"?11:14,o=r==="57mm"?80:120,l=r==="57mm"?"45mm":r==="80mm"?"72mm":"76mm",u=`
      <!DOCTYPE html>
      <html dir="rtl">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Receipt #${t.receipt_id}</title>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
        <style>
          @page {
            size: ${r} auto;
            margin: 0mm !important;
            padding: 0mm !important;
          }
          
          @media print {
            html, body {
              width: ${r};
              margin: 0 !important;
              padding: 0 !important;
            }
            
            body {
              print-color-adjust: exact;
              -webkit-print-color-adjust: exact;
              zoom: 100% !important;
              transform: none !important;
              transform-origin: unset !important;
            }
            
            .receipt {
              page-break-inside: avoid;
              width: ${l};
              transform: none !important;
            }
            
            .item {
              page-break-inside: avoid;
            }
          }
          
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }
          
          body {
            margin: 0;
            padding: 1mm;
            font-family: 'Noto Sans Arabic', sans-serif;
            font-size: ${i}px;
            line-height: 1.2;
            width: ${r};
            background-color: white;
            color: black;
            text-align: center;
          }
          
          .receipt {
            width: ${l};
            margin: 0 auto;
            padding: 0 1mm;
          }
          
          .logo {
            width: ${r==="57mm"?"35px":"100px"};
            height: auto;
            margin: 1mm auto;
            display: block;
          }
          
          .header, .footer {
            text-align: center;
            margin: 1mm 0;
            font-size: ${a}px;
            white-space: pre-wrap;
            word-wrap: break-word;
          }
          
          .business-name {
            font-size: ${i+1}px;
            font-weight: bold;
            text-align: center;
            margin: 1mm 0;
            word-wrap: break-word;
          }
          
          .section {
            margin: 1mm 0;
            padding: 1mm 0;
            border-top: 1px dashed #000;
            text-align: center;
          }
          
          .items {
            margin: 1mm 0;
            text-align: right;
          }
          
          .item {
            margin: 0.5mm 0;
            padding-bottom: 0.5mm;
            border-bottom: 1px dotted #000;
          }
          
          .item-name {
            font-weight: bold;
            font-size: ${i}px;
            text-align: right;
            word-wrap: break-word;
          }
          
          .item-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0.5mm 0;
            font-size: ${i-1}px;
          }
          
          .item-notes {
            font-size: ${i-2}px;
            color: #666;
            padding-right: 1mm;
            word-wrap: break-word;
          }
          
          .item-quantity {
            color: #666;
            white-space: nowrap;
          }
          
          .totals {
            margin: 1mm 0;
          }
          
          .total {
            font-weight: bold;
            font-size: ${s}px;
            margin: 1mm 0;
            padding: 1mm 0;
            border-top: 1px solid #000;
            border-bottom: 1px solid #000;
          }
          
          .flex {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0.5mm 0;
            font-size: ${i-1}px;
          }
          
          .text-left { text-align: left; }
          .text-right { text-align: right; }
          .text-center { text-align: center; }
          
          .small {
            font-size: ${i-2}px;
            color: #666;
          }
          
          .qr-code {
            width: ${o}px;
            height: ${o}px;
            margin: 2mm auto;
            display: block;
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          ${n!=null&&n.url_logo_of_business?`
            <img src="${n.url_logo_of_business}" alt="${(n==null?void 0:n.business_name)||""}" class="logo">
          `:""}
          
          <div class="business-name">
            ${(n==null?void 0:n.business_name)||""}
          </div>
          
          ${n!=null&&n.receipt_header?`
            <div class="header">${n.receipt_header}</div>
          `:""}
          
          <div class="section">
            <div class="flex">
              <span>رقم الفاتورة:</span>
              <span>#${t.receipt_id}</span>
            </div>
            <div class="flex">
              <span>التاريخ:</span>
              <span>${Gye(t.receipt_date)}</span>
            </div>
            <div class="flex">
              <span>الفرع:</span>
              <span>${t.branch_name}</span>
            </div>
            <div class="flex">
              <span>الكاشير:</span>
              <span>${t.cashier_name}</span>
            </div>
          </div>
          
          ${t.customer_name||t.customer_phone?`
            <div class="section">
              <div class="text-center small">معلومات العميل / Customer Info</div>
              ${t.customer_name?`
                <div class="flex">
                  <span>العميل:</span>
                  <span>${t.customer_name}</span>
                </div>
              `:""}
              ${t.customer_phone?`
                <div class="flex">
                  <span>رقم الهاتف:</span>
                  <span>${t.customer_phone}</span>
                </div>
              `:""}
            </div>
          `:""}
          
          <div class="section">
            <div class="text-center small">المنتجات / Items</div>
            <div class="items">
              ${e.map(f=>`
                <div class="item">
                  <div class="item-name">${f.nameAr}</div>
                  <div class="item-details">
                    <span class="item-quantity">${f.quantity} x ${f.price.toFixed(3)}</span>
                    <span>${(f.quantity*f.price).toFixed(3)} OMR</span>
                  </div>
                  ${f.notes?`
                    <div class="item-notes">${f.notes}</div>
                  `:""}
                </div>
              `).join("")}
            </div>
          </div>
          
          <div class="section">
            <div class="text-center small">الحساب / Bill</div>
            <div class="totals">
              <div class="flex">
                <span>المجموع الفرعي:</span>
                <span>${qm(t.total_amount)}</span>
              </div>
              
              ${t.discount>0?`
                <div class="flex">
                  <span>الخصم:</span>
                  <span>-${qm(t.discount)}</span>
                </div>
              `:""}
              
              ${t.coupon_code?`
                <div class="flex small">
                  <span>كوبون:</span>
                  <span>${t.coupon_code}</span>
                </div>
              `:""}
              
              ${t.tax_amount>0?`
                <div class="flex">
                  <span>الضريبة (${(n==null?void 0:n.tax_rate)||0}%):</span>
                  <span>${qm(t.tax_amount)}</span>
                </div>
              `:""}
              
              <div class="total flex">
                <span>المجموع النهائي:</span>
                <span>${qm(t.total_amount)}</span>
              </div>
              
              <div class="flex small">
                <span>طريقة الدفع:</span>
                <span>${t.payment_method==="cash"?"نقدي / Cash":t.payment_method==="card"?"بطاقة / Card":"دفع إلكتروني / Online"}</span>
              </div>
            </div>
          </div>
          
          ${t.receipt_note?`
            <div class="section">
              <div class="text-center small">ملاحظات / Notes</div>
              <div class="text-center">
                ${t.receipt_note}
              </div>
            </div>
          `:""}
          
          ${n!=null&&n.receipt_footer?`
            <div class="section">
              <div class="footer">${n.receipt_footer}</div>
            </div>
          `:""}
          
          <div class="section text-center">
            <div class="small">
              شكراً لتسوقكم معنا
              <br>
              Thank you for shopping with us
            </div>
          </div>
        </div>
        
        <script>
          window.onload = () => {
            window.print();
            setTimeout(() => {
              window.close();
            }, 500);
          };
        <\/script>
      </body>
      </html>
    `,d=window.open("","_blank");if(!d)throw new Error("Could not open print window");return d.document.write(u),d.document.close(),!0}catch(n){return console.error("Error printing receipt:",n),!1}}function Yye(t,e,r=365){const n=new Date;n.setTime(n.getTime()+r*24*60*60*1e3);const i=`expires=${n.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;SameSite=Strict`}function Xye(t){const e=`${t}=`,r=document.cookie.split(";");for(let n of r)if(n=n.trim(),n.indexOf(e)===0)return n.substring(e.length);return null}const gA="preferred_printer_size";function tR(){const[t,e]=j.useState(!1),[r,n]=j.useState(null),[i,a]=j.useState(()=>Xye(gA)||"80mm");return{print:async(l,u)=>{try{if(e(!0),n(null),!await Kye(l,u,i))throw new Error("Failed to print receipt")}catch(d){n(d instanceof Error?d:new Error("Unknown error")),console.error("Error printing receipt:",d)}finally{e(!1)}},isPrinting:t,error:r,selectedPrinterWidth:i,setSelectedPrinterWidth:l=>{a(l),Yye(gA,l)}}}function Qye({total:t,subtotal:e,discount:r,taxAmount:n,paymentMethod:i,customer:a,settings:s,cart:o,receiptId:l,branchName:u,cashierName:d,couponCode:f,notes:h,onConfirm:m,onCancel:g,receipt:p}){const{language:x}=_e(),v=Fi[x],[b,y]=j.useState(!1),[_,w]=j.useState(t.toFixed(3)),[N,S]=j.useState(0),[E,T]=j.useState(null),[P,A]=j.useState(!1),{print:k,isPrinting:F,selectedPrinterWidth:H,setSelectedPrinterWidth:M}=tR(),O=W=>{console.log("Cash amount changed:",W),w(W),T(null);const C=parseFloat(W);!isNaN(C)&&C>=t?S(C-t):S(0)},L=W=>`968${W.replace(/\D/g,"").slice(-8)}`,R=async()=>{p&&await k(p,o)},z=()=>{var me,ee;if(!(a!=null&&a.phone))return;const W=(s==null?void 0:s.business_name)||"",C=((me=s==null?void 0:s.receipt_header)==null?void 0:me.trim().split(`
`).join(`
   `))||"",G=((ee=s==null?void 0:s.receipt_footer)==null?void 0:ee.trim().split(`
`).join(`
   `))||"",Y=[`🏪 *${W||"My Store"}*
`,C?["","   "+C,""].join(`
`):"","🧾 *فاتورة المشتريات / Purchase Receipt*",`📅 ${new Date().toLocaleDateString("ar")}`,`🏷️ #${l}`,`🏬 ${u}`,`👤 ${d}`,"",a?["👥 *العميل / Customer*",`   ${a.name}`,`   📱 ${a.phone}`,""].join(`
`):"","🛍️ *المنتجات / Items*",o.map(le=>`   ${le.nameAr}
   ${le.quantity} x ${le.price.toFixed(3)} = ${(le.quantity*le.price).toFixed(3)} ${v.currency}`).join(`

`),"","💰 *الحساب / Bill*",`   المجموع الفرعي / Subtotal: ${e.toFixed(3)} ${v.currency}`,r>0?`   الخصم / Discount: -${r.toFixed(3)} ${v.currency}`:"",f?`   🎟️ ${f}`:"",s!=null&&s.tax_enabled?`   الضريبة / Tax (${s.tax_rate}%): ${n.toFixed(3)} ${v.currency}`:"","",`💵 *المجموع النهائي / Total:* ${t.toFixed(3)} ${v.currency}`,`💳 *طريقة الدفع / Payment:* ${i==="cash"?"نقدي / Cash":i==="credit"?"بطاقة / Card":"دفع إلكتروني / Online"}`,h?["","📝 *ملاحظات / Notes*",`   ${h}`].join(`
`):"","",G?["",G.split(`
`).map(le=>"   "+le).join(`
`),""].join(`
`):"","","🙏 *شكراً لتسوقكم معنا*","*Thank you for shopping with us*"].join(`
`),I=L(a.phone),Q=encodeURIComponent(Y),fe=`https://web.whatsapp.com/send?phone=${I}&text=${Q}`;console.log("WhatsApp Message Preview:",Y),window.open(fe,"_blank")},J=()=>{if(P)return;A(!0);const W=Number(t.toFixed(3));if(console.log("Confirming payment:",{paymentMethod:i,cashConfirmed:b,cashReceived:_,total:W}),i==="cash"){if(console.log("Validating cash payment..."),!b){console.log("Cash not confirmed, showing alert"),alert(v.confirmCashRequired);return}const C=Number(parseFloat(_).toFixed(3));if(console.log("Received amount:",C,"Rounded total:",W),isNaN(C)||C<W){console.log("Invalid amount, setting error"),T(v.insufficientCash);return}console.log("Cash payment validated successfully")}console.log("Calling onConfirm..."),m()};return j.useEffect(()=>{i==="cash"&&(console.log("Setting initial cash amount:",t.toFixed(3)),w(t.toFixed(3)),S(0),y(!1))},[t,i]),c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:v.confirmPayment}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-gray-700",children:[v.total,":"]}),c.jsxs("span",{className:"text-xl font-bold",children:[t.toFixed(3)," ",v.currency]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-gray-700",children:[v.paymentMethod,":"]}),c.jsx("span",{className:"font-medium",children:i==="cash"?v.cashPayment:i==="credit"?v.creditPayment:v.onlinePayment})]}),c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[p&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("label",{className:"text-sm text-gray-700 mb-1",children:[v.printerSize,":"]}),c.jsxs("select",{value:H,onChange:W=>M(W.target.value),className:"px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[c.jsx("option",{value:"57mm",children:v.printerSize57mm}),c.jsx("option",{value:"80mm",children:v.printerSize80mm}),c.jsx("option",{value:"85mm",children:v.printerSize85mm})]})]}),c.jsxs("button",{onClick:R,disabled:F,className:"flex items-center justify-center flex-1 px-4 py-2 text-sm text-indigo-600 border border-indigo-600 rounded-md hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50",children:[c.jsx(r2,{className:"w-4 h-4 ml-2"}),v.printReceipt]})]}),(a==null?void 0:a.phone)&&c.jsxs("button",{onClick:z,className:"flex items-center justify-center flex-1 px-4 py-2 text-sm text-green-600 border border-green-600 rounded-md hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[c.jsx(l9,{className:"w-4 h-4 ml-2"}),v.shareToWhatsApp]})]}),i==="cash"&&c.jsxs("div",{className:"space-y-4 border-t pt-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:v.cashReceived}),c.jsx("input",{type:"number",value:_,onChange:W=>O(W.target.value),min:t,step:"0.001",className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),E&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:E})]}),N>0&&c.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[c.jsxs("span",{children:[v.changeDue,":"]}),c.jsxs("span",{className:"text-green-600",children:[N.toFixed(3)," ",v.currency]})]}),c.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:b,onChange:W=>{console.log("Cash confirmed changed:",W.target.checked),y(W.target.checked)},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded cursor-pointer"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.confirmCashMessage})]})]}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse pt-4 border-t",children:[c.jsx("button",{onClick:g,className:"px-4 py-2 text-gray-600 hover:text-gray-800",disabled:P,children:v.cancel}),c.jsx("button",{onClick:J,className:`px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 ${P?"opacity-50 cursor-not-allowed":""}`,disabled:P,children:v.confirmPayment})]})]})]})})}function Jye({notes:t,onNotesChange:e}){const{language:r}=_e(),n=Fi[r],[i,a]=j.useState(!!t);return c.jsxs("div",{className:"border-t p-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(t9,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"font-medium text-sm",children:n.cartNotes})]}),c.jsx("button",{onClick:()=>a(!i),className:`text-xs text-indigo-600 hover:text-indigo-800 ${i?"font-medium":""}`,children:i?n.hideNotes:n.showNotes})]}),i&&c.jsx("textarea",{value:t,onChange:s=>e(s.target.value),placeholder:n.addCartNotes,rows:2,className:"w-full p-1 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-xs resize-none",dir:r==="ar"?"rtl":"ltr"})]})}function Zye({subtotal:t,onApplyDiscount:e,onApplyCoupon:r,appliedDiscount:n,appliedCoupon:i,error:a}){const{language:s}=_e(),{settings:o}=Ii(),l=Fi[s],[u,d]=j.useState((n==null?void 0:n.type)||"fixed"),[f,h]=j.useState((n==null?void 0:n.value.toString())||""),[m,g]=j.useState(""),p=()=>{let v="";if(n){const b=n.type==="percentage"?`${n.value}%`:`${n.value.toFixed(3)} ${l.currency}`;v+=`${l.discount}: ${b}`}if(i){const b=i.discount_type==="percentage"?`${i.discount_value}%`:`${i.discount_value.toFixed(3)} ${l.currency}`;v&&(v+=" + "),v+=`${l.coupon}: ${b}`}return v||l.noDiscountApplied},x=()=>{if(f){const v=parseFloat(f);if(isNaN(v)||v<0)return;if(u==="percentage"&&v>100){setError(l.invalidPercentage);return}if(u==="fixed"&&v>t){setError(l.discountExceedsTotal);return}e({type:u,value:v}),h("")}};return c.jsxs("div",{className:"border-t p-2 space-y-2",dir:s==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(p3,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"font-medium text-sm",children:l.discount}),n&&c.jsx("span",{className:"text-sm text-green-600",children:p()})]}),c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsxs("select",{value:u,onChange:v=>d(v.target.value),className:"w-1/3 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm py-1",children:[c.jsx("option",{value:"fixed",children:l.fixed}),c.jsx("option",{value:"percentage",children:l.percentage})]}),c.jsx("input",{type:"number",value:f,onChange:v=>h(v.target.value),placeholder:l.value,min:"0",max:u==="percentage"?"100":void 0,step:u==="percentage"?"1":"0.001",className:"flex-1 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm py-1"}),c.jsx("button",{onClick:x,className:"px-3 py-1 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 text-sm",children:l.apply})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(g3,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"font-medium text-sm",children:l.coupon}),i&&c.jsx("span",{className:"text-sm text-green-600",children:p()})]}),c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsx("input",{type:"text",value:m,onChange:v=>g(v.target.value),placeholder:l.enterCoupon,className:"flex-1 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm py-1"}),c.jsx("button",{onClick:()=>r(m),className:"px-3 py-1 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 text-sm",children:l.apply})]}),a&&c.jsx("p",{className:"text-xs text-red-600 mt-1",children:a})]}),(o==null?void 0:o.tax_enabled)&&c.jsx("div",{className:"pt-2 border-t",children:c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:[l.tax," (",o.tax_rate,"%)"]}),c.jsxs("span",{children:[(t*o.tax_rate/100).toFixed(3)," ",l.currency]})]})})]})}function ebe({selectedMethod:t,onMethodChange:e}){const{language:r}=_e(),n=Fi[r],i=[{id:"cash",icon:z7,label:n.cashPayment},{id:"card",icon:X7,label:n.creditPayment},{id:"online",icon:d3,label:n.onlinePayment}];return c.jsxs("div",{className:"border-t p-2",children:[c.jsx("h3",{className:"font-medium mb-2 text-sm",children:n.paymentMethod}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:i.map(({id:a,icon:s,label:o})=>c.jsxs("button",{onClick:()=>e(a),className:`flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-colors ${t===a?"border-indigo-600 bg-indigo-50 text-indigo-600":"border-gray-200 hover:border-indigo-200"}`,children:[c.jsx(s,{className:"w-5 h-5 mb-1"}),c.jsx("span",{className:"text-xs",children:o})]},a))})]})}function tbe({onBranchChange:t}){const{language:e}=_e(),{user:r}=qe(),{branches:n,setSelectedBranch:i}=tr(),a=Fi[e],[s,o]=j.useState(""),[l,u]=j.useState(!1);j.useEffect(()=>{const f=()=>{if(!l&&n.length>0){if(console.log("Initializing branch selection. User:",r),console.log("Available branches:",n),((r==null?void 0:r.role)==="cashier"||(r==null?void 0:r.role)==="manager")&&(r!=null&&r.main_branch)){console.log(`${r.role} detected with main_branch:`,r.main_branch);const m=n.find(g=>{const p=g.branch_name===r.main_branch&&g.is_active;return console.log("Checking branch:",g.branch_name,"Match:",p),p});m?(console.log("Found assigned branch:",m),o(m.branch_id),t(m.branch_id),i(m.branch_id)):(console.log("Assigned branch not found or not active, selecting first active branch"),h())}else console.log("No main_branch assigned or different role, selecting first active branch"),h();u(!0)}},h=()=>{const m=n.find(g=>g.is_active);m&&(console.log("Selected first active branch:",m),o(m.branch_id),t(m.branch_id),i(m.branch_id))};f()},[n,l,t,r,i]);const d=f=>{console.log("Branch selection changed to:",f),o(f),t(f),i(f)};return c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(Yt,{className:"w-5 h-5 text-gray-400"}),c.jsxs("select",{value:s,onChange:f=>d(f.target.value),className:"border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:e==="ar"?"rtl":"ltr",required:!0,children:[!s&&c.jsx("option",{value:"",children:a.selectBranch}),n.filter(f=>f.is_active).map(f=>c.jsx("option",{value:f.branch_id,children:f.branch_name},f.branch_id))]})]})}async function hc(t){const{data:e,error:r}=await oe.from("transactions_overall").insert([{...t,amount:t.amount.toString(),details:JSON.stringify(t.details||{}),transaction_date:t.transaction_date||new Date().toISOString(),business_code:t.business_code||"",business_name:t.business_name||"",branch_name:t.branch_name||"",payment_method:t.payment_method||"",transaction_type:t.transaction_type||"",transaction_reason:t.transaction_reason||"",currency:t.currency||"OMR"}]).select().single();if(r)throw console.error("Error creating transaction:",r),r;return{...e,details:typeof e.details=="string"?JSON.parse(e.details):e.details}}function rbe(){const{user:t}=qe(),{getCurrentBranch:e}=tr(),{settings:r}=Ii(),[n,i]=j.useState(!1),[a,s]=j.useState(null);return{processTransaction:async(l,u,d,f,h,m)=>{if(!t||!r)return s("Missing user or settings data"),null;const g=e();if(!g)return s("No branch selected"),null;try{i(!0),s(null);const p=l.reduce((E,T)=>E+T.price*T.quantity,0),x=r.tax_enabled?p*r.tax_rate/100:0,v=p+x-f,b=new Map,{data:y}=await oe.from("products").select("*").in("product_id",l.map(E=>E.id));l.forEach(E=>{if(E.vendorId){const T=b.get(E.vendorId)||[],P=y==null?void 0:y.find(A=>A.product_id.toString()===E.id);P?T.push({...E,vendorPrice:P.price}):(console.error("Original product not found:",E.id),T.push(E)),b.set(E.vendorId,T)}});let _=0;const w=new Map;r.vendor_commission_enabled&&b.forEach((E,T)=>{const P=E.reduce((A,k)=>{const F=k.vendorPrice?(k.price-k.vendorPrice)*k.quantity:0;return A+F},0);if(P>=r.minimum_commission_amount){const A=P*(r.default_commission_rate/100);w.set(T,A),_+=A}});const N={products:l.map(E=>({id:E.id,name:E.nameAr,quantity:E.quantity,price:E.price,total:E.price*E.quantity,vendorPrice:E.vendorPrice,vendorId:E.vendorId,vendorName:E.vendorName,businessCodeIfVendor:E.businessCodeIfVendor})),customer:u?{id:u.id,name:u.name,phone:u.phone}:void 0,notes:m,discount:f,tax:x,subtotal:p,totalAmount:v,vendorCommissions:Object.fromEntries(w),totalCommission:_,couponCode:h};for(const[E,T]of b){const P=T.reduce((O,L)=>O+L.price*L.quantity,0),A=r.tax_enabled?P*r.tax_rate/100:0,k=P+A,F=w.get(E)||0,H=T[0];console.log(`Creating vendor transaction for ${E}:`,{subtotal:P,tax:A,total:k,commission:F,items:T.length});const M={business_code:t.businessCode,business_name:r.business_name||"",branch_name:g.branch_name,payment_method:d,transaction_type:"vendor_sale",transaction_reason:"Vendor product sale",amount:k,currency:"OMR",transaction_date:new Date().toISOString(),vendor_code:E,vendor_name:H.vendorName||"",owner_profit_from_this_transcation:T.reduce((O,L)=>{const R=L.vendorPrice?(L.price-L.vendorPrice)*L.quantity:0,z=r.tax_enabled?L.price*L.quantity*r.tax_rate/100:0;return O+R+z},0),details:{products:T.map(O=>({id:O.id,name:O.nameAr,quantity:O.quantity,price:O.price,total:O.price*O.quantity,vendorPrice:O.vendorPrice})),commission:F,subtotal:P,tax:A,total:k,customer:u?{id:u.id,name:u.name,phone:u.phone}:void 0,notes:m,discount:f/v*k,couponCode:h}};await hc(M)}const S=l.filter(E=>!E.vendorId);if(S.length>0){const E=S.reduce((k,F)=>k+F.price*F.quantity,0),T=r.tax_enabled?E*r.tax_rate/100:0,P=E+T;console.log("Creating non-vendor transaction:",{items:S.length,subtotal:E,tax:T,total:P});const A={business_code:t.businessCode,business_name:r.business_name||"",branch_name:g.branch_name,payment_method:d,transaction_type:"sale",transaction_reason:"Regular sale",amount:P,currency:"OMR",transaction_date:new Date().toISOString(),owner_profit_from_this_transcation:r.tax_enabled?P:E,details:{products:S.map(k=>({id:k.id,name:k.nameAr,quantity:k.quantity,price:k.price,total:k.price*k.quantity})),customer:u?{id:u.id,name:u.name,phone:u.phone}:void 0,notes:m,discount:f/v*P,tax:T,subtotal:E,total:P,couponCode:h}};await hc(A)}return{transaction_id:"completed",business_code:t.businessCode,business_name:r.business_name||"",branch_name:g.branch_name,payment_method:d,transaction_type:"sale",transaction_reason:"Regular sale",amount:v,currency:"OMR",transaction_date:new Date().toISOString(),details:{totalAmount:v,subtotal:p,tax:x,discount:f,totalCommission:_}}}catch(p){return console.error("Error processing transaction:",p),s(p instanceof Error?p.message:"Failed to process transaction"),null}finally{i(!1)}},isProcessing:n,error:a}}async function nbe(t,e,r,n="ar"){var v;const s=$e(new Date,"yyyy-MM-dd HH:mm:ss",{locale:n==="ar"?gh:Oc}),o=n==="ar"?"ر.ع":"OMR",{data:l,error:u}=await oe.from("business_settings").select("receipt_header, receipt_footer").eq("business_code_",t.business_code).single();u&&console.error("Error fetching business settings:",u);const d=["=".repeat(40),((v=t.branch_name)==null?void 0:v.toUpperCase())||"",(l==null?void 0:l.receipt_header)||"","=".repeat(40),"",`RECEIPT: ${e}`,`TRANSACTION: ${r}`,`DATE: ${s}`,`BRANCH: ${t.branch_name}`,`CASHIER: ${t.cashier_name}`,""],f=t.customer_name||t.customer_phone?["-".repeat(40),"CUSTOMER INFORMATION",t.customer_name?`NAME: ${t.customer_name}`:"",t.customer_phone?`PHONE: ${t.customer_phone}`:"","-".repeat(40),""]:[],h=["ITEMS","-".repeat(40),"ITEM                  QTY    PRICE    TOTAL","-".repeat(40)];t.cart_items.forEach(b=>{const y=b.nameAr.padEnd(20).substring(0,20),_=b.quantity.toString().padStart(4),w=b.price.toFixed(3).padStart(8),N=(b.quantity*b.price).toFixed(3).padStart(8);h.push(`${y} ${_} ${w} ${N}`),b.notes&&h.push(`  Note: ${b.notes}`)}),h.push("-".repeat(40));const m=t.cart_items.reduce((b,y)=>b+y.price*y.quantity,0),g=[`SUBTOTAL:${" ".repeat(31)}${m.toFixed(3)}`];t.tax_amount>0&&g.push(`TAX:${" ".repeat(35)}${t.tax_amount.toFixed(3)}`),t.discount>0&&g.push(`DISCOUNT:${" ".repeat(31)}${t.discount.toFixed(3)}`),g.push("=".repeat(40),`TOTAL:${" ".repeat(33)}${t.total_amount.toFixed(3)} ${o}`,"=".repeat(40),"",`PAYMENT METHOD: ${t.payment_method.toUpperCase()}`),t.coupon_code&&g.push(`COUPON APPLIED: ${t.coupon_code}`);const p=["","-".repeat(40),(l==null?void 0:l.receipt_footer)||"","-".repeat(40)];return[...d,...f,...h,...g,...p].filter(Boolean).join(`
`)}async function ibe(t){const e=`TRX${Math.random().toString(36).substring(2,10).toUpperCase()}`,r=e,n=await nbe(t,r,e),i={receipt_id:r,transaction_id:e,business_code:t.business_code,branch_name:t.branch_name,cashier_name:t.cashier_name,customer_name:t.customer_name,customer_phone:t.customer_phone,total_amount:t.total_amount,payment_method:t.payment_method,discount:t.discount,coupon_code:t.coupon_code,receipt_note:t.receipt_note,tax_amount:t.tax_amount,commission_amount_from_vendors:t.commission_amount_from_vendors,vendor_commission_enabled:t.vendor_commission_enabled,is_return:!1,receipt_date:new Date().toISOString(),long_text_receipt:n},{data:a,error:s}=await oe.from("receipts").insert([i]).select().single();if(s)throw console.error("Error creating receipt:",s),s;return a}async function abe(t,e){try{let r=oe.from("receipts").select("*").eq("business_code",t).order("receipt_date",{ascending:!1});if(e!=null&&e.startDate&&(r=r.gte("receipt_date",e.startDate)),e!=null&&e.endDate){const a=new Date(e.endDate);a.setDate(a.getDate()+1),r=r.lt("receipt_date",a.toISOString())}if(e!=null&&e.paymentMethod&&(r=r.eq("payment_method",e.paymentMethod)),(e==null?void 0:e.isReturn)!==void 0&&(r=r.eq("is_return",e.isReturn)),e!=null&&e.searchQuery){const a=e.searchQuery.toLowerCase();a.match(/^[0-9+\s-]+$/)?r=r.ilike("customer_phone",`%${a}%`):a.startsWith("rcp")&&(r=r.ilike("receipt_id",`%${a}%`))}r=r.limit(100);const{data:n,error:i}=await r;if(i)throw console.error("Error fetching receipts:",i),new Error("Failed to fetch receipts");return n||[]}catch(r){throw console.error("Error in getReceiptsByBusiness:",r),r}}async function sbe(t,e,r,n,i,a,s,o,l){const{data:u}=await oe.from("products").select("*").in("product_id",e.map(m=>m.id)),d=e.map(m=>{const g=u==null?void 0:u.find(_=>_.product_id.toString()===m.id);if(!g)return console.error("Original product not found:",m.id),null;const p=g.price,x=m.price,v=!!g.business_code_if_vendor;console.log("=== Commission Calculation Details ===",{productId:m.id,productName:m.nameAr,isVendorProduct:v,vendorCode:g.business_code_if_vendor,originalPrice:p,businessPrice:x,vendorCommissionEnabled:i,minCommissionAmount:s});const b=obe(p,x,v,i,s);console.log("Commission Calculation Result:",{commission:b,reason:b?"Commission applied":v?i?p<s?"Below minimum amount":"Unknown reason":"Commission not enabled":"Not a vendor product"});const y=o?x*m.quantity*l/100:0;return{sold_product_id:crypto.randomUUID(),receipt_id:t,product_name:m.nameAr,quantity:m.quantity,unit_price_original:p,unit_price_by_bussniess:x,total_price:x*m.quantity,vendor_code_if_by_vendor:g.business_code_if_vendor||null,business_code:r,business_bracnh_name:n,comission_for_bussnies_from_vendor:b,tax_on_product:y,created_at:new Date().toISOString()}}).filter(Boolean),{data:f,error:h}=await oe.from("sold_products").insert(d).select();if(h)throw console.error("Error creating sold products:",h),h;return f||[]}function obe(t,e,r,n,i){return!r||!n?null:t<i?0:e-t}function lbe(){const{user:t}=qe(),{getCurrentBranch:e}=tr(),{settings:r}=Ii(),{language:n}=_e(),i=Fi[n],{processTransaction:a}=rbe(),[s,o]=j.useState(!1),[l,u]=j.useState(null),[d,f]=j.useState(null);return{processReceipt:async(m,g,p,x,v,b)=>{if(!t||!r)return u("Missing user or settings data"),null;const y=e();if(!y)return u(i.noBranchSelected),null;try{o(!0),u(null);const _=await a(m,g,p,x,v,b);if(!_)throw new Error("Failed to process transaction");const w=m.reduce((k,F)=>k+F.price*F.quantity,0),N=r.tax_enabled?w*r.tax_rate/100:0;let S=0;if(r.vendor_commission_enabled){const F=m.filter(H=>H.vendorId).reduce((H,M)=>H+M.price*M.quantity,0);F>=r.minimum_commission_amount&&(S=F*(r.default_commission_rate/100))}const E=w+N-x,T={business_code:t.businessCode,branch_name:y.branch_name,cashier_name:t.name,customer_name:g==null?void 0:g.name,customer_phone:g==null?void 0:g.phone,total_amount:E,payment_method:p,discount:x,coupon_code:v,receipt_note:b,tax_amount:N,commission_amount_from_vendors:S,vendor_commission_enabled:r.vendor_commission_enabled,cart_items:m},P=await ibe(T),A=await sbe(P.receipt_id,m,t.businessCode,y.branch_name,r.vendor_commission_enabled,r.default_commission_rate,r.minimum_commission_amount,r.tax_enabled,r.tax_rate);return console.log("Transaction processed:",_),console.log("Receipt created:",P),console.log("Sold products created:",A),P.long_text_receipt&&f(P.long_text_receipt),P}catch(_){return console.error("Error processing receipt:",_),u(_ instanceof Error?_.message:"Failed to process receipt"),null}finally{o(!1)}},isProcessing:s,error:l,receiptText:d}}function rR(){return`CSH${Math.random().toString(36).substring(2,10).toUpperCase()}`}async function cbe(t){const e=rR(),r={tracking_id:e,business_code:t.business_code,business_branch_name:t.business_branch_name,cashier_name:t.cashier_name||null,previous_total_cash:t.previous_total_cash,new_total_cash:t.new_total_cash,cash_additions:t.cash_additions||0,cash_removals:t.cash_removals||0,cash_change_reason:t.cash_change_reason||null,total_returns:t.total_returns||0,transaction_date:new Date().toISOString().split("T")[0]},{data:n,error:i}=await oe.from("cash_tracking").insert([r]).select().single();if(i)throw console.error("Error creating cash tracking record:",i),i;return t.cash_additions>0&&await hc({business_code:t.business_code,business_name:await $y(t.business_code),branch_name:t.business_branch_name,transaction_type:"cash_addition",amount:t.cash_additions,payment_method:"cash",transaction_reason:t.cash_change_reason||"Cash Addition",owner_profit_from_this_transcation:t.cash_additions,details:{previous_total_cash:t.previous_total_cash,new_total_cash:t.new_total_cash,cashier_name:t.cashier_name,tracking_id:e}}),t.cash_removals>0&&await hc({business_code:t.business_code,business_name:await $y(t.business_code),branch_name:t.business_branch_name,transaction_type:"cash_removal",amount:-t.cash_removals,payment_method:"cash",transaction_reason:t.cash_change_reason||"Cash Removal",owner_profit_from_this_transcation:-t.cash_removals,details:{previous_total_cash:t.previous_total_cash,new_total_cash:t.new_total_cash,cashier_name:t.cashier_name,tracking_id:e}}),t.total_returns>0&&await hc({business_code:t.business_code,business_name:await $y(t.business_code),branch_name:t.business_branch_name,transaction_type:"cash_return",amount:-t.total_returns,payment_method:"cash",transaction_reason:"Product Return",owner_profit_from_this_transcation:-t.total_returns,details:{previous_total_cash:t.previous_total_cash,new_total_cash:t.new_total_cash,cashier_name:t.cashier_name,tracking_id:e}}),n}async function ube(t,e){let r=oe.from("cash_tracking").select("*").eq("business_code",t);e&&(e.branchName&&(r=r.eq("business_branch_name",e.branchName)),e.startDate&&(r=r.gte("transaction_date",e.startDate)),e.endDate&&(r=r.lte("transaction_date",e.endDate)),e.cashierName&&(r=r.eq("cashier_name",e.cashierName)));const{data:n,error:i}=await r.order("created_at",{ascending:!1});if(i)throw console.error("Error fetching cash tracking records:",i),i;return n||[]}async function nR(t,e){const{data:r,error:n}=await oe.from("cash_tracking").select("*").eq("business_code",t).eq("business_branch_name",e).order("created_at",{ascending:!1}).limit(1).single();if(n){if(n.code==="PGRST116")return null;throw console.error("Error fetching latest cash tracking:",n),n}return r}async function dbe(t,e,r,n){try{const i=await nR(t,e),a=(i==null?void 0:i.new_total_cash)||0,s=a+n,{data:o,error:l}=await oe.from("cash_tracking").insert([{tracking_id:rR(),business_code:t,business_branch_name:e,cashier_name:r,previous_total_cash:a,new_total_cash:s,cash_additions:n,cash_removals:0,cash_change_reason:"sale",total_returns:0,transaction_date:new Date().toISOString().split("T")[0]}]).select().single();if(l)throw console.error("Error creating cash tracking record:",l),l;return o}catch(i){throw console.error("Error updating cash for sale:",i),i}}async function fbe(t,e,r,n){try{const i=await nR(t,e),a=(i==null?void 0:i.new_total_cash)||0,s=a-n;return cbe({business_code:t,business_branch_name:e,cashier_name:r,previous_total_cash:a,new_total_cash:s,cash_removals:n,total_returns:n,cash_change_reason:"return"})}catch(i){throw console.error("Error updating cash for return:",i),i}}async function wS(t,e,r,n,i){try{const{data:a}=await oe.from("cash_tracking").select("new_total_cash").eq("business_code",t).eq("business_branch_name",e).order("created_at",{ascending:!1}).limit(1).single(),s=(a==null?void 0:a.new_total_cash)||0,o=s+n,{data:l,error:u}=await oe.from("cash_tracking").insert([{tracking_id:`MANUAL${Math.random().toString(36).substring(2,10).toUpperCase()}`,business_code:t,business_branch_name:e,cashier_name:r,previous_total_cash:s,new_total_cash:o,cash_additions:n,cash_removals:0,cash_change_reason:i,total_returns:0,transaction_date:new Date().toISOString().split("T")[0]}]).select().single();if(u)throw console.error("Error creating cash tracking record:",u),u;return l}catch(a){throw console.error("Error updating cash manually:",a),a}}async function $y(t){try{const{data:e,error:r}=await oe.from("profiles").select("business_name").eq("business_code",t).in("role",["owner","manager"]).limit(1);return r?(console.error("Error fetching business name:",r),t):!e||e.length===0?t:e[0].business_name||t}catch(e){return console.error("Error in getBusinessName:",e),t}}function hbe(t,e){if(!(e!=null&&e.vendor_commission_enabled)||!t.business_code_if_vendor)return{finalPrice:t.price,vendorPrice:null};if(t.price<(e.minimum_commission_amount||0))return{finalPrice:t.price,vendorPrice:t.price};const r=t.price*e.default_commission_rate/100;return{finalPrice:t.price+r,vendorPrice:t.price}}async function mbe(t,e){try{let r=oe.from("products").select(`
        product_id,
        product_name,
        barcode,
        type,
        price,
        quantity,
        trackable,
        expiry_date,
        business_code_of_owner,
        business_code_if_vendor,
        business_name_of_product,
        branch_name,
        current_page,
        accepted,
        image_url,
        description
      `).eq("current_page","products").eq("accepted",!0).gt("quantity",0).or(`business_code_of_owner.eq.${t},business_code_if_vendor.not.is.null`);e&&(r=r.eq("branch_name",e));const{data:n,error:i}=await r;if(i)throw console.error("Error fetching available products:",i),i;const a=new Date,s=n==null?void 0:n.filter(o=>o.type==="food"&&o.expiry_date?new Date(o.expiry_date)>a:!0).map(o=>{const l=Ii.getState(),{finalPrice:u,vendorPrice:d}=hbe(o,l);return{...o,price:u,vendorPrice:d}});return console.log("Vendor Products:",s.filter(o=>o.business_code_if_vendor).map(o=>({name:o.product_name,vendor_code:o.business_code_if_vendor,vendor_name:o.business_name_of_product,price:o.price,vendor_price:o.vendorPrice}))),s||[]}catch(r){throw console.error("Error in getAvailableProducts:",r),r}}async function pbe(t){const{data:e,error:r}=await oe.from("coupons").select("*").eq("business_code",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching coupons:",r),r;return e||[]}async function gbe(t){const{data:e,error:r}=await oe.from("coupons").insert({coupon_id:crypto.randomUUID(),business_code:t.business_code,coupon_code:t.coupon_code,discount_type:t.discount_type,discount_value:t.discount_value,max_uses:t.max_uses||null,expiry_date:t.expiry_date||null,min_purchase_amount:t.min_purchase_amount||0,max_purchase_amount:t.max_purchase_amount||0,is_active:t.is_active??!0,number_of_uses:0}).select().single();if(r)throw console.error("Error creating coupon:",r),r;return e}async function xA(t,e){const{data:r,error:n}=await oe.from("coupons").update(e).eq("coupon_id",t).select().single();if(n)throw console.error("Error updating coupon:",n),n;return r}async function xbe(t){const{error:e}=await oe.from("coupons").delete().eq("coupon_id",t);if(e)throw console.error("Error deleting coupon:",e),e;return!0}function vbe(t=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let r="";for(let n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}async function ybe(t,e,r=0){try{const{data:n,error:i}=await oe.from("coupons").select("*").eq("business_code",e).eq("coupon_code",t).eq("is_active",!0).single();if(i){if(i.code==="PGRST116")return{coupon:null,error:"Invalid coupon code"};throw i}return n?n.expiry_date&&new Date(n.expiry_date)<new Date?{coupon:null,error:"Coupon has expired"}:n.max_uses&&n.number_of_uses>=n.max_uses?{coupon:null,error:"Coupon has reached maximum usage limit"}:n.min_purchase_amount>0&&r<n.min_purchase_amount?{coupon:null,error:`Minimum purchase amount of ${n.min_purchase_amount.toFixed(3)} OMR required`}:n.max_purchase_amount>0&&r>n.max_purchase_amount?{coupon:null,error:`Maximum purchase amount is ${n.max_purchase_amount.toFixed(3)} OMR`}:{coupon:n}:{coupon:null,error:"Invalid coupon code"}}catch(n){throw console.error("Error validating coupon:",n),n}}async function bbe(t,e){try{if(!t||typeof t!="string")throw new Error("Invalid coupon code");if(!e||typeof e!="string")throw new Error("Invalid business code");const{data:r,error:n}=await oe.from("coupons").select("number_of_uses").eq("business_code",e).eq("coupon_code",t).single();if(n)throw n;if(!r)throw new Error("Coupon not found");const{error:i}=await oe.from("coupons").update({number_of_uses:(r.number_of_uses||0)+1}).eq("business_code",e).eq("coupon_code",t);if(i)throw i}catch(r){throw console.error("Error incrementing coupon uses:",r),r}}async function wbe(t,e,r){try{console.log("Starting quantity update for cart items:",t);const n=t.map(o=>parseInt(o.id));console.log("Product IDs to update:",n);const{data:i,error:a}=await oe.from("products").select("product_id, quantity, trackable, business_code_if_vendor").in("product_id",n).eq("business_code_of_owner",e).eq("branch_name",r);if(a)throw new Error(`Error fetching products: ${a.message}`);if(!i)throw new Error("No products found");console.log("Found products:",i);const s=i.filter(o=>!o.trackable||o.business_code_if_vendor).map(o=>{const l=t.find(d=>parseInt(d.id)===o.product_id);if(!l)return console.log(`No cart item found for product ${o.product_id}`),null;console.log(`Processing product ${o.product_id}:`,{currentQuantity:o.quantity,cartQuantity:l.quantity,isTrackable:o.trackable,isVendorProduct:!!o.business_code_if_vendor});const u=o.quantity-l.quantity;if(u<0)throw new Error(`Insufficient quantity for product ID ${o.product_id}`);return{id:o.product_id,newQuantity:u}}).filter(Boolean);console.log("Updates to be made:",s);for(const o of s){const{error:l}=await oe.from("products").update({quantity:o.newQuantity}).eq("product_id",o.id);if(l)throw new Error(`Error updating quantity for product ${o.id}: ${l.message}`)}return!0}catch(n){throw console.error("Error updating product quantities:",n),n}}const So=class So{constructor(){}static getInstance(){return So.instance||(So.instance=new So),So.instance}async createTransaction(e){try{const r=await this.calculateAccumulatedProfit(e.business_code,e.branch_name,e.vendor_code,e.profit||0),n=await this.prepareTransactionData({...e,accumulated_profit:r}),{data:i,error:a}=await oe.from("vendor_transactions").insert([n]).select().single();if(a)throw a;return i}catch(r){throw console.error("Error creating vendor transaction:",r),r}}async prepareTransactionData(e){const{transaction_type:r,business_code:n,business_name:i,vendor_code:a,vendor_name:s,branch_name:o,amount:l,...u}=e,d={transaction_id:`${n}_${o}_${Date.now()}`,transaction_date:new Date().toISOString().split("T")[0],business_code:n,business_name:i,vendor_code:a,vendor_name:s,branch_name:o,amount:l,profit:e.profit||0,accumulated_profit:e.accumulated_profit,status:"completed",transaction_type:r};switch(r){case"product_sale":return this.prepareProductSaleData(d,u);case"rental":return this.prepareRentalData(d,u);case"tax":return this.prepareTaxData(d,u);default:throw new Error(`Invalid transaction type: ${r}`)}}prepareProductSaleData(e,r){const{product_quantity:n,unit_price:i,total_price:a}=r;return{...e,product_name:r.product_name,product_quantity:n,unit_price:i,total_price:a||i*n,notes:r.notes||`Product sale: ${r.product_name}`}}prepareRentalData(e,r){const{rental_start_date:n,rental_end_date:i,rental_period:a}=r;return{...e,rental_start_date:n,rental_end_date:i,rental_period:a||this.calculateRentalPeriod(n,i),notes:r.notes||"Rental payment"}}prepareTaxData(e,r){return{...e,tax_period:r.tax_period||this.getCurrentTaxPeriod(),tax_description:r.tax_description||"Monthly tax payment",notes:r.notes||"Tax payment"}}calculateRentalPeriod(e,r){const n=new Date(e),i=new Date(r);return`${(i.getFullYear()-n.getFullYear())*12+i.getMonth()-n.getMonth()} months`}getCurrentTaxPeriod(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}async calculateAccumulatedProfit(e,r,n,i){try{const{data:a}=await oe.from("vendor_transactions").select("accumulated_profit").eq("business_code",e).eq("branch_name",r).eq("vendor_code",n).order("created_at",{ascending:!1}).limit(1).single();return((a==null?void 0:a.accumulated_profit)||0)+i}catch(a){return console.error("Error calculating accumulated profit:",a),i}}async getTransactions(e={}){try{let r=oe.from("vendor_transactions").select("*");e.business_code&&(r=r.eq("business_code",e.business_code)),e.branch_name&&(r=r.eq("branch_name",e.branch_name)),e.vendor_code&&(r=r.eq("vendor_code",e.vendor_code)),e.transaction_type&&(r=r.eq("transaction_type",e.transaction_type)),e.status&&(r=r.eq("status",e.status)),e.start_date&&(r=r.gte("transaction_date",e.start_date)),e.end_date&&(r=r.lte("transaction_date",e.end_date));const{data:n,error:i}=await r.order("created_at",{ascending:!1});if(i)throw i;return n}catch(r){throw console.error("Error getting vendor transactions:",r),r}}async getTransactionStats(e){var r;try{let n=oe.from("vendor_transactions").select("*").eq("business_code",e.business_code).eq("branch_name",e.branch_name);e.vendor_code&&(n=n.eq("vendor_code",e.vendor_code)),e.start_date&&(n=n.gte("transaction_date",e.start_date)),e.end_date&&(n=n.lte("transaction_date",e.end_date));const{data:i,error:a}=await n;if(a)throw a;return{total_transactions:i.length,total_amount:i.reduce((s,o)=>s+Number(o.amount),0),total_profit:i.reduce((s,o)=>s+Number(o.profit),0),by_type:i.reduce((s,o)=>(s[o.transaction_type]=(s[o.transaction_type]||0)+1,s),{}),latest_accumulated_profit:((r=i[0])==null?void 0:r.accumulated_profit)||0}}catch(n){throw console.error("Error getting vendor transaction stats:",n),n}}async getBranchProfitSummary(e,r,n){var i,a;try{let s=oe.from("vendor_transactions").select("*").eq("business_code",e).eq("branch_name",r);n!=null&&n.vendor_code&&(s=s.eq("vendor_code",n.vendor_code)),n!=null&&n.transaction_type&&(s=s.eq("transaction_type",n.transaction_type)),n!=null&&n.start_date&&(s=s.gte("transaction_date",n.start_date)),n!=null&&n.end_date&&(s=s.lte("transaction_date",n.end_date));const{data:o,error:l}=await s;if(l)throw l;const u=o.reduce((d,f)=>{const h=f.vendor_code;return d[h]||(d[h]={vendor_code:f.vendor_code,vendor_name:f.vendor_name,total_profit:0,accumulated_profit:0,transactions_count:0,by_type:{}}),d[h].total_profit+=Number(f.profit),d[h].accumulated_profit=Number(f.accumulated_profit),d[h].transactions_count++,d[h].by_type[f.transaction_type]||(d[h].by_type[f.transaction_type]={count:0,profit:0}),d[h].by_type[f.transaction_type].count++,d[h].by_type[f.transaction_type].profit+=Number(f.profit),d},{});return{branch_total_profit:Object.values(u).reduce((d,f)=>d+f.total_profit,0),vendors:u,period:{start:(n==null?void 0:n.start_date)||((i=o[0])==null?void 0:i.transaction_date),end:(n==null?void 0:n.end_date)||((a=o[o.length-1])==null?void 0:a.transaction_date)}}}catch(s){throw console.error("Error getting branch profit summary:",s),s}}async getBranchProfitTrends(e,r,n="monthly",i,a){try{let s=oe.from("vendor_transactions").select("*").eq("business_code",e).eq("branch_name",r);i&&(s=s.gte("transaction_date",i)),a&&(s=s.lte("transaction_date",a));const{data:o,error:l}=await s;if(l)throw l;const u=o.reduce((d,f)=>{const h=new Date(f.transaction_date);let m;switch(n){case"daily":m=f.transaction_date;break;case"weekly":const g=Math.ceil((h.getDate()-1-h.getDay())/7)+1;m=`${h.getFullYear()}-W${g}`;break;case"monthly":m=`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}`;break}return d[m]||(d[m]={period:m,total_profit:0,transaction_count:0,by_type:{}}),d[m].total_profit+=Number(f.profit),d[m].transaction_count++,d[m].by_type[f.transaction_type]=(d[m].by_type[f.transaction_type]||0)+Number(f.profit),d},{});return Object.values(u).sort((d,f)=>d.period.localeCompare(f.period))}catch(s){throw console.error("Error getting branch profit trends:",s),s}}};Ue(So,"instance");let Lw=So;const iR=Lw.getInstance();async function _be(t,e,r,n,i,a,s){var o;try{console.log("=== Processing Vendor Transactions ===");const l=t.filter(f=>f.business_code_if_vendor);if(l.length===0){console.log("No vendor products in cart, skipping vendor transactions");return}let u=r;if(!u)try{const{data:f}=await oe.from("profiles").select("business_name").eq("business_code",e).eq("role","owner").single();if(f!=null&&f.business_name)u=f.business_name,console.log("Retrieved business name from profile:",u);else throw new Error("Business name not found in profile")}catch(f){throw console.error("Error fetching business name from profile:",f),new Error("Could not determine business name for vendor transaction")}console.log(`Found ${l.length} vendor products to process`);const d=new Map;for(const f of l){const h=f.business_code_if_vendor,m=f.business_name_if_vendor,{data:g}=await oe.from("products").select("price").eq("product_id",f.id).single();if(!g){console.error("Original product not found:",f.id);continue}const p=g.price,x=f.quantity,v=p*x;d.has(h)||d.set(h,{vendorCode:h,vendorName:m,items:[],totalAmount:0});const b=d.get(h);b.items.push({...f,price:p}),b.totalAmount+=v}console.log(`Grouped into ${d.size} vendor transactions`);for(const f of d.values()){const h=f.items[0],m=f.items.length===1,g=f.items.map(y=>`${y.nameAr} (${y.quantity} × ${y.price})`).join(", "),{data:p}=await oe.from("vendor_transactions").select(`
          accumulated_profit,
          transaction_id,
          transaction_type,
          business_code,
          business_name,
          branch_name,
          vendor_code,
          vendor_name,
          amount,
          profit,
          transaction_date
        `).eq("business_code",e).eq("branch_name",n).eq("vendor_code",f.vendorCode).order("created_at",{ascending:!1}).limit(1),x=((o=p==null?void 0:p[0])==null?void 0:o.accumulated_profit)||0,v=f.totalAmount,b=x+v;await iR.createTransaction({transaction_type:"product_sale",business_code:e,business_name:u,branch_name:n,vendor_code:f.vendorCode,vendor_name:f.vendorName,amount:f.totalAmount,profit:v,accumulated_profit:b,product_name:f.items.map(y=>y.nameAr).join(", "),product_quantity:f.items.reduce((y,_)=>y+_.quantity,0),unit_price:m?h.price:void 0,total_price:f.totalAmount,status:"completed",notes:`Bulk sale through POS - Products: ${g}`}),console.log(`✅ Successfully processed vendor transaction for ${f.vendorName}`),console.log("Products included:",g)}console.log("=== Finished Processing Vendor Transactions ==="),console.log("Summary:",{totalVendors:d.size,totalProducts:l.length,processedAt:new Date().toISOString(),businessName:u})}catch(l){throw console.error("Error updating vendor transactions:",l),l}}function Sbe(){const{language:t}=_e(),{user:e}=qe(),{branches:r}=tr(),{settings:n}=Ii(),i=Fi[t],[a,s]=j.useState([]),[o,l]=j.useState(null),[u,d]=j.useState(""),[f,h]=j.useState(""),[m,g]=j.useState("cash"),[p,x]=j.useState([]),[v,b]=j.useState(!0),[y,_]=j.useState(null),[w,N]=j.useState(null),[S,E]=j.useState(!0),{processReceipt:T,isProcessing:P,error:A,receiptText:k}=lbe(),[F,H]=j.useState(null),[M,O]=j.useState(null),[L,R]=j.useState(null),[z,J]=j.useState(!1),[W,C]=j.useState(""),[G,Y]=j.useState(0),[I,Q]=j.useState(null),[fe,me]=j.useState(null),[ee,le]=j.useState(0),te=r.find(re=>re.branch_id===w),Z=j.useCallback(async()=>{if(!(!(e!=null&&e.businessCode)||!te))try{const re=await mbe(e.businessCode,te.branch_name);x(re)}catch(re){console.error("Error loading products:",re),_(i.errorLoadingProducts)}finally{b(!1)}},[e==null?void 0:e.businessCode,te,i.errorLoadingProducts]);j.useEffect(()=>{Z()},[Z]),j.useEffect(()=>{(async()=>{if(e!=null&&e.businessCode){b(!0);try{const Ce=await Lh(e.businessCode);tr.setState(Ae=>({...Ae,branches:Ce})),E(!1)}catch(Ce){console.error("Error loading branches:",Ce),_(i.errorLoadingBranches),E(!1)}finally{b(!1)}}})()},[e==null?void 0:e.businessCode]),j.useEffect(()=>{!S&&(e!=null&&e.businessCode)&&w&&Z()},[e==null?void 0:e.businessCode,w,S]);const ke=re=>{if(!n||!n.vendor_commission_enabled||!re.business_code_if_vendor||re.price<(n.minimum_commission_amount||0))return re.price;const Ce=re.price*n.default_commission_rate/100;return re.price+Ce},Ee=re=>{const Ce=Date.now();if(Ce-ee<500){console.log("Ignoring duplicate scan");return}le(Ce);const Ae=p.find(tt=>tt.barcode===re);if(!Ae){console.log("Product not found");return}const xt=a.find(tt=>tt.id===Ae.product_id.toString());if(!Ae.trackable&&(xt?xt.quantity:0)>=Ae.quantity){_(i.outOfStock.replace("{product}",Ae.product_name));return}Re({id:Ae.product_id.toString(),barcode:Ae.barcode||"",nameAr:Ae.product_name,type:Ae.type,price:ke(Ae),quantity:1,category:Ae.category||"",expiryDate:Ae.expiry_date||void 0,maxQuantity:Ae.trackable?void 0:Ae.quantity,trackable:Ae.trackable,vendorId:Ae.business_code_if_vendor||"",vendorName:Ae.business_name_of_product||"",vendorPrice:Ae.vendorPrice||0,business_code_if_vendor:Ae.business_code_if_vendor,business_name_if_vendor:Ae.business_name_of_product,imageUrl:Ae.image_url,description:Ae.description,_currentStock:Ae.quantity})},et=re=>{const Ce=p.filter(Ae=>Ae.barcode&&Ae.barcode.startsWith(re));Ce.length===1&&Ce[0].barcode},Re=re=>{console.log("=== Adding Product to Cart ==="),console.log("Product Details:",{id:re.id,name:re.nameAr,isVendorProduct:!!re.business_code_if_vendor,trackable:re.trackable,maxQuantity:re.maxQuantity,currentStock:re._currentStock}),s(Ce=>{const Ae=Ce.find(ua=>ua.id===re.id),xt=Ae?Ae.quantity:0;if(console.log("Cart State:",{existingInCart:!!Ae,currentQuantity:xt,maxAllowed:re.maxQuantity,wouldExceedLimit:(!re.trackable||re.business_code_if_vendor)&&xt>=(re.maxQuantity||0)}),(!re.trackable||re.business_code_if_vendor)&&xt>=(re.maxQuantity||0))return console.log("❌ Quantity validation failed:",{currentQuantity:xt,maxQuantity:re.maxQuantity,reason:"Would exceed available stock"}),_(i.outOfStock.replace("{product}",re.nameAr)),Ce;if(console.log("✅ Quantity validation passed:",{currentQuantity:xt,maxQuantity:re.maxQuantity,newQuantity:xt+1}),Ae)return Ce.map(ua=>ua.id===re.id?{...ua,quantity:ua.quantity+1}:ua);const tt={...re,quantity:1,_metadata:{vendor:{code:re.vendorId||"",name:re.vendorName||"",business_code:re.business_code_if_vendor||"",business_name:re.business_name_if_vendor||""},sale:{business_code:(e==null?void 0:e.businessCode)||"",business_name:(e==null?void 0:e.businessName)||"",branch_name:w||"",sale_date:new Date().toISOString()},product:{original_price:re.price,vendor_price:re.vendorPrice||0,is_vendor_supplied:!!re.business_code_if_vendor}}};return tt._metadata.product.is_vendor_supplied&&(console.log("=== Vendor Product Added to Cart ==="),console.log("Product Name:",re.nameAr),console.log("Vendor Details:",{code:tt._metadata.vendor.code,name:tt._metadata.vendor.name,business:tt._metadata.vendor.business_name,business_code:tt._metadata.vendor.business_code}),console.log("Price Details:",{selling_price:re.price,original_price:tt._metadata.product.original_price,vendor_price:tt._metadata.product.vendor_price}),console.log("Sale Context:",{business:tt._metadata.sale.business_name,branch:tt._metadata.sale.branch_name,date:tt._metadata.sale.sale_date}),console.log("===============================")),[...Ce,tt]})},we=(re,Ce)=>{s(Ae=>{const xt=Ae.find(tt=>tt.id===re);return xt?!xt.trackable&&Ce>(xt.maxQuantity||0)?(_(i.outOfStock.replace("{product}",xt.nameAr)),Ae):Ce===0?Ae.filter(tt=>tt.id!==re):Ae.map(tt=>tt.id===re?{...tt,quantity:Ce}:tt):Ae})},Dt=re=>{s(Ce=>Ce.filter(Ae=>Ae.id!==re))},ur=re=>{R(null);const Ce=$t();if(re.type==="fixed"&&re.value>Ce){R(i.discountExceedsTotal);return}if(re.type==="percentage"&&re.value>100){R(i.invalidPercentage);return}H(re)},un=async re=>{if(R(null),!!(e!=null&&e.businessCode))try{const Ce=$t(),{coupon:Ae,error:xt}=await ybe(re,e.businessCode,Ce);if(xt){R(xt),O(null);return}Ae&&O(Ae)}catch(Ce){console.error("Error applying coupon:",Ce),R(i.invalidCoupon),O(null)}},$t=()=>a.reduce((re,Ce)=>re+Ce.price*Ce.quantity,0),$r=()=>{const re=$t();let Ce=0;if(F){const Ae=F.type==="percentage"?re*(F.value/100):F.value;Ce+=Ae}if(M){const Ae=M.discount_type==="percentage"?re*(M.discount_value/100):M.discount_value;Ce+=Ae}return Math.min(Ce,re)},pi=()=>{if(!(n!=null&&n.tax_enabled))return 0;const re=$t(),Ce=$r();return(re-Ce)*n.tax_rate/100},_r=()=>{const re=$t(),Ce=$r(),Ae=pi();return Number((re-Ce+Ae).toFixed(3))},ca=async()=>{if(a.length!==0)try{const re=await T(a,o,m,$r(),M,f);re&&M&&(e!=null&&e.businessCode)&&await bbe(M.coupon_code,e.businessCode),me(re),J(!0)}catch(re){console.error("Error processing receipt:",re),_(i.errorProcessingReceipt)}},Fu=async()=>{if(console.log("Starting checkout confirmation..."),!fe){console.log("No current receipt, aborting");return}if(!te){console.log("No branch selected"),_(i.noBranchSelected);return}try{if(console.log("Processing payment:",m),m==="cash"){console.log("Updating cash tracking...");try{await dbe(e.businessCode,te.branch_name,e.name,_r())}catch(re){console.error("Failed to update cash tracking:",re),_(i.errorUpdatingCash);return}}console.log("Updating quantities for cart:",a);try{await wbe(a,e.businessCode,te.branch_name)}catch(re){console.error("Failed to update quantities:",re),_(i.errorUpdatingQuantities);return}try{await _be(a,e.businessCode,e.businessName||"",te.branch_name,n.vendor_commission_enabled,n.default_commission_rate,n.minimum_commission_amount)}catch(re){console.error("Failed to update vendor transactions:",re)}if(o){console.log("Updating customer order information...");try{await $ve(o.id,e.businessCode)}catch(re){console.error("Failed to update customer info:",re)}}await Z(),console.log("Sale completed successfully, resetting state..."),s([]),l(null),h(""),g("cash"),J(!1),H(null),O(null),C(""),Y(0),Q(null),me(null)}catch(re){console.error("Error processing sale:",re),_(typeof re=="string"?re:re instanceof Error?re.message:i.saleError)}};return c.jsxs("div",{className:"h-full flex",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsxs("div",{className:"bg-white p-4 shadow-sm space-y-4",children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:c.jsxs("div",{className:"col-span-full",children:[c.jsx(Bve,{onScan:Ee,onPartialMatch:et}),c.jsx("div",{className:"mt-4",children:c.jsx(tbe,{onBranchChange:N})})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:c.jsxs("div",{className:"md:col-span-2 relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:u,onChange:re=>d(re.target.value),placeholder:i.searchProduct,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})})]}),c.jsx("div",{className:"flex-1 p-2 overflow-y-auto",children:c.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2",children:v?c.jsx("p",{className:"col-span-full text-center py-8 text-gray-500",children:i.loading}):y?c.jsxs("div",{className:"col-span-full text-center py-8",children:[c.jsx("p",{className:"text-red-500 mb-2",children:y}),c.jsx("span",{onClick:Z,className:"mt-2 text-indigo-600 hover:text-indigo-800",children:i.retry})]}):p.filter(re=>re.product_name.toLowerCase().includes(u.toLowerCase())||re.barcode&&re.barcode.includes(u)).map(re=>{const Ce=a.find(tt=>tt.id===re.product_id.toString()),Ae=Ce?Ce.quantity:0;console.log("Rendering Product:",{id:re.product_id,name:re.product_name,isVendorProduct:!!re.business_code_if_vendor,trackable:re.trackable,quantity:re.quantity,currentInCart:Ae});const xt=(!re.trackable||re.business_code_if_vendor)&&(Ae>=re.quantity||re.quantity<=0);return console.log("Product State:",{isDisabled:xt,reason:xt?"Out of stock or max quantity reached":"Available",availableQuantity:re.quantity,currentInCart:Ae}),c.jsxs("div",{onClick:()=>{if(!xt){if(console.log("Attempting to add product:",{id:re.product_id,name:re.product_name,currentQuantity:Ae,availableQuantity:re.quantity}),(!re.trackable||re.business_code_if_vendor)&&Ae>=re.quantity){console.log("❌ Click validation failed:",{currentQuantity:Ae,availableQuantity:re.quantity,reason:"Would exceed available stock"}),_(i.outOfStock.replace("{product}",re.product_name));return}console.log("✅ Click validation passed, proceeding to add to cart"),Re({id:re.product_id.toString(),barcode:re.barcode||"",nameAr:re.product_name,type:re.type,price:ke(re),quantity:1,category:re.category||"",expiryDate:re.expiry_date||void 0,maxQuantity:!re.trackable||re.business_code_if_vendor?re.quantity:void 0,trackable:re.trackable,vendorId:re.business_code_if_vendor||"",vendorName:re.business_name_of_product||"",vendorPrice:re.vendorPrice||0,business_code_if_vendor:re.business_code_if_vendor,business_name_if_vendor:re.business_name_of_product,imageUrl:re.image_url,description:re.description,_currentStock:re.quantity})}},className:`bg-white rounded-lg shadow p-2 transition-shadow flex flex-col ${xt?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow-md"}`,children:[c.jsx("div",{className:"aspect-square w-full bg-gray-100 rounded-md mb-2 overflow-hidden",children:re.image_url?c.jsx("img",{src:re.image_url,alt:re.product_name,className:"w-full h-full object-cover",onError:tt=>{tt.target.style.display="none"}}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:c.jsx(Jb,{className:"w-6 h-6"})})}),c.jsxs("div",{className:"flex-1 min-h-0",children:[c.jsx("h3",{className:"font-medium text-sm leading-tight line-clamp-2",children:re.product_name}),c.jsxs("div",{className:"mt-1 flex flex-wrap gap-1 text-xs",children:[c.jsx("span",{className:"text-gray-500",children:re.type==="food"?i.food:i.product}),re.business_name_of_product&&c.jsx("span",{className:"text-indigo-600",children:re.business_name_of_product})]}),c.jsxs("div",{className:"mt-1 text-sm font-semibold text-indigo-600",children:[ke(re).toFixed(2)," ",i.currency]}),re.type==="food"&&re.expiry_date&&c.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[i.expiryDate,": ",new Date(re.expiry_date).toLocaleDateString()]}),c.jsxs("div",{className:"mt-0.5 flex justify-between items-center text-xs",children:[c.jsxs("span",{className:"text-gray-500",children:[i.inStock,": ",re.quantity]}),xt&&(!re.trackable||re.business_code_if_vendor)&&c.jsx("span",{className:"text-red-500",children:t==="ar"?"نفذت":"Out"})]})]})]},re.product_id)})})})]}),c.jsxs("div",{className:"w-96 bg-white border-r border-gray-200 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Jb,{className:"w-5 h-5 text-gray-500"}),c.jsx("h2",{className:"text-lg font-semibold mr-2",children:i.cart})]}),o&&c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-bold text-gray-900",children:o.name}),c.jsx("div",{className:"text-xs text-gray-500",children:o.phone})]})})]})}),c.jsx(Ive,{onCustomerSelect:re=>{l(re),re||(H(null),O(null))}}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.length===0?c.jsx("p",{className:"text-gray-500 text-center py-8",children:i.noItems}):c.jsx("div",{className:"space-y-4",children:a.map(re=>{const Ce=p.find(Ae=>Ae.product_id.toString()===re.id);return c.jsx(Uve,{item:re,availableQuantity:(Ce==null?void 0:Ce.quantity)||0,isTrackable:(Ce==null?void 0:Ce.trackable)||!1,onUpdateQuantity:we,onRemove:Dt},re.id)})})}),c.jsx(Zye,{subtotal:$t(),onApplyDiscount:ur,onApplyCoupon:un,appliedDiscount:F||void 0,appliedCoupon:M||void 0,error:L}),c.jsx(ebe,{selectedMethod:m,onMethodChange:g}),c.jsx(Jye,{notes:f,onNotesChange:h}),c.jsxs("div",{className:"border-t p-4 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:[i.subtotal,":"]}),c.jsxs("span",{children:[$t().toFixed(3)," ",i.currency]})]}),F&&c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:[i.discount,":"]}),c.jsxs("span",{className:"text-red-600",children:["-",$r().toFixed(3)," ",i.currency]})]}),(n==null?void 0:n.tax_enabled)&&c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:[i.tax," (",n.tax_rate,"%):"]}),c.jsxs("span",{children:[pi().toFixed(3)," ",i.currency]})]}),c.jsxs("div",{className:"flex justify-between text-lg font-semibold pt-2 border-t",children:[c.jsxs("span",{children:[i.total,":"]}),c.jsxs("span",{children:[_r().toFixed(3)," ",i.currency]})]})]}),c.jsx("button",{disabled:a.length===0,onClick:ca,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:opacity-50",children:P?i.processing:i.checkout})]})]}),z&&fe&&c.jsx(Qye,{total:_r(),subtotal:$t(),discount:$r(),taxAmount:pi(),paymentMethod:m,customer:o,settings:n,cart:a,receiptId:fe.receiptId,branchName:(te==null?void 0:te.branch_name)||"",cashierName:(e==null?void 0:e.name)||"",couponCode:M==null?void 0:M.code,notes:f,onConfirm:Fu,onCancel:()=>J(!1),receipt:fe})]})}const dl={ar:{products:"المنتجات",noAssignments:"لم يتم تعيينك لأي متجر بعد",loading:"جاري التحميل...",allBusinesses:"جميع المتاجر",allBranches:"جميع الفروع",selectBusinessFirst:"يجب اختيار متجر قبل إضافة منتج",errorLoadingAssignments:"حدث خطأ أثناء تحميل التعيينات",errorLoadingProducts:"حدث خطأ أثناء تحميل المنتجات",errorSavingProduct:"حدث خطأ أثناء حفظ المنتج",errorDeletingProduct:"حدث خطأ أثناء حذف المنتج",approved:"تمت الموافقة",rejected:"مرفوض",pending:"في انتظار المراجعة",addProduct:"إضافة منتج",updateProduct:"تحديث المنتج",addNewProduct:"إضافة منتج جديد",searchProduct:"ابحث عن منتج...",allProducts:"جميع المنتجات",foodProducts:"منتجات غذائية",nonFoodProducts:"منتجات غير غذائية",allBranches:"جميع الفروع",selectBranchFirst:"يجب اختيار فرع قبل إضافة منتج",allCategories:"جميع الفئات",selectCategory:"اختر الفئة",categories:"الفئات",addCategory:"إضافة فئة",editCategory:"تعديل الفئة",deleteCategory:"حذف الفئة",categoryName:"اسم الفئة",categoryType:"نوع الفئة",foodCategory:"فئة طعام",nonFoodCategory:"فئة منتجات",categoryDeleted:"تم حذف الفئة بنجاح",categoryAdded:"تم إضافة الفئة بنجاح",categoryUpdated:"تم تحديث الفئة بنجاح",confirmDeleteCategory:"هل أنت متأكد من حذف هذه الفئة؟",categoryInUse:"لا يمكن حذف الفئة لأنها مستخدمة في منتجات",productImage:"صورة المنتج",chooseImage:"اختر صورة",uploadInstructions:"PNG, JPG حتى 5MB",productType:"نوع المنتج",productTypeColumn:"نوع المنتج",food:"منتج غذائي",nonFood:"منتج غير غذائي",vendor:"المورد",business:"المتجر",productName:"اسم المنتج",price:"السعر",quantity:"الكمية",branch:"الفرع",selectBranch:"اختر الفرع",barcode:"الباركود",barcodeGeneratedAutomatically:"يتم توليد الباركود تلقائياً",optional:"اختياري",productionDate:"تاريخ الإنتاج",expiryDate:"تاريخ انتهاء الصلاحية",description:"الوصف",cancel:"إلغاء",expired:"منتهي الصلاحية",expiresInToday:"ينتهي اليوم",expiresIn:"ينتهي خلال {days} يوم",edit:"تعديل",currency:"ر.ع",expiredProductsWarning:"{count} منتج منتهي الصلاحية",printBarcode:"طباعة الباركود",pendingApprovalNotice:"سيتم مراجعة المنتج من قبل صاحب المتجر قبل نشره",uploading:"جاري الرفع...",errorUploadingImage:"حدث خطأ أثناء رفع الصورة",errorGeneratingBarcode:"حدث خطأ أثناء إنشاء الباركود",delete:"حذف",confirmDelete:"تأكيد الحذف",deleteConfirmationMessage:"هل أنت متأكد من حذف المنتج {name}؟",unknownBusiness:"متجر غير معروف",sendingTo:"إرسال إلى",selectBusiness:"اختر متجر",originalPrice:"السعر الأصلي",commission:"عمولة",selectBranch:"اختر الفرع",selectBusinessFirst:"يجب اختيار متجر أولاً",selectBranch:"اختر الفرع",sortAsc:"ترتيب تصاعدي",sortDesc:"ترتيب تنازلي",acceptanceStatus:"حالة القبول"},en:{products:"Products",noAssignments:"You have not been assigned to any stores yet",loading:"Loading...",allBusinesses:"All Businesses",allBranches:"All Branches",selectBusinessFirst:"Please select a business before adding a product",errorLoadingAssignments:"Error loading assignments",errorLoadingProducts:"Error loading products",errorSavingProduct:"Error saving product",errorDeletingProduct:"Error deleting product",approved:"Approved",rejected:"Rejected",pending:"Pending Review",addProduct:"Add Product",updateProduct:"Update Product",addNewProduct:"Add New Product",searchProduct:"Search for a product...",allProducts:"All Products",foodProducts:"Food Products",nonFoodProducts:"Non-Food Products",allBranches:"All Branches",selectBranchFirst:"Please select a branch before adding a product",allCategories:"All Categories",selectCategory:"Select Category",categories:"Categories",addCategory:"Add Category",editCategory:"Edit Category",deleteCategory:"Delete Category",categoryName:"Category Name",categoryType:"Category Type",foodCategory:"Food Category",nonFoodCategory:"Non-Food Category",categoryDeleted:"Category deleted successfully",categoryAdded:"Category added successfully",categoryUpdated:"Category updated successfully",confirmDeleteCategory:"Are you sure you want to delete this category?",categoryInUse:"Cannot delete category as it is used in products",productImage:"Product Image",chooseImage:"Choose Image",uploadInstructions:"PNG, JPG up to 5MB",productType:"Product Type",productTypeColumn:"Product Type",food:"Food",nonFood:"Non-Food Product",vendor:"Vendor",business:"Business",productName:"Product Name",price:"Price",quantity:"Quantity",branch:"Branch",selectBranch:"Select Branch",barcode:"Barcode",barcodeGeneratedAutomatically:"Barcode is generated automatically",optional:"Optional",productionDate:"Production Date",expiryDate:"Expiry Date",description:"Description",cancel:"Cancel",expired:"Expired",expiresInToday:"Expires Today",expiresIn:"Expires in {days} days",edit:"Edit",currency:"OMR",expiredProductsWarning:"{count} products are expired",printBarcode:"Print Barcode",pendingApprovalNotice:"Product will be reviewed by the store owner before publishing",uploading:"Uploading...",errorUploadingImage:"Error uploading image",errorGeneratingBarcode:"Error generating barcode",delete:"Delete",confirmDelete:"Confirm Delete",deleteConfirmationMessage:"Are you sure you want to delete product {name}?",unknownBusiness:"Unknown Business",sendingTo:"Sending to",selectBusiness:"Select business",originalPrice:"Original Price",commission:"commission",selectBranch:"Select branch",selectBusinessFirst:"Please select a business first",selectBranch:"Select branch",sortAsc:"Sort ascending",sortDesc:"Sort descending",acceptanceStatus:"Acceptance Status"}};function Nbe({branches:t,selectedBranch:e,onBranchChange:r,className:n=""}){const{language:i}=_e(),a=dl[i],s=t.filter(o=>o.is_active);return c.jsxs("div",{className:`flex items-center space-x-2 space-x-reverse ${n}`,children:[c.jsx(Yt,{className:"w-5 h-5 text-gray-400"}),c.jsxs("select",{value:e,onChange:o=>r(o.target.value),className:"border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:i==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"all",children:a.allBranches}),s.map(o=>c.jsx("option",{value:o.branch_name,children:o.branch_name},o.branch_id))]})]})}function aR(t){if(t.existingBarcode)return t.existingBarcode;const e=`${t.productId}-${t.vendorId}`,r=jbe(e);return r+Ebe(r)}function jbe(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);e=(e<<5)-e+i,e=e&e}return(Math.abs(e)%9e5+1e5).toString()}function Ebe(t){let e=0;for(let n=0;n<6;n++){const i=parseInt(t[n]);e+=n%2===0?i:i*3}return(10-e%10)%10}async function Tbe(t){try{const e=t.existingBarcode||aR(t),i=(window!==window.parent?window.parent:window).open("","_blank","width=600,height=600");if(!i)throw console.error("Failed to open print window"),new Error("Could not open print window");const a=Pbe(e,t);i.document.write(a),i.document.close(),await new Promise((s,o)=>{let l=0;const u=50,d=()=>{if(l++,l>u){o(new Error("Timeout waiting for document to load"));return}i.document.readyState==="complete"?s():setTimeout(d,100)};i.onload=()=>d(),d()});try{return await i.document.fonts.ready,await new Promise(s=>setTimeout(s,1e3)),i.print(),new Promise(s=>{let o=!1;i.onafterprint=()=>{o||(o=!0,i.close(),s(!0))},setTimeout(()=>{o||(o=!0,i.close(),s(!0))},1e3)})}catch(s){throw console.error("Print error:",s),i.close(),s}}catch(e){throw console.error("Failed to print barcode:",e),e}}function Pbe(t,e){const r=n=>{if(!n)return"";const i=new Date(n),a=i.getDate().toString().padStart(2,"0"),s=(i.getMonth()+1).toString().padStart(2,"0"),o=i.getFullYear().toString().slice(-2);return`${a}/${s}/${o}`};return`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Product Barcode</title>
      <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"><\/script>
      <style>
        @page {
          size: 58mm 40mm;
          margin: 0;
        }
        body {
          margin: 1.5mm;
          font-family: Arial, sans-serif;
          font-size: 8pt;
        }
        .container {
          width: 55mm;
          height: 37mm;
          display: flex;
          flex-direction: column;
          align-items: center;
        }
        .business-name {
          font-size: 7pt;
          margin-bottom: 0.5mm;
          text-align: center;
          width: 100%;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
        .product-name {
          font-size: 8pt;
          font-weight: bold;
          margin-bottom: 0.5mm;
          text-align: center;
          width: 100%;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
        .barcode {
          margin: 0.5mm 0;
        }
        .barcode svg {
          width: 45mm !important;
          height: 12mm !important;
          margin-bottom: 0.3mm;  
        }
        .barcode-number {
          font-size: 6pt;
          text-align: center;
          margin-top: 0.2mm;   
          font-family: monospace;
        }
        .price {
          font-size: 9pt;
          font-weight: bold;
          margin: 0.5mm 0;
        }
        .dates {
          font-size: 6pt;
          display: flex;
          gap: 3mm;
          justify-content: center;
          width: 100%;
          margin-top: 0.5mm;
        }
        .date {
          display: flex;
          gap: 1mm;
          align-items: center;
        }
        .date-label {
          color: #666;
        }
        .expiry-label {
          color: #ff0000;
        }
        .expiry-date {
          color: #ff0000 !important;
        }
      </style>
    </head>
    <body>
      <div class="container">
        ${e.businessName?`<div class="business-name">${e.businessName}</div>`:""}
        ${e.vendorName?`<div class="business-name">${e.vendorName}</div>`:""}
        <div class="product-name">${e.name}</div>
        <div class="barcode">
          <svg id="barcode"></svg>
          <div class="barcode-number">${t}</div>
        </div>
        <div class="price">${e.price.toFixed(3)} OMR</div>
        <div class="dates">
          ${e.productionDate?`
            <div class="date">
              <span class="date-label">Prd:</span>
              <span>${r(e.productionDate)}</span>
            </div>
          `:""}
          ${e.expiryDate?`
            <div class="date">
              <span class="expiry-label">Exp:</span>
              <span class="expiry-date">${r(e.expiryDate)}</span>
            </div>
          `:""}
        </div>
      </div>
      <script>
        JsBarcode("#barcode", "${t}", {
          format: "CODE128",
          width: 0.5,
          height: 18,
          displayValue: false,
          margin: 0,
          background: "transparent",
          lineColor: "#000",
          fontSize: 6,
          textMargin: 0
        });
      <\/script>
    </body>
    </html>
  `}function _S(){const[t,e]=j.useState(!1),[r,n]=j.useState(!1),[i,a]=j.useState(null);return{generateProductBarcode:async l=>{e(!0),a(null);try{return aR(l)}catch(u){throw a("Failed to generate barcode"),u}finally{e(!1)}},printProductBarcode:async l=>{n(!0),a(null);try{if(!await Tbe(l))throw new Error("Print failed")}catch(u){throw a("Failed to print barcode"),u}finally{n(!1)}},isGenerating:t,isPrinting:r,error:i}}function sR({product:t,className:e="",userProfile:r}){const{language:n}=_e(),{printProductBarcode:i,isPrinting:a,error:s}=_S(),{settings:o}=Ii(),l=d=>{if(!o||!o.vendor_commission_enabled||!d.business_code_if_vendor||d.price<(o.minimum_commission_amount||0))return d.price;const f=d.price*o.default_commission_rate/100;return d.price+f},u=async()=>{try{const d=r==null?void 0:r.business_name;if(!d){console.error("Current user business name not found");return}const h=!!t.business_code_if_vendor?t.business_name_of_product:void 0,m=l(t);if(!await i({productId:t.product_id.toString(),vendorId:t.business_code_if_vendor||t.business_code_of_owner,name:t.product_name,price:m,businessName:d,vendorName:h,expiryDate:t.type==="food"?t.expiry_date:void 0,productionDate:t.type==="food"?t.production_date:void 0,existingBarcode:t.barcode}))throw new Error("Print failed")}catch(d){console.error("Print failed:",d)}};return c.jsxs("button",{onClick:u,disabled:a||!r,className:`inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed ${e}`,title:n==="ar"?"طباعة الباركود":"Print Barcode",children:[c.jsx(r2,{className:"h-4 w-4 ml-2"}),n==="ar"?"طباعة الباركود":"Print Barcode"]})}const kbe={ar:{upcomingProducts:"المنتجات القادمة",searchProducts:"ابحث عن منتج أو مورد...",allStatuses:"جميع الحالات",pending:"في انتظار المراجعة",approved:"تمت الموافقة",rejected:"مرفوض",product:"المنتج",vendor:"المورد",type:"النوع",food:"منتج غذائي",nonFood:"منتج غير غذائي",expiryDate:"تاريخ انتهاء الصلاحية",quantity:"الكمية",price:"السعر",submittedAt:"تاريخ التقديم",status:"الحالة",actions:"إجراءات",review:"مراجعة",reviewProduct:"مراجعة المنتج",reviewNotes:"ملاحظات المراجعة",approve:"موافقة",reject:"رفض",cancel:"إلغاء",currency:"ر.ع",pendingReviewCount:"{count} منتج في انتظار المراجعة",rejectionReasonRequired:"يجب إدخال سبب الرفض",delete:"حذف",confirmDelete:"هل أنت متأكد من حذف هذا المنتج؟"},en:{upcomingProducts:"Upcoming Products",searchProducts:"Search for product or vendor...",allStatuses:"All Statuses",pending:"Pending Review",approved:"Approved",rejected:"Rejected",product:"Product",vendor:"Vendor",type:"Type",food:"Food",nonFood:"Non-Food Product",expiryDate:"Expiry Date",quantity:"Quantity",price:"Price",submittedAt:"Submitted At",status:"Status",actions:"Actions",review:"Review",reviewProduct:"Review Product",reviewNotes:"Review Notes",approve:"Approve",reject:"Reject",cancel:"Cancel",currency:"OMR",pendingReviewCount:"{count} products pending review",rejectionReasonRequired:"Please provide a reason for rejection",delete:"Delete",confirmDelete:"Are you sure you want to delete this product?"}};async function SS(t={}){try{if(console.log("Getting products with filters:",t),!t.businessCode)throw console.error("No business code provided for product query"),new Error("Business code is required");let e=oe.from("products").select("*").eq("business_code_of_owner",t.businessCode);t.page&&(e=e.eq("current_page",t.page)),t.type&&(e=e.eq("type",t.type)),t.accepted!==void 0?e=e.eq("accepted",t.accepted):t.page==="upcoming_products"&&(e=e.eq("accepted",!1)),t.searchQuery&&(e=e.ilike("product_name",`%${t.searchQuery}%`)),t.branchName&&(e=e.eq("branch_name",t.branchName));const{data:r,error:n}=await e;if(n)throw console.error("Error fetching products:",n),n;return r?(console.log(`Found ${r.length} products for business:`,t.businessCode),r):(console.log("No products found for business:",t.businessCode),[])}catch(e){throw console.error("Error in getProducts:",e),e}}async function Abe(t){try{console.log("Getting vendor products with filter:",t);let e=oe.from("products").select("*").eq("business_code_if_vendor",t.vendorBusinessCode);t.businessCode&&t.businessCode!=="all"&&(e=e.eq("business_code_of_owner",t.businessCode),t.branchName&&t.branchName!=="all"&&(e=e.eq("branch_name",t.branchName)));const{data:r,error:n}=await e;if(n)throw console.error("Error fetching vendor products:",n),n;return console.log("Fetched vendor products:",r),r||[]}catch(e){throw console.error("Error in getVendorProducts:",e),e}}async function oR(t,e){const{data:r,error:n}=await oe.from("profiles").select('business_name, role, "vendor_business _name"').eq("business_code",t.business_code_if_vendor||t.business_code_of_owner).eq("role",t.business_code_if_vendor?"vendor":"owner").maybeSingle();if(n)throw console.error("Error fetching business name:",n),n;const i=t.business_code_if_vendor?r==null?void 0:r["vendor_business _name"]:r==null?void 0:r.business_name,{product_name:a,type:s,current_page:o,expiry_date:l,quantity:u,price:d,barcode:f,image_url:h,description:m,trackable:g,business_code_of_owner:p,business_code_if_vendor:x,branch_name:v="main",accepted:b}=t,y={product_name:a,type:s,business_name_of_product:i||"Unknown Business",current_page:o||"upcoming_products",expiry_date:l,quantity:u||0,price:d||0,barcode:f,image_url:h,description:m,trackable:g||!1,business_code_of_owner:p,business_code_if_vendor:x,branch_name:v,accepted:b||!1,date_of_creation:new Date().toISOString()},{data:_,error:w}=await oe.from("products").insert([y]).select().single();if(w)throw console.error("Error creating product:",w),w;return _}async function lR(t,e){const{product_name:r,type:n,production_date:i,current_page:a,expiry_date:s,quantity:o,price:l,barcode:u,image_url:d,description:f,trackable:h,business_code_of_owner:m,business_code_if_vendor:g,branch_name:p,accepted:x,rejection_reason:v}=e,b={...r&&{product_name:r},...n&&{type:n},...i&&{production_date:i},...a&&{current_page:a},...s&&{expiry_date:s},...o!==void 0&&{quantity:o},...l!==void 0&&{price:l},...u&&{barcode:u},...d&&{image_url:d},...f&&{description:f},...h!==void 0&&{trackable:h},...m&&{business_code_of_owner:m},...g&&{business_code_if_vendor:g},...p&&{branch_name:p},...x!==void 0&&{accepted:x},...v&&{rejection_reason:v}},{data:y,error:_}=await oe.from("products").update(b).eq("product_id",t).select().single();return _?(console.error("Error updating product:",_),null):y}async function vA(t,e,r){const{error:n}=await oe.from("products").update({accepted:e,current_page:e?"products":"upcoming_products",date_of_acception_or_rejection:new Date().toISOString(),rejection_reason:r||null}).eq("product_id",t);return n?(console.error("Error approving/rejecting product:",n),!1):!0}async function NS(t){const{error:e}=await oe.from("products").delete().eq("product_id",t);return e?(console.error("Error deleting product:",e),!1):!0}let Obe={data:""},Cbe=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Obe,Mbe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Dbe=/\/\*[^]*?\*\/|  +/g,yA=/\n+/g,vs=(t,e)=>{let r="",n="",i="";for(let a in t){let s=t[a];a[0]=="@"?a[1]=="i"?r=a+" "+s+";":n+=a[1]=="f"?vs(s,a):a+"{"+vs(s,a[1]=="k"?"":e)+"}":typeof s=="object"?n+=vs(s,e?e.replace(/([^,])+/g,o=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):a):s!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=vs.p?vs.p(a,s):a+":"+s+";")}return r+(e&&i?e+"{"+i+"}":i)+n},ha={},cR=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+cR(t[r]);return e}return t},$be=(t,e,r,n,i)=>{let a=cR(t),s=ha[a]||(ha[a]=(l=>{let u=0,d=11;for(;u<l.length;)d=101*d+l.charCodeAt(u++)>>>0;return"go"+d})(a));if(!ha[s]){let l=a!==t?t:(u=>{let d,f,h=[{}];for(;d=Mbe.exec(u.replace(Dbe,""));)d[4]?h.shift():d[3]?(f=d[3].replace(yA," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(yA," ").trim();return h[0]})(t);ha[s]=vs(i?{["@keyframes "+s]:l}:l,r?"":"."+s)}let o=r&&ha.g?ha.g:null;return r&&(ha.g=ha[s]),((l,u,d,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=d?l+u.data:u.data+l)})(ha[s],e,n,o),s},Ibe=(t,e,r)=>t.reduce((n,i,a)=>{let s=e[a];if(s&&s.call){let o=s(r),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;s=l?"."+l:o&&typeof o=="object"?o.props?"":vs(o,""):o===!1?"":o}return n+i+(s??"")},"");function dv(t){let e=this||{},r=t.call?t(e.p):t;return $be(r.unshift?r.raw?Ibe(r,[].slice.call(arguments,1),e.p):r.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):r,Cbe(e.target),e.g,e.o,e.k)}let uR,Bw,Uw;dv.bind({g:1});let Wa=dv.bind({k:1});function Rbe(t,e,r,n){vs.p=e,uR=t,Bw=r,Uw=n}function Js(t,e){let r=this||{};return function(){let n=arguments;function i(a,s){let o=Object.assign({},a),l=o.className||i.className;r.p=Object.assign({theme:Bw&&Bw()},o),r.o=/ *go\d+/.test(l),o.className=dv.apply(r,n)+(l?" "+l:"");let u=t;return t[0]&&(u=o.as||t,delete o.as),Uw&&u[0]&&Uw(o),uR(u,o)}return i}}var Fbe=t=>typeof t=="function",gg=(t,e)=>Fbe(t)?t(e):t,Lbe=(()=>{let t=0;return()=>(++t).toString()})(),dR=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Bbe=20,fR=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Bbe)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return fR(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(a=>a.id===n||n===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},C0=[],M0={toasts:[],pausedAt:void 0},fl=t=>{M0=fR(M0,t),C0.forEach(e=>{e(M0)})},Ube={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},zbe=(t={})=>{let[e,r]=j.useState(M0);j.useEffect(()=>(C0.push(r),()=>{let i=C0.indexOf(r);i>-1&&C0.splice(i,1)}),[e]);let n=e.toasts.map(i=>{var a,s,o;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((a=t[i.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((s=t[i.type])==null?void 0:s.duration)||(t==null?void 0:t.duration)||Ube[i.type],style:{...t.style,...(o=t[i.type])==null?void 0:o.style,...i.style}}});return{...e,toasts:n}},Wbe=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Lbe()}),Jh=t=>(e,r)=>{let n=Wbe(e,t,r);return fl({type:2,toast:n}),n.id},Ot=(t,e)=>Jh("blank")(t,e);Ot.error=Jh("error");Ot.success=Jh("success");Ot.loading=Jh("loading");Ot.custom=Jh("custom");Ot.dismiss=t=>{fl({type:3,toastId:t})};Ot.remove=t=>fl({type:4,toastId:t});Ot.promise=(t,e,r)=>{let n=Ot.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?gg(e.success,i):void 0;return a?Ot.success(a,{id:n,...r,...r==null?void 0:r.success}):Ot.dismiss(n),i}).catch(i=>{let a=e.error?gg(e.error,i):void 0;a?Ot.error(a,{id:n,...r,...r==null?void 0:r.error}):Ot.dismiss(n)}),t};var Vbe=(t,e)=>{fl({type:1,toast:{id:t,height:e}})},Hbe=()=>{fl({type:5,time:Date.now()})},Yd=new Map,qbe=1e3,Gbe=(t,e=qbe)=>{if(Yd.has(t))return;let r=setTimeout(()=>{Yd.delete(t),fl({type:4,toastId:t})},e);Yd.set(t,r)},Kbe=t=>{let{toasts:e,pausedAt:r}=zbe(t);j.useEffect(()=>{if(r)return;let a=Date.now(),s=e.map(o=>{if(o.duration===1/0)return;let l=(o.duration||0)+o.pauseDuration-(a-o.createdAt);if(l<0){o.visible&&Ot.dismiss(o.id);return}return setTimeout(()=>Ot.dismiss(o.id),l)});return()=>{s.forEach(o=>o&&clearTimeout(o))}},[e,r]);let n=j.useCallback(()=>{r&&fl({type:6,time:Date.now()})},[r]),i=j.useCallback((a,s)=>{let{reverseOrder:o=!1,gutter:l=8,defaultPosition:u}=s||{},d=e.filter(m=>(m.position||u)===(a.position||u)&&m.height),f=d.findIndex(m=>m.id===a.id),h=d.filter((m,g)=>g<f&&m.visible).length;return d.filter(m=>m.visible).slice(...o?[h+1]:[0,h]).reduce((m,g)=>m+(g.height||0)+l,0)},[e]);return j.useEffect(()=>{e.forEach(a=>{if(a.dismissed)Gbe(a.id,a.removeDelay);else{let s=Yd.get(a.id);s&&(clearTimeout(s),Yd.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:Vbe,startPause:Hbe,endPause:n,calculateOffset:i}}},Ybe=Wa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Xbe=Wa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Qbe=Wa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Jbe=Js("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ybe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Xbe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Qbe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Zbe=Wa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,e1e=Js("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Zbe} 1s linear infinite;
`,t1e=Wa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,r1e=Wa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,n1e=Js("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${t1e} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${r1e} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,i1e=Js("div")`
  position: absolute;
`,a1e=Js("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,s1e=Wa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,o1e=Js("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${s1e} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,l1e=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?j.createElement(o1e,null,e):e:r==="blank"?null:j.createElement(a1e,null,j.createElement(e1e,{...n}),r!=="loading"&&j.createElement(i1e,null,r==="error"?j.createElement(Jbe,{...n}):j.createElement(n1e,{...n})))},c1e=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,u1e=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,d1e="0%{opacity:0;} 100%{opacity:1;}",f1e="0%{opacity:1;} 100%{opacity:0;}",h1e=Js("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,m1e=Js("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,p1e=(t,e)=>{let r=t.includes("top")?1:-1,[n,i]=dR()?[d1e,f1e]:[c1e(r),u1e(r)];return{animation:e?`${Wa(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Wa(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},g1e=j.memo(({toast:t,position:e,style:r,children:n})=>{let i=t.height?p1e(t.position||e||"top-center",t.visible):{opacity:0},a=j.createElement(l1e,{toast:t}),s=j.createElement(m1e,{...t.ariaProps},gg(t.message,t));return j.createElement(h1e,{className:t.className,style:{...i,...r,...t.style}},typeof n=="function"?n({icon:a,message:s}):j.createElement(j.Fragment,null,a,s))});Rbe(j.createElement);var x1e=({id:t,className:e,style:r,onHeightUpdate:n,children:i})=>{let a=j.useCallback(s=>{if(s){let o=()=>{let l=s.getBoundingClientRect().height;n(t,l)};o(),new MutationObserver(o).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return j.createElement("div",{ref:a,className:e,style:r},i)},v1e=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:dR()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...i}},y1e=dv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Gm=16,b1e=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:i,containerStyle:a,containerClassName:s})=>{let{toasts:o,handlers:l}=Kbe(r);return j.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Gm,left:Gm,right:Gm,bottom:Gm,pointerEvents:"none",...a},className:s,onMouseEnter:l.startPause,onMouseLeave:l.endPause},o.map(u=>{let d=u.position||e,f=l.calculateOffset(u,{reverseOrder:t,gutter:n,defaultPosition:e}),h=v1e(d,f);return j.createElement(x1e,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?y1e:"",style:h},u.type==="custom"?gg(u.message,u):i?i(u):j.createElement(g1e,{toast:u,position:d}))}))};const w1e=({visible:t,message:e,subMessage:r,onAction:n,onIgnore:i,actionText:a,language:s})=>c.jsx("div",{className:`${t?"animate-enter":"animate-leave"}
        max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto
        flex ring-1 ring-black ring-opacity-5`,dir:s==="ar"?"rtl":"ltr",children:c.jsx("div",{className:"flex-1 p-3",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(il,{className:"h-5 w-5 text-yellow-500"})}),c.jsxs("div",{className:`${s==="ar"?"mr-2":"ml-2"} flex-1`,children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:e}),c.jsx("p",{className:"mt-0.5 text-xs text-gray-500",children:r})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:n,className:`text-xs font-medium text-indigo-600 hover:text-indigo-500 
                       px-2 py-1 rounded hover:bg-indigo-50`,children:a}),c.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-500",title:s==="ar"?"تجاهل":"Ignore",children:c.jsx(Xa,{className:"h-4 w-4"})})]})]})})}),bo={lastCheckedProducts:[],isInitialized:!1};let mc=null;const Pl=!0,hR=async(t,e,r,n="en")=>{if(!t||!e){console.log("Cannot start monitoring: Missing businessCode or role");return}if(!["cashier","manager","owner"].includes(e)){console.log("Cannot start monitoring: Unauthorized role",e);return}if(e==="cashier"&&!r){console.log("Cannot start monitoring: Cashier requires branchName");return}mc&&(console.log("Clearing existing monitor interval"),clearInterval(mc)),dl[n];const i=async()=>{try{if(Pl&&console.log("Checking for new products...",{businessCode:t,role:e,branchName:r}),e==="cashier"&&!r){console.error("Cashier requires branch name for product monitoring");return}const s={businessCode:t,branchName:e==="cashier"?r:void 0,page:"upcoming_products",searchQuery:void 0,accepted:!1};Pl&&console.log("Applying filters:",s);const o=await SS(s);if(Pl&&console.log("Current products:",o.length),!bo.isInitialized&&e==="cashier"&&o.length>0)Pl&&console.log("First load for cashier, showing notification for existing products"),a(o.length,n);else if(bo.isInitialized){const l=o.filter(u=>!bo.lastCheckedProducts.some(d=>d.product_id===u.product_id));Pl&&console.log("New products found:",l.length),l.length>0&&a(l.length,n)}bo.lastCheckedProducts=o,bo.isInitialized=!0}catch(s){console.error("Error checking for new products:",s)}},a=(s,o)=>{console.log("Showing notification for",s,"products");const l=o==="ar"?`${s} منتجات جديدة في قائمة الانتظار`:`${s} new products awaiting review`,u=o==="ar"?"اضغط للمراجعة":"Click to review",d=o==="ar"?"مراجعة":"Review";try{Ot.custom(f=>j.createElement(w1e,{visible:f.visible,message:l,subMessage:u,actionText:d,language:o,onAction:()=>{window.location.href="/upcoming-products",Ot.dismiss(f.id)},onIgnore:()=>{Ot.dismiss(f.id)}}),{duration:8e3,position:o==="ar"?"top-left":"top-right"}),Pl&&console.log("Toast shown successfully")}catch(f){console.error("Error showing toast:",f)}};console.log("Running initial product check"),await i(),console.log("Starting monitor interval"),mc=setInterval(i,3e4)},_1e=()=>{mc&&(console.log("Stopping product monitoring"),clearInterval(mc),mc=null),bo.isInitialized=!1,bo.lastCheckedProducts=[]},bA=["bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-purple-100 text-purple-800","bg-pink-100 text-pink-800","bg-yellow-100 text-yellow-800","bg-indigo-100 text-indigo-800","bg-red-100 text-red-800","bg-teal-100 text-teal-800"],S1e=t=>{let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);const r=Math.abs(e)%bA.length;return bA[r]};function N1e(){const{language:t}=_e(),{user:e}=qe(),{branches:r,setBranches:n}=tr(),{settings:i}=Ii(),{getCurrentBranch:a}=tr(),s=kbe[t],[o,l]=j.useState(""),[u,d]=j.useState("all"),[f,h]=j.useState(null),[m,g]=j.useState(""),[p,x]=j.useState([]),[v,b]=j.useState(!0),[y,_]=j.useState("all"),w=(e==null?void 0:e.role)==="cashier",N=a(),[S,E]=j.useState(null);j.useEffect(()=>{(async()=>{if(e!=null&&e.id){const L=await c2(e.id);E(L)}})()},[e==null?void 0:e.id]),j.useEffect(()=>{e!=null&&e.businessCode&&hR(e.businessCode,w?N==null?void 0:N.branch_name:y==="all"?void 0:y,t)},[e==null?void 0:e.businessCode,y,t]);const T=O=>{if(!i||!i.vendor_commission_enabled||!O.business_code_if_vendor||O.price<(i.minimum_commission_amount||0))return O.price;const L=O.price*i.default_commission_rate/100;return O.price+L},P=O=>{const L=T(O);return c.jsxs("span",{children:[L.toFixed(3)," ",s.currency]})};j.useEffect(()=>{w&&N&&_(N.branch_name)},[w,N]),j.useEffect(()=>{e!=null&&e.businessCode&&A()},[o,u,y]),j.useEffect(()=>{(async()=>{if(e!=null&&e.businessCode)try{const L=await Lh(e.businessCode);n(L)}catch(L){console.error("Error loading branches:",L)}})()},[e==null?void 0:e.businessCode,n]);const A=async()=>{if(!(e!=null&&e.businessCode)){console.error("No business code available");return}try{b(!0),console.log("Loading upcoming products for business:",e.businessCode);const O={businessCode:e.businessCode,branchName:w?N==null?void 0:N.branch_name:y==="all"?void 0:y,page:"upcoming_products",searchQuery:o||void 0,accepted:u==="approved"?!0:u==="rejected"||u==="pending"?!1:void 0};console.log("Fetching products with filters:",O);const L=await SS(O);x(L)}catch(O){console.error("Error loading products:",O)}finally{b(!1)}},k=async O=>{try{await vA(O.product_id,!0),await A(),h(null),g("")}catch(L){console.error("Error approving product:",L)}},F=async O=>{if(!m.trim()){alert(s.rejectionReasonRequired);return}try{await vA(O.product_id,!1,m),await A(),h(null),g("")}catch(L){console.error("Error rejecting product:",L)}},H=async O=>{if(confirm(s.confirmDelete))try{await NS(O),await A()}catch(L){console.error("Error deleting product:",L)}},M=p.filter(O=>!O.accepted&&!O.rejection_reason).length;return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:s.upcomingProducts}),M>0&&c.jsxs("div",{className:"flex items-center text-yellow-600",children:[c.jsx(_n,{className:"w-5 h-5 ml-2"}),c.jsx("span",{children:s.pendingReviewCount.replace("{count}",M.toString())})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:o,onChange:O=>l(O.target.value),placeholder:s.searchProducts,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),!w&&c.jsx(Nbe,{branches:r,selectedBranch:y,onBranchChange:_}),c.jsxs("select",{value:u,onChange:O=>d(O.target.value),className:"border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"all",children:s.allStatuses}),c.jsx("option",{value:"pending",children:s.pending}),c.jsx("option",{value:"approved",children:s.approved}),c.jsx("option",{value:"rejected",children:s.rejected})]})]})}),c.jsx("div",{className:"overflow-x-auto",children:v?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:s.loading})}):p.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:s.noProducts})}):c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.product}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.vendor}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.category}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.expiryDate}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.quantity}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.price}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.submittedAt}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.status}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:t==="ar"?"الفرع":"Branch"}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:s.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(O=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:O.image_url?c.jsx("img",{src:O.image_url,alt:O.product_name,className:"h-10 w-10 rounded-full object-cover"}):c.jsx(Pa,{className:"h-6 w-6 text-gray-500"})})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.product_name}),c.jsx("div",{className:"text-sm text-gray-500",children:O.type==="food"?s.food:s.nonFood})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.jsx("span",{className:`${O.business_code_if_vendor?"px-2.5 py-0.5 rounded-full text-xs "+S1e(O.business_name_of_product||""):"text-gray-900"}`,children:O.business_name_of_product||"-"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-900",children:O.type==="food"?s.food:s.nonFood})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.type==="food"&&O.expiry_date?c.jsxs("div",{className:`text-sm ${new Date(O.expiry_date)<new Date?"text-red-600 font-medium":"text-gray-900"}`,children:[new Date(O.expiry_date).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"}),new Date(O.expiry_date)<new Date&&c.jsxs("div",{className:"flex items-center text-red-600 text-xs mt-1",children:[c.jsx(_n,{className:"w-4 h-4 ml-1"}),s.expired]})]}):c.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.quantity}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P(O)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(O.date_of_creation).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${O.accepted?"bg-green-100 text-green-800":O.rejection_reason?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:O.accepted?s.approved:O.rejection_reason?s.rejected:s.pending})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.branch_name||(t==="ar"?"الرئيسي":"Main")}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[!O.accepted&&!O.rejection_reason&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>h(O),className:"text-indigo-600 hover:text-indigo-900 ml-4",children:s.review}),c.jsx(sR,{product:O,className:"ml-2",userProfile:S})]}),O.rejection_reason&&c.jsx("button",{onClick:()=>H(O.product_id),className:"text-red-600 hover:text-red-900 ml-4",children:s.delete})]})]},O.product_id))})]})})]}),f&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:s.reviewProduct}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.product}),c.jsx("p",{className:"mt-1",children:f.product_name})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.vendor}),c.jsx("p",{className:"mt-1",children:f.business_name_of_product||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.quantity}),c.jsx("p",{className:"mt-1",children:f.quantity})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.price}),c.jsx("p",{className:"mt-1",children:P(f)})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.description}),c.jsx("p",{className:"mt-1 text-sm text-gray-600 bg-gray-50 p-3 rounded-md min-h-[4rem]",children:f.description||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s.reviewNotes}),c.jsx("textarea",{value:m,onChange:O=>g(O.target.value),rows:3,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>{h(null),g("")},className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:s.cancel}),c.jsx("button",{onClick:()=>F(f),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:s.reject}),c.jsx("button",{onClick:()=>k(f),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:s.approve})]})]})]})})]})}const j1e={ar:{loading:"جاري التحميل...",error:"حدث خطأ",success:"تم بنجاح",save:"حفظ",cancel:"إلغاء",edit:"تعديل",delete:"حذف",add:"إضافة",search:"بحث",filter:"تصفية",noData:"لا توجد بيانات",actions:"إجراءات",status:"الحالة",date:"التاريخ",name:"الاسم",phone:"الهاتف",email:"البريد الإلكتروني",address:"العنوان",description:"الوصف",price:"السعر",quantity:"الكمية",total:"المجموع",currency:"ر.ع",invalidImageType:"نوع الملف غير صالح. يرجى اختيار صورة.",imageTooLarge:"حجم الصورة كبير جداً. الحد الأقصى هو 5 ميجابايت.",imageUploadFailed:"فشل رفع الصورة. يرجى المحاولة مرة أخرى."},en:{loading:"Loading...",error:"Error occurred",success:"Success",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add",search:"Search",filter:"Filter",noData:"No data available",actions:"Actions",status:"Status",date:"Date",name:"Name",phone:"Phone",email:"Email",address:"Address",description:"Description",price:"Price",quantity:"Quantity",total:"Total",currency:"OMR",invalidImageType:"Invalid file type. Please select an image.",imageTooLarge:"Image is too large. Maximum size is 5MB.",imageUploadFailed:"Failed to upload image. Please try again."}},E1e="245f27a93a29e9ceb49f878bb043d8cf",T1e="https://api.imgbb.com/1/upload";async function P1e(t,e){const r=j1e[e];if(!t.type.startsWith("image/"))throw new Error(r.invalidImageType);if(t.size>5*1024*1024)throw new Error(r.imageTooLarge);try{const n=new FormData;n.append("image",t);const i=await fetch(`${T1e}?key=${E1e}`,{method:"POST",body:n});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(!a.success)throw new Error("Upload failed");return a.data.display_url}catch(n){throw console.error("Image upload failed:",n),new Error(r.imageUploadFailed)}}function jS(){const{language:t}=_e(),[e,r]=j.useState(!1),[n,i]=j.useState(null);return{upload:async s=>{r(!0),i(null);try{return await P1e(s,t)}catch(o){return i(o instanceof Error?o.message:"Upload failed"),null}finally{r(!1)}},isUploading:e,error:n}}function k1e({onSubmit:t,initialData:e}){const{language:r}=_e(),{user:n}=qe(),{branches:i}=tr(),a=dl[r],[s,o]=X.useState(null),{generateProductBarcode:l}=_S(),{upload:u,isUploading:d}=jS(),f=M=>{if(!M)return"";try{const O=new Date(M);if(isNaN(O.getTime()))return"";const L=O.getFullYear(),R=String(O.getMonth()+1).padStart(2,"0"),z=String(O.getDate()).padStart(2,"0");return`${L}-${R}-${z}`}catch(O){return console.error("Error formatting date:",O),""}},[h,m]=X.useState((e==null?void 0:e.type)||"non-food"),[g,p]=X.useState(f(e==null?void 0:e.expiry_date)),[x,v]=X.useState(f(e==null?void 0:e.production_date)),[b,y]=X.useState((e==null?void 0:e.image_url)||null),[_,w]=X.useState((e==null?void 0:e.image_url)||null),[N,S]=X.useState((e==null?void 0:e.barcode)||""),[E,T]=j.useState((e==null?void 0:e.branch_name)||s||""),P=X.useRef(null);j.useEffect(()=>{(async()=>{if(n!=null&&n.id&&!e)try{const O=await G3(n.id);o(O),O&&T(O)}catch(O){console.error("Error loading main branch:",O)}})()},[n==null?void 0:n.id,e]);const A=async M=>{var L;const O=(L=M.target.files)==null?void 0:L[0];if(O){const R=URL.createObjectURL(O);w(R);const z=await u(O);z&&y(z)}},k=async()=>{var z;if(!P.current)return;const M=new FormData(P.current),O=M.get("product_name");if(!O)return;const L=Math.random().toString(36).substring(7),R=Math.random().toString(36).substring(7);try{const J=await l({productId:((z=e==null?void 0:e.product_id)==null?void 0:z.toString())||L,vendorId:(e==null?void 0:e.vendorId)||R,name:O,price:parseFloat(M.get("price"))||0});S(J)}catch(J){console.error("Failed to generate barcode:",J)}},F=M=>{M.target.value?k():S("")},H=M=>{M.preventDefault();const O=new FormData(M.target),L=O.get("product_name"),R=parseFloat(O.get("price")),z=parseInt(O.get("quantity"),10),J={product_name:L,type:h,production_date:x||null,expiry_date:g||null,branch_name:E,price:R,quantity:z,barcode:N,description:O.get("description"),image_url:b||void 0,trackable:h==="food",business_code_of_owner:(n==null?void 0:n.businessCode)||"",current_page:"products",accepted:!0};t(J)};return c.jsxs("form",{ref:P,onSubmit:H,className:"space-y-8",dir:r==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsxs("label",{className:"block text-base font-semibold text-gray-900 mb-2",children:[a.productImage," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"flex items-center space-x-4 space-x-reverse",children:c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors duration-200",children:_?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:_,alt:"Product preview",className:"h-48 w-48 object-cover rounded-lg shadow-sm"}),c.jsx("button",{type:"button",onClick:()=>{w(null),y("")},className:"absolute top-2 right-2 bg-red-100 text-red-600 rounded-full p-1.5 hover:bg-red-200 shadow-sm transition-colors duration-200",children:"×"})]}):c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx(n2,{className:"mx-auto h-12 w-12 text-gray-400 animate-pulse"}),c.jsx("div",{className:"flex text-sm text-gray-600",children:c.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500",children:[c.jsx("span",{children:a.chooseImage}),c.jsx("input",{type:"file",accept:"image/*",required:!(e!=null&&e.image_url),onChange:A,className:"sr-only"})]})}),c.jsx("p",{className:"text-xs text-gray-500",children:a.uploadInstructions})]})})})})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsxs("label",{className:"block text-base font-semibold text-gray-900",children:[a.branch," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:E,onChange:M=>T(M.target.value),required:!0,className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base",dir:r==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"",children:a.selectBranch}),i.filter(M=>M.is_active).map(M=>c.jsx("option",{value:M.branch_name,children:M.branch_name},M.branch_id))]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-base font-semibold text-gray-900",children:[a.productType," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:h,onChange:M=>m(M.target.value),className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base",children:[c.jsx("option",{value:"food",children:a.food}),c.jsx("option",{value:"non-food",children:a.nonFood})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-base font-semibold text-gray-900",children:[a.productName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"product_name",defaultValue:e==null?void 0:e.product_name,onChange:F,required:!0,className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base",dir:r==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a.barcode}),c.jsx("div",{className:"mt-1 flex items-center space-x-2 space-x-reverse",children:c.jsxs("div",{className:"relative flex-1",children:[c.jsx(V7,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:N,readOnly:!0,className:"block w-full pr-10 rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",dir:"ltr"})]})}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a.barcodeGeneratedAutomatically})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-base font-semibold text-gray-900",children:[a.price," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",name:"price",defaultValue:e==null?void 0:e.price,step:"0.01",required:!0,className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-base font-semibold text-gray-900",children:[a.quantity," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",name:"quantity",defaultValue:e==null?void 0:e.quantity,required:!0,className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base"})]}),h==="food"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-base font-semibold text-gray-900",children:[a.productionDate," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",value:x||"",onChange:M=>v(M.target.value),required:h==="food",className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-base font-semibold text-gray-900",children:[a.expiryDate," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",value:g||"",onChange:M=>p(M.target.value),required:h==="food",className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base"})]})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsxs("label",{className:"block text-base font-semibold text-gray-900",children:[a.description,c.jsxs("span",{className:"text-gray-500 text-xs mr-1",children:["(",a.optional,")"]})]}),c.jsx("textarea",{name:"description",defaultValue:e==null?void 0:e.description,rows:3,className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base",dir:r==="ar"?"rtl":"ltr"})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",className:"px-6 py-3 bg-indigo-600 text-white text-lg font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 shadow-sm transition-colors duration-200",children:e?a.updateProduct:a.addNewProduct})})]})}function mR({branches:t,selectedBranch:e,onBranchChange:r,mainBranch:n,className:i=""}){const{language:a}=_e(),s=dl[a],o=l=>{console.log("Branch selection changed to:",l),r(l)};return c.jsxs("div",{className:`flex items-center space-x-2 space-x-reverse ${i}`,children:[c.jsx(Yt,{className:"w-5 h-5 text-gray-400"}),c.jsxs("select",{value:e,onChange:l=>o(l.target.value),className:"border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:a==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"all",children:s.allBranches}),t.filter(l=>l.is_active).map(l=>c.jsx("option",{value:l.branch_name,children:l.branch_name},l.branch_id))]})]})}const wA=["bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-purple-100 text-purple-800","bg-pink-100 text-pink-800","bg-yellow-100 text-yellow-800","bg-indigo-100 text-indigo-800","bg-red-100 text-red-800","bg-teal-100 text-teal-800"],A1e=t=>{let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);const r=Math.abs(e)%wA.length;return wA[r]};function O1e(){const{language:t}=_e(),{user:e}=qe(),{branches:r,setBranches:n}=tr(),{settings:i}=Ii();tr();const a=dl[t],[s,o]=j.useState(!1),[l,u]=j.useState(null),[d,f]=j.useState(""),[h,m]=j.useState("all"),[g,p]=j.useState("all"),[x,v]=j.useState(null),[b,y]=j.useState(!0),[_,w]=j.useState([]),[N,S]=j.useState(!0),[E,T]=j.useState(null),[P,A]=j.useState("product_name"),[k,F]=j.useState("asc"),[H,M]=j.useState(!1),[O,L]=j.useState(null),[R,z]=j.useState(!1),[J]=j.useState(10);j.useEffect(()=>{(async()=>{if(e!=null&&e.id){const Z=await c2(e.id);L(Z)}})()},[e==null?void 0:e.id]);const W=te=>{P===te?F(Z=>Z==="asc"?"desc":"asc"):(A(te),F("asc"))},C=X.useMemo(()=>[..._].sort((te,Z)=>{let ke=0;switch(P){case"product_name":ke=te.product_name.localeCompare(Z.product_name);break;case"business_name_of_product":ke=(te.business_name_of_product||"").localeCompare(Z.business_name_of_product||"");break;case"type":ke=te.type.localeCompare(Z.type);break;case"price":ke=te.price-Z.price;break;case"quantity":ke=te.quantity-Z.quantity;break;case"expiry_date":!te.expiry_date&&!Z.expiry_date?ke=0:te.expiry_date?Z.expiry_date?ke=new Date(te.expiry_date).getTime()-new Date(Z.expiry_date).getTime():ke=-1:ke=1;break;case"branch_name":ke=(te.branch_name||"").localeCompare(Z.branch_name||"");break}return k==="asc"?ke:-ke}),[_,P,k]),G=({field:te,children:Z})=>c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>W(te),title:P===te&&k==="asc"?a.sortDesc:a.sortAsc,children:c.jsxs("div",{className:"flex items-center justify-end space-x-1 space-x-reverse",children:[c.jsx("span",{children:Z}),c.jsx(l3,{className:`w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity ${P===te?"opacity-100 text-indigo-500":"text-gray-400"}`})]})});j.useEffect(()=>{H&&e!=null&&e.businessCode&&Y()},[d,g,h,H,e==null?void 0:e.businessCode]),j.useEffect(()=>{(async()=>{if(e!=null&&e.businessCode)try{S(!0);const Z=await Lh(e.businessCode);n(Z);const ke=await G3(e.id);ke&&(console.log("Setting main branch:",ke),v(ke),b&&(e==null?void 0:e.role)==="cashier"&&(m(ke),y(!1))),M(!0)}catch(Z){console.error("Error loading branches:",Z)}finally{S(!1)}})()},[e==null?void 0:e.businessCode,n]);const Y=async()=>{if(!(e!=null&&e.businessCode)){console.error("No business code available");return}try{S(!0),console.log("Loading products for business:",e.businessCode);const te=await SS({businessCode:e.businessCode,branchName:h==="all"?void 0:h,page:"products",type:g==="all"?void 0:g,accepted:!0});console.log(`Loaded ${te.length} products`),w(te)}catch(te){console.error("Error loading products:",te)}finally{S(!1)}},I=async te=>{try{l?await lR(l.product_id,te):await oR({...te,business_code_of_owner:(e==null?void 0:e.businessCode)||"",current_page:"products",accepted:!0}),await Y()}catch(Z){console.error("Error saving product:",Z)}o(!1),u(null)},Q=async te=>{try{await NS(te.product_id)&&await Y()}catch(Z){console.error("Error deleting product:",Z)}T(null)},fe=te=>{console.log("Branch change requested:",te),y(!1),m(te)},me=_.filter(te=>te.type==="food"&&te.expiry_date&&new Date(te.expiry_date)<new Date),ee=te=>{if(!i||!i.vendor_commission_enabled||!te.business_code_if_vendor||te.price<(i.minimum_commission_amount||0))return te.price;const Z=te.price*i.default_commission_rate/100;return te.price+Z},le=te=>{const Z=ee(te);return c.jsxs("span",{children:[Z.toFixed(3)," ",a.currency]})};return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:a.products}),c.jsxs("button",{onClick:()=>{u(null),o(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center",children:[c.jsx($i,{className:"w-5 h-5 ml-2"}),a.addProduct]})]}),me.length>0&&c.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(_n,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-red-700",children:a.expiredProductsWarning.replace("{count}",me.length.toString())})})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow",children:c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:d,onChange:te=>f(te.target.value),placeholder:a.searchProduct,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsx(mR,{branches:r,selectedBranch:h,onBranchChange:fe,mainBranch:x}),c.jsxs("select",{value:g,onChange:te=>{p(te.target.value)},className:"border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"all",children:a.allProducts}),c.jsx("option",{value:"food",children:a.foodProducts}),c.jsx("option",{value:"non-food",children:a.nonFoodProducts})]}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:"lowQuantity",checked:R,onChange:te=>z(te.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),c.jsx("label",{htmlFor:"lowQuantity",className:"text-sm text-gray-700",children:t==="ar"?"المنتجات منخفضة الكمية":"Low Quantity Products"})]})})]})})}),s&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:l?a.updateProduct:a.addNewProduct}),c.jsx(k1e,{onSubmit:I,initialData:l||void 0}),c.jsx("button",{onClick:()=>{o(!1),u(null)},className:"mt-4 px-4 py-2 text-gray-600 hover:text-gray-800",children:a.cancel})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:N?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:a.loading})}):_.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:a.noProducts})}):c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx(G,{field:"product_name",children:a.productName}),c.jsx(G,{field:"business_name_of_product",children:a.vendor}),c.jsx(G,{field:"type",children:a.productType}),c.jsx(G,{field:"price",children:a.price}),c.jsx(G,{field:"quantity",children:a.quantity}),c.jsx(G,{field:"expiry_date",children:a.expiryDate}),c.jsx(G,{field:"branch_name",children:t==="ar"?"الفرع":"Branch"}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:a.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.filter(te=>R?te.quantity<=J:!0).map(te=>{const Z=te.type==="food"&&te.expiry_date&&new Date(te.expiry_date)<new Date;return c.jsxs("tr",{className:Z?"bg-red-50":void 0,children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:te.image_url?c.jsx("img",{src:te.image_url,alt:te.product_name,className:"h-10 w-10 rounded-full object-cover"}):c.jsx(Pa,{className:"h-6 w-6 text-gray-500"})})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:te.product_name}),te.business_code_if_vendor&&(i==null?void 0:i.vendor_commission_enabled)&&c.jsxs("div",{className:"text-xs text-gray-500",children:[a.originalPrice,": ",te.price.toFixed(3)," ",a.currency]})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-900",children:c.jsx("span",{className:`inline-flex items-center text-sm font-medium ${te.business_code_if_vendor?"px-2.5 py-0.5 rounded-full text-xs "+A1e(te.business_name_of_product||""):"text-gray-900"}`,children:te.business_name_of_product||a.unknownBusiness})})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${te.type==="food"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:te.type==="food"?a.food:a.nonFood})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:le(te)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.jsx("span",{className:`${te.quantity<=J?"text-red-600 font-medium":""}`,children:te.quantity})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:te.type==="food"&&te.expiry_date?c.jsxs("div",{className:`text-sm ${Z?"text-red-600":"text-gray-900"}`,children:[new Date(te.expiry_date).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"}),Z&&c.jsxs("div",{className:"flex items-center text-red-600 text-xs mt-1",children:[c.jsx(_n,{className:"w-4 h-4 ml-1"}),a.expired]})]}):c.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:te.branch_name||(t==="ar"?"الرئيسي":"Main")}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[c.jsx("button",{onClick:()=>{u(te),o(!0)},className:"text-indigo-600 hover:text-indigo-900 ml-4",children:a.edit}),c.jsx("button",{onClick:()=>T(te),className:"text-red-600 hover:text-red-900 ml-4",children:a.delete}),c.jsx(sR,{product:te,className:"ml-2",userProfile:O})]})]},te.product_id)})})]})})}),E&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:a.confirmDelete}),c.jsx("p",{className:"text-gray-600 mb-6",children:a.deleteConfirmationMessage.replace("{name}",E.product_name)}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:a.cancel}),c.jsx("button",{onClick:()=>Q(E),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:a.confirmDelete})]})]})})]})}const C1e={returnProducts:{en:"Return Products",ar:"إرجاع المنتجات"},selectBranch:{en:"Select Branch",ar:"اختر الفرع"},enterReceiptNumber:{en:"Enter Receipt Number",ar:"أدخل رقم الإيصال"},search:{en:"Search",ar:"بحث"},searching:{en:"Searching...",ar:"جاري البحث..."},returnDetails:{en:"Return Details",ar:"تفاصيل الإرجاع"},originalReceipt:{en:"Original Receipt",ar:"الإيصال الأصلي"},receiptId:{en:"Receipt ID",ar:"رقم الإيصال"},date:{en:"Date",ar:"التاريخ"},totalAmount:{en:"Total Amount",ar:"المبلغ الإجمالي"},originalCashier:{en:"Original Cashier",ar:"الكاشير الأصلي"},branch:{en:"Branch",ar:"الفرع"},customerInformation:{en:"Customer Information",ar:"معلومات العميل"},customerName:{en:"Customer Name",ar:"اسم العميل"},customerPhone:{en:"Customer Phone",ar:"رقم هاتف العميل"},enterCustomerName:{en:"Enter customer name",ar:"أدخل اسم العميل"},enterCustomerPhone:{en:"Enter customer phone",ar:"أدخل رقم هاتف العميل"},returnInformation:{en:"Return Information",ar:"معلومات الإرجاع"},returnReason:{en:"Return Reason",ar:"سبب الإرجاع"},enterReturnReason:{en:"Enter reason for return",ar:"أدخل سبب الإرجاع"},paymentMethod:{en:"Payment Method",ar:"طريقة الدفع"},selectPaymentMethod:{en:"Select payment method",ar:"اختر طريقة الدفع"},cash:{en:"Cash",ar:"نقداً"},card:{en:"Card",ar:"بطاقة"},online:{en:"Online",ar:"تحويل بنكي"},selectedProducts:{en:"Selected Products",ar:"المنتجات المختارة"},noProductsSelected:{en:"No products selected",ar:"لم يتم اختيار منتجات"},price:{en:"Price: ",ar:"السعر: "},alreadyReturned:{en:"Already Returned",ar:"تم إرجاعه مسبقاً"},processing:{en:"Processing...",ar:"جاري المعالجة..."},processReturn:{en:"Process Return",ar:"معالجة الإرجاع"},selectBranchFirst:{en:"Please select a branch first",ar:"الرجاء اختيار الفرع أولاً"},quantity:{en:"Quantity",ar:"الكمية"},total:{en:"Total",ar:"المجموع"}};function M1e(){const{language:t}=_e(),{userProfile:e,fetchUserProfile:r}=f2(),{user:n}=qe(),{branches:i,setBranches:a}=tr(),[s,o]=j.useState(""),[l,u]=j.useState(""),[d,f]=j.useState(null),[h,m]=j.useState([]),[g,p]=j.useState([]),[x,v]=j.useState(""),[b,y]=j.useState(""),[_,w]=j.useState(""),[N,S]=j.useState(""),[E,T]=j.useState(!1),[P,A]=j.useState(null),k=j.useMemo(()=>Object.entries(C1e).reduce((R,[z,J])=>(R[z]=J[t],R),{}),[t]);j.useEffect(()=>{n!=null&&n.businessCode&&Lh(n.businessCode).then(R=>{a(R)}).catch(R=>{console.error("Error fetching branches:",R),Ot.error(k.errorFetchingBranches)})},[n==null?void 0:n.businessCode]),j.useEffect(()=>{d&&(y(d.customer_name||""),w(d.customer_phone||""),S(d.payment_method||"cash"))},[d]),j.useEffect(()=>{n!=null&&n.id&&!e&&r()},[n==null?void 0:n.id,e,r]);const F=[{value:"cash",label:k.cash},{value:"card",label:k.card},{value:"online",label:k.online},{value:"bank_transfer",label:k.bankTransfer}],H=async()=>{T(!0),A(null);try{if(!s.trim()){Ot.error(k.enterReceiptNumber);return}if(!l){Ot.error(k.selectBranchFirst);return}if(!(n!=null&&n.businessCode)){Ot.error(k.userInfoError);return}const{data:R,error:z}=await oe.from("receipts").select("*").eq("receipt_id",s).eq("business_code",n.businessCode).eq("branch_name",l).single();if(z||!R)throw console.error("Receipt error:",z),new Error(k.receiptNotFound);f(R);const{data:J,error:W}=await oe.from("sold_products").select("*").eq("receipt_id",s).eq("business_code",n.businessCode).eq("business_bracnh_name",l);if(W)throw console.error("Products error:",W),new Error(k.errorFetchingProducts);const{data:C,error:G}=await oe.from("returned_products").select("sold_product_id, quantity").eq("original_receipt_id",s);G&&console.error("Error fetching returns:",G);const Y=(C||[]).reduce((Q,fe)=>(Q[fe.sold_product_id]=(Q[fe.sold_product_id]||0)+fe.quantity,Q),{}),I=J.map(Q=>({...Q,returned_quantity:Y[Q.sold_product_id]||0,available_quantity:Q.quantity-(Y[Q.sold_product_id]||0)}));m(I),p([]),v("")}catch(R){console.error("Error searching:",R),Ot.error(R.message||k.errorFetchingProducts),f(null),m([]),p([])}finally{T(!1)}},M=async()=>{if(!(!d||g.length===0||!x||!N))try{T(!0),A(null);const R=g.reduce((Y,I)=>{const Q=h.find(fe=>fe.sold_product_id===I);return Q?Y+Q.quantity*Q.unit_price_original:Y},0),z=new Date().toISOString(),J=[`Return for receipt: ${d.receipt_id}`,`Original transaction date: ${new Date(d.receipt_date).toLocaleDateString()}`,`Original cashier: ${d.cashier_name}`,`Return processed by: ${(e==null?void 0:e.full_name)||"Unknown"}`,`Return reason: ${x}`].join(`
`),{data:W,error:C}=await oe.from("receipts").insert([{receipt_id:`RET-${d.receipt_id}`,transaction_id:`TR-${Date.now()}`,business_code:d.business_code,branch_name:d.branch_name,cashier_name:(e==null?void 0:e.full_name)||"Unknown",customer_name:b||d.customer_name,customer_phone:_||d.customer_phone,total_amount:-R,payment_method:N,is_return:!0,return_reason:x,receipt_note:J,receipt_date:z,created_at:z,vendor_commission_enabled:d.vendor_commission_enabled,tax_amount:0,discount:0,commission_amount_from_vendors:0,long_text_receipt:`Return Receipt

Original Receipt: ${d.receipt_id}
Return Date: ${new Date().toLocaleDateString()}
Processed By: ${(e==null?void 0:e.full_name)||"Unknown"}
Reason: ${x}

Returned Items:
${g.map(Y=>{const I=h.find(Q=>Q.sold_product_id===Y);return`- ${I==null?void 0:I.product_name}: ${I==null?void 0:I.unit_price_original} x ${I==null?void 0:I.quantity}`}).join(`
`)}`}]).select().single();if(C)throw C;const{error:G}=await oe.from("sold_products").insert(g.map(Y=>{const I=h.find(Q=>Q.sold_product_id===Y);if(!I)throw new Error("Product not found");return{sold_product_id:`RET-${Y}-${Date.now()}`,receipt_id:W.receipt_id,product_name:I.product_name,unit_price_original:I.unit_price_original,unit_price_by_bussniess:I.unit_price_by_bussniess,quantity:-I.quantity,business_code:d.business_code,business_bracnh_name:d.branch_name,total_price:-(I.quantity*I.unit_price_original),vendor_code_if_by_vendor:I.vendor_code_if_by_vendor,comission_for_bussnies_from_vendor:I.comission_for_bussnies_from_vendor,created_at:z}}));if(G)throw G;if(N==="cash"&&(n!=null&&n.businessCode))try{await fbe(n.businessCode,d.branch_name,(e==null?void 0:e.full_name)||"Unknown",R)}catch(Y){console.error("Error updating cash tracking:",Y),Ot.error(k.errorUpdatingCash)}Ot.success(k.returnProcessedSuccessfully),f(null),o(""),m([]),p([]),v(""),y(""),w(""),S("")}catch(R){console.error("Error processing return:",R),A(k.errorProcessingReturn)}finally{T(!1)}},O=R=>{u(R),f(null),m([]),p([]),v(""),o("")},L=R=>{const z=g.some(J=>J===R.sold_product_id);p(z?g.filter(J=>J!==R.sold_product_id):[...g,R.sold_product_id])};return c.jsxs("div",{className:"p-6",children:[c.jsx("h1",{className:"text-2xl font-bold mb-6",children:k.returnProducts}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:k.selectBranch}),c.jsx(mR,{branches:i,selectedBranch:l,onBranchChange:O,className:"w-full"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex gap-4 mb-4",children:[c.jsx("input",{type:"text",value:s,onChange:R=>o(R.target.value),placeholder:k.enterReceiptNumber,className:"flex-1 p-2 border rounded focus:ring-2 focus:ring-blue-500",disabled:!l}),c.jsx("button",{onClick:H,disabled:E||!s||!l,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300",children:E?k.searching:k.search})]}),!l&&c.jsx("p",{className:"text-sm text-amber-600",children:k.selectBranchFirst})]}),P&&c.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6 flex items-center gap-2",children:[c.jsx(il,{className:"w-5 h-5"}),P]}),d&&c.jsxs("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:k.returnDetails}),c.jsxs("div",{className:"bg-white p-4 rounded border mb-4",children:[c.jsx("h3",{className:"text-lg font-medium mb-2",children:k.originalReceipt}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("span",{className:"font-medium",children:[k.receiptId,": "]}),c.jsx("span",{children:d.receipt_id})]}),c.jsxs("div",{children:[c.jsxs("span",{className:"font-medium",children:[k.date,": "]}),c.jsx("span",{children:new Date(d.receipt_date).toLocaleDateString()})]}),c.jsxs("div",{children:[c.jsxs("span",{className:"font-medium",children:[k.totalAmount,": "]}),c.jsx("span",{children:d.total_amount})]}),c.jsxs("div",{children:[c.jsxs("span",{className:"font-medium",children:[k.originalCashier,": "]}),c.jsx("span",{children:d.cashier_name})]}),c.jsxs("div",{children:[c.jsxs("span",{className:"font-medium",children:[k.branch,": "]}),c.jsx("span",{children:d.branch_name})]})]})]}),h.length>0&&c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsxs("div",{className:"bg-white p-4 rounded border",children:[c.jsx("h3",{className:"text-lg font-medium mb-3",children:k.products}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:k.productName}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:k.quantity}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:k.price}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:k.total}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:k.status})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(R=>{const z=g.includes(R.sold_product_id),J=R.returned_quantity>0;return c.jsxs("tr",{onClick:()=>!J&&L(R),className:`${J?"bg-gray-100 cursor-not-allowed":"cursor-pointer hover:bg-gray-50"} ${z?"bg-blue-50":""}`,children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.product_name})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:R.quantity}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:R.unit_price_original}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 font-medium",children:(R.quantity*R.unit_price_original).toFixed(2)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:J?c.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:k.alreadyReturned}):z?c.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:k.selected}):null})]},R.sold_product_id)})})]})})]}),g.length>0&&c.jsxs("div",{className:"bg-white p-4 rounded border",children:[c.jsx("h3",{className:"text-lg font-medium mb-3",children:k.selectedProducts}),c.jsx("div",{className:"space-y-2",children:g.map(R=>{const z=h.find(J=>J.sold_product_id===R);return z?c.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:z.product_name}),c.jsxs("div",{className:"text-sm text-gray-500",children:[k.quantity,": ",z.quantity," × ",z.unit_price_original]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"font-medium",children:[k.total,": ",(z.quantity*z.unit_price_original).toFixed(2)]})})]},R):null})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-white p-4 rounded border",children:[c.jsx("h3",{className:"text-lg font-medium mb-3",children:k.customerInformation}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:k.customerName}),c.jsx("input",{type:"text",value:b,onChange:R=>y(R.target.value),placeholder:k.enterCustomerName,className:"p-2 border rounded w-full focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:k.customerPhone}),c.jsx("input",{type:"text",value:_,onChange:R=>w(R.target.value),placeholder:k.enterCustomerPhone,className:"p-2 border rounded w-full focus:ring-2 focus:ring-blue-500"})]})]})]}),c.jsxs("div",{className:"bg-white p-4 rounded border",children:[c.jsx("h3",{className:"text-lg font-medium mb-3",children:k.returnInformation}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[k.returnReason," *"]}),c.jsx("textarea",{value:x,onChange:R=>v(R.target.value),placeholder:k.enterReturnReason,className:"p-2 border rounded w-full h-24 focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[k.paymentMethod," *"]}),c.jsxs("select",{value:N,onChange:R=>S(R.target.value),className:"p-2 border rounded w-full focus:ring-2 focus:ring-blue-500",required:!0,children:[c.jsx("option",{value:"",children:k.selectPaymentMethod}),F.map(R=>c.jsx("option",{value:R.value,children:k[R.value]},R.value))]})]})]})]})]}),c.jsxs("div",{className:"mt-6",children:[c.jsx("button",{onClick:M,disabled:E||g.length===0||!x||!N,className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:E?k.processing:k.processReturn}),P&&c.jsx("p",{className:"mt-2 text-red-500 text-sm",children:P})]})]})]})}const D1e={ar:{customers:"العملاء",addCustomer:"إضافة عميل",searchCustomer:"ابحث عن عميل...",noSearchResults:"لا توجد نتائج للبحث",noCustomers:"لا يوجد عملاء",loading:"جاري التحميل...",filter:"تصفية",customer:"العميل",phoneNumber:"رقم الهاتف",orders:"طلبات",lastOrder:"آخر طلب",edit:"تعديل",addNewCustomer:"إضافة عميل جديد",editCustomer:"تعديل بيانات العميل",customerName:"اسم العميل",customerPhone:"رقم هاتف العميل",save:"حفظ",cancel:"إلغاء",required:"مطلوب",optional:"اختياري",deleteCustomer:"حذف العميل",confirmDelete:"هل أنت متأكد من حذف هذا العميل؟",delete:"حذف",never:"لم يطلب بعد",errorLoadingCustomers:"حدث خطأ أثناء تحميل العملاء",errorSavingCustomer:"حدث خطأ أثناء حفظ العميل",errorDeletingCustomer:"حدث خطأ أثناء حذف العميل"},en:{customers:"Customers",addCustomer:"Add Customer",searchCustomer:"Search for a customer...",noSearchResults:"No search results found",noCustomers:"No customers found",loading:"Loading...",filter:"Filter",customer:"Customer",phoneNumber:"Phone Number",orders:"Orders",lastOrder:"Last Order",edit:"Edit",addNewCustomer:"Add New Customer",editCustomer:"Edit Customer",customerName:"Customer Name",customerPhone:"Customer Phone",save:"Save",cancel:"Cancel",required:"Required",optional:"Optional",deleteCustomer:"Delete Customer",confirmDelete:"Are you sure you want to delete this customer?",delete:"Delete",never:"Never ordered",errorLoadingCustomers:"Error loading customers",errorSavingCustomer:"Error saving customer",errorDeletingCustomer:"Error deleting customer"}};function $1e(){const{language:t}=_e(),{user:e}=qe(),r=D1e[t],[n,i]=j.useState(""),[a,s]=j.useState([]),[o,l]=j.useState(!0),[u,d]=j.useState(null),[f,h]=j.useState(!1),[m,g]=j.useState(null),[p,x]=j.useState(null);j.useEffect(()=>{e!=null&&e.businessCode&&v()},[e==null?void 0:e.businessCode]);const v=async()=>{try{l(!0);const w=await Ove(e.businessCode);s(w)}catch(w){console.error("Error loading customers:",w),d(r.errorLoadingCustomers)}finally{l(!1)}},b=async w=>{w.preventDefault(),d(null);const N=new FormData(w.currentTarget),S={customer_name:N.get("customer_name"),phone_number:N.get("phone_number")};try{m?await Mve(m.customer_id,S):await eR({...S,number_of_orders:0,business_code:e.businessCode}),await v(),h(!1),g(null)}catch(E){console.error("Error saving customer:",E),d(r.errorSavingCustomer)}},y=async w=>{try{await Dve(w),await v(),x(null)}catch(N){console.error("Error deleting customer:",N),d(r.errorDeletingCustomer)}},_=a.filter(w=>w.customer_name.toLowerCase().includes(n.toLowerCase())||w.phone_number.includes(n));return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:r.customers}),c.jsxs("button",{onClick:()=>{g(null),h(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center",children:[c.jsx($i,{className:"w-5 h-5 ml-2"}),r.addCustomer]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:n,onChange:w=>i(w.target.value),placeholder:r.searchCustomer,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[c.jsx(cx,{className:"w-5 h-5 ml-2"}),r.filter]})]})}),u&&c.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:c.jsx("p",{className:"text-sm text-red-600",children:u})}),c.jsx("div",{className:"overflow-x-auto",children:o?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:r.loading})}):_.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:n?r.noSearchResults:r.noCustomers})}):c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.customer}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.phoneNumber}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.orders}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.lastOrder}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:r.edit})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(w=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"})}),c.jsx("div",{className:"mr-4",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.customer_name})})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.phone_number}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[w.number_of_orders," ",r.orders]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.last_order?new Date(w.last_order).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"}):r.never}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium",children:[c.jsx("button",{onClick:()=>{g(w),h(!0)},className:"text-indigo-600 hover:text-indigo-900 ml-4",children:r.edit}),c.jsx("button",{onClick:()=>x(w.customer_id),className:"text-red-600 hover:text-red-900",children:r.delete})]})]},w.customer_id))})]})})]}),f&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:m?r.editCustomer:r.addNewCustomer}),c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.customerName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"customer_name",defaultValue:m==null?void 0:m.customer_name,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.customerPhone," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"tel",name:"phone_number",defaultValue:m==null?void 0:m.phone_number,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:()=>{h(!1),g(null)},className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:r.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:r.save})]})]})]})}),p&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:r.deleteCustomer}),c.jsx("p",{className:"text-gray-600 mb-6",children:r.confirmDelete}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:r.cancel}),c.jsx("button",{onClick:()=>y(p),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:r.delete})]})]})})]})}const pR={ar:{cashDrawer:"درج النقود",currentBalance:"الرصيد الحالي",totalDeposits:"إجمالي الإيداعات",totalWithdrawals:"إجمالي السحوبات",transactionHistory:"سجل المعاملات",newTransaction:"معاملة جديدة",date:"التاريخ",type:"النوع",amount:"المبلغ",reason:"السبب",balance:"الرصيد",deposit:"إيداع",withdrawal:"سحب",transactionType:"نوع المعاملة",cancel:"إلغاء",confirm:"تأكيد",balanceOverTime:"تطور الرصيد",dailyTransactions:"المعاملات اليومية",currency:"ر.ع",transactionAdded:"تمت إضافة المعاملة بنجاح",loading:"جاري التحميل...",errorLoadingRecords:"حدث خطأ أثناء تحميل السجلات",errorProcessingTransaction:"حدث خطأ أثناء معالجة المعاملة",processing:"جاري المعالجة...",today:"اليوم",thisWeek:"هذا الأسبوع",thisMonth:"هذا الشهر",totalSales:"إجمالي المبيعات النقدية",totalReturns:"إجمالي المرتجعات",manualAdditions:"الإضافات اليدوية",manualRemovals:"السحوبات اليدوية",netCashFlow:"صافي التدفق النقدي",totalTransactions:"عدد المعاملات",cashier:"الكاشير",previousBalance:"الرصيد السابق",newBalance:"الرصيد الجديد",sale:"مبيعات",return:"مرتجعات"},en:{cashDrawer:"Cash Drawer",currentBalance:"Current Balance",totalDeposits:"Total Deposits",totalWithdrawals:"Total Withdrawals",transactionHistory:"Transaction History",newTransaction:"New Transaction",date:"Date",type:"Type",amount:"Amount",reason:"Reason",balance:"Balance",deposit:"Deposit",withdrawal:"Withdrawal",transactionType:"Transaction Type",cancel:"Cancel",confirm:"Confirm",balanceOverTime:"Balance Over Time",dailyTransactions:"Daily Transactions",currency:"OMR",transactionAdded:"Transaction added successfully",loading:"Loading...",errorLoadingRecords:"Error loading records",errorProcessingTransaction:"Error processing transaction",processing:"Processing...",today:"Today",thisWeek:"This Week",thisMonth:"This Month",totalSales:"Total Cash Sales",totalReturns:"Total Returns",manualAdditions:"Manual Additions",manualRemovals:"Manual Removals",netCashFlow:"Net Cash Flow",totalTransactions:"Total Transactions",cashier:"Cashier",previousBalance:"Previous Balance",newBalance:"New Balance",sale:"Sales",return:"Returns"}};function I1e({onTransaction:t}){const{language:e}=_e(),r=pR[e],[n,i]=j.useState(!1),[a,s]=j.useState("deposit"),[o,l]=j.useState(""),[u,d]=j.useState(""),[f,h]=j.useState(!1),[m,g]=j.useState(null),p=async x=>{if(x.preventDefault(),!(!o||!u))try{h(!0),g(null),await t(a,parseFloat(o),u),i(!1),l(""),d("")}catch(v){console.error("Error processing transaction:",v),g(r.errorProcessingTransaction)}finally{h(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>i(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:r.newTransaction}),n&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:r.newTransaction}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.transactionType}),c.jsxs("select",{value:a,onChange:x=>s(x.target.value),className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:e==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"deposit",children:r.deposit}),c.jsx("option",{value:"withdrawal",children:r.withdrawal})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.amount}),c.jsx("input",{type:"number",step:"0.001",min:"0",value:o,onChange:x=>l(x.target.value),required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.reason}),c.jsx("textarea",{value:u,onChange:x=>d(x.target.value),required:!0,rows:3,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:e==="ar"?"rtl":"ltr"})]}),m&&c.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-md text-sm",children:m}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900",disabled:f,children:r.cancel}),c.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:f?r.processing:r.confirm})]})]})]})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Zh(t){return t+.5|0}const Ss=(t,e,r)=>Math.max(Math.min(t,r),e);function Nd(t){return Ss(Zh(t*2.55),0,255)}function Is(t){return Ss(Zh(t*255),0,255)}function wa(t){return Ss(Zh(t/2.55)/100,0,1)}function _A(t){return Ss(Zh(t*100),0,100)}const Yn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},zw=[..."0123456789ABCDEF"],R1e=t=>zw[t&15],F1e=t=>zw[(t&240)>>4]+zw[t&15],Km=t=>(t&240)>>4===(t&15),L1e=t=>Km(t.r)&&Km(t.g)&&Km(t.b)&&Km(t.a);function B1e(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Yn[t[1]]*17,g:255&Yn[t[2]]*17,b:255&Yn[t[3]]*17,a:e===5?Yn[t[4]]*17:255}:(e===7||e===9)&&(r={r:Yn[t[1]]<<4|Yn[t[2]],g:Yn[t[3]]<<4|Yn[t[4]],b:Yn[t[5]]<<4|Yn[t[6]],a:e===9?Yn[t[7]]<<4|Yn[t[8]]:255})),r}const U1e=(t,e)=>t<255?e(t):"";function z1e(t){var e=L1e(t)?R1e:F1e;return t?"#"+e(t.r)+e(t.g)+e(t.b)+U1e(t.a,e):void 0}const W1e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gR(t,e,r){const n=e*Math.min(r,1-r),i=(a,s=(a+t/30)%12)=>r-n*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function V1e(t,e,r){const n=(i,a=(i+t/60)%6)=>r-r*e*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function H1e(t,e,r){const n=gR(t,1,.5);let i;for(e+r>1&&(i=1/(e+r),e*=i,r*=i),i=0;i<3;i++)n[i]*=1-e-r,n[i]+=e;return n}function q1e(t,e,r,n,i){return t===i?(e-r)/n+(e<r?6:0):e===i?(r-t)/n+2:(t-e)/n+4}function ES(t){const r=t.r/255,n=t.g/255,i=t.b/255,a=Math.max(r,n,i),s=Math.min(r,n,i),o=(a+s)/2;let l,u,d;return a!==s&&(d=a-s,u=o>.5?d/(2-a-s):d/(a+s),l=q1e(r,n,i,d,a),l=l*60+.5),[l|0,u||0,o]}function TS(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(Is)}function PS(t,e,r){return TS(gR,t,e,r)}function G1e(t,e,r){return TS(H1e,t,e,r)}function K1e(t,e,r){return TS(V1e,t,e,r)}function xR(t){return(t%360+360)%360}function Y1e(t){const e=W1e.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?Nd(+e[5]):Is(+e[5]));const i=xR(+e[2]),a=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?n=G1e(i,a,s):e[1]==="hsv"?n=K1e(i,a,s):n=PS(i,a,s),{r:n[0],g:n[1],b:n[2],a:r}}function X1e(t,e){var r=ES(t);r[0]=xR(r[0]+e),r=PS(r),t.r=r[0],t.g=r[1],t.b=r[2]}function Q1e(t){if(!t)return;const e=ES(t),r=e[0],n=_A(e[1]),i=_A(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${i}%, ${wa(t.a)})`:`hsl(${r}, ${n}%, ${i}%)`}const SA={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},NA={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function J1e(){const t={},e=Object.keys(NA),r=Object.keys(SA);let n,i,a,s,o;for(n=0;n<e.length;n++){for(s=o=e[n],i=0;i<r.length;i++)a=r[i],o=o.replace(a,SA[a]);a=parseInt(NA[s],16),t[o]=[a>>16&255,a>>8&255,a&255]}return t}let Ym;function Z1e(t){Ym||(Ym=J1e(),Ym.transparent=[0,0,0,0]);const e=Ym[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const ewe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function twe(t){const e=ewe.exec(t);let r=255,n,i,a;if(e){if(e[7]!==n){const s=+e[7];r=e[8]?Nd(s):Ss(s*255,0,255)}return n=+e[1],i=+e[3],a=+e[5],n=255&(e[2]?Nd(n):Ss(n,0,255)),i=255&(e[4]?Nd(i):Ss(i,0,255)),a=255&(e[6]?Nd(a):Ss(a,0,255)),{r:n,g:i,b:a,a:r}}}function rwe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${wa(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Iy=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,kl=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function nwe(t,e,r){const n=kl(wa(t.r)),i=kl(wa(t.g)),a=kl(wa(t.b));return{r:Is(Iy(n+r*(kl(wa(e.r))-n))),g:Is(Iy(i+r*(kl(wa(e.g))-i))),b:Is(Iy(a+r*(kl(wa(e.b))-a))),a:t.a+r*(e.a-t.a)}}function Xm(t,e,r){if(t){let n=ES(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=PS(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function vR(t,e){return t&&Object.assign(e||{},t)}function jA(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Is(t[3]))):(e=vR(t,{r:0,g:0,b:0,a:1}),e.a=Is(e.a)),e}function iwe(t){return t.charAt(0)==="r"?twe(t):Y1e(t)}class xh{constructor(e){if(e instanceof xh)return e;const r=typeof e;let n;r==="object"?n=jA(e):r==="string"&&(n=B1e(e)||Z1e(e)||iwe(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=vR(this._rgb);return e&&(e.a=wa(e.a)),e}set rgb(e){this._rgb=jA(e)}rgbString(){return this._valid?rwe(this._rgb):void 0}hexString(){return this._valid?z1e(this._rgb):void 0}hslString(){return this._valid?Q1e(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,i=e.rgb;let a;const s=r===a?.5:r,o=2*s-1,l=n.a-i.a,u=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;a=1-u,n.r=255&u*n.r+a*i.r+.5,n.g=255&u*n.g+a*i.g+.5,n.b=255&u*n.b+a*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=nwe(this._rgb,e._rgb,r)),this}clone(){return new xh(this.rgb)}alpha(e){return this._rgb.a=Is(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=Zh(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Xm(this._rgb,2,e),this}darken(e){return Xm(this._rgb,2,-e),this}saturate(e){return Xm(this._rgb,1,e),this}desaturate(e){return Xm(this._rgb,1,-e),this}rotate(e){return X1e(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function ma(){}const awe=(()=>{let t=0;return()=>t++})();function Ht(t){return t==null}function pr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function nt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ui(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Bi(t,e){return ui(t)?t:e}function Ke(t,e){return typeof t>"u"?e:t}const swe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Et(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function ct(t,e,r,n){let i,a,s;if(pr(t))for(a=t.length,i=0;i<a;i++)e.call(r,t[i],i);else if(nt(t))for(s=Object.keys(t),a=s.length,i=0;i<a;i++)e.call(r,t[s[i]],s[i])}function xg(t,e){let r,n,i,a;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(i=t[r],a=e[r],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function vg(t){if(pr(t))return t.map(vg);if(nt(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let i=0;for(;i<n;++i)e[r[i]]=vg(t[r[i]]);return e}return t}function yR(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function owe(t,e,r,n){if(!yR(t))return;const i=e[t],a=r[t];nt(i)&&nt(a)?vh(i,a,n):e[t]=vg(a)}function vh(t,e,r){const n=pr(e)?e:[e],i=n.length;if(!nt(t))return t;r=r||{};const a=r.merger||owe;let s;for(let o=0;o<i;++o){if(s=n[o],!nt(s))continue;const l=Object.keys(s);for(let u=0,d=l.length;u<d;++u)a(l[u],t,s,r)}return t}function Xd(t,e){return vh(t,e,{merger:lwe})}function lwe(t,e,r){if(!yR(t))return;const n=e[t],i=r[t];nt(n)&&nt(i)?Xd(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=vg(i))}const EA={"":t=>t,x:t=>t.x,y:t=>t.y};function cwe(t){const e=t.split("."),r=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function uwe(t){const e=cwe(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function yg(t,e){return(EA[e]||(EA[e]=uwe(e)))(t)}function kS(t){return t.charAt(0).toUpperCase()+t.slice(1)}const bg=t=>typeof t<"u",Bs=t=>typeof t=="function",TA=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function dwe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const br=Math.PI,ta=2*br,fwe=ta+br,wg=Number.POSITIVE_INFINITY,hwe=br/180,Pi=br/2,ao=br/4,PA=br*2/3,Ww=Math.log10,au=Math.sign;function Qd(t,e,r){return Math.abs(t-e)<r}function kA(t){const e=Math.round(t);t=Qd(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(Ww(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function mwe(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((i,a)=>i-a).pop(),e}function yh(t){return!isNaN(parseFloat(t))&&isFinite(t)}function pwe(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function gwe(t,e,r){let n,i,a;for(n=0,i=t.length;n<i;n++)a=t[n][r],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Oo(t){return t*(br/180)}function xwe(t){return t*(180/br)}function AA(t){if(!ui(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function vwe(t,e){const r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n);let a=Math.atan2(n,r);return a<-.5*br&&(a+=ta),{angle:a,distance:i}}function Vw(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ywe(t,e){return(t-e+fwe)%ta-br}function cs(t){return(t%ta+ta)%ta}function bR(t,e,r,n){const i=cs(t),a=cs(e),s=cs(r),o=cs(a-i),l=cs(s-i),u=cs(i-a),d=cs(i-s);return i===a||i===s||n&&a===s||o>l&&u<d}function ii(t,e,r){return Math.max(e,Math.min(r,t))}function bwe(t){return ii(t,-32768,32767)}function jd(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function AS(t,e,r){r=r||(s=>t[s]<e);let n=t.length-1,i=0,a;for(;n-i>1;)a=i+n>>1,r(a)?i=a:n=a;return{lo:i,hi:n}}const Co=(t,e,r,n)=>AS(t,r,n?i=>{const a=t[i][e];return a<r||a===r&&t[i+1][e]===r}:i=>t[i][e]<r),wwe=(t,e,r)=>AS(t,r,n=>t[n][e]>=r);function _we(t,e,r){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>r;)i--;return n>0||i<t.length?t.slice(n,i):t}const wR=["push","pop","shift","splice","unshift"];function Swe(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),wR.forEach(r=>{const n="_onData"+kS(r),i=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...a){const s=i.apply(this,a);return t._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...a)}),s}})})}function OA(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(wR.forEach(a=>{delete t[a]}),delete t._chartjs)}function Nwe(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const _R=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function SR(t,e){let r=[],n=!1;return function(...i){r=i,n||(n=!0,_R.call(window,()=>{n=!1,t.apply(e,r)}))}}function jwe(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const OS=t=>t==="start"?"left":t==="end"?"right":"center",Lr=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,Ewe=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function Twe(t,e,r){const n=e.length;let i=0,a=n;if(t._sorted){const{iScale:s,_parsed:o}=t,l=s.axis,{min:u,max:d,minDefined:f,maxDefined:h}=s.getUserBounds();f&&(i=ii(Math.min(Co(o,l,u).lo,r?n:Co(e,l,s.getPixelForValue(u)).lo),0,n-1)),h?a=ii(Math.max(Co(o,s.axis,d,!0).hi+1,r?0:Co(e,l,s.getPixelForValue(d),!0).hi+1),i,n)-i:a=n-i}return{start:i,count:a}}function Pwe(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=i,!0;const a=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,i),a}const Qm=t=>t===0||t===1,CA=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ta/r)),MA=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*ta/r)+1,Jd={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Pi)+1,easeOutSine:t=>Math.sin(t*Pi),easeInOutSine:t=>-.5*(Math.cos(br*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Qm(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Qm(t)?t:CA(t,.075,.3),easeOutElastic:t=>Qm(t)?t:MA(t,.075,.3),easeInOutElastic(t){return Qm(t)?t:t<.5?.5*CA(t*2,.1125,.45):.5+.5*MA(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Jd.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Jd.easeInBounce(t*2)*.5:Jd.easeOutBounce(t*2-1)*.5+.5};function CS(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function DA(t){return CS(t)?t:new xh(t)}function Ry(t){return CS(t)?t:new xh(t).saturate(.5).darken(.1).hexString()}const kwe=["x","y","borderWidth","radius","tension"],Awe=["color","borderColor","backgroundColor"];function Owe(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Awe},numbers:{type:"number",properties:kwe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Cwe(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const $A=new Map;function Mwe(t,e){e=e||{};const r=t+JSON.stringify(e);let n=$A.get(r);return n||(n=new Intl.NumberFormat(t,e),$A.set(r,n)),n}function NR(t,e,r){return Mwe(e,r).format(t)}const jR={values(t){return pr(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let i,a=t;if(r.length>1){const u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),a=Dwe(t,r)}const s=Ww(Math.abs(a)),o=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),NR(t,n,l)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(Ww(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?jR.numeric.call(this,t,e,r):""}};function Dwe(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var ER={formatters:jR};function $we(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ER.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Jo=Object.create(null),Hw=Object.create(null);function Zd(t,e){if(!e)return t;const r=e.split(".");for(let n=0,i=r.length;n<i;++n){const a=r[n];t=t[a]||(t[a]=Object.create(null))}return t}function Fy(t,e,r){return typeof e=="string"?vh(Zd(t,e),r):vh(Zd(t,""),e)}class Iwe{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Ry(i.backgroundColor),this.hoverBorderColor=(n,i)=>Ry(i.borderColor),this.hoverColor=(n,i)=>Ry(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return Fy(this,e,r)}get(e){return Zd(this,e)}describe(e,r){return Fy(Hw,e,r)}override(e,r){return Fy(Jo,e,r)}route(e,r,n,i){const a=Zd(this,e),s=Zd(this,n),o="_"+r;Object.defineProperties(a,{[o]:{value:a[r],writable:!0},[r]:{enumerable:!0,get(){const l=this[o],u=s[i];return nt(l)?Object.assign({},u,l):Ke(l,u)},set(l){this[o]=l}}})}apply(e){e.forEach(r=>r(this))}}var Kt=new Iwe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Owe,Cwe,$we]);function Rwe(t){return!t||Ht(t.size)||Ht(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function IA(t,e,r,n,i){let a=e[i];return a||(a=e[i]=t.measureText(i).width,r.push(i)),a>n&&(n=a),n}function so(t,e,r){const n=t.currentDevicePixelRatio,i=r!==0?Math.max(r/2,.5):0;return Math.round((e-i)*n)/n+i}function RA(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function qw(t,e,r,n){TR(t,e,r,n,null)}function TR(t,e,r,n,i){let a,s,o,l,u,d,f,h;const m=e.pointStyle,g=e.rotation,p=e.radius;let x=(g||0)*hwe;if(m&&typeof m=="object"&&(a=m.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),m){default:i?t.ellipse(r,n,i/2,p,0,0,ta):t.arc(r,n,p,0,ta),t.closePath();break;case"triangle":d=i?i/2:p,t.moveTo(r+Math.sin(x)*d,n-Math.cos(x)*p),x+=PA,t.lineTo(r+Math.sin(x)*d,n-Math.cos(x)*p),x+=PA,t.lineTo(r+Math.sin(x)*d,n-Math.cos(x)*p),t.closePath();break;case"rectRounded":u=p*.516,l=p-u,s=Math.cos(x+ao)*l,f=Math.cos(x+ao)*(i?i/2-u:l),o=Math.sin(x+ao)*l,h=Math.sin(x+ao)*(i?i/2-u:l),t.arc(r-f,n-o,u,x-br,x-Pi),t.arc(r+h,n-s,u,x-Pi,x),t.arc(r+f,n+o,u,x,x+Pi),t.arc(r-h,n+s,u,x+Pi,x+br),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,d=i?i/2:l,t.rect(r-d,n-l,2*d,2*l);break}x+=ao;case"rectRot":f=Math.cos(x)*(i?i/2:p),s=Math.cos(x)*p,o=Math.sin(x)*p,h=Math.sin(x)*(i?i/2:p),t.moveTo(r-f,n-o),t.lineTo(r+h,n-s),t.lineTo(r+f,n+o),t.lineTo(r-h,n+s),t.closePath();break;case"crossRot":x+=ao;case"cross":f=Math.cos(x)*(i?i/2:p),s=Math.cos(x)*p,o=Math.sin(x)*p,h=Math.sin(x)*(i?i/2:p),t.moveTo(r-f,n-o),t.lineTo(r+f,n+o),t.moveTo(r+h,n-s),t.lineTo(r-h,n+s);break;case"star":f=Math.cos(x)*(i?i/2:p),s=Math.cos(x)*p,o=Math.sin(x)*p,h=Math.sin(x)*(i?i/2:p),t.moveTo(r-f,n-o),t.lineTo(r+f,n+o),t.moveTo(r+h,n-s),t.lineTo(r-h,n+s),x+=ao,f=Math.cos(x)*(i?i/2:p),s=Math.cos(x)*p,o=Math.sin(x)*p,h=Math.sin(x)*(i?i/2:p),t.moveTo(r-f,n-o),t.lineTo(r+f,n+o),t.moveTo(r+h,n-s),t.lineTo(r-h,n+s);break;case"line":s=i?i/2:Math.cos(x)*p,o=Math.sin(x)*p,t.moveTo(r-s,n-o),t.lineTo(r+s,n+o);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(x)*(i?i/2:p),n+Math.sin(x)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function bh(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function MS(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function DS(t){t.restore()}function Fwe(t,e,r,n,i){if(!e)return t.lineTo(r.x,r.y);if(i==="middle"){const a=(e.x+r.x)/2;t.lineTo(a,e.y),t.lineTo(a,r.y)}else i==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function Lwe(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function Bwe(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ht(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Uwe(t,e,r,n,i){if(i.strikethrough||i.underline){const a=t.measureText(n),s=e-a.actualBoundingBoxLeft,o=e+a.actualBoundingBoxRight,l=r-a.actualBoundingBoxAscent,u=r+a.actualBoundingBoxDescent,d=i.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(s,d),t.lineTo(o,d),t.stroke()}}function zwe(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function wh(t,e,r,n,i,a={}){const s=pr(e)?e:[e],o=a.strokeWidth>0&&a.strokeColor!=="";let l,u;for(t.save(),t.font=i.string,Bwe(t,a),l=0;l<s.length;++l)u=s[l],a.backdrop&&zwe(t,a.backdrop),o&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),Ht(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(u,r,n,a.maxWidth)),t.fillText(u,r,n,a.maxWidth),Uwe(t,r,n,u,a),n+=Number(i.lineHeight);t.restore()}function Gw(t,e){const{x:r,y:n,w:i,h:a,radius:s}=e;t.arc(r+s.topLeft,n+s.topLeft,s.topLeft,1.5*br,br,!0),t.lineTo(r,n+a-s.bottomLeft),t.arc(r+s.bottomLeft,n+a-s.bottomLeft,s.bottomLeft,br,Pi,!0),t.lineTo(r+i-s.bottomRight,n+a),t.arc(r+i-s.bottomRight,n+a-s.bottomRight,s.bottomRight,Pi,0,!0),t.lineTo(r+i,n+s.topRight),t.arc(r+i-s.topRight,n+s.topRight,s.topRight,0,-Pi,!0),t.lineTo(r+s.topLeft,n)}const Wwe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Vwe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Hwe(t,e){const r=(""+t).match(Wwe);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const qwe=t=>+t||0;function PR(t,e){const r={},n=nt(e),i=n?Object.keys(e):e,a=nt(t)?n?s=>Ke(t[s],t[e[s]]):s=>t[s]:()=>t;for(const s of i)r[s]=qwe(a(s));return r}function Gwe(t){return PR(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ef(t){return PR(t,["topLeft","topRight","bottomLeft","bottomRight"])}function di(t){const e=Gwe(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Vr(t,e){t=t||{},e=e||Kt.font;let r=Ke(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=Ke(t.style,e.style);n&&!(""+n).match(Vwe)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:Ke(t.family,e.family),lineHeight:Hwe(Ke(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:Ke(t.weight,e.weight),string:""};return i.string=Rwe(i),i}function Jm(t,e,r,n){let i,a,s;for(i=0,a=t.length;i<a;++i)if(s=t[i],s!==void 0&&s!==void 0)return s}function Kwe(t,e,r){const{min:n,max:i}=t,a=swe(e,(i-n)/2),s=(o,l)=>r&&o===0?0:o+l;return{min:s(n,-Math.abs(a)),max:s(i,a)}}function hl(t,e){return Object.assign(Object.create(t),e)}function $S(t,e=[""],r,n,i=()=>t[0]){const a=r||t;typeof n>"u"&&(n=CR("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:n,_getTarget:i,override:o=>$S([o,...t],e,a,n)};return new Proxy(s,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return AR(o,l,()=>r_e(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return LA(o).includes(l)},ownKeys(o){return LA(o)},set(o,l,u){const d=o._storage||(o._storage=i());return o[l]=d[l]=u,delete o._keys,!0}})}function su(t,e,r,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:kR(t,n),setContext:a=>su(t,a,r,n),override:a=>su(t.override(a),e,r,n)};return new Proxy(i,{deleteProperty(a,s){return delete a[s],delete t[s],!0},get(a,s,o){return AR(a,s,()=>Xwe(a,s,o))},getOwnPropertyDescriptor(a,s){return a._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(a,s,o){return t[s]=o,delete a[s],!0}})}function kR(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:r,indexable:n,isScriptable:Bs(r)?r:()=>r,isIndexable:Bs(n)?n:()=>n}}const Ywe=(t,e)=>t?t+kS(e):e,IS=(t,e)=>nt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function AR(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function Xwe(t,e,r){const{_proxy:n,_context:i,_subProxy:a,_descriptors:s}=t;let o=n[e];return Bs(o)&&s.isScriptable(e)&&(o=Qwe(e,o,t,r)),pr(o)&&o.length&&(o=Jwe(e,o,t,s.isIndexable)),IS(e,o)&&(o=su(o,i,a&&a[e],s)),o}function Qwe(t,e,r,n){const{_proxy:i,_context:a,_subProxy:s,_stack:o}=r;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(a,s||n);return o.delete(t),IS(t,l)&&(l=RS(i._scopes,i,t,l)),l}function Jwe(t,e,r,n){const{_proxy:i,_context:a,_subProxy:s,_descriptors:o}=r;if(typeof a.index<"u"&&n(t))return e[a.index%e.length];if(nt(e[0])){const l=e,u=i._scopes.filter(d=>d!==l);e=[];for(const d of l){const f=RS(u,i,t,d);e.push(su(f,a,s&&s[t],o))}}return e}function OR(t,e,r){return Bs(t)?t(e,r):t}const Zwe=(t,e)=>t===!0?e:typeof t=="string"?yg(e,t):void 0;function e_e(t,e,r,n,i){for(const a of e){const s=Zwe(r,a);if(s){t.add(s);const o=OR(s._fallback,r,i);if(typeof o<"u"&&o!==r&&o!==n)return o}else if(s===!1&&typeof n<"u"&&r!==n)return null}return!1}function RS(t,e,r,n){const i=e._rootScopes,a=OR(e._fallback,r,n),s=[...t,...i],o=new Set;o.add(n);let l=FA(o,s,r,a||r,n);return l===null||typeof a<"u"&&a!==r&&(l=FA(o,s,a,l,n),l===null)?!1:$S(Array.from(o),[""],i,a,()=>t_e(e,r,n))}function FA(t,e,r,n,i){for(;r;)r=e_e(t,e,r,n,i);return r}function t_e(t,e,r){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return pr(i)&&nt(r)?r:i||{}}function r_e(t,e,r,n){let i;for(const a of e)if(i=CR(Ywe(a,t),r),typeof i<"u")return IS(t,i)?RS(r,n,t,i):i}function CR(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function LA(t){let e=t._keys;return e||(e=t._keys=n_e(t._scopes)),e}function n_e(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}const i_e=Number.EPSILON||1e-14,ou=(t,e)=>e<t.length&&!t[e].skip&&t[e],MR=t=>t==="x"?"y":"x";function a_e(t,e,r,n){const i=t.skip?e:t,a=e,s=r.skip?e:r,o=Vw(a,i),l=Vw(s,a);let u=o/(o+l),d=l/(o+l);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=n*u,h=n*d;return{previous:{x:a.x-f*(s.x-i.x),y:a.y-f*(s.y-i.y)},next:{x:a.x+h*(s.x-i.x),y:a.y+h*(s.y-i.y)}}}function s_e(t,e,r){const n=t.length;let i,a,s,o,l,u=ou(t,0);for(let d=0;d<n-1;++d)if(l=u,u=ou(t,d+1),!(!l||!u)){if(Qd(e[d],0,i_e)){r[d]=r[d+1]=0;continue}i=r[d]/e[d],a=r[d+1]/e[d],o=Math.pow(i,2)+Math.pow(a,2),!(o<=9)&&(s=3/Math.sqrt(o),r[d]=i*s*e[d],r[d+1]=a*s*e[d])}}function o_e(t,e,r="x"){const n=MR(r),i=t.length;let a,s,o,l=ou(t,0);for(let u=0;u<i;++u){if(s=o,o=l,l=ou(t,u+1),!o)continue;const d=o[r],f=o[n];s&&(a=(d-s[r])/3,o[`cp1${r}`]=d-a,o[`cp1${n}`]=f-a*e[u]),l&&(a=(l[r]-d)/3,o[`cp2${r}`]=d+a,o[`cp2${n}`]=f+a*e[u])}}function l_e(t,e="x"){const r=MR(e),n=t.length,i=Array(n).fill(0),a=Array(n);let s,o,l,u=ou(t,0);for(s=0;s<n;++s)if(o=l,l=u,u=ou(t,s+1),!!l){if(u){const d=u[e]-l[e];i[s]=d!==0?(u[r]-l[r])/d:0}a[s]=o?u?au(i[s-1])!==au(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}s_e(t,i,a),o_e(t,a,e)}function Zm(t,e,r){return Math.max(Math.min(t,r),e)}function c_e(t,e){let r,n,i,a,s,o=bh(t[0],e);for(r=0,n=t.length;r<n;++r)s=a,a=o,o=r<n-1&&bh(t[r+1],e),a&&(i=t[r],s&&(i.cp1x=Zm(i.cp1x,e.left,e.right),i.cp1y=Zm(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=Zm(i.cp2x,e.left,e.right),i.cp2y=Zm(i.cp2y,e.top,e.bottom)))}function u_e(t,e,r,n,i){let a,s,o,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")l_e(t,i);else{let u=n?t[t.length-1]:t[0];for(a=0,s=t.length;a<s;++a)o=t[a],l=a_e(u,o,t[Math.min(a+1,s-(n?0:1))%s],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,u=o}e.capBezierPoints&&c_e(t,r)}function FS(){return typeof window<"u"&&typeof document<"u"}function LS(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function _g(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const fv=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function d_e(t,e){return fv(t).getPropertyValue(e)}const f_e=["top","right","bottom","left"];function Fo(t,e,r){const n={};r=r?"-"+r:"";for(let i=0;i<4;i++){const a=f_e[i];n[a]=parseFloat(t[e+"-"+a+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const h_e=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function m_e(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:i,offsetY:a}=n;let s=!1,o,l;if(h_e(i,a,t.target))o=i,l=a;else{const u=e.getBoundingClientRect();o=n.clientX-u.left,l=n.clientY-u.top,s=!0}return{x:o,y:l,box:s}}function go(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,i=fv(r),a=i.boxSizing==="border-box",s=Fo(i,"padding"),o=Fo(i,"border","width"),{x:l,y:u,box:d}=m_e(t,r),f=s.left+(d&&o.left),h=s.top+(d&&o.top);let{width:m,height:g}=e;return a&&(m-=s.width+o.width,g-=s.height+o.height),{x:Math.round((l-f)/m*r.width/n),y:Math.round((u-h)/g*r.height/n)}}function p_e(t,e,r){let n,i;if(e===void 0||r===void 0){const a=t&&LS(t);if(!a)e=t.clientWidth,r=t.clientHeight;else{const s=a.getBoundingClientRect(),o=fv(a),l=Fo(o,"border","width"),u=Fo(o,"padding");e=s.width-u.width-l.width,r=s.height-u.height-l.height,n=_g(o.maxWidth,a,"clientWidth"),i=_g(o.maxHeight,a,"clientHeight")}}return{width:e,height:r,maxWidth:n||wg,maxHeight:i||wg}}const e0=t=>Math.round(t*10)/10;function g_e(t,e,r,n){const i=fv(t),a=Fo(i,"margin"),s=_g(i.maxWidth,t,"clientWidth")||wg,o=_g(i.maxHeight,t,"clientHeight")||wg,l=p_e(t,e,r);let{width:u,height:d}=l;if(i.boxSizing==="content-box"){const h=Fo(i,"border","width"),m=Fo(i,"padding");u-=m.width+h.width,d-=m.height+h.height}return u=Math.max(0,u-a.width),d=Math.max(0,n?u/n:d-a.height),u=e0(Math.min(u,s,l.maxWidth)),d=e0(Math.min(d,o,l.maxHeight)),u&&!d&&(d=e0(u/2)),(e!==void 0||r!==void 0)&&n&&l.height&&d>l.height&&(d=l.height,u=e0(Math.floor(d*n))),{width:u,height:d}}function BA(t,e,r){const n=e||1,i=Math.floor(t.height*n),a=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(r||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||s.height!==i||s.width!==a?(t.currentDevicePixelRatio=n,s.height=i,s.width=a,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const x_e=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};FS()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function UA(t,e){const r=d_e(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function xo(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function v_e(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function y_e(t,e,r,n){const i={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},s=xo(t,i,r),o=xo(i,a,r),l=xo(a,e,r),u=xo(s,o,r),d=xo(o,l,r);return xo(u,d,r)}const b_e=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},w_e=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function pc(t,e,r){return t?b_e(e,r):w_e()}function DR(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function $R(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function IR(t){return t==="angle"?{between:bR,compare:ywe,normalize:cs}:{between:jd,compare:(e,r)=>e-r,normalize:e=>e}}function zA({start:t,end:e,count:r,loop:n,style:i}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:i}}function __e(t,e,r){const{property:n,start:i,end:a}=r,{between:s,normalize:o}=IR(n),l=e.length;let{start:u,end:d,loop:f}=t,h,m;if(f){for(u+=l,d+=l,h=0,m=l;h<m&&s(o(e[u%l][n]),i,a);++h)u--,d--;u%=l,d%=l}return d<u&&(d+=l),{start:u,end:d,loop:f,style:t.style}}function S_e(t,e,r){if(!r)return[t];const{property:n,start:i,end:a}=r,s=e.length,{compare:o,between:l,normalize:u}=IR(n),{start:d,end:f,loop:h,style:m}=__e(t,e,r),g=[];let p=!1,x=null,v,b,y;const _=()=>l(i,y,v)&&o(i,y)!==0,w=()=>o(a,v)===0||l(a,y,v),N=()=>p||_(),S=()=>!p||w();for(let E=d,T=d;E<=f;++E)b=e[E%s],!b.skip&&(v=u(b[n]),v!==y&&(p=l(v,i,a),x===null&&N()&&(x=o(v,i)===0?E:T),x!==null&&S()&&(g.push(zA({start:x,end:E,loop:h,count:s,style:m})),x=null),T=E,y=v));return x!==null&&g.push(zA({start:x,end:f,loop:h,count:s,style:m})),g}function N_e(t,e){const r=[],n=t.segments;for(let i=0;i<n.length;i++){const a=S_e(n[i],t.points,e);a.length&&r.push(...a)}return r}function j_e(t,e,r,n){let i=0,a=e-1;if(r&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,r&&(a+=i);a>i&&t[a%e].skip;)a--;return a%=e,{start:i,end:a}}function E_e(t,e,r,n){const i=t.length,a=[];let s=e,o=t[e],l;for(l=e+1;l<=r;++l){const u=t[l%i];u.skip||u.stop?o.skip||(n=!1,a.push({start:e%i,end:(l-1)%i,loop:n}),e=s=u.stop?l:null):(s=l,o.skip&&(e=l)),o=u}return s!==null&&a.push({start:e%i,end:s%i,loop:n}),a}function T_e(t,e){const r=t.points,n=t.options.spanGaps,i=r.length;if(!i)return[];const a=!!t._loop,{start:s,end:o}=j_e(r,i,a,n);if(n===!0)return WA(t,[{start:s,end:o,loop:a}],r,e);const l=o<s?o+i:o,u=!!t._fullLoop&&s===0&&o===i-1;return WA(t,E_e(r,s,l,u),r,e)}function WA(t,e,r,n){return!n||!n.setContext||!r?e:P_e(t,e,r,n)}function P_e(t,e,r,n){const i=t._chart.getContext(),a=VA(t.options),{_datasetIndex:s,options:{spanGaps:o}}=t,l=r.length,u=[];let d=a,f=e[0].start,h=f;function m(g,p,x,v){const b=o?-1:1;if(g!==p){for(g+=l;r[g%l].skip;)g-=b;for(;r[p%l].skip;)p+=b;g%l!==p%l&&(u.push({start:g%l,end:p%l,loop:x,style:v}),d=v,f=p%l)}}for(const g of e){f=o?f:g.start;let p=r[f%l],x;for(h=f+1;h<=g.end;h++){const v=r[h%l];x=VA(n.setContext(hl(i,{type:"segment",p0:p,p1:v,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),k_e(x,d)&&m(f,h-1,g.loop,d),p=v,d=x}f<h-1&&m(f,h-1,g.loop,d)}return u}function VA(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function k_e(t,e){if(!e)return!1;const r=[],n=function(i,a){return CS(a)?(r.includes(a)||r.push(a),r.indexOf(a)):a};return JSON.stringify(t,n)!==JSON.stringify(e,n)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class A_e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,i){const a=r.listeners[i],s=r.duration;a.forEach(o=>o({chart:e,initial:r.initial,numSteps:s,currentStep:Math.min(n-r.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=_R.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const a=n.items;let s=a.length-1,o=!1,l;for(;s>=0;--s)l=a[s],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),o=!0):(a[s]=a[a.length-1],a.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),a.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),r+=a.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var pa=new A_e;const HA="transparent",O_e={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=DA(t||HA),i=n.valid&&DA(e||HA);return i&&i.valid?i.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class C_e{constructor(e,r,n,i){const a=r[n];i=Jm([e.to,i,a,e.from]);const s=Jm([e.from,a,i]);this._active=!0,this._fn=e.fn||O_e[e.type||typeof s],this._easing=Jd[e.easing]||Jd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const i=this._target[this._prop],a=n-this._start,s=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Jm([e.to,r,i,e.from]),this._from=Jm([e.from,i,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,i=this._prop,a=this._from,s=this._loop,o=this._to;let l;if(this._active=a!==o&&(s||r<n),!this._active){this._target[i]=o,this._notify(!0);return}if(r<0){this._target[i]=a;return}l=r/n%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(a,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][r]()}}class RR{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!nt(e))return;const r=Object.keys(Kt.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!nt(a))return;const s={};for(const o of r)s[o]=a[o];(pr(a.properties)&&a.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,s)})})}_animateOptions(e,r){const n=r.options,i=D_e(e,n);if(!i)return[];const a=this._createAnimations(i,n);return n.$shared&&M_e(e.options.$animations,n).then(()=>{e.options=n},()=>{}),a}_createAnimations(e,r){const n=this._properties,i=[],a=e.$animations||(e.$animations={}),s=Object.keys(r),o=Date.now();let l;for(l=s.length-1;l>=0;--l){const u=s[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,r));continue}const d=r[u];let f=a[u];const h=n.get(u);if(f)if(h&&f.active()){f.update(h,d,o);continue}else f.cancel();if(!h||!h.duration){e[u]=d;continue}a[u]=f=new C_e(h,e,u,d),i.push(f)}return i}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return pa.add(this._chart,n),!0}}function M_e(t,e){const r=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const a=t[n[i]];a&&a.active()&&r.push(a.wait())}return Promise.all(r)}function D_e(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function qA(t,e){const r=t&&t.options||{},n=r.reverse,i=r.min===void 0?e:0,a=r.max===void 0?e:0;return{start:n?a:i,end:n?i:a}}function $_e(t,e,r){if(r===!1)return!1;const n=qA(t,r),i=qA(e,r);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function I_e(t){let e,r,n,i;return nt(t)?(e=t.top,r=t.right,n=t.bottom,i=t.left):e=r=n=i=t,{top:e,right:r,bottom:n,left:i,disabled:t===!1}}function FR(t,e){const r=[],n=t._getSortedDatasetMetas(e);let i,a;for(i=0,a=n.length;i<a;++i)r.push(n[i].index);return r}function GA(t,e,r,n={}){const i=t.keys,a=n.mode==="single";let s,o,l,u;if(e===null)return;let d=!1;for(s=0,o=i.length;s<o;++s){if(l=+i[s],l===r){if(d=!0,n.all)continue;break}u=t.values[l],ui(u)&&(a||e===0||au(e)===au(u))&&(e+=u)}return!d&&!n.all?0:e}function R_e(t,e){const{iScale:r,vScale:n}=e,i=r.axis==="x"?"x":"y",a=n.axis==="x"?"x":"y",s=Object.keys(t),o=new Array(s.length);let l,u,d;for(l=0,u=s.length;l<u;++l)d=s[l],o[l]={[i]:d,[a]:t[d]};return o}function Ly(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function F_e(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function L_e(t){const{min:e,max:r,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}function B_e(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function KA(t,e,r,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const a=t[i.index];if(r&&a>0||!r&&a<0)return i.index}return null}function YA(t,e){const{chart:r,_cachedMeta:n}=t,i=r._stacks||(r._stacks={}),{iScale:a,vScale:s,index:o}=n,l=a.axis,u=s.axis,d=F_e(a,s,n),f=e.length;let h;for(let m=0;m<f;++m){const g=e[m],{[l]:p,[u]:x}=g,v=g._stacks||(g._stacks={});h=v[u]=B_e(i,d,p),h[o]=x,h._top=KA(h,s,!0,n.type),h._bottom=KA(h,s,!1,n.type);const b=h._visualValues||(h._visualValues={});b[o]=x}}function By(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function U_e(t,e){return hl(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function z_e(t,e,r){return hl(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function ud(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const a=i._stacks;if(!a||a[n]===void 0||a[n][r]===void 0)return;delete a[n][r],a[n]._visualValues!==void 0&&a[n]._visualValues[r]!==void 0&&delete a[n]._visualValues[r]}}}const Uy=t=>t==="reset"||t==="none",XA=(t,e)=>e?t:Object.assign({},t),W_e=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:FR(r,!0),values:null};class tf{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ly(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ud(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),i=(f,h,m,g)=>f==="x"?h:f==="r"?g:m,a=r.xAxisID=Ke(n.xAxisID,By(e,"x")),s=r.yAxisID=Ke(n.yAxisID,By(e,"y")),o=r.rAxisID=Ke(n.rAxisID,By(e,"r")),l=r.indexAxis,u=r.iAxisID=i(l,a,s,o),d=r.vAxisID=i(l,s,a,o);r.xScale=this.getScaleForId(a),r.yScale=this.getScaleForId(s),r.rScale=this.getScaleForId(o),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&OA(this._data,this),e._stacked&&ud(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(nt(r)){const i=this._cachedMeta;this._data=R_e(r,i)}else if(n!==r){if(n){OA(n,this);const i=this._cachedMeta;ud(i),i._parsed=[]}r&&Object.isExtensible(r)&&Swe(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const a=r._stacked;r._stacked=Ly(r.vScale,r),r.stack!==n.stack&&(i=!0,ud(r),r.stack=n.stack),this._resyncElements(e),(i||a!==r._stacked)&&(YA(this,r._parsed),r._stacked=Ly(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:i}=this,{iScale:a,_stacked:s}=n,o=a.axis;let l=e===0&&r===i.length?!0:n._sorted,u=e>0&&n._parsed[e-1],d,f,h;if(this._parsing===!1)n._parsed=i,n._sorted=!0,h=i;else{pr(i[e])?h=this.parseArrayData(n,i,e,r):nt(i[e])?h=this.parseObjectData(n,i,e,r):h=this.parsePrimitiveData(n,i,e,r);const m=()=>f[o]===null||u&&f[o]<u[o];for(d=0;d<r;++d)n._parsed[d+e]=f=h[d],l&&(m()&&(l=!1),u=f);n._sorted=l}s&&YA(this,h)}parsePrimitiveData(e,r,n,i){const{iScale:a,vScale:s}=e,o=a.axis,l=s.axis,u=a.getLabels(),d=a===s,f=new Array(i);let h,m,g;for(h=0,m=i;h<m;++h)g=h+n,f[h]={[o]:d||a.parse(u[g],g),[l]:s.parse(r[g],g)};return f}parseArrayData(e,r,n,i){const{xScale:a,yScale:s}=e,o=new Array(i);let l,u,d,f;for(l=0,u=i;l<u;++l)d=l+n,f=r[d],o[l]={x:a.parse(f[0],d),y:s.parse(f[1],d)};return o}parseObjectData(e,r,n,i){const{xScale:a,yScale:s}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let d,f,h,m;for(d=0,f=i;d<f;++d)h=d+n,m=r[h],u[d]={x:a.parse(yg(m,o),h),y:s.parse(yg(m,l),h)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const i=this.chart,a=this._cachedMeta,s=r[e.axis],o={keys:FR(i,!0),values:r._stacks[e.axis]._visualValues};return GA(o,s,a.index,{mode:n})}updateRangeFromParsed(e,r,n,i){const a=n[r.axis];let s=a===null?NaN:a;const o=i&&n._stacks[r.axis];i&&o&&(i.values=o,s=GA(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,r){const n=this._cachedMeta,i=n._parsed,a=n._sorted&&e===n.iScale,s=i.length,o=this._getOtherScale(e),l=W_e(r,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=L_e(o);let h,m;function g(){m=i[h];const p=m[o.axis];return!ui(m[e.axis])||d>p||f<p}for(h=0;h<s&&!(!g()&&(this.updateRangeFromParsed(u,e,m,l),a));++h);if(a){for(h=s-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(u,e,m,l);break}}return u}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let i,a,s;for(i=0,a=r.length;i<a;++i)s=r[i][e.axis],ui(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,i=r.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=I_e(Ke(this.options.clip,$_e(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,i=n.data||[],a=r.chartArea,s=[],o=this._drawStart||0,l=this._drawCount||i.length-o,u=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,a,o,l),d=o;d<o+l;++d){const f=i[d];f.hidden||(f.active&&u?s.push(f):f.draw(e,a))}for(d=0;d<s.length;++d)s[d].draw(e,a)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const s=this._cachedMeta.data[e];a=s.$context||(s.$context=z_e(this.getContext(),e,s)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=U_e(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!r,a.mode=n,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const i=r==="active",a=this._cachedDataOpts,s=e+"-"+r,o=a[s],l=this.enableOptionSharing&&bg(n);if(o)return XA(o,l);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],h=u.getOptionScopes(this.getDataset(),d),m=Object.keys(Kt.elements[e]),g=()=>this.getContext(n,i,r),p=u.resolveNamedOptions(h,m,g,f);return p.$shared&&(p.$shared=l,a[s]=Object.freeze(XA(p,l))),p}_resolveAnimations(e,r,n){const i=this.chart,a=this._cachedDataOpts,s=`animation-${r}`,o=a[s];if(o)return o;let l;if(i.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,r),h=d.getOptionScopes(this.getDataset(),f);l=d.createResolver(h,this.getContext(e,n,r))}const u=new RR(i,l&&l.animations);return l&&l._cacheable&&(a[s]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Uy(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),i=this._sharedOptions,a=this.getSharedOptions(n),s=this.includeOptions(r,a)||a!==i;return this.updateSharedOptions(a,r,n),{sharedOptions:a,includeOptions:s}}updateElement(e,r,n,i){Uy(i)?Object.assign(e,n):this._resolveAnimations(r,i).update(e,n)}updateSharedOptions(e,r,n){e&&!Uy(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,i){e.active=i;const a=this.getStyle(r,i);this._resolveAnimations(r,n,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[o,l,u]of this._syncList)this[o](l,u);this._syncList=[];const i=n.length,a=r.length,s=Math.min(a,i);s&&this.parse(0,s),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,r,n=!0){const i=this._cachedMeta,a=i.data,s=e+r;let o;const l=u=>{for(u.length+=r,o=u.length-1;o>=s;o--)u[o]=u[o-r]};for(l(a),o=e;o<s;++o)a[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,r),n&&this.updateElements(a,e,r,"reset")}updateElements(e,r,n,i){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,r);n._stacked&&ud(n,i)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,i]=e;this[r](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ue(tf,"defaults",{}),Ue(tf,"datasetElementType",null),Ue(tf,"dataElementType",null);class D0 extends tf{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:i=[],_dataset:a}=r,s=this.chart._animationsDisabled;let{start:o,count:l}=Twe(r,i,s);this._drawStart=o,this._drawCount=l,Pwe(r)&&(o=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=i;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:u},e),this.updateElements(i,o,l,e)}updateElements(e,r,n,i){const a=i==="reset",{iScale:s,vScale:o,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(r,i),h=s.axis,m=o.axis,{spanGaps:g,segment:p}=this.options,x=yh(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||a||i==="none",b=r+n,y=e.length;let _=r>0&&this.getParsed(r-1);for(let w=0;w<y;++w){const N=e[w],S=v?N:{};if(w<r||w>=b){S.skip=!0;continue}const E=this.getParsed(w),T=Ht(E[m]),P=S[h]=s.getPixelForValue(E[h],w),A=S[m]=a||T?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,E,l):E[m],w);S.skip=isNaN(P)||isNaN(A)||T,S.stop=w>0&&Math.abs(E[h]-_[h])>x,p&&(S.parsed=E,S.raw=u.data[w]),f&&(S.options=d||this.resolveDataElementOptions(w,N.active?"active":i)),v||this.updateElement(N,w,S,i),_=E}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const a=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,a,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ue(D0,"id","line"),Ue(D0,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ue(D0,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function oo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class BS{constructor(e){Ue(this,"options");this.options=e||{}}static override(e){Object.assign(BS.prototype,e)}init(){}formats(){return oo()}parse(){return oo()}format(){return oo()}add(){return oo()}diff(){return oo()}startOf(){return oo()}endOf(){return oo()}}var V_e={_date:BS};function H_e(t,e,r,n){const{controller:i,data:a,_sorted:s}=t,o=i._cachedMeta.iScale;if(o&&e===o.axis&&e!=="r"&&s&&a.length){const l=o._reversePixels?wwe:Co;if(n){if(i._sharedOptions){const u=a[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=l(a,e,r-d),h=l(a,e,r+d);return{lo:f.lo,hi:h.hi}}}}else return l(a,e,r)}return{lo:0,hi:a.length-1}}function em(t,e,r,n,i){const a=t.getSortedVisibleDatasetMetas(),s=r[e];for(let o=0,l=a.length;o<l;++o){const{index:u,data:d}=a[o],{lo:f,hi:h}=H_e(a[o],e,s,i);for(let m=f;m<=h;++m){const g=d[m];g.skip||n(g,u,m)}}}function q_e(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,i){const a=e?Math.abs(n.x-i.x):0,s=r?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}function zy(t,e,r,n,i){const a=[];return!i&&!t.isPointInArea(e)||em(t,r,e,function(o,l,u){!i&&!bh(o,t.chartArea,0)||o.inRange(e.x,e.y,n)&&a.push({element:o,datasetIndex:l,index:u})},!0),a}function G_e(t,e,r,n){let i=[];function a(s,o,l){const{startAngle:u,endAngle:d}=s.getProps(["startAngle","endAngle"],n),{angle:f}=vwe(s,{x:e.x,y:e.y});bR(f,u,d)&&i.push({element:s,datasetIndex:o,index:l})}return em(t,r,e,a),i}function K_e(t,e,r,n,i,a){let s=[];const o=q_e(r);let l=Number.POSITIVE_INFINITY;function u(d,f,h){const m=d.inRange(e.x,e.y,i);if(n&&!m)return;const g=d.getCenterPoint(i);if(!(!!a||t.isPointInArea(g))&&!m)return;const x=o(e,g);x<l?(s=[{element:d,datasetIndex:f,index:h}],l=x):x===l&&s.push({element:d,datasetIndex:f,index:h})}return em(t,r,e,u),s}function Wy(t,e,r,n,i,a){return!a&&!t.isPointInArea(e)?[]:r==="r"&&!n?G_e(t,e,r,i):K_e(t,e,r,n,i,a)}function QA(t,e,r,n,i){const a=[],s=r==="x"?"inXRange":"inYRange";let o=!1;return em(t,r,e,(l,u,d)=>{l[s]&&l[s](e[r],i)&&(a.push({element:l,datasetIndex:u,index:d}),o=o||l.inRange(e.x,e.y,i))}),n&&!o?[]:a}var Y_e={evaluateInteractionItems:em,modes:{index(t,e,r,n){const i=go(e,t),a=r.axis||"x",s=r.includeInvisible||!1,o=r.intersect?zy(t,i,a,n,s):Wy(t,i,a,!1,n,s),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=o[0].index,f=u.data[d];f&&!f.skip&&l.push({element:f,datasetIndex:u.index,index:d})}),l):[]},dataset(t,e,r,n){const i=go(e,t),a=r.axis||"xy",s=r.includeInvisible||!1;let o=r.intersect?zy(t,i,a,n,s):Wy(t,i,a,!1,n,s);if(o.length>0){const l=o[0].datasetIndex,u=t.getDatasetMeta(l).data;o=[];for(let d=0;d<u.length;++d)o.push({element:u[d],datasetIndex:l,index:d})}return o},point(t,e,r,n){const i=go(e,t),a=r.axis||"xy",s=r.includeInvisible||!1;return zy(t,i,a,n,s)},nearest(t,e,r,n){const i=go(e,t),a=r.axis||"xy",s=r.includeInvisible||!1;return Wy(t,i,a,r.intersect,n,s)},x(t,e,r,n){const i=go(e,t);return QA(t,i,"x",r.intersect,n)},y(t,e,r,n){const i=go(e,t);return QA(t,i,"y",r.intersect,n)}}};const LR=["left","top","right","bottom"];function dd(t,e){return t.filter(r=>r.pos===e)}function JA(t,e){return t.filter(r=>LR.indexOf(r.pos)===-1&&r.box.axis===e)}function fd(t,e){return t.sort((r,n)=>{const i=e?n:r,a=e?r:n;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function X_e(t){const e=[];let r,n,i,a,s,o;for(r=0,n=(t||[]).length;r<n;++r)i=t[r],{position:a,options:{stack:s,stackWeight:o=1}}=i,e.push({index:r,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&a+s,stackWeight:o});return e}function Q_e(t){const e={};for(const r of t){const{stack:n,pos:i,stackWeight:a}=r;if(!n||!LR.includes(i))continue;const s=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return e}function J_e(t,e){const r=Q_e(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let a,s,o;for(a=0,s=t.length;a<s;++a){o=t[a];const{fullSize:l}=o.box,u=r[o.stack],d=u&&o.stackWeight/u.weight;o.horizontal?(o.width=d?d*n:l&&e.availableWidth,o.height=i):(o.width=n,o.height=d?d*i:l&&e.availableHeight)}return r}function Z_e(t){const e=X_e(t),r=fd(e.filter(u=>u.box.fullSize),!0),n=fd(dd(e,"left"),!0),i=fd(dd(e,"right")),a=fd(dd(e,"top"),!0),s=fd(dd(e,"bottom")),o=JA(e,"x"),l=JA(e,"y");return{fullSize:r,leftAndTop:n.concat(a),rightAndBottom:i.concat(l).concat(s).concat(o),chartArea:dd(e,"chartArea"),vertical:n.concat(i).concat(l),horizontal:a.concat(s).concat(o)}}function ZA(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function BR(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function e2e(t,e,r,n){const{pos:i,box:a}=r,s=t.maxPadding;if(!nt(i)){r.size&&(t[i]-=r.size);const f=n[r.stack]||{size:0,count:1};f.size=Math.max(f.size,r.horizontal?a.height:a.width),r.size=f.size/f.count,t[i]+=r.size}a.getPadding&&BR(s,a.getPadding());const o=Math.max(0,e.outerWidth-ZA(s,t,"left","right")),l=Math.max(0,e.outerHeight-ZA(s,t,"top","bottom")),u=o!==t.w,d=l!==t.h;return t.w=o,t.h=l,r.horizontal?{same:u,other:d}:{same:d,other:u}}function t2e(t){const e=t.maxPadding;function r(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function r2e(t,e){const r=e.maxPadding;function n(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{a[s]=Math.max(e[s],r[s])}),a}return n(t?["left","right"]:["top","bottom"])}function Ed(t,e,r,n){const i=[];let a,s,o,l,u,d;for(a=0,s=t.length,u=0;a<s;++a){o=t[a],l=o.box,l.update(o.width||e.w,o.height||e.h,r2e(o.horizontal,e));const{same:f,other:h}=e2e(e,r,o,n);u|=f&&i.length,d=d||h,l.fullSize||i.push(o)}return u&&Ed(i,e,r,n)||d}function t0(t,e,r,n,i){t.top=r,t.left=e,t.right=e+n,t.bottom=r+i,t.width=n,t.height=i}function eO(t,e,r,n){const i=r.padding;let{x:a,y:s}=e;for(const o of t){const l=o.box,u=n[o.stack]||{count:1,placed:0,weight:1},d=o.stackWeight/u.weight||1;if(o.horizontal){const f=e.w*d,h=u.size||l.height;bg(u.start)&&(s=u.start),l.fullSize?t0(l,i.left,s,r.outerWidth-i.right-i.left,h):t0(l,e.left+u.placed,s,f,h),u.start=s,u.placed+=f,s=l.bottom}else{const f=e.h*d,h=u.size||l.width;bg(u.start)&&(a=u.start),l.fullSize?t0(l,a,i.top,h,r.outerHeight-i.bottom-i.top):t0(l,a,e.top+u.placed,h,f),u.start=a,u.placed+=f,a=l.right}}e.x=a,e.y=s}var ai={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const i=di(t.options.layout.padding),a=Math.max(e-i.width,0),s=Math.max(r-i.height,0),o=Z_e(t.boxes),l=o.vertical,u=o.horizontal;ct(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const d=l.reduce((p,x)=>x.box.options&&x.box.options.display===!1?p:p+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:r,padding:i,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/d,hBoxMaxHeight:s/2}),h=Object.assign({},i);BR(h,di(n));const m=Object.assign({maxPadding:h,w:a,h:s,x:i.left,y:i.top},i),g=J_e(l.concat(u),f);Ed(o.fullSize,m,f,g),Ed(l,m,f,g),Ed(u,m,f,g)&&Ed(l,m,f,g),t2e(m),eO(o.leftAndTop,m,f,g),m.x+=m.w,m.y+=m.h,eO(o.rightAndBottom,m,f,g),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ct(o.chartArea,p=>{const x=p.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class UR{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,i){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,i?Math.floor(r/i):n)}}isAttached(e){return!0}updateConfig(e){}}class n2e extends UR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const $0="$chartjs",i2e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tO=t=>t===null||t==="";function a2e(t,e){const r=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[$0]={initial:{height:n,width:i,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",tO(i)){const a=UA(t,"width");a!==void 0&&(t.width=a)}if(tO(n))if(t.style.height==="")t.height=t.width/(e||2);else{const a=UA(t,"height");a!==void 0&&(t.height=a)}return t}const zR=x_e?{passive:!0}:!1;function s2e(t,e,r){t&&t.addEventListener(e,r,zR)}function o2e(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,zR)}function l2e(t,e){const r=i2e[t.type]||t.type,{x:n,y:i}=go(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Sg(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function c2e(t,e,r){const n=t.canvas,i=new MutationObserver(a=>{let s=!1;for(const o of a)s=s||Sg(o.addedNodes,n),s=s&&!Sg(o.removedNodes,n);s&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}function u2e(t,e,r){const n=t.canvas,i=new MutationObserver(a=>{let s=!1;for(const o of a)s=s||Sg(o.removedNodes,n),s=s&&!Sg(o.addedNodes,n);s&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}const _h=new Map;let rO=0;function WR(){const t=window.devicePixelRatio;t!==rO&&(rO=t,_h.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function d2e(t,e){_h.size||window.addEventListener("resize",WR),_h.set(t,e)}function f2e(t){_h.delete(t),_h.size||window.removeEventListener("resize",WR)}function h2e(t,e,r){const n=t.canvas,i=n&&LS(n);if(!i)return;const a=SR((o,l)=>{const u=i.clientWidth;r(o,l),u<i.clientWidth&&r()},window),s=new ResizeObserver(o=>{const l=o[0],u=l.contentRect.width,d=l.contentRect.height;u===0&&d===0||a(u,d)});return s.observe(i),d2e(t,a),s}function Vy(t,e,r){r&&r.disconnect(),e==="resize"&&f2e(t)}function m2e(t,e,r){const n=t.canvas,i=SR(a=>{t.ctx!==null&&r(l2e(a,t))},t);return s2e(n,e,i),i}class p2e extends UR{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(a2e(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[$0])return!1;const n=r[$0].initial;["height","width"].forEach(a=>{const s=n[a];Ht(s)?r.removeAttribute(a):r.setAttribute(a,s)});const i=n.style||{};return Object.keys(i).forEach(a=>{r.style[a]=i[a]}),r.width=r.width,delete r[$0],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const i=e.$proxies||(e.$proxies={}),s={attach:c2e,detach:u2e,resize:h2e}[r]||m2e;i[r]=s(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),i=n[r];if(!i)return;({attach:Vy,detach:Vy,resize:Vy}[r]||o2e)(e,r,i),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,i){return g_e(e,r,n,i)}isAttached(e){const r=e&&LS(e);return!!(r&&r.isConnected)}}function g2e(t){return!FS()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?n2e:p2e}class Va{constructor(){Ue(this,"x");Ue(this,"y");Ue(this,"active",!1);Ue(this,"options");Ue(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return yh(this.x)&&yh(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const i={};return e.forEach(a=>{i[a]=n[a]&&n[a].active()?n[a]._to:this[a]}),i}}Ue(Va,"defaults",{}),Ue(Va,"defaultRoutes");function x2e(t,e){const r=t.options.ticks,n=v2e(t),i=Math.min(r.maxTicksLimit||n,n),a=r.major.enabled?b2e(e):[],s=a.length,o=a[0],l=a[s-1],u=[];if(s>i)return w2e(e,u,a,s/i),u;const d=y2e(a,e,i);if(s>0){let f,h;const m=s>1?Math.round((l-o)/(s-1)):null;for(r0(e,u,d,Ht(m)?0:o-m,o),f=0,h=s-1;f<h;f++)r0(e,u,d,a[f],a[f+1]);return r0(e,u,d,l,Ht(m)?e.length:l+m),u}return r0(e,u,d),u}function v2e(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),i=t._maxLength/r;return Math.floor(Math.min(n,i))}function y2e(t,e,r){const n=_2e(t),i=e.length/r;if(!n)return Math.max(i,1);const a=mwe(n);for(let s=0,o=a.length-1;s<o;s++){const l=a[s];if(l>i)return l}return Math.max(i,1)}function b2e(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function w2e(t,e,r,n){let i=0,a=r[0],s;for(n=Math.ceil(n),s=0;s<t.length;s++)s===a&&(e.push(t[s]),i++,a=r[i*n])}function r0(t,e,r,n,i){const a=Ke(n,0),s=Math.min(Ke(i,t.length),t.length);let o=0,l,u,d;for(r=Math.ceil(r),i&&(l=i-n,r=l/Math.floor(l/r)),d=a;d<0;)o++,d=Math.round(a+o*r);for(u=Math.max(a,0);u<s;u++)u===d&&(e.push(t[u]),o++,d=Math.round(a+o*r))}function _2e(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const S2e=t=>t==="left"?"right":t==="right"?"left":t,nO=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,iO=(t,e)=>Math.min(e||t,t);function aO(t,e){const r=[],n=t.length/e,i=t.length;let a=0;for(;a<i;a+=n)r.push(t[Math.floor(a)]);return r}function N2e(t,e,r){const n=t.ticks.length,i=Math.min(e,n-1),a=t._startPixel,s=t._endPixel,o=1e-6;let l=t.getPixelForTick(i),u;if(!(r&&(n===1?u=Math.max(l-a,s-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(i-1))/2,l+=i<e?u:-u,l<a-o||l>s+o)))return l}function j2e(t,e){ct(t,r=>{const n=r.gc,i=n.length/2;let a;if(i>e){for(a=0;a<i;++a)delete r.data[n[a]];n.splice(0,i)}})}function hd(t){return t.drawTicks?t.tickLength:0}function sO(t,e){if(!t.display)return 0;const r=Vr(t.font,e),n=di(t.padding);return(pr(t.text)?t.text.length:1)*r.lineHeight+n.height}function E2e(t,e){return hl(t,{scale:e,type:"scale"})}function T2e(t,e,r){return hl(t,{tick:r,index:e,type:"tick"})}function P2e(t,e,r){let n=OS(t);return(r&&e!=="right"||!r&&e==="right")&&(n=S2e(n)),n}function k2e(t,e,r,n){const{top:i,left:a,bottom:s,right:o,chart:l}=t,{chartArea:u,scales:d}=l;let f=0,h,m,g;const p=s-i,x=o-a;if(t.isHorizontal()){if(m=Lr(n,a,o),nt(r)){const v=Object.keys(r)[0],b=r[v];g=d[v].getPixelForValue(b)+p-e}else r==="center"?g=(u.bottom+u.top)/2+p-e:g=nO(t,r,e);h=o-a}else{if(nt(r)){const v=Object.keys(r)[0],b=r[v];m=d[v].getPixelForValue(b)-x+e}else r==="center"?m=(u.left+u.right)/2-x+e:m=nO(t,r,e);g=Lr(n,s,i),f=r==="left"?-Pi:Pi}return{titleX:m,titleY:g,maxWidth:h,rotation:f}}class Ou extends Va{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:i}=this;return e=Bi(e,Number.POSITIVE_INFINITY),r=Bi(r,Number.NEGATIVE_INFINITY),n=Bi(n,Number.POSITIVE_INFINITY),i=Bi(i,Number.NEGATIVE_INFINITY),{min:Bi(e,n),max:Bi(r,i),minDefined:ui(e),maxDefined:ui(r)}}getMinMax(e){let{min:r,max:n,minDefined:i,maxDefined:a}=this.getUserBounds(),s;if(i&&a)return{min:r,max:n};const o=this.getMatchingVisibleMetas();for(let l=0,u=o.length;l<u;++l)s=o[l].controller.getMinMax(this,e),i||(r=Math.min(r,s.min)),a||(n=Math.max(n,s.max));return r=a&&r>n?n:r,n=i&&r>n?r:n,{min:Bi(r,Bi(n,r)),max:Bi(n,Bi(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Et(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:i,grace:a,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Kwe(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?aO(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=x2e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Et(this.options.afterUpdate,[this])}beforeSetDimensions(){Et(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Et(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Et(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Et(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,i,a;for(n=0,i=e.length;n<i;n++)a=e[n],a.label=Et(r.callback,[a.value,n,e],this)}afterTickToLabelConversion(){Et(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Et(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=iO(this.ticks.length,e.ticks.maxTicksLimit),i=r.minRotation||0,a=r.maxRotation;let s=i,o,l,u;if(!this._isVisible()||!r.display||i>=a||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),f=d.widest.width,h=d.highest.height,m=ii(this.chart.width-f,0,this.maxWidth);o=e.offset?this.maxWidth/n:m/(n-1),f+6>o&&(o=m/(n-(e.offset?.5:1)),l=this.maxHeight-hd(e.grid)-r.padding-sO(e.title,this.chart.options.font),u=Math.sqrt(f*f+h*h),s=xwe(Math.min(Math.asin(ii((d.highest.height+6)/o,-1,1)),Math.asin(ii(l/u,-1,1))-Math.asin(ii(h/u,-1,1)))),s=Math.max(i,Math.min(a,s))),this.labelRotation=s}afterCalculateLabelRotation(){Et(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Et(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:i,grid:a}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const l=sO(i,r.options.font);if(o?(e.width=this.maxWidth,e.height=hd(a)+l):(e.height=this.maxHeight,e.width=hd(a)+l),n.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:h}=this._getLabelSizes(),m=n.padding*2,g=Oo(this.labelRotation),p=Math.cos(g),x=Math.sin(g);if(o){const v=n.mirror?0:x*f.width+p*h.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=n.mirror?0:p*f.width+x*h.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(u,d,x,p)}}this._handleMargins(),o?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,i){const{ticks:{align:a,padding:s},position:o}=this.options,l=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,m=0;l?u?(h=i*e.width,m=n*r.height):(h=n*e.height,m=i*r.width):a==="start"?m=r.width:a==="end"?h=e.width:a!=="inner"&&(h=e.width/2,m=r.width/2),this.paddingLeft=Math.max((h-d+s)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-f+s)*this.width/(this.width-f),0)}else{let d=r.height/2,f=e.height/2;a==="start"?(d=0,f=e.height):a==="end"&&(d=r.height,f=0),this.paddingTop=d+s,this.paddingBottom=f+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Et(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Ht(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=aO(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:i,_longestTextCache:a}=this,s=[],o=[],l=Math.floor(r/iO(r,n));let u=0,d=0,f,h,m,g,p,x,v,b,y,_,w;for(f=0;f<r;f+=l){if(g=e[f].label,p=this._resolveTickFontOptions(f),i.font=x=p.string,v=a[x]=a[x]||{data:{},gc:[]},b=p.lineHeight,y=_=0,!Ht(g)&&!pr(g))y=IA(i,v.data,v.gc,y,g),_=b;else if(pr(g))for(h=0,m=g.length;h<m;++h)w=g[h],!Ht(w)&&!pr(w)&&(y=IA(i,v.data,v.gc,y,w),_+=b);s.push(y),o.push(_),u=Math.max(y,u),d=Math.max(_,d)}j2e(a,r);const N=s.indexOf(u),S=o.indexOf(d),E=T=>({width:s[T]||0,height:o[T]||0});return{first:E(0),last:E(r-1),widest:E(N),highest:E(S),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return bwe(this._alignToPixels?so(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=T2e(this.getContext(),e,n))}return this.$context||(this.$context=E2e(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Oo(this.labelRotation),n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,o=a?a.widest.width+s:0,l=a?a.highest.height+s:0;return this.isHorizontal()?l*n>o*i?o/n:l/i:l*i<o*n?l/n:o/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,i=this.options,{grid:a,position:s,border:o}=i,l=a.offset,u=this.isHorizontal(),f=this.ticks.length+(l?1:0),h=hd(a),m=[],g=o.setContext(this.getContext()),p=g.display?g.width:0,x=p/2,v=function(O){return so(n,O,p)};let b,y,_,w,N,S,E,T,P,A,k,F;if(s==="top")b=v(this.bottom),S=this.bottom-h,T=b-x,A=v(e.top)+x,F=e.bottom;else if(s==="bottom")b=v(this.top),A=e.top,F=v(e.bottom)-x,S=b+x,T=this.top+h;else if(s==="left")b=v(this.right),N=this.right-h,E=b-x,P=v(e.left)+x,k=e.right;else if(s==="right")b=v(this.left),P=e.left,k=v(e.right)-x,N=b+x,E=this.left+h;else if(r==="x"){if(s==="center")b=v((e.top+e.bottom)/2+.5);else if(nt(s)){const O=Object.keys(s)[0],L=s[O];b=v(this.chart.scales[O].getPixelForValue(L))}A=e.top,F=e.bottom,S=b+x,T=S+h}else if(r==="y"){if(s==="center")b=v((e.left+e.right)/2);else if(nt(s)){const O=Object.keys(s)[0],L=s[O];b=v(this.chart.scales[O].getPixelForValue(L))}N=b-x,E=N-h,P=e.left,k=e.right}const H=Ke(i.ticks.maxTicksLimit,f),M=Math.max(1,Math.ceil(f/H));for(y=0;y<f;y+=M){const O=this.getContext(y),L=a.setContext(O),R=o.setContext(O),z=L.lineWidth,J=L.color,W=R.dash||[],C=R.dashOffset,G=L.tickWidth,Y=L.tickColor,I=L.tickBorderDash||[],Q=L.tickBorderDashOffset;_=N2e(this,y,l),_!==void 0&&(w=so(n,_,z),u?N=E=P=k=w:S=T=A=F=w,m.push({tx1:N,ty1:S,tx2:E,ty2:T,x1:P,y1:A,x2:k,y2:F,width:z,color:J,borderDash:W,borderDashOffset:C,tickWidth:G,tickColor:Y,tickBorderDash:I,tickBorderDashOffset:Q}))}return this._ticksLength=f,this._borderValue=b,m}_computeLabelItems(e){const r=this.axis,n=this.options,{position:i,ticks:a}=n,s=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:u,padding:d,mirror:f}=a,h=hd(n.grid),m=h+d,g=f?-d:m,p=-Oo(this.labelRotation),x=[];let v,b,y,_,w,N,S,E,T,P,A,k,F="middle";if(i==="top")N=this.bottom-g,S=this._getXAxisLabelAlignment();else if(i==="bottom")N=this.top+g,S=this._getXAxisLabelAlignment();else if(i==="left"){const M=this._getYAxisLabelAlignment(h);S=M.textAlign,w=M.x}else if(i==="right"){const M=this._getYAxisLabelAlignment(h);S=M.textAlign,w=M.x}else if(r==="x"){if(i==="center")N=(e.top+e.bottom)/2+m;else if(nt(i)){const M=Object.keys(i)[0],O=i[M];N=this.chart.scales[M].getPixelForValue(O)+m}S=this._getXAxisLabelAlignment()}else if(r==="y"){if(i==="center")w=(e.left+e.right)/2-m;else if(nt(i)){const M=Object.keys(i)[0],O=i[M];w=this.chart.scales[M].getPixelForValue(O)}S=this._getYAxisLabelAlignment(h).textAlign}r==="y"&&(l==="start"?F="top":l==="end"&&(F="bottom"));const H=this._getLabelSizes();for(v=0,b=o.length;v<b;++v){y=o[v],_=y.label;const M=a.setContext(this.getContext(v));E=this.getPixelForTick(v)+a.labelOffset,T=this._resolveTickFontOptions(v),P=T.lineHeight,A=pr(_)?_.length:1;const O=A/2,L=M.color,R=M.textStrokeColor,z=M.textStrokeWidth;let J=S;s?(w=E,S==="inner"&&(v===b-1?J=this.options.reverse?"left":"right":v===0?J=this.options.reverse?"right":"left":J="center"),i==="top"?u==="near"||p!==0?k=-A*P+P/2:u==="center"?k=-H.highest.height/2-O*P+P:k=-H.highest.height+P/2:u==="near"||p!==0?k=P/2:u==="center"?k=H.highest.height/2-O*P:k=H.highest.height-A*P,f&&(k*=-1),p!==0&&!M.showLabelBackdrop&&(w+=P/2*Math.sin(p))):(N=E,k=(1-A)*P/2);let W;if(M.showLabelBackdrop){const C=di(M.backdropPadding),G=H.heights[v],Y=H.widths[v];let I=k-C.top,Q=0-C.left;switch(F){case"middle":I-=G/2;break;case"bottom":I-=G;break}switch(S){case"center":Q-=Y/2;break;case"right":Q-=Y;break;case"inner":v===b-1?Q-=Y:v>0&&(Q-=Y/2);break}W={left:Q,top:I,width:Y+C.width,height:G+C.height,color:M.backdropColor}}x.push({label:_,font:T,textOffset:k,options:{rotation:p,color:L,strokeColor:R,strokeWidth:z,textAlign:J,textBaseline:F,translation:[w,N],backdrop:W}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Oo(this.labelRotation))return e==="top"?"left":"right";let i="center";return r.align==="start"?i="left":r.align==="end"?i="right":r.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:i,padding:a}}=this.options,s=this._getLabelSizes(),o=e+a,l=s.widest.width;let u,d;return r==="left"?i?(d=this.right+a,n==="near"?u="left":n==="center"?(u="center",d+=l/2):(u="right",d+=l)):(d=this.right-o,n==="near"?u="right":n==="center"?(u="center",d-=l/2):(u="left",d=this.left)):r==="right"?i?(d=this.left+a,n==="near"?u="right":n==="center"?(u="center",d-=l/2):(u="left",d-=l)):(d=this.left+o,n==="near"?u="left":n==="center"?(u="center",d+=l/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:i,width:a,height:s}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,i,a,s),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?r.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,s;const o=(l,u,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(r.display)for(a=0,s=i.length;a<s;++a){const l=i[a];r.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),r.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:i}}=this,a=n.setContext(this.getContext()),s=n.display?a.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,d,f,h;this.isHorizontal()?(u=so(e,this.left,s)-s/2,d=so(e,this.right,o)+o/2,f=h=l):(f=so(e,this.top,s)-s/2,h=so(e,this.bottom,o)+o/2,u=d=l),r.save(),r.lineWidth=a.width,r.strokeStyle=a.color,r.beginPath(),r.moveTo(u,f),r.lineTo(d,h),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&MS(n,i);const a=this.getLabelItems(e);for(const s of a){const o=s.options,l=s.font,u=s.label,d=s.textOffset;wh(n,u,0,d,l,o)}i&&DS(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:i}}=this;if(!n.display)return;const a=Vr(n.font),s=di(n.padding),o=n.align;let l=a.lineHeight/2;r==="bottom"||r==="center"||nt(r)?(l+=s.bottom,pr(n.text)&&(l+=a.lineHeight*(n.text.length-1))):l+=s.top;const{titleX:u,titleY:d,maxWidth:f,rotation:h}=k2e(this,l,r,o);wh(e,n.text,0,0,a,{color:n.color,maxWidth:f,rotation:h,textAlign:P2e(o,r,i),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=Ke(e.grid&&e.grid.z,-1),i=Ke(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ou.prototype.draw?[{z:r,draw:a=>{this.draw(a)}}]:[{z:n,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:r,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let a,s;for(a=0,s=r.length;a<s;++a){const o=r[a];o[n]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return Vr(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class n0{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;C2e(r)&&(n=this.register(r));const i=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,A2e(e,s,n),this.override&&Kt.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,i=this.scope;n in r&&delete r[n],i&&n in Kt[i]&&(delete Kt[i][n],this.override&&delete Jo[n])}}function A2e(t,e,r){const n=vh(Object.create(null),[r?Kt.get(r):{},Kt.get(e),t.defaults]);Kt.set(e,n),t.defaultRoutes&&O2e(e,t.defaultRoutes),t.descriptors&&Kt.describe(e,t.descriptors)}function O2e(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),i=n.pop(),a=[t].concat(n).join("."),s=e[r].split("."),o=s.pop(),l=s.join(".");Kt.route(a,i,l,o)})}function C2e(t){return"id"in t&&"defaults"in t}class M2e{constructor(){this.controllers=new n0(tf,"datasets",!0),this.elements=new n0(Va,"elements"),this.plugins=new n0(Object,"plugins"),this.scales=new n0(Ou,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(i=>{const a=n||this._getRegistryForType(i);n||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):ct(i,s=>{const o=n||this._getRegistryForType(s);this._exec(e,o,s)})})}_exec(e,r,n){const i=kS(e);Et(n["before"+i],[],n),r[e](n),Et(n["after"+i],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const i=r.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var qi=new M2e;class D2e{constructor(){this._init=[]}notify(e,r,n,i){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(a,e,r,n);return r==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,r,n,i){i=i||{};for(const a of e){const s=a.plugin,o=s[n],l=[r,i,a.options];if(Et(o,l,s)===!1&&i.cancelable)return!1}return!0}invalidate(){Ht(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,i=Ke(n.options&&n.options.plugins,{}),a=$2e(n);return i===!1&&!r?[]:R2e(e,a,i,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,i=(a,s)=>a.filter(o=>!s.some(l=>o.plugin.id===l.plugin.id));this._notify(i(r,n),e,"stop"),this._notify(i(n,r),e,"start")}}function $2e(t){const e={},r=[],n=Object.keys(qi.plugins.items);for(let a=0;a<n.length;a++)r.push(qi.getPlugin(n[a]));const i=t.plugins||[];for(let a=0;a<i.length;a++){const s=i[a];r.indexOf(s)===-1&&(r.push(s),e[s.id]=!0)}return{plugins:r,localIds:e}}function I2e(t,e){return!e&&t===!1?null:t===!0?{}:t}function R2e(t,{plugins:e,localIds:r},n,i){const a=[],s=t.getContext();for(const o of e){const l=o.id,u=I2e(n[l],i);u!==null&&a.push({plugin:o,options:F2e(t.config,{plugin:o,local:r[l]},u,s)})}return a}function F2e(t,{plugin:e,local:r},n,i){const a=t.pluginScopeKeys(e),s=t.getOptionScopes(n,a);return r&&e.defaults&&s.push(e.defaults),t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Kw(t,e){const r=Kt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function L2e(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function B2e(t,e){return t===e?"_index_":"_value_"}function oO(t){if(t==="x"||t==="y"||t==="r")return t}function U2e(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Yw(t,...e){if(oO(t))return t;for(const r of e){const n=r.axis||U2e(r.position)||t.length>1&&oO(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function lO(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function z2e(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return lO(t,"x",r[0])||lO(t,"y",r[0])}return{}}function W2e(t,e){const r=Jo[t.type]||{scales:{}},n=e.scales||{},i=Kw(t.type,e),a=Object.create(null);return Object.keys(n).forEach(s=>{const o=n[s];if(!nt(o))return console.error(`Invalid scale configuration for scale: ${s}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const l=Yw(s,o,z2e(s,t),Kt.scales[o.type]),u=B2e(l,i),d=r.scales||{};a[s]=Xd(Object.create(null),[{axis:l},o,d[l],d[u]])}),t.data.datasets.forEach(s=>{const o=s.type||t.type,l=s.indexAxis||Kw(o,e),d=(Jo[o]||{}).scales||{};Object.keys(d).forEach(f=>{const h=L2e(f,l),m=s[h+"AxisID"]||h;a[m]=a[m]||Object.create(null),Xd(a[m],[{axis:h},n[m],d[f]])})}),Object.keys(a).forEach(s=>{const o=a[s];Xd(o,[Kt.scales[o.type],Kt.scale])}),a}function VR(t){const e=t.options||(t.options={});e.plugins=Ke(e.plugins,{}),e.scales=W2e(t,e)}function HR(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function V2e(t){return t=t||{},t.data=HR(t.data),VR(t),t}const cO=new Map,qR=new Set;function i0(t,e){let r=cO.get(t);return r||(r=e(),cO.set(t,r),qR.add(r)),r}const md=(t,e,r)=>{const n=yg(e,r);n!==void 0&&t.add(n)};class H2e{constructor(e){this._config=V2e(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=HR(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),VR(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return i0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return i0(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return i0(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return i0(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let i=n.get(e);return(!i||r)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,r,n){const{options:i,type:a}=this,s=this._cachedScopes(e,n),o=s.get(r);if(o)return o;const l=new Set;r.forEach(d=>{e&&(l.add(e),d.forEach(f=>md(l,e,f))),d.forEach(f=>md(l,i,f)),d.forEach(f=>md(l,Jo[a]||{},f)),d.forEach(f=>md(l,Kt,f)),d.forEach(f=>md(l,Hw,f))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),qR.has(r)&&s.set(r,u),u}chartOptionScopes(){const{options:e,type:r}=this;return[e,Jo[r]||{},Kt.datasets[r]||{},{type:r},Kt,Hw]}resolveNamedOptions(e,r,n,i=[""]){const a={$shared:!0},{resolver:s,subPrefixes:o}=uO(this._resolverCache,e,i);let l=s;if(G2e(s,r)){a.$shared=!1,n=Bs(n)?n():n;const u=this.createResolver(e,n,o);l=su(s,n,u)}for(const u of r)a[u]=l[u];return a}createResolver(e,r,n=[""],i){const{resolver:a}=uO(this._resolverCache,e,n);return nt(r)?su(a,r,void 0,i):a}}function uO(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=r.join();let a=n.get(i);return a||(a={resolver:$S(e,r),subPrefixes:r.filter(o=>!o.toLowerCase().includes("hover"))},n.set(i,a)),a}const q2e=t=>nt(t)&&Object.getOwnPropertyNames(t).some(e=>Bs(t[e]));function G2e(t,e){const{isScriptable:r,isIndexable:n}=kR(t);for(const i of e){const a=r(i),s=n(i),o=(s||a)&&t[i];if(a&&(Bs(o)||q2e(o))||s&&pr(o))return!0}return!1}var K2e="4.4.7";const Y2e=["top","bottom","left","right","chartArea"];function dO(t,e){return t==="top"||t==="bottom"||Y2e.indexOf(t)===-1&&e==="x"}function fO(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function hO(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),Et(r&&r.onComplete,[t],e)}function X2e(t){const e=t.chart,r=e.options.animation;Et(r&&r.onProgress,[t],e)}function GR(t){return FS()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const I0={},mO=t=>{const e=GR(t);return Object.values(I0).filter(r=>r.canvas===e).pop()};function Q2e(t,e,r){const n=Object.keys(t);for(const i of n){const a=+i;if(a>=e){const s=t[i];delete t[i],(r>0||a>e)&&(t[a+r]=s)}}}function J2e(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}function a0(t,e,r){return t.options.clip?t[r]:e[r]}function Z2e(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:a0(r,e,"left"),right:a0(r,e,"right"),top:a0(n,e,"top"),bottom:a0(n,e,"bottom")}:e}var ss;let hv=(ss=class{static register(...e){qi.add(...e),pO()}static unregister(...e){qi.remove(...e),pO()}constructor(e,r){const n=this.config=new H2e(r),i=GR(e),a=mO(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||g2e(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),l=o&&o.canvas,u=l&&l.height,d=l&&l.width;if(this.id=awe(),this.ctx=o,this.canvas=l,this.width=d,this.height=u,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new D2e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=jwe(f=>this.update(f),s.resizeDelay||0),this._dataChanges=[],I0[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}pa.listen(this,"complete",hO),pa.listen(this,"progress",X2e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:i,_aspectRatio:a}=this;return Ht(e)?r&&a?a:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return qi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():BA(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return RA(this.canvas,this.ctx),this}stop(){return pa.stop(this),this}resize(e,r){pa.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,i=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,r,a),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,BA(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Et(n.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};ct(r,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,i=Object.keys(n).reduce((s,o)=>(s[o]=!1,s),{});let a=[];r&&(a=a.concat(Object.keys(r).map(s=>{const o=r[s],l=Yw(s,o),u=l==="r",d=l==="x";return{options:o,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),ct(a,s=>{const o=s.options,l=o.id,u=Yw(l,o),d=Ke(o.type,s.dtype);(o.position===void 0||dO(o.position,u)!==dO(s.dposition))&&(o.position=s.dposition),i[l]=!0;let f=null;if(l in n&&n[l].type===d)f=n[l];else{const h=qi.getScale(d);f=new h({id:l,type:d,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(o,e)}),ct(i,(s,o)=>{s||delete n[o]}),ct(n,s=>{ai.configure(this,s,s.options),ai.addBox(this,s)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((i,a)=>i.index-a.index),n>r){for(let i=r;i<n;++i)this._destroyDatasetMeta(i);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(fO("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,i)=>{r.filter(a=>a===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=r.length;n<i;n++){const a=r[n];let s=this.getDatasetMeta(n);const o=a.type||this.config.type;if(s.type&&s.type!==o&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=o,s.indexAxis=a.indexAxis||Kw(o,this.options),s.order=a.order||0,s.index=n,s.label=""+a.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const l=qi.getController(o),{datasetElementType:u,dataElementType:d}=Kt.datasets[o];Object.assign(l,{dataElementType:qi.getElement(d),datasetElementType:u&&qi.getElement(u)}),s.controller=new l(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){ct(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),h=!i&&a.indexOf(f)===-1;f.buildOrUpdateElements(h),s=Math.max(+f.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||ct(a,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(fO("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ct(this.scales,e=>{ai.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!TA(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:a}of r){const s=n==="_removeElements"?-a:a;Q2e(e,i,s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=a=>new Set(e.filter(s=>s[0]===a).map((s,o)=>o+","+s.splice(1).join(","))),i=n(0);for(let a=1;a<r;a++)if(!TA(i,n(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ai.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],ct(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Bs(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(r),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pa.has(this)?this.attached&&!pa.running(this)&&pa.start(this):(this.draw(),hO({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let i,a;for(i=0,a=r.length;i<a;++i){const s=r[i];(!e||s.visible)&&n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n=e._clip,i=!n.disabled,a=Z2e(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&MS(r,{left:n.left===!1?0:a.left-n.left,right:n.right===!1?this.width:a.right+n.right,top:n.top===!1?0:a.top-n.top,bottom:n.bottom===!1?this.height:a.bottom+n.bottom}),e.controller.draw(),i&&DS(r),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return bh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,i){const a=Y_e.modes[r];return typeof a=="function"?a(this,e,n,i):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let i=n.filter(a=>a&&a._dataset===r).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=hl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const i=n?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,i);bg(r)?(a.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(a,{visible:n}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),pa.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),RA(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete I0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(a,s)=>{r.addEventListener(this,a,s),e[a]=s},i=(a,s,o)=>{a.offsetX=s,a.offsetY=o,this._eventHandler(a)};ct(this.options.events,a=>n(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(l,u)=>{r.addEventListener(this,l,u),e[l]=u},i=(l,u)=>{e[l]&&(r.removeEventListener(this,l,u),delete e[l])},a=(l,u)=>{this.canvas&&this.resize(l,u)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",a),n("detach",s)};s=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),n("attach",o)},r.isAttached(this.canvas)?o():s()}unbindEvents(){ct(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},ct(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const i=n?"set":"remove";let a,s,o,l;for(r==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){s=e[o];const u=s&&this.getDatasetMeta(s.datasetIndex).controller;u&&u[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:a,index:s})=>{const o=this.getDatasetMeta(a);if(!o)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:o.data[s],index:s}});!xg(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const i=this.options.hover,a=(l,u)=>l.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),s=a(r,e),o=n?e:a(e,r);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},i=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const a=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(a||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:i=[],options:a}=this,s=r,o=this._getActiveElements(e,i,n,s),l=dwe(e),u=J2e(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Et(a.onHover,[e,o,this],this),l&&Et(a.onClick,[e,o,this],this));const d=!xg(o,i);return(d||r)&&(this._active=o,this._updateHoverStyles(o,i,r)),this._lastEvent=u,d}_getActiveElements(e,r,n,i){if(e.type==="mouseout")return[];if(!n)return r;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}},Ue(ss,"defaults",Kt),Ue(ss,"instances",I0),Ue(ss,"overrides",Jo),Ue(ss,"registry",qi),Ue(ss,"version",K2e),Ue(ss,"getChart",mO),ss);function pO(){return ct(hv.instances,t=>t._plugins.invalidate())}function KR(t,e,r=e){t.lineCap=Ke(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Ke(r.borderDash,e.borderDash)),t.lineDashOffset=Ke(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Ke(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ke(r.borderWidth,e.borderWidth),t.strokeStyle=Ke(r.borderColor,e.borderColor)}function eSe(t,e,r){t.lineTo(r.x,r.y)}function tSe(t){return t.stepped?Fwe:t.tension||t.cubicInterpolationMode==="monotone"?Lwe:eSe}function YR(t,e,r={}){const n=t.length,{start:i=0,end:a=n-1}=r,{start:s,end:o}=e,l=Math.max(i,s),u=Math.min(a,o),d=i<s&&a<s||i>o&&a>o;return{count:n,start:l,loop:e.loop,ilen:u<l&&!d?n+u-l:u-l}}function rSe(t,e,r,n){const{points:i,options:a}=e,{count:s,start:o,loop:l,ilen:u}=YR(i,r,n),d=tSe(a);let{move:f=!0,reverse:h}=n||{},m,g,p;for(m=0;m<=u;++m)g=i[(o+(h?u-m:m))%s],!g.skip&&(f?(t.moveTo(g.x,g.y),f=!1):d(t,p,g,h,a.stepped),p=g);return l&&(g=i[(o+(h?u:0))%s],d(t,p,g,h,a.stepped)),!!l}function nSe(t,e,r,n){const i=e.points,{count:a,start:s,ilen:o}=YR(i,r,n),{move:l=!0,reverse:u}=n||{};let d=0,f=0,h,m,g,p,x,v;const b=_=>(s+(u?o-_:_))%a,y=()=>{p!==x&&(t.lineTo(d,x),t.lineTo(d,p),t.lineTo(d,v))};for(l&&(m=i[b(0)],t.moveTo(m.x,m.y)),h=0;h<=o;++h){if(m=i[b(h)],m.skip)continue;const _=m.x,w=m.y,N=_|0;N===g?(w<p?p=w:w>x&&(x=w),d=(f*d+_)/++f):(y(),t.lineTo(_,w),g=N,f=0,p=x=w),v=w}y()}function Xw(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?nSe:rSe}function iSe(t){return t.stepped?v_e:t.tension||t.cubicInterpolationMode==="monotone"?y_e:xo}function aSe(t,e,r,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,r,n)&&i.closePath()),KR(t,e.options),t.stroke(i)}function sSe(t,e,r,n){const{segments:i,options:a}=e,s=Xw(e);for(const o of i)KR(t,a,o.style),t.beginPath(),s(t,e,o,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const oSe=typeof Path2D=="function";function lSe(t,e,r,n){oSe&&!e.options.segment?aSe(t,e,r,n):sSe(t,e,r,n)}class Td extends Va{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;u_e(this._points,n,e,i,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=T_e(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,i=e[r],a=this.points,s=N_e(this,{property:r,start:i,end:i});if(!s.length)return;const o=[],l=iSe(n);let u,d;for(u=0,d=s.length;u<d;++u){const{start:f,end:h}=s[u],m=a[f],g=a[h];if(m===g){o.push(m);continue}const p=Math.abs((i-m[r])/(g[r]-m[r])),x=l(m,g,p,n.stepped);x[r]=e[r],o.push(x)}return o.length===1?o[0]:o}pathSegment(e,r,n){return Xw(this)(e,this,r,n)}path(e,r,n){const i=this.segments,a=Xw(this);let s=this._loop;r=r||0,n=n||this.points.length-r;for(const o of i)s&=a(e,this,o,{start:r,end:r+n-1});return!!s}draw(e,r,n,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),lSe(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ue(Td,"id","line"),Ue(Td,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ue(Td,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ue(Td,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function gO(t,e,r,n){const i=t.options,{[r]:a}=t.getProps([r],n);return Math.abs(e-a)<i.radius+i.hitRadius}class R0 extends Va{constructor(r){super();Ue(this,"parsed");Ue(this,"skip");Ue(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,i){const a=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(r-s,2)+Math.pow(n-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(r,n){return gO(this,r,"x",n)}inYRange(r,n){return gO(this,r,"y",n)}getCenterPoint(r){const{x:n,y:i}=this.getProps(["x","y"],r);return{x:n,y:i}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const i=n&&r.borderWidth||0;return(n+i)*2}draw(r,n){const i=this.options;this.skip||i.radius<.1||!bh(this,n,this.size(i)/2)||(r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.fillStyle=i.backgroundColor,qw(r,i,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}Ue(R0,"id","point"),Ue(R0,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ue(R0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const xO=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},cSe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class vO extends Va{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=Et(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=Vr(n.font),a=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=xO(n,a);let u,d;r.font=i.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(s,a,o,l)+10):(d=this.maxHeight,u=this._fitCols(s,i,o,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,i){const{ctx:a,maxWidth:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],d=i+o;let f=e;a.textAlign="left",a.textBaseline="middle";let h=-1,m=-d;return this.legendItems.forEach((g,p)=>{const x=n+r/2+a.measureText(g.text).width;(p===0||u[u.length-1]+x+2*o>s)&&(f+=d,u[u.length-(p>0?0:1)]=0,m+=d,h++),l[p]={left:0,top:m,row:h,width:x,height:i},u[u.length-1]+=x+o}),f}_fitCols(e,r,n,i){const{ctx:a,maxHeight:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],d=s-e;let f=o,h=0,m=0,g=0,p=0;return this.legendItems.forEach((x,v)=>{const{itemWidth:b,itemHeight:y}=uSe(n,r,a,x,i);v>0&&m+y+2*o>d&&(f+=h+o,u.push({width:h,height:m}),g+=h+o,p++,h=m=0),l[v]={left:g,top:m,col:p,width:b,height:y},h=Math.max(h,b),m+=y+o}),f+=h,u.push({width:h,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:i},rtl:a}}=this,s=pc(a,this.left,this.width);if(this.isHorizontal()){let o=0,l=Lr(n,this.left+i,this.right-this.lineWidths[o]);for(const u of r)o!==u.row&&(o=u.row,l=Lr(n,this.left+i,this.right-this.lineWidths[o])),u.top+=this.top+e+i,u.left=s.leftForLtr(s.x(l),u.width),l+=u.width+i}else{let o=0,l=Lr(n,this.top+e+i,this.bottom-this.columnSizes[o].height);for(const u of r)u.col!==o&&(o=u.col,l=Lr(n,this.top+e+i,this.bottom-this.columnSizes[o].height)),u.top=l,u.left+=this.left+i,u.left=s.leftForLtr(s.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;MS(e,this),this._draw(),DS(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:i}=this,{align:a,labels:s}=e,o=Kt.color,l=pc(e.rtl,this.left,this.width),u=Vr(s.font),{padding:d}=s,f=u.size,h=f/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:g,boxHeight:p,itemHeight:x}=xO(s,f),v=function(N,S,E){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;i.save();const T=Ke(E.lineWidth,1);if(i.fillStyle=Ke(E.fillStyle,o),i.lineCap=Ke(E.lineCap,"butt"),i.lineDashOffset=Ke(E.lineDashOffset,0),i.lineJoin=Ke(E.lineJoin,"miter"),i.lineWidth=T,i.strokeStyle=Ke(E.strokeStyle,o),i.setLineDash(Ke(E.lineDash,[])),s.usePointStyle){const P={radius:p*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:T},A=l.xPlus(N,g/2),k=S+h;TR(i,P,A,k,s.pointStyleWidth&&g)}else{const P=S+Math.max((f-p)/2,0),A=l.leftForLtr(N,g),k=ef(E.borderRadius);i.beginPath(),Object.values(k).some(F=>F!==0)?Gw(i,{x:A,y:P,w:g,h:p,radius:k}):i.rect(A,P,g,p),i.fill(),T!==0&&i.stroke()}i.restore()},b=function(N,S,E){wh(i,E.text,N,S+x/2,u,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},y=this.isHorizontal(),_=this._computeTitleHeight();y?m={x:Lr(a,this.left+d,this.right-n[0]),y:this.top+d+_,line:0}:m={x:this.left+d,y:Lr(a,this.top+_+d,this.bottom-r[0].height),line:0},DR(this.ctx,e.textDirection);const w=x+d;this.legendItems.forEach((N,S)=>{i.strokeStyle=N.fontColor,i.fillStyle=N.fontColor;const E=i.measureText(N.text).width,T=l.textAlign(N.textAlign||(N.textAlign=s.textAlign)),P=g+h+E;let A=m.x,k=m.y;l.setWidth(this.width),y?S>0&&A+P+d>this.right&&(k=m.y+=w,m.line++,A=m.x=Lr(a,this.left+d,this.right-n[m.line])):S>0&&k+w>this.bottom&&(A=m.x=A+r[m.line].width+d,m.line++,k=m.y=Lr(a,this.top+_+d,this.bottom-r[m.line].height));const F=l.x(A);if(v(F,k,N),A=Ewe(T,A+g+h,y?A+P:this.right,e.rtl),b(l.x(A),k,N),y)m.x+=P+d;else if(typeof N.text!="string"){const H=u.lineHeight;m.y+=XR(N,H)+d}else m.y+=w}),$R(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=Vr(r.font),i=di(r.padding);if(!r.display)return;const a=pc(e.rtl,this.left,this.width),s=this.ctx,o=r.position,l=n.size/2,u=i.top+l;let d,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),d=this.top+u,f=Lr(e.align,f,this.right-h);else{const g=this.columnSizes.reduce((p,x)=>Math.max(p,x.height),0);d=u+Lr(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const m=Lr(o,f,f+h);s.textAlign=a.textAlign(OS(o)),s.textBaseline="middle",s.strokeStyle=r.color,s.fillStyle=r.color,s.font=n.string,wh(s,r.text,m,d,n)}_computeTitleHeight(){const e=this.options.title,r=Vr(e.font),n=di(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,i,a;if(jd(e,this.left,this.right)&&jd(r,this.top,this.bottom)){for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(i=a[n],jd(e,i.left,i.left+i.width)&&jd(r,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!hSe(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=cSe(i,n);i&&!a&&Et(r.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!a&&Et(r.onHover,[e,n,this],this)}else n&&Et(r.onClick,[e,n,this],this)}}function uSe(t,e,r,n,i){const a=dSe(n,t,e,r),s=fSe(i,n,e.lineHeight);return{itemWidth:a,itemHeight:s}}function dSe(t,e,r,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((a,s)=>a.length>s.length?a:s)),e+r.size/2+n.measureText(i).width}function fSe(t,e,r){let n=t;return typeof e.text!="string"&&(n=XR(e,r)),n}function XR(t,e){const r=t.text?t.text.length:0;return e*r}function hSe(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var mSe={id:"legend",_element:vO,start(t,e,r){const n=t.legend=new vO({ctx:t.ctx,options:r,chart:t});ai.configure(t,n,r),ai.addBox(t,n)},stop(t){ai.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;ai.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,i=r.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:i,color:a,useBorderRadius:s,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(r?0:void 0),d=di(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:a,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:s&&(o||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class QR extends Va{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const i=pr(n.text)?n.text.length:1;this._padding=di(n.padding);const a=i*Vr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:i,right:a,options:s}=this,o=s.align;let l=0,u,d,f;return this.isHorizontal()?(d=Lr(o,n,a),f=r+e,u=a-n):(s.position==="left"?(d=n+e,f=Lr(o,i,r),l=br*-.5):(d=a-e,f=Lr(o,r,i),l=br*.5),u=i-r),{titleX:d,titleY:f,maxWidth:u,rotation:l}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=Vr(r.font),a=n.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:l,rotation:u}=this._drawArgs(a);wh(e,r.text,0,0,n,{color:r.color,maxWidth:l,rotation:u,textAlign:OS(r.align),textBaseline:"middle",translation:[s,o]})}}function pSe(t,e){const r=new QR({ctx:t.ctx,options:e,chart:t});ai.configure(t,r,e),ai.addBox(t,r),t.titleBlock=r}var gSe={id:"title",_element:QR,start(t,e,r){pSe(t,r)},stop(t){const e=t.titleBlock;ai.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;ai.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pd={average(t){if(!t.length)return!1;let e,r,n=new Set,i=0,a=0;for(e=0,r=t.length;e<r;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n.add(l.x),i+=l.y,++a}}return a===0||n.size===0?!1:{x:[...n].reduce((o,l)=>o+l)/n.size,y:i/a}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,i=Number.POSITIVE_INFINITY,a,s,o;for(a=0,s=t.length;a<s;++a){const l=t[a].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),d=Vw(e,u);d<i&&(i=d,o=l)}}if(o){const l=o.tooltipPosition();r=l.x,n=l.y}return{x:r,y:n}}};function zi(t,e){return e&&(pr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ga(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function xSe(t,e){const{element:r,datasetIndex:n,index:i}=e,a=t.getDatasetMeta(n).controller,{label:s,value:o}=a.getLabelAndValue(i);return{chart:t,label:s,parsed:a.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:o,dataset:a.getDataset(),dataIndex:i,datasetIndex:n,element:r}}function yO(t,e){const r=t.chart.ctx,{body:n,footer:i,title:a}=t,{boxWidth:s,boxHeight:o}=e,l=Vr(e.bodyFont),u=Vr(e.titleFont),d=Vr(e.footerFont),f=a.length,h=i.length,m=n.length,g=di(e.padding);let p=g.height,x=0,v=n.reduce((_,w)=>_+w.before.length+w.lines.length+w.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(p+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const _=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;p+=m*_+(v-m)*l.lineHeight+(v-1)*e.bodySpacing}h&&(p+=e.footerMarginTop+h*d.lineHeight+(h-1)*e.footerSpacing);let b=0;const y=function(_){x=Math.max(x,r.measureText(_).width+b)};return r.save(),r.font=u.string,ct(t.title,y),r.font=l.string,ct(t.beforeBody.concat(t.afterBody),y),b=e.displayColors?s+2+e.boxPadding:0,ct(n,_=>{ct(_.before,y),ct(_.lines,y),ct(_.after,y)}),b=0,r.font=d.string,ct(t.footer,y),r.restore(),x+=g.width,{width:x,height:p}}function vSe(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function ySe(t,e,r,n){const{x:i,width:a}=n,s=r.caretSize+r.caretPadding;if(t==="left"&&i+a+s>e.width||t==="right"&&i-a-s<0)return!0}function bSe(t,e,r,n){const{x:i,width:a}=r,{width:s,chartArea:{left:o,right:l}}=t;let u="center";return n==="center"?u=i<=(o+l)/2?"left":"right":i<=a/2?u="left":i>=s-a/2&&(u="right"),ySe(u,t,e,r)&&(u="center"),u}function bO(t,e,r){const n=r.yAlign||e.yAlign||vSe(t,r);return{xAlign:r.xAlign||e.xAlign||bSe(t,e,r,n),yAlign:n}}function wSe(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function _Se(t,e,r){let{y:n,height:i}=t;return e==="top"?n+=r:e==="bottom"?n-=i+r:n-=i/2,n}function wO(t,e,r,n){const{caretSize:i,caretPadding:a,cornerRadius:s}=t,{xAlign:o,yAlign:l}=r,u=i+a,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:m}=ef(s);let g=wSe(e,o);const p=_Se(e,l,u);return l==="center"?o==="left"?g+=u:o==="right"&&(g-=u):o==="left"?g-=Math.max(d,h)+i:o==="right"&&(g+=Math.max(f,m)+i),{x:ii(g,0,n.width-e.width),y:ii(p,0,n.height-e.height)}}function s0(t,e,r){const n=di(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function _O(t){return zi([],ga(t))}function SSe(t,e,r){return hl(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function SO(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const JR={beforeTitle:ma,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:ma,beforeBody:ma,beforeLabel:ma,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Ht(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:ma,afterBody:ma,beforeFooter:ma,footer:ma,afterFooter:ma};function fn(t,e,r,n){const i=t[e].call(r,n);return typeof i>"u"?JR[e].call(r,n):i}class Qw extends Va{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&r.options.animation&&n.animations,a=new RR(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=SSe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,i=fn(n,"beforeTitle",this,e),a=fn(n,"title",this,e),s=fn(n,"afterTitle",this,e);let o=[];return o=zi(o,ga(i)),o=zi(o,ga(a)),o=zi(o,ga(s)),o}getBeforeBody(e,r){return _O(fn(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,i=[];return ct(e,a=>{const s={before:[],lines:[],after:[]},o=SO(n,a);zi(s.before,ga(fn(o,"beforeLabel",this,a))),zi(s.lines,fn(o,"label",this,a)),zi(s.after,ga(fn(o,"afterLabel",this,a))),i.push(s)}),i}getAfterBody(e,r){return _O(fn(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,i=fn(n,"beforeFooter",this,e),a=fn(n,"footer",this,e),s=fn(n,"afterFooter",this,e);let o=[];return o=zi(o,ga(i)),o=zi(o,ga(a)),o=zi(o,ga(s)),o}_createItems(e){const r=this._active,n=this.chart.data,i=[],a=[],s=[];let o=[],l,u;for(l=0,u=r.length;l<u;++l)o.push(xSe(this.chart,r[l]));return e.filter&&(o=o.filter((d,f,h)=>e.filter(d,f,h,n))),e.itemSort&&(o=o.sort((d,f)=>e.itemSort(d,f,n))),ct(o,d=>{const f=SO(e.callbacks,d);i.push(fn(f,"labelColor",this,d)),a.push(fn(f,"labelPointStyle",this,d)),s.push(fn(f,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=s,this.dataPoints=o,o}update(e,r){const n=this.options.setContext(this.getContext()),i=this._active;let a,s=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const o=Pd[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const l=this._size=yO(this,n),u=Object.assign({},o,l),d=bO(this.chart,n,u),f=wO(n,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,a={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=s,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,i){const a=this.getCaretPosition(e,n,i);r.lineTo(a.x1,a.y1),r.lineTo(a.x2,a.y2),r.lineTo(a.x3,a.y3)}getCaretPosition(e,r,n){const{xAlign:i,yAlign:a}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:f}=ef(o),{x:h,y:m}=e,{width:g,height:p}=r;let x,v,b,y,_,w;return a==="center"?(_=m+p/2,i==="left"?(x=h,v=x-s,y=_+s,w=_-s):(x=h+g,v=x+s,y=_-s,w=_+s),b=x):(i==="left"?v=h+Math.max(l,d)+s:i==="right"?v=h+g-Math.max(u,f)-s:v=this.caretX,a==="top"?(y=m,_=y-s,x=v-s,b=v+s):(y=m+p,_=y+s,x=v+s,b=v-s),w=y),{x1:x,x2:v,x3:b,y1:y,y2:_,y3:w}}drawTitle(e,r,n){const i=this.title,a=i.length;let s,o,l;if(a){const u=pc(n.rtl,this.x,this.width);for(e.x=s0(this,n.titleAlign,n),r.textAlign=u.textAlign(n.titleAlign),r.textBaseline="middle",s=Vr(n.titleFont),o=n.titleSpacing,r.fillStyle=n.titleColor,r.font=s.string,l=0;l<a;++l)r.fillText(i[l],u.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,l+1===a&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,r,n,i,a){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:l,boxWidth:u}=a,d=Vr(a.bodyFont),f=s0(this,"left",a),h=i.x(f),m=l<d.lineHeight?(d.lineHeight-l)/2:0,g=r.y+m;if(a.usePointStyle){const p={radius:Math.min(u,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},x=i.leftForLtr(h,u)+u/2,v=g+l/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,qw(e,p,x,v),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,qw(e,p,x,v)}else{e.lineWidth=nt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const p=i.leftForLtr(h,u),x=i.leftForLtr(i.xPlus(h,1),u-2),v=ef(s.borderRadius);Object.values(v).some(b=>b!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Gw(e,{x:p,y:g,w:u,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Gw(e,{x,y:g+1,w:u-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(p,g,u,l),e.strokeRect(p,g,u,l),e.fillStyle=s.backgroundColor,e.fillRect(x,g+1,u-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:i}=this,{bodySpacing:a,bodyAlign:s,displayColors:o,boxHeight:l,boxWidth:u,boxPadding:d}=n,f=Vr(n.bodyFont);let h=f.lineHeight,m=0;const g=pc(n.rtl,this.x,this.width),p=function(E){r.fillText(E,g.x(e.x+m),e.y+h/2),e.y+=h+a},x=g.textAlign(s);let v,b,y,_,w,N,S;for(r.textAlign=s,r.textBaseline="middle",r.font=f.string,e.x=s0(this,x,n),r.fillStyle=n.bodyColor,ct(this.beforeBody,p),m=o&&x!=="right"?s==="center"?u/2+d:u+2+d:0,_=0,N=i.length;_<N;++_){for(v=i[_],b=this.labelTextColors[_],r.fillStyle=b,ct(v.before,p),y=v.lines,o&&y.length&&(this._drawColorBox(r,e,_,g,n),h=Math.max(f.lineHeight,l)),w=0,S=y.length;w<S;++w)p(y[w]),h=f.lineHeight;ct(v.after,p)}m=0,h=f.lineHeight,ct(this.afterBody,p),e.y-=a}drawFooter(e,r,n){const i=this.footer,a=i.length;let s,o;if(a){const l=pc(n.rtl,this.x,this.width);for(e.x=s0(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=l.textAlign(n.footerAlign),r.textBaseline="middle",s=Vr(n.footerFont),r.fillStyle=n.footerColor,r.font=s.string,o=0;o<a;++o)r.fillText(i[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,r,n,i){const{xAlign:a,yAlign:s}=this,{x:o,y:l}=e,{width:u,height:d}=n,{topLeft:f,topRight:h,bottomLeft:m,bottomRight:g}=ef(i.cornerRadius);r.fillStyle=i.backgroundColor,r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.beginPath(),r.moveTo(o+f,l),s==="top"&&this.drawCaret(e,r,n,i),r.lineTo(o+u-h,l),r.quadraticCurveTo(o+u,l,o+u,l+h),s==="center"&&a==="right"&&this.drawCaret(e,r,n,i),r.lineTo(o+u,l+d-g),r.quadraticCurveTo(o+u,l+d,o+u-g,l+d),s==="bottom"&&this.drawCaret(e,r,n,i),r.lineTo(o+m,l+d),r.quadraticCurveTo(o,l+d,o,l+d-m),s==="center"&&a==="left"&&this.drawCaret(e,r,n,i),r.lineTo(o,l+f),r.quadraticCurveTo(o,l,o+f,l),r.closePath(),r.fill(),i.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,i=n&&n.x,a=n&&n.y;if(i||a){const s=Pd[e.position].call(this,this._active,this._eventPosition);if(!s)return;const o=this._size=yO(this,e),l=Object.assign({},s,this._size),u=bO(r,e,l),d=wO(e,l,u,r);(i._to!==d.x||a._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=di(r.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,i,r),DR(e,r.textDirection),a.y+=s.top,this.drawTitle(a,e,r),this.drawBody(a,e,r),this.drawFooter(a,e,r),$R(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,i=e.map(({datasetIndex:o,index:l})=>{const u=this.chart.getDatasetMeta(o);if(!u)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:u.data[l],index:l}}),a=!xg(n,i),s=this._positionChanged(i,r);(a||s)&&(this._active=i,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],s=this._getActiveElements(e,a,r,n),o=this._positionChanged(s,e),l=r||!xg(s,a)||o;return l&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),l}_getActiveElements(e,r,n,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return r.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const s=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&s.reverse(),s}_positionChanged(e,r){const{caretX:n,caretY:i,options:a}=this,s=Pd[a.position].call(this,e,r);return s!==!1&&(n!==s.x||i!==s.y)}}Ue(Qw,"positioners",Pd);var NSe={id:"tooltip",_element:Qw,positioners:Pd,afterInit(t,e,r){r&&(t.tooltip=new Qw({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:JR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const jSe=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function ESe(t,e,r,n){const i=t.indexOf(e);if(i===-1)return jSe(t,e,r,n);const a=t.lastIndexOf(e);return i!==a?r:i}const TSe=(t,e)=>t===null?null:ii(Math.round(t),0,e);function NO(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Jw extends Ou{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:i,label:a}of r)n[i]===a&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Ht(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:ESe(n,e,Ke(r,e),this._addedLabels),TSe(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,i=[];let a=this.getLabels();a=e===0&&r===a.length-1?a:a.slice(e,r+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=r;s++)i.push({value:s});return i}getLabelForValue(e){return NO.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ue(Jw,"id","category"),Ue(Jw,"defaults",{ticks:{callback:NO}});function PSe(t,e){const r=[],{bounds:i,step:a,min:s,max:o,precision:l,count:u,maxTicks:d,maxDigits:f,includeBounds:h}=t,m=a||1,g=d-1,{min:p,max:x}=e,v=!Ht(s),b=!Ht(o),y=!Ht(u),_=(x-p)/(f+1);let w=kA((x-p)/g/m)*m,N,S,E,T;if(w<1e-14&&!v&&!b)return[{value:p},{value:x}];T=Math.ceil(x/w)-Math.floor(p/w),T>g&&(w=kA(T*w/g/m)*m),Ht(l)||(N=Math.pow(10,l),w=Math.ceil(w*N)/N),i==="ticks"?(S=Math.floor(p/w)*w,E=Math.ceil(x/w)*w):(S=p,E=x),v&&b&&a&&pwe((o-s)/a,w/1e3)?(T=Math.round(Math.min((o-s)/w,d)),w=(o-s)/T,S=s,E=o):y?(S=v?s:S,E=b?o:E,T=u-1,w=(E-S)/T):(T=(E-S)/w,Qd(T,Math.round(T),w/1e3)?T=Math.round(T):T=Math.ceil(T));const P=Math.max(AA(w),AA(S));N=Math.pow(10,Ht(l)?P:l),S=Math.round(S*N)/N,E=Math.round(E*N)/N;let A=0;for(v&&(h&&S!==s?(r.push({value:s}),S<s&&A++,Qd(Math.round((S+A*w)*N)/N,s,jO(s,_,t))&&A++):S<s&&A++);A<T;++A){const k=Math.round((S+A*w)*N)/N;if(b&&k>o)break;r.push({value:k})}return b&&h&&E!==o?r.length&&Qd(r[r.length-1].value,o,jO(o,_,t))?r[r.length-1].value=o:r.push({value:o}):(!b||E===o)&&r.push({value:E}),r}function jO(t,e,{horizontal:r,minRotation:n}){const i=Oo(n),a=(r?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+t).length;return Math.min(e/a,s)}class kSe extends Ou{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Ht(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:i,max:a}=this;const s=l=>i=r?i:l,o=l=>a=n?a:l;if(e){const l=au(i),u=au(a);l<0&&u<0?o(0):l>0&&u>0&&s(0)}if(i===a){let l=a===0?1:Math.abs(a*.05);o(a+l),e||s(i-l)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),r=r||11),r&&(i=Math.min(r,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},a=this._range||this,s=PSe(i,a);return e.bounds==="ticks"&&gwe(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-r)/Math.max(e.length-1,1)/2;r-=i,n+=i}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return NR(e,this.chart.options.locale,this.options.ticks.format)}}class Zw extends kSe{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=ui(e)?e:0,this.max=ui(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Oo(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ue(Zw,"id","linear"),Ue(Zw,"defaults",{ticks:{callback:ER.formatters.numeric}});const mv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pn=Object.keys(mv);function EO(t,e){return t-e}function TO(t,e){if(Ht(e))return null;const r=t._adapter,{parser:n,round:i,isoWeekday:a}=t._parseOpts;let s=e;return typeof n=="function"&&(s=n(s)),ui(s)||(s=typeof n=="string"?r.parse(s,n):r.parse(s)),s===null?null:(i&&(s=i==="week"&&(yh(a)||a===!0)?r.startOf(s,"isoWeek",a):r.startOf(s,i)),+s)}function PO(t,e,r,n){const i=pn.length;for(let a=pn.indexOf(t);a<i-1;++a){const s=mv[pn[a]],o=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((r-e)/(o*s.size))<=n)return pn[a]}return pn[i-1]}function ASe(t,e,r,n,i){for(let a=pn.length-1;a>=pn.indexOf(r);a--){const s=pn[a];if(mv[s].common&&t._adapter.diff(i,n,s)>=e-1)return s}return pn[r?pn.indexOf(r):0]}function OSe(t){for(let e=pn.indexOf(t)+1,r=pn.length;e<r;++e)if(mv[pn[e]].common)return pn[e]}function kO(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:i}=AS(r,e),a=r[n]>=e?r[n]:r[i];t[a]=!0}}function CSe(t,e,r,n){const i=t._adapter,a=+i.startOf(e[0].value,n),s=e[e.length-1].value;let o,l;for(o=a;o<=s;o=+i.add(o,1,n))l=r[o],l>=0&&(e[l].major=!0);return e}function AO(t,e,r){const n=[],i={},a=e.length;let s,o;for(s=0;s<a;++s)o=e[s],i[o]=s,n.push({value:o,major:!1});return a===0||!r?n:CSe(t,n,i,r)}class Ng extends Ou{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),i=this._adapter=new V_e._date(e.adapters.date);i.init(r),Xd(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:TO(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:i,max:a,minDefined:s,maxDefined:o}=this.getUserBounds();function l(u){!s&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!o&&!isNaN(u.max)&&(a=Math.max(a,u.max))}(!s||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ui(i)&&!isNaN(i)?i:+r.startOf(Date.now(),n),a=ui(a)&&!isNaN(a)?a:+r.endOf(Date.now(),n)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,s=this.max,o=_we(i,a,s);return this._unit=r.unit||(n.autoSkip?PO(r.minUnit,this.min,this.max,this._getLabelCapacity(a)):ASe(this,o.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:OSe(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),AO(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?r=1-i:r=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?n=a:n=(a-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;r=ii(r,0,s),n=ii(n,0,s),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,i=this.options,a=i.time,s=a.unit||PO(a.minUnit,r,n,this._getLabelCapacity(r)),o=Ke(i.ticks.stepSize,1),l=s==="week"?a.isoWeekday:!1,u=yh(l)||l===!0,d={};let f=r,h,m;if(u&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,u?"day":s),e.diff(n,r,s)>1e5*o)throw new Error(r+" and "+n+" are too far apart with stepSize of "+o+" "+s);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(h=f,m=0;h<n;h=+e.add(h,o,s),m++)kO(d,h,g);return(h===n||i.bounds==="ticks"||m===1)&&kO(d,h,g),Object.keys(d).sort(EO).map(p=>+p)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const i=this.options.time.displayFormats,a=this._unit,s=r||i[a];return this._adapter.format(e,s)}_tickFormatFunction(e,r,n,i){const a=this.options,s=a.ticks.callback;if(s)return Et(s,[e,r,n],this);const o=a.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&o[l],f=u&&o[u],h=n[r],m=u&&f&&h&&h.major;return this._adapter.format(e,i||(m?f:d))}generateTickLabels(e){let r,n,i;for(r=0,n=e.length;r<n;++r)i=e[r],i.label=this._tickFormatFunction(i.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,i=Oo(this.isHorizontal()?r.maxRotation:r.minRotation),a=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*a+o*s,h:n*s+o*a}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,i=n[r.unit]||n.millisecond,a=this._tickFormatFunction(e,0,AO(this,[e],this._majorUnit),i),s=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(r=0,n=i.length;r<n;++r)e=e.concat(i[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const i=this.getLabels();for(r=0,n=i.length;r<n;++r)e.push(TO(this,i[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Nwe(e.sort(EO))}}Ue(Ng,"id","time"),Ue(Ng,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function o0(t,e,r){let n=0,i=t.length-1,a,s,o,l;r?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=Co(t,"pos",e)),{pos:a,time:o}=t[n],{pos:s,time:l}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=Co(t,"time",e)),{time:a,pos:o}=t[n],{time:s,pos:l}=t[i]);const u=s-a;return u?o+(l-o)*(e-a)/u:o}class OO extends Ng{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=o0(r,this.min),this._tableRange=o0(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,i=[],a=[];let s,o,l,u,d;for(s=0,o=e.length;s<o;++s)u=e[s],u>=r&&u<=n&&i.push(u);if(i.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)d=i[s+1],l=i[s-1],u=i[s],Math.round((d+l)/2)!==u&&a.push({time:u,pos:s/(o-1)});return a}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(o0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return o0(this._table,n*this._tableRange+this._minPos,!0)}}Ue(OO,"id","timeseries"),Ue(OO,"defaults",Ng.defaults);const ZR="label";function CO(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function MSe(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function e6(t,e){t.labels=e}function t6(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ZR;const n=[];t.datasets=e.map(i=>{const a=t.datasets.find(s=>s[r]===i[r]);return!a||!i.data||n.includes(a)?{...i}:(n.push(a),Object.assign(a,i),a)})}function DSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ZR;const r={labels:[],datasets:[]};return e6(r,t.labels),t6(r,t.datasets,e),r}function $Se(t,e){const{height:r=150,width:n=300,redraw:i=!1,datasetIdKey:a,type:s,data:o,options:l,plugins:u=[],fallbackContent:d,updateMode:f,...h}=t,m=j.useRef(null),g=j.useRef(null),p=()=>{m.current&&(g.current=new hv(m.current,{type:s,data:DSe(o,a),options:l&&{...l},plugins:u}),CO(e,g.current))},x=()=>{CO(e,null),g.current&&(g.current.destroy(),g.current=null)};return j.useEffect(()=>{!i&&g.current&&l&&MSe(g.current,l)},[i,l]),j.useEffect(()=>{!i&&g.current&&e6(g.current.config.data,o.labels)},[i,o.labels]),j.useEffect(()=>{!i&&g.current&&o.datasets&&t6(g.current.config.data,o.datasets,a)},[i,o.datasets]),j.useEffect(()=>{g.current&&(i?(x(),setTimeout(p)):g.current.update(f))},[i,l,o.labels,o.datasets,f]),j.useEffect(()=>{g.current&&(x(),setTimeout(p))},[s]),j.useEffect(()=>(p(),()=>x()),[]),X.createElement("canvas",{ref:m,role:"img",height:r,width:n,...h},d)}const ISe=j.forwardRef($Se);function RSe(t,e){return hv.register(e),j.forwardRef((r,n)=>X.createElement(ISe,{...r,ref:n,type:t}))}const FSe=RSe("line",D0);hv.register(Jw,Zw,R0,Td,gSe,NSe,mSe);function LSe({cashRecords:t,language:e}){const r=[...t].reverse(),n={labels:r.map(a=>new Date(a.transaction_date).toLocaleDateString()),datasets:[{label:e==="ar"?"إجمالي النقد":"Total Cash",data:r.map(a=>a.new_total_cash),borderColor:"rgb(30, 64, 175)",backgroundColor:"rgba(30, 64, 175, 0.1)",borderWidth:2,tension:.4},{label:e==="ar"?"الإضافات النقدية":"Cash Additions",data:r.map(a=>a.cash_additions),borderColor:"rgb(185, 28, 28)",backgroundColor:"rgba(185, 28, 28, 0.1)",borderWidth:2,tension:.4}]},i={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{padding:20,font:{size:14}}},title:{display:!0,text:e==="ar"?"تتبع النقد":"Cash Tracking",padding:20,font:{size:18}}},scales:{y:{beginAtZero:!0,ticks:{padding:10,font:{size:13}}},x:{ticks:{padding:10,font:{size:13}}}},layout:{padding:{left:20,right:20,top:0,bottom:10}}};return c.jsx("div",{className:"w-full h-[600px] px-4",children:c.jsx(FSe,{options:i,data:n})})}function BSe({value:t,onChange:e,className:r=""}){const{language:n}=_e(),i=n==="ar"?gh:Oc,a=l=>$e(l,"dd/MM/yyyy",{locale:i}),s=l=>{const u=l.target.value?new Date(l.target.value):null;if(!u){e(null);return}e({from:u,to:(t==null?void 0:t.to)||u})},o=l=>{const u=l.target.value?new Date(l.target.value):null;if(!u||!(t!=null&&t.from)){e(null);return}e({from:t.from,to:u})};return c.jsxs("div",{className:`flex gap-4 items-center ${n==="ar"?"flex-row-reverse":""} ${r}`,children:[c.jsx(Ho,{className:"w-5 h-5 text-gray-400"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm text-gray-600 mb-1",children:n==="ar"?"من":"From"}),c.jsx("input",{type:"date",value:t!=null&&t.from?$e(t.from,"yyyy-MM-dd"):"",max:t!=null&&t.to?$e(t.to,"yyyy-MM-dd"):void 0,onChange:s,className:"border rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),(t==null?void 0:t.from)&&c.jsx("span",{className:"text-sm text-gray-500 mt-1",children:a(t.from)})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm text-gray-600 mb-1",children:n==="ar"?"إلى":"To"}),c.jsx("input",{type:"date",value:t!=null&&t.to?$e(t.to,"yyyy-MM-dd"):"",min:t!=null&&t.from?$e(t.from,"yyyy-MM-dd"):void 0,onChange:o,className:"border rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),(t==null?void 0:t.to)&&c.jsx("span",{className:"text-sm text-gray-500 mt-1",children:a(t.to)})]})]})}function USe(){const{language:t}=_e(),{user:e}=qe(),{getCurrentBranch:r}=tr(),n=pR[t],[i,a]=j.useState(!0),[s,o]=j.useState(null),[l,u]=j.useState([]),[d,f]=j.useState("today"),[h,m]=j.useState($e(At(new Date),"yyyy-MM-dd")),[g,p]=j.useState($e(ei(new Date),"yyyy-MM-dd")),[x,v]=j.useState(!1),[b,y]=j.useState([]),[_,w]=j.useState(""),N=r();j.useEffect(()=>{(async()=>{var O;try{const{data:L,error:R}=await oe.from("profiles").select("role, main_branch").eq("user_id",e==null?void 0:e.id).single();if(R)throw R;if(L.role==="cashier")w(L.main_branch);else{const{data:z,error:J}=await oe.from("branches").select("branch_id, branch_name").eq("business_code",e==null?void 0:e.businessCode).eq("is_active",!0);if(J)throw J;y(z||[]),w((N==null?void 0:N.branch_name)||((O=z[0])==null?void 0:O.branch_name))}}catch(L){console.error("Error fetching user or branches:",L),o(n.errorLoadingRecords)}})()},[e==null?void 0:e.id,e==null?void 0:e.businessCode,N]),j.useEffect(()=>{e!=null&&e.businessCode&&_&&S()},[e==null?void 0:e.businessCode,_,d]);const S=async()=>{try{a(!0),o(null);const{startDate:M,endDate:O}=E(d),L=await ube(e.businessCode,{branchName:_,startDate:M,endDate:O});u(L)}catch(M){console.error("Error loading cash records:",M),o(n.errorLoadingRecords)}finally{a(!1)}},E=M=>{const O=new Date;switch(M){case"today":return{startDate:$e(At(O),"yyyy-MM-dd"),endDate:$e(ei(O),"yyyy-MM-dd")};case"week":return{startDate:$e(qo(O,{weekStartsOn:1}),"yyyy-MM-dd"),endDate:$e(o5(O,{weekStartsOn:1}),"yyyy-MM-dd")};case"month":return{startDate:$e(s5(O),"yyyy-MM-dd"),endDate:$e(a5(O),"yyyy-MM-dd")};case"custom":return{startDate:h,endDate:g}}},T=M=>{m(M),f("custom")},P=M=>{p(M),f("custom")},A=j.useMemo(()=>l.reduce((M,O)=>(O.cash_change_reason==="sale"?M.totalSales+=O.cash_additions||0:O.cash_change_reason==="return"?M.totalReturns+=O.cash_removals||0:(O.cash_additions>0&&(M.totalManualAdditions+=O.cash_additions),O.cash_removals>0&&(M.totalManualRemovals+=O.cash_removals)),M),{totalSales:0,totalReturns:0,totalManualAdditions:0,totalManualRemovals:0}),[l]),k=j.useMemo(()=>l.map(M=>({id:M.tracking_id,type:M.cash_additions>0?"deposit":"withdrawal",amount:M.cash_additions>0?M.cash_additions:M.cash_removals,reason:M.cash_change_reason||"",date:M.created_at,balanceAfter:M.new_total_cash})).sort((M,O)=>new Date(M.date).getTime()-new Date(O.date).getTime()),[l]),F=j.useMemo(()=>{var M;return((M=l[0])==null?void 0:M.new_total_cash)||0},[l]);j.useMemo(()=>l.reduce((M,O)=>M+(O.cash_additions||0),0),[l]),j.useMemo(()=>l.reduce((M,O)=>M+(O.cash_removals||0),0),[l]);const H=async(M,O,L)=>{try{if(!_)throw new Error("No branch selected");const{data:R}=await oe.from("profiles").select("business_name").eq("business_code",e.businessCode).single(),z=(R==null?void 0:R.business_name)||e.businessCode;await oe.from("transactions_overall").insert({business_code:e.businessCode,business_name:z,branch_name:_,transaction_type:M==="deposit"?"cash_addition":"cash_removal",transaction_reason:L,amount:O,currency:"OMR",owner_profit_from_this_transcation:M==="withdrawal"?-O:O,payment_method:"cash",details:{type:M,cashier:e.name,description:L}}),await wS(e.businessCode,_,e.name,M==="deposit"?O:-O,L),await S()}catch(R){throw console.error("Error processing transaction:",R),R}};return c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h1",{className:"text-2xl font-bold",children:n.cashDrawer}),c.jsxs("div",{className:"flex flex-col gap-4",children:[((e==null?void 0:e.role)==="owner"||(e==null?void 0:e.role)==="manager")&&b.length>0&&c.jsx("select",{value:_,onChange:M=>w(M.target.value),className:"border rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:b.map(M=>c.jsx("option",{value:M.branch_name,children:M.branch_name},M.branch_id))}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>{f("today"),v(!1)},className:`px-4 py-2 rounded-md transition-colors ${d==="today"&&!x?"bg-indigo-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:n.today}),c.jsx("button",{onClick:()=>{f("week"),v(!1)},className:`px-4 py-2 rounded-md transition-colors ${d==="week"&&!x?"bg-indigo-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:n.thisWeek}),c.jsx("button",{onClick:()=>{f("month"),v(!1)},className:`px-4 py-2 rounded-md transition-colors ${d==="month"&&!x?"bg-indigo-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:n.thisMonth}),c.jsxs("button",{onClick:()=>v(!x),className:`px-4 py-2 rounded-md transition-colors flex items-center gap-2 ${x?"bg-indigo-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[c.jsx(Ho,{className:"w-4 h-4"}),t==="ar"?"تاريخ مخصص":"Custom Range"]})]}),x&&c.jsx("div",{className:"bg-white p-4 rounded-lg shadow-lg border",children:c.jsx(BSe,{startDate:h,endDate:g,onStartDateChange:T,onEndDateChange:P,maxDate:$e(new Date,"yyyy-MM-dd"),minDate:$e(Cf(new Date,12),"yyyy-MM-dd")})})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-gray-200",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:n.newTransaction}),c.jsx(I1e,{onTransaction:H})]}),c.jsx("div",{className:"text-sm text-gray-600",children:(()=>{const{startDate:M,endDate:O}=E(d);return`${n.showing}: ${$e(new Date(M),"dd/MM/yyyy")} - ${$e(new Date(O),"dd/MM/yyyy")}`})()}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:c.jsx(kf,{className:"w-6 h-6 text-green-600"})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:n.currentBalance}),c.jsxs("p",{className:"text-3xl font-bold mt-1",children:[F.toFixed(3)," ",n.currency]})]})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:c.jsx(i9,{className:"w-6 h-6 text-blue-600"})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:n.totalDeposits}),c.jsxs("p",{className:"text-3xl font-bold mt-1",children:[k.filter(M=>M.type==="deposit").reduce((M,O)=>M+O.amount,0).toFixed(3)," ",n.currency]})]})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:c.jsx(r9,{className:"w-6 h-6 text-red-600"})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:n.totalWithdrawals}),c.jsxs("p",{className:"text-3xl font-bold mt-1",children:[k.filter(M=>M.type==="withdrawal").reduce((M,O)=>M+O.amount,0).toFixed(3)," ",n.currency]})]})]})}),c.jsxs("div",{className:"col-span-full grid grid-cols-1 md:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:n.totalSales}),c.jsxs("p",{className:"mt-2 text-lg font-semibold text-gray-900",children:[A.totalSales.toFixed(3)," ",n.currency]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:n.totalReturns}),c.jsxs("p",{className:"mt-2 text-lg font-semibold text-red-600",children:[A.totalReturns.toFixed(3)," ",n.currency]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:n.manualAdditions}),c.jsxs("p",{className:"mt-2 text-lg font-semibold text-green-600",children:[A.totalManualAdditions.toFixed(3)," ",n.currency]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:n.manualRemovals}),c.jsxs("p",{className:"mt-2 text-lg font-semibold text-yellow-600",children:[A.totalManualRemovals.toFixed(3)," ",n.currency]})]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow p-6 col-span-full",children:c.jsx(LSe,{cashRecords:l,language:t})})]}),i?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:n.loading})}):s?c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:s}):c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(Q7,{className:"w-5 h-5 text-gray-500"}),c.jsx("h2",{className:"text-lg font-semibold",children:n.transactionHistory})]})}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.date}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.cashier}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.type}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.amount}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.reason}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.previousBalance}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.newBalance})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((M,O)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(M.created_at).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.cashier_name||"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${M.cash_additions>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:M.cash_additions>0?n.deposit:n.withdrawal})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[(M.cash_additions||M.cash_removals).toFixed(3)," ",n.currency]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`text-sm ${M.cash_change_reason==="sale"?"text-green-600":M.cash_change_reason==="return"?"text-red-600":"text-gray-500"}`,children:M.cash_change_reason==="sale"?n.sale:M.cash_change_reason==="return"?n.return:M.cash_change_reason})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[M.previous_total_cash.toFixed(3)," ",n.currency]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[M.new_total_cash.toFixed(3)," ",n.currency]})]},M.tracking_id))})]}),c.jsx("div",{className:"p-4 border-t bg-gray-50",children:c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-500",children:n.netCashFlow}),c.jsxs("p",{className:`mt-1 text-lg font-semibold ${A.totalSales+A.totalManualAdditions-A.totalReturns-A.totalManualRemovals>0?"text-green-600":"text-red-600"}`,children:[(A.totalSales+A.totalManualAdditions-A.totalReturns-A.totalManualRemovals).toFixed(3)," ",n.currency]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-500",children:n.totalTransactions}),c.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:l.length})]})]})})]})]})]})})}const Cu={ar:{reports:"التقارير",selectDate:"اختر التاريخ",exportReport:"تصدير التقرير",monthlySales:"المبيعات الشهرية",topSellingProducts:"المنتجات الأكثر مبيعاً",customerAnalytics:"تحليل العملاء",inventory:"المخزون",chartComingSoon:"سيتم إضافة الرسم البياني هنا",loading:"جاري التحميل...",transactionSummary:"ملخص المعاملات",totalTransactions:"إجمالي المعاملات",ownerSales:"مبيعات المالك",vendorSales:"مبيعات المورد",paymentMethods:"طرق الدفع",method:"الطريقة",count:"العدد",amount:"المبلغ",profit:"الربح",selectReport:"اختر التقرير",transactions:"المعاملات",sales:"المبيعات",products:"المنتجات",comingSoon:"قريباً",selectPeriod:"اختر الفترة",today:"اليوم",yesterday:"الأمس",last7days:"آخر 7 أيام",last30days:"آخر 30 يوم",thisWeek:"هذا الأسبوع",thisMonth:"هذا الشهر",custom:"مخصص",startDate:"تاريخ البداية",endDate:"تاريخ النهاية",filters:"التصفية",paymentMethod:"طريقة الدفع",transactionType:"نوع المعاملة",status:"الحالة",vendor:"المورد",minAmount:"الحد الأدنى للمبلغ",maxAmount:"الحد الأقصى للمبلغ",search:"بحث",sortBy:"ترتيب حسب",sortOrder:"اتجاه الترتيب",ascending:"تصاعدي",descending:"تنازلي",date:"التاريخ",branch:"الفرع",customer:"العميل",phone:"الهاتف",recentTransactions:"آخر المعاملات",noTransactions:"لا توجد معاملات",clearFilters:"مسح التصفية",applyFilters:"تطبيق التصفية",sale:"بيع منتج",cash_removal:"سحب كاش",cash_addition:"إضافة كاش",rental_income:"مبلغ من الإيجار",vendor_sale:"بيع منتج من مورد",tax:"ضريبة شهرية على مورد",cash:"كاش",card:"بطاقة",transfer:"تحويل",completed:"مكتمل",pending:"قيد الانتظار",cancelled:"ملغي",details:"التفاصيل",ownerProfit:"ربح المالك",currency:"العملة",transactionId:"معرف المعاملة",businessName:"اسم الشركة",vendorName:"اسم مورد",transactionReason:"السبب",transactionType:"النوع",downloadExcel:"تحميل كملف Excel",exportReport:"تصدير التقرير"},en:{reports:"Reports",selectDate:"Select Date",exportReport:"Export Report",monthlySales:"Monthly Sales",topSellingProducts:"Top Selling Products",customerAnalytics:"Customer Analytics",inventory:"Inventory",chartComingSoon:"Chart will be added here",loading:"Loading...",transactionSummary:"Transaction Summary",totalTransactions:"Total Transactions",ownerSales:"Owner Sales",vendorSales:"Vendor Sales",paymentMethods:"Payment Methods",method:"Method",count:"Count",amount:"Amount",profit:"Profit",selectReport:"Select Report",transactions:"Transactions",sales:"Sales",products:"Products",comingSoon:"Coming Soon",selectPeriod:"Select Period",today:"Today",yesterday:"Yesterday",last7days:"Last 7 Days",last30days:"Last 30 Days",thisWeek:"This Week",thisMonth:"This Month",custom:"Custom",startDate:"Start Date",endDate:"End Date",filters:"Filters",paymentMethod:"Payment Method",transactionType:"Transaction Type",status:"Status",vendor:"Vendor",minAmount:"Min Amount",maxAmount:"Max Amount",search:"Search",sortBy:"Sort By",sortOrder:"Sort Order",ascending:"Ascending",descending:"Descending",date:"Date",branch:"Branch",customer:"Customer",phone:"Phone",recentTransactions:"Recent Transactions",noTransactions:"No transactions found",clearFilters:"Clear Filters",applyFilters:"Apply Filters",sale:"Product Sale",cash_removal:"Cash Removal",cash_addition:"Cash Addition",rental_income:"Rental Income",vendor_sale:"Vendor Sale",tax:"Monthly Vendor Tax",cash:"Cash",card:"Card",transfer:"Transfer",completed:"Completed",pending:"Pending",cancelled:"Cancelled",details:"Details",ownerProfit:"Owner Profit",currency:"Currency",transactionId:"Transaction ID",businessName:"Business Name",vendorName:"Vendor Name",transactionReason:"Reason",transactionType:"Type",downloadExcel:"Download as Excel",exportReport:"Export Report"}};function zSe({selectedPeriod:t,onPeriodChange:e,onCustomDateChange:r,customStartDate:n,customEndDate:i}){const{language:a}=_e(),s=Cu[a],o=l=>{const{name:u,value:d}=l.target;u==="startDate"?r(d,i||""):r(n||"",d)};return c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[c.jsx("h3",{className:`text-sm font-medium text-gray-700 mb-3 ${a==="ar"?"text-right":"text-left"}`,children:s.selectPeriod}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-7 gap-2",children:[c.jsx("button",{onClick:()=>e("today"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="today"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.today}),c.jsx("button",{onClick:()=>e("yesterday"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="yesterday"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.yesterday}),c.jsx("button",{onClick:()=>e("last7days"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="last7days"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.last7days}),c.jsx("button",{onClick:()=>e("last30days"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="last30days"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.last30days}),c.jsx("button",{onClick:()=>e("thisWeek"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="thisWeek"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.thisWeek}),c.jsx("button",{onClick:()=>e("thisMonth"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="thisMonth"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.thisMonth}),c.jsx("button",{onClick:()=>e("custom"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t==="custom"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.custom})]}),t==="custom"&&c.jsxs("div",{className:`mt-4 grid grid-cols-2 gap-4 ${a==="ar"?"text-right":"text-left"}`,children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:s.startDate}),c.jsx("input",{type:"date",id:"startDate",name:"startDate",value:n,onChange:o,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:s.endDate}),c.jsx("input",{type:"date",id:"endDate",name:"endDate",value:i,onChange:o,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}function WSe({title:t,data:e,renderContent:r}){const{language:n}=_e(),i=Cu[n];return c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:t}),c.jsx("div",{className:"aspect-[4/3] bg-gray-50 rounded-lg",children:e.isLoading?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-500",children:i.loading})}):e.error?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-red-500",children:e.error})}):r(e.data)})]})}function VSe({fetchData:t,dependencies:e=[]}){const[r,n]=j.useState(null),[i,a]=j.useState(!0),[s,o]=j.useState(null);return j.useEffect(()=>{(async()=>{try{a(!0),o(null);const u=await t();n(u)}catch(u){o(u instanceof Error?u.message:"An error occurred"),n(null)}finally{a(!1)}})()},e),{isLoading:i,error:s,data:r}}function HSe({businessCode:t,branchName:e,startDate:r,endDate:n,filters:i={}}){return VSe({fetchData:async()=>{const a=At(cE(r)),s=ei(cE(n));console.log("Fetching transactions for date range:",{start:a.toISOString(),end:s.toISOString(),businessCode:t,branchName:e});let o=oe.from("transactions_overall").select("*").eq("business_code",t).gte("transaction_date",a.toISOString()).lte("transaction_date",s.toISOString());e!=="all"&&(o=o.eq("branch_name",e)),i.paymentMethod&&(o=o.eq("payment_method",i.paymentMethod)),i.transactionType&&(o=o.eq("transaction_type",i.transactionType)),i.status&&(o=o.eq("status",i.status)),i.vendorCode&&(o=o.eq("vendor_code",i.vendorCode)),i.minAmount&&(o=o.gte("amount",i.minAmount)),i.maxAmount&&(o=o.lte("amount",i.maxAmount)),i.searchTerm&&(o=o.or(`customer_name.ilike.%${i.searchTerm}%,customer_phone.ilike.%${i.searchTerm}%`));const l=i.sortBy||"transaction_date",u=i.sortOrder||"desc";o=o.order(l==="date"?"transaction_date":l,{ascending:u==="asc"}),o=o.limit(1e3);const{data:d,error:f}=await o;if(f)throw console.error("Error fetching transactions:",f),f;console.log("Fetched transactions:",(d==null?void 0:d.length)||0);const h=d,m={totalTransactions:0,totalAmount:0,totalProfit:0,ownerTransactions:{count:0,amount:0,profit:0},vendorTransactions:{count:0,amount:0,profit:0},byPaymentMethod:{},byTransactionType:{},byStatus:{},byBranch:{},byVendor:{},recentTransactions:h},g=(p,x)=>{p.count++,p.amount+=Number(x.amount)||0,p.profit+=Number(x.owner_profit_from_this_transcation)||0};return h.forEach(p=>{m.totalTransactions++,m.totalAmount+=Number(p.amount)||0,m.totalProfit+=Number(p.owner_profit_from_this_transcation)||0,p.vendor_code?g(m.vendorTransactions,p):g(m.ownerTransactions,p),m.byPaymentMethod[p.payment_method]||(m.byPaymentMethod[p.payment_method]={count:0,amount:0,profit:0}),g(m.byPaymentMethod[p.payment_method],p),m.byTransactionType[p.transaction_type]||(m.byTransactionType[p.transaction_type]={count:0,amount:0,profit:0}),g(m.byTransactionType[p.transaction_type],p),m.byStatus[p.status]||(m.byStatus[p.status]={count:0,amount:0,profit:0}),g(m.byStatus[p.status],p),m.byBranch[p.branch_name]||(m.byBranch[p.branch_name]={count:0,amount:0,profit:0}),g(m.byBranch[p.branch_name],p),p.vendor_code&&(m.byVendor[p.vendor_code]||(m.byVendor[p.vendor_code]={count:0,amount:0,profit:0}),g(m.byVendor[p.vendor_code],p))}),console.log("Processed summary:",m),m},dependencies:[t,e,r,n,JSON.stringify(i)]})}function qSe({filters:t,onFiltersChange:e,paymentMethods:r,transactionTypes:n,statuses:i,vendors:a}){const{language:s}=_e(),o=Cu[s],l=(d,f)=>{e({...t,[d]:f})},u=()=>{e({})};return c.jsxs("div",{className:"bg-white rounded-lg shadow p-4 space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(cx,{className:"w-4 h-4"}),c.jsx("h3",{className:"text-sm font-medium",children:o.filters})]}),Object.keys(t).length>0&&c.jsxs("button",{onClick:u,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[c.jsx(Xa,{className:"w-4 h-4"}),o.clearFilters]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:t.searchTerm||"",onChange:d=>l("searchTerm",d.target.value),placeholder:o.search,className:"w-full pl-8 pr-3 py-2 border rounded-lg text-sm"}),c.jsx(Kr,{className:"w-4 h-4 absolute left-2 top-2.5 text-gray-400"})]}),c.jsxs("select",{value:t.paymentMethod||"",onChange:d=>l("paymentMethod",d.target.value||void 0),className:"border rounded-lg px-3 py-2 text-sm",children:[c.jsx("option",{value:"",children:o.paymentMethod}),r.map(d=>c.jsx("option",{value:d,children:d},d))]}),c.jsxs("select",{value:t.transactionType||"",onChange:d=>l("transactionType",d.target.value||void 0),className:"border rounded-lg px-3 py-2 text-sm",children:[c.jsx("option",{value:"",children:o.transactionType}),n.map(d=>c.jsx("option",{value:d,children:d},d))]}),c.jsxs("select",{value:t.status||"",onChange:d=>l("status",d.target.value||void 0),className:"border rounded-lg px-3 py-2 text-sm",children:[c.jsx("option",{value:"",children:o.status}),i.map(d=>c.jsx("option",{value:d,children:d},d))]}),c.jsxs("select",{value:t.vendorCode||"",onChange:d=>l("vendorCode",d.target.value||void 0),className:"border rounded-lg px-3 py-2 text-sm",children:[c.jsx("option",{value:"",children:o.vendor}),a.map(d=>c.jsx("option",{value:d.code,children:d.name},d.code))]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("input",{type:"number",value:t.minAmount||"",onChange:d=>l("minAmount",d.target.value?Number(d.target.value):void 0),placeholder:o.minAmount,className:"border rounded-lg px-3 py-2 text-sm"}),c.jsx("input",{type:"number",value:t.maxAmount||"",onChange:d=>l("maxAmount",d.target.value?Number(d.target.value):void 0),placeholder:o.maxAmount,className:"border rounded-lg px-3 py-2 text-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("select",{value:t.sortBy||"date",onChange:d=>l("sortBy",d.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[c.jsx("option",{value:"date",children:o.date}),c.jsx("option",{value:"amount",children:o.amount}),c.jsx("option",{value:"profit",children:o.profit})]}),c.jsxs("select",{value:t.sortOrder||"desc",onChange:d=>l("sortOrder",d.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[c.jsx("option",{value:"asc",children:o.ascending}),c.jsx("option",{value:"desc",children:o.descending})]})]})]})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var jg={};jg.version="0.18.5";var r6=1252,GSe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],n6=function(t){GSe.indexOf(t)!=-1&&(r6=t)};function KSe(){n6(1252)}var Sh=function(t){n6(t)};function YSe(){Sh(1200),KSe()}var l0=function(e){return String.fromCharCode(e)},MO=function(e){return String.fromCharCode(e)},wo,Ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Nh(t){for(var e="",r=0,n=0,i=0,a=0,s=0,o=0,l=0,u=0;u<t.length;)r=t.charCodeAt(u++),a=r>>2,n=t.charCodeAt(u++),s=(r&3)<<4|n>>4,i=t.charCodeAt(u++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),e+=Ns.charAt(a)+Ns.charAt(s)+Ns.charAt(o)+Ns.charAt(l);return e}function Ha(t){var e="",r=0,n=0,i=0,a=0,s=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)a=Ns.indexOf(t.charAt(u++)),s=Ns.indexOf(t.charAt(u++)),r=a<<2|s>>4,e+=String.fromCharCode(r),o=Ns.indexOf(t.charAt(u++)),n=(s&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Ns.indexOf(t.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var rt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),es=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Zo(t){return rt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function DO(t){return rt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Ti=function(e){return rt?es(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function pv(t){if(typeof ArrayBuffer>"u")return Ti(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function tm(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function XSe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Pr=rt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:es(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function QSe(t){for(var e=[],r=0,n=t.length+250,i=Zo(t.length+255),a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s<128)i[r++]=s;else if(s<2048)i[r++]=192|s>>6&31,i[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=t.charCodeAt(++a)&1023;i[r++]=240|s>>8&7,i[r++]=128|s>>2&63,i[r++]=128|o>>6&15|(s&3)<<4,i[r++]=128|o&63}else i[r++]=224|s>>12&15,i[r++]=128|s>>6&63,i[r++]=128|s&63;r>n&&(e.push(i.slice(0,r)),r=0,i=Zo(65535),n=65530)}return e.push(i.slice(0,r)),Pr(e)}var rf=/\u0000/g,c0=/[\u0001-\u0006]/g;function gc(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ki(t,e){var r=""+t;return r.length>=e?r:Vt("0",e-r.length)+r}function US(t,e){var r=""+t;return r.length>=e?r:Vt(" ",e-r.length)+r}function Eg(t,e){var r=""+t;return r.length>=e?r:r+Vt(" ",e-r.length)}function JSe(t,e){var r=""+Math.round(t);return r.length>=e?r:Vt("0",e-r.length)+r}function ZSe(t,e){var r=""+t;return r.length>=e?r:Vt("0",e-r.length)+r}var $O=Math.pow(2,32);function Al(t,e){if(t>$O||t<-$O)return JSe(t,e);var r=Math.round(t);return ZSe(r,e)}function Tg(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var IO=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Hy=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function eNe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var qt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},RO={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},tNe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Pg(t,e,r){for(var n=t<0?-1:1,i=t*n,a=0,s=1,o=0,l=1,u=0,d=0,f=Math.floor(i);u<e&&(f=Math.floor(i),o=f*s+a,d=f*u+l,!(i-f<5e-8));)i=1/(i-f),a=s,s=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=a):(d=u,o=s)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function u0(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),a=0,s=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=lNe(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=a,o}var i6=new Date(1899,11,31,0,0,0),rNe=i6.getTime(),nNe=new Date(1900,2,1,0,0,0);function a6(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=nNe&&(r+=24*60*60*1e3),(r-(rNe+(t.getTimezoneOffset()-i6.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function zS(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function iNe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function aNe(t){var e=t<0?12:11,r=zS(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function sNe(t){var e=zS(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function oNe(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=aNe(t):e===10?r=t.toFixed(10).substr(0,12):r=sNe(t),zS(iNe(r.toUpperCase()))}function e_(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):oNe(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Us(14,a6(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function lNe(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function cNe(t,e,r,n){var i="",a=0,s=0,o=r.y,l,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,u=e.length;break;case 3:return Hy[r.m-1][1];case 5:return Hy[r.m-1][0];default:return Hy[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,u=e.length;break;case 3:return IO[r.q][0];default:return IO[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ki(r.S,e.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,a=Math.round(s*(r.S+r.u)),a>=60*s&&(a=0),e==="s"?a===0?"0":""+a/s:(i=ki(a,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?ki(l,u):"";return d}function js(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var s6=/%/g;function uNe(t,e,r){var n=e.replace(s6,""),i=e.length-n.length;return Ma(t,n,r*Math.pow(10,2*i))+Vt("%",i)}function dNe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ma(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function o6(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+o6(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(e/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),r.indexOf("e")===-1){var s=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(i+a)%i)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var l6=/# (\?+)( ?)\/( ?)(\d+)/;function fNe(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),a=Math.floor(i/n),s=i-a*n,o=n;return r+(a===0?"":""+a)+" "+(s===0?Vt(" ",t[1].length+1+t[4].length):US(s,t[1].length)+t[2]+"/"+t[3]+ki(o,t[4].length))}function hNe(t,e,r){return r+(e===0?"":""+e)+Vt(" ",t[1].length+2+t[4].length)}var c6=/^#*0*\.([0#]+)/,u6=/\).*[0#]/,d6=/\(###\) ###\\?-####/;function Jr(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function FO(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function LO(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function mNe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function pNe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Xn(t,e,r){if(t.charCodeAt(0)===40&&!e.match(u6)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Xn("n",n,r):"("+Xn("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return dNe(t,e,r);if(e.indexOf("%")!==-1)return uNe(t,e,r);if(e.indexOf("E")!==-1)return o6(e,r);if(e.charCodeAt(0)===36)return"$"+Xn(t,e.substr(e.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Al(l,e.length);if(e.match(/^[#?]+$/))return i=Al(r,0),i==="0"&&(i=""),i.length>e.length?i:Jr(e.substr(0,e.length-i.length))+i;if(a=e.match(l6))return fNe(a,l,u);if(e.match(/^#+0+$/))return u+Al(l,e.length-e.indexOf("0"));if(a=e.match(c6))return i=FO(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Jr(a[1])).replace(/\.$/,"."+Jr(a[1])).replace(/\.(\d*)$/,function(g,p){return"."+p+Vt("0",Jr(a[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+FO(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+js(Al(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Xn(t,e,-r):js(""+(Math.floor(r)+mNe(r,a[1].length)))+"."+ki(LO(r,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return Xn(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=gc(Xn(t,e.replace(/[\\-]/g,""),r)),s=0,gc(gc(e.replace(/\\/g,"")).replace(/[0#]/g,function(g){return s<i.length?i.charAt(s++):g==="0"?"0":""}));if(e.match(d6))return i=Xn(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=Pg(l,Math.pow(10,s)-1,!1),i=""+u,d=Ma("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+a[2]+"/"+a[3],d=Eg(o[2],s),d.length<a[4].length&&(d=Jr(a[4].substr(a[4].length-d.length))+d),i+=d,i;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=Pg(l,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?US(o[1],s)+a[2]+"/"+a[3]+Eg(o[2],s):Vt(" ",2*s+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return i=Al(r,0),e.length<=i.length?i:Jr(e.substr(0,e.length-i.length))+i;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=e.indexOf(".")-s,h=e.length-i.length-f;return Jr(e.substr(0,f)+i+e.substr(e.length-h))}if(a=e.match(/^00,000\.([#0]*0)$/))return s=LO(r,a[1].length),r<0?"-"+Xn(t,e,-r):js(pNe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ki(0,3-g.length):"")+g})+"."+ki(s,a[1].length);switch(e){case"###,##0.00":return Xn(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=js(Al(l,0));return m!=="0"?u+m:"";case"###,###.00":return Xn(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Xn(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function gNe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ma(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function xNe(t,e,r){var n=e.replace(s6,""),i=e.length-n.length;return Ma(t,n,r*Math.pow(10,2*i))+Vt("%",i)}function f6(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+f6(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(e/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),!r.match(/[Ee]/)){var s=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(i+a)%i)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Wi(t,e,r){if(t.charCodeAt(0)===40&&!e.match(u6)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Wi("n",n,r):"("+Wi("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return gNe(t,e,r);if(e.indexOf("%")!==-1)return xNe(t,e,r);if(e.indexOf("E")!==-1)return f6(e,r);if(e.charCodeAt(0)===36)return"$"+Wi(t,e.substr(e.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+ki(l,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:Jr(e.substr(0,e.length-i.length))+i;if(a=e.match(l6))return hNe(a,l,u);if(e.match(/^#+0+$/))return u+ki(l,e.length-e.indexOf("0"));if(a=e.match(c6))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Jr(a[1])).replace(/\.$/,"."+Jr(a[1])),i=i.replace(/\.(\d*)$/,function(g,p){return"."+p+Vt("0",Jr(a[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+js(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Wi(t,e,-r):js(""+r)+"."+Vt("0",a[1].length);if(a=e.match(/^#,#*,#0/))return Wi(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=gc(Wi(t,e.replace(/[\\-]/g,""),r)),s=0,gc(gc(e.replace(/\\/g,"")).replace(/[0#]/g,function(g){return s<i.length?i.charAt(s++):g==="0"?"0":""}));if(e.match(d6))return i=Wi(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=Pg(l,Math.pow(10,s)-1,!1),i=""+u,d=Ma("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+a[2]+"/"+a[3],d=Eg(o[2],s),d.length<a[4].length&&(d=Jr(a[4].substr(a[4].length-d.length))+d),i+=d,i;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=Pg(l,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?US(o[1],s)+a[2]+"/"+a[3]+Eg(o[2],s):Vt(" ",2*s+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:Jr(e.substr(0,e.length-i.length))+i;if(a=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=e.indexOf(".")-s,h=e.length-i.length-f;return Jr(e.substr(0,f)+i+e.substr(e.length-h))}if(a=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Wi(t,e,-r):js(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ki(0,3-g.length):"")+g})+"."+ki(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=js(""+l);return m!=="0"?u+m:"";default:if(e.match(/\.[0#?]*$/))return Wi(t,e.slice(0,e.lastIndexOf(".")),r)+Jr(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ma(t,e,r){return(r|0)===r?Wi(t,e,r):Xn(t,e,r)}function vNe(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var h6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function m6(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":Tg(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(h6))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function yNe(t,e,r,n){for(var i=[],a="",s=0,o="",l="t",u,d,f,h="H";s<t.length;)switch(o=t.charAt(s)){case"G":if(!Tg(t,s))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},s+=7;break;case'"':for(a="";(f=t.charCodeAt(++s))!==34&&s<t.length;)a+=String.fromCharCode(f);i[i.length]={t:"t",v:a},++s;break;case"\\":var m=t.charAt(++s),g=m==="("||m===")"?m:"t";i[i.length]={t:g,v:m},++s;break;case"_":i[i.length]={t:"t",v:" "},s+=2;break;case"@":i[i.length]={t:"T",v:e},++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2"){if(u==null&&(u=u0(e,r,t.charAt(s+1)==="2"),u==null))return"";i[i.length]={t:"X",v:t.substr(s,2)},l=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=u0(e,r),u==null))return"";for(a=o;++s<t.length&&t.charAt(s).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),i[i.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var p={t:o,v:o};if(u==null&&(u=u0(e,r)),t.substr(s,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",h="h",s+=3):t.substr(s,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",s+=5,h="h"):t.substr(s,5).toUpperCase()==="上午/下午"?(u!=null&&(p.v=u.H>=12?"下午":"上午"),p.t="T",s+=5,h="h"):(p.t="t",++s),u==null&&p.t==="T")return"";i[i.length]=p,l=o;break;case"[":for(a=o;t.charAt(s++)!=="]"&&s<t.length;)a+=t.charAt(s);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(h6)){if(u==null&&(u=u0(e,r),u==null))return"";i[i.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",m6(t)||(i[i.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++s<t.length&&(o=t.charAt(s))==="0";)a+=o;i[i.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++s<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(s))>-1;)a+=o;i[i.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++s)===o;)a+=o;i[i.length]={t:o,v:a},l=o;break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;)a+=t.charAt(s);i[i.length]={t:"D",v:a};break;case" ":i[i.length]={t:o,v:o},++s;break;case"$":i[i.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++s;break}var x=0,v=0,b;for(s=i.length-1,l="t";s>=0;--s)switch(i[s].t){case"h":case"H":i[s].t=h,l="h",x<1&&(x=1);break;case"s":(b=i[s].v.match(/\.0+$/))&&(v=Math.max(v,b[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":l=i[s].t;break;case"m":l==="s"&&(i[s].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&i[s].v.match(/[Hh]/)&&(x=1),x<2&&i[s].v.match(/[Mm]/)&&(x=2),x<3&&i[s].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var y="",_;for(s=0;s<i.length;++s)switch(i[s].t){case"t":case"T":case" ":case"D":break;case"X":i[s].v="",i[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[s].v=cNe(i[s].t.charCodeAt(0),i[s].v,u,v),i[s].t="t";break;case"n":case"?":for(_=s+1;i[_]!=null&&((o=i[_].t)==="?"||o==="D"||(o===" "||o==="t")&&i[_+1]!=null&&(i[_+1].t==="?"||i[_+1].t==="t"&&i[_+1].v==="/")||i[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[_].v==="/"||i[_].v===" "&&i[_+1]!=null&&i[_+1].t=="?"));)i[s].v+=i[_].v,i[_]={v:"",t:";"},++_;y+=i[s].v,s=_-1;break;case"G":i[s].t="t",i[s].v=e_(e,r);break}var w="",N,S;if(y.length>0){y.charCodeAt(0)==40?(N=e<0&&y.charCodeAt(0)===45?-e:e,S=Ma("n",y,N)):(N=e<0&&n>1?-e:e,S=Ma("n",y,N),N<0&&i[0]&&i[0].t=="t"&&(S=S.substr(1),i[0].v="-"+i[0].v)),_=S.length-1;var E=i.length;for(s=0;s<i.length;++s)if(i[s]!=null&&i[s].t!="t"&&i[s].v.indexOf(".")>-1){E=s;break}var T=i.length;if(E===i.length&&S.indexOf("E")===-1){for(s=i.length-1;s>=0;--s)i[s]==null||"n?".indexOf(i[s].t)===-1||(_>=i[s].v.length-1?(_-=i[s].v.length,i[s].v=S.substr(_+1,i[s].v.length)):_<0?i[s].v="":(i[s].v=S.substr(0,_+1),_=-1),i[s].t="t",T=s);_>=0&&T<i.length&&(i[T].v=S.substr(0,_+1)+i[T].v)}else if(E!==i.length&&S.indexOf("E")===-1){for(_=S.indexOf(".")-1,s=E;s>=0;--s)if(!(i[s]==null||"n?".indexOf(i[s].t)===-1)){for(d=i[s].v.indexOf(".")>-1&&s===E?i[s].v.indexOf(".")-1:i[s].v.length-1,w=i[s].v.substr(d+1);d>=0;--d)_>=0&&(i[s].v.charAt(d)==="0"||i[s].v.charAt(d)==="#")&&(w=S.charAt(_--)+w);i[s].v=w,i[s].t="t",T=s}for(_>=0&&T<i.length&&(i[T].v=S.substr(0,_+1)+i[T].v),_=S.indexOf(".")+1,s=E;s<i.length;++s)if(!(i[s]==null||"n?(".indexOf(i[s].t)===-1&&s!==E)){for(d=i[s].v.indexOf(".")>-1&&s===E?i[s].v.indexOf(".")+1:0,w=i[s].v.substr(0,d);d<i[s].v.length;++d)_<S.length&&(w+=S.charAt(_++));i[s].v=w,i[s].t="t",T=s}}}for(s=0;s<i.length;++s)i[s]!=null&&"n?".indexOf(i[s].t)>-1&&(N=n>1&&e<0&&s>0&&i[s-1].v==="-"?-e:e,i[s].v=Ma(i[s].t,i[s].v,N),i[s].t="t");var P="";for(s=0;s!==i.length;++s)i[s]!=null&&(P+=i[s].v);return P}var BO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function UO(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function bNe(t,e){var r=vNe(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(BO),o=r[1].match(BO);return UO(e,s)?[n,r[0]]:UO(e,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,a]}function Us(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:qt)[t],n==null&&(n=r.table&&r.table[RO[t]]||qt[RO[t]]),n==null&&(n=tNe[t]||"General");break}if(Tg(n,0))return e_(e,r);e instanceof Date&&(e=a6(e,r.date1904));var i=bNe(n,e);if(Tg(i[1]))return e_(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return yNe(i[1],e,r,i[0])}function p6(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(qt[r]==null){e<0&&(e=r);continue}if(qt[r]==t){e=r;break}}e<0&&(e=391)}return qt[e]=t,e}function gv(t){for(var e=0;e!=392;++e)t[e]!==void 0&&p6(t[e],e)}function xv(){qt=eNe()}var g6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function wNe(t){var e=typeof t=="number"?qt[t]:t;return e=e.replace(g6,"(\\d+)"),new RegExp("^"+e+"$")}function _Ne(t,e,r){var n=-1,i=-1,a=-1,s=-1,o=-1,l=-1;(e.match(g6)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":a=m;break;case"h":s=m;break;case"s":l=m;break;case"m":s>=0?o=m:i=m;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return s==-1&&o==-1&&l==-1?u:n==-1&&i==-1&&a==-1?d:u+"T"+d}var SNe=function(){var t={};t.version="1.2.0";function e(){for(var S=0,E=new Array(256),T=0;T!=256;++T)S=T,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,E[T]=S;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(S){var E=0,T=0,P=0,A=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)A[P]=S[P];for(P=0;P!=256;++P)for(T=S[P],E=256+P;E<4096;E+=256)T=A[E]=T>>>8^S[T&255];var k=[];for(P=1;P!=16;++P)k[P-1]=typeof Int32Array<"u"?A.subarray(P*256,P*256+256):A.slice(P*256,P*256+256);return k}var i=n(r),a=i[0],s=i[1],o=i[2],l=i[3],u=i[4],d=i[5],f=i[6],h=i[7],m=i[8],g=i[9],p=i[10],x=i[11],v=i[12],b=i[13],y=i[14];function _(S,E){for(var T=E^-1,P=0,A=S.length;P<A;)T=T>>>8^r[(T^S.charCodeAt(P++))&255];return~T}function w(S,E){for(var T=E^-1,P=S.length-15,A=0;A<P;)T=y[S[A++]^T&255]^b[S[A++]^T>>8&255]^v[S[A++]^T>>16&255]^x[S[A++]^T>>>24]^p[S[A++]]^g[S[A++]]^m[S[A++]]^h[S[A++]]^f[S[A++]]^d[S[A++]]^u[S[A++]]^l[S[A++]]^o[S[A++]]^s[S[A++]]^a[S[A++]]^r[S[A++]];for(P+=15;A<P;)T=T>>>8^r[(T^S[A++])&255];return~T}function N(S,E){for(var T=E^-1,P=0,A=S.length,k=0,F=0;P<A;)k=S.charCodeAt(P++),k<128?T=T>>>8^r[(T^k)&255]:k<2048?(T=T>>>8^r[(T^(192|k>>6&31))&255],T=T>>>8^r[(T^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,F=S.charCodeAt(P++)&1023,T=T>>>8^r[(T^(240|k>>8&7))&255],T=T>>>8^r[(T^(128|k>>2&63))&255],T=T>>>8^r[(T^(128|F>>6&15|(k&3)<<4))&255],T=T>>>8^r[(T^(128|F&63))&255]):(T=T>>>8^r[(T^(224|k>>12&15))&255],T=T>>>8^r[(T^(128|k>>6&63))&255],T=T>>>8^r[(T^(128|k&63))&255]);return~T}return t.table=r,t.bstr=_,t.buf=w,t.str=N,t}(),pt=function(){var e={};e.version="1.2.1";function r(D,V){for(var B=D.split("/"),U=V.split("/"),q=0,K=0,ie=Math.min(B.length,U.length);q<ie;++q){if(K=B[q].length-U[q].length)return K;if(B[q]!=U[q])return B[q]<U[q]?-1:1}return B.length-U.length}function n(D){if(D.charAt(D.length-1)=="/")return D.slice(0,-1).indexOf("/")===-1?D:n(D.slice(0,-1));var V=D.lastIndexOf("/");return V===-1?D:D.slice(0,V+1)}function i(D){if(D.charAt(D.length-1)=="/")return i(D.slice(0,-1));var V=D.lastIndexOf("/");return V===-1?D:D.slice(V+1)}function a(D,V){typeof V=="string"&&(V=new Date(V));var B=V.getHours();B=B<<6|V.getMinutes(),B=B<<5|V.getSeconds()>>>1,D.write_shift(2,B);var U=V.getFullYear()-1980;U=U<<4|V.getMonth()+1,U=U<<5|V.getDate(),D.write_shift(2,U)}function s(D){var V=D.read_shift(2)&65535,B=D.read_shift(2)&65535,U=new Date,q=B&31;B>>>=5;var K=B&15;B>>>=4,U.setMilliseconds(0),U.setFullYear(B+1980),U.setMonth(K-1),U.setDate(q);var ie=V&31;V>>>=5;var de=V&63;return V>>>=6,U.setHours(V),U.setMinutes(de),U.setSeconds(ie<<1),U}function o(D){Mn(D,0);for(var V={},B=0;D.l<=D.length-4;){var U=D.read_shift(2),q=D.read_shift(2),K=D.l+q,ie={};switch(U){case 21589:B=D.read_shift(1),B&1&&(ie.mtime=D.read_shift(4)),q>5&&(B&2&&(ie.atime=D.read_shift(4)),B&4&&(ie.ctime=D.read_shift(4))),ie.mtime&&(ie.mt=new Date(ie.mtime*1e3));break}D.l=K,V[U]=ie}return V}var l;function u(){return l||(l={})}function d(D,V){if(D[0]==80&&D[1]==75)return pN(D,V);if((D[0]|32)==109&&(D[1]|32)==105)return XF(D,V);if(D.length<512)throw new Error("CFB file size "+D.length+" < 512");var B=3,U=512,q=0,K=0,ie=0,de=0,ne=0,ae=[],se=D.slice(0,512);Mn(se,0);var pe=f(se);switch(B=pe[0],B){case 3:U=512;break;case 4:U=4096;break;case 0:if(pe[1]==0)return pN(D,V);default:throw new Error("Major Version: Expected 3 or 4 saw "+B)}U!==512&&(se=D.slice(0,U),Mn(se,28));var Se=D.slice(0,U);h(se,B);var je=se.read_shift(4,"i");if(B===3&&je!==0)throw new Error("# Directory Sectors: Expected 0 saw "+je);se.l+=4,ie=se.read_shift(4,"i"),se.l+=4,se.chk("00100000","Mini Stream Cutoff Size: "),de=se.read_shift(4,"i"),q=se.read_shift(4,"i"),ne=se.read_shift(4,"i"),K=se.read_shift(4,"i");for(var xe=-1,Ne=0;Ne<109&&(xe=se.read_shift(4,"i"),!(xe<0));++Ne)ae[Ne]=xe;var Le=m(D,U);x(ne,K,Le,U,ae);var It=b(Le,ie,ae,U);It[ie].name="!Directory",q>0&&de!==F&&(It[de].name="!MiniFAT"),It[ae[0]].name="!FAT",It.fat_addrs=ae,It.ssz=U;var Rt={},Ir=[],Lu=[],Bu=[];y(ie,It,Le,Ir,q,Rt,Lu,de),g(Lu,Bu,Ir),Ir.shift();var Uu={FileIndex:Lu,FullPaths:Bu};return V&&V.raw&&(Uu.raw={header:Se,sectors:Le}),Uu}function f(D){if(D[D.l]==80&&D[D.l+1]==75)return[0,0];D.chk(H,"Header Signature: "),D.l+=16;var V=D.read_shift(2,"u");return[D.read_shift(2,"u"),V]}function h(D,V){var B=9;switch(D.l+=2,B=D.read_shift(2)){case 9:if(V!=3)throw new Error("Sector Shift: Expected 9 saw "+B);break;case 12:if(V!=4)throw new Error("Sector Shift: Expected 12 saw "+B);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+B)}D.chk("0600","Mini Sector Shift: "),D.chk("000000000000","Reserved: ")}function m(D,V){for(var B=Math.ceil(D.length/V)-1,U=[],q=1;q<B;++q)U[q-1]=D.slice(q*V,(q+1)*V);return U[B-1]=D.slice(B*V),U}function g(D,V,B){for(var U=0,q=0,K=0,ie=0,de=0,ne=B.length,ae=[],se=[];U<ne;++U)ae[U]=se[U]=U,V[U]=B[U];for(;de<se.length;++de)U=se[de],q=D[U].L,K=D[U].R,ie=D[U].C,ae[U]===U&&(q!==-1&&ae[q]!==q&&(ae[U]=ae[q]),K!==-1&&ae[K]!==K&&(ae[U]=ae[K])),ie!==-1&&(ae[ie]=U),q!==-1&&U!=ae[U]&&(ae[q]=ae[U],se.lastIndexOf(q)<de&&se.push(q)),K!==-1&&U!=ae[U]&&(ae[K]=ae[U],se.lastIndexOf(K)<de&&se.push(K));for(U=1;U<ne;++U)ae[U]===U&&(K!==-1&&ae[K]!==K?ae[U]=ae[K]:q!==-1&&ae[q]!==q&&(ae[U]=ae[q]));for(U=1;U<ne;++U)if(D[U].type!==0){if(de=U,de!=ae[de])do de=ae[de],V[U]=V[de]+"/"+V[U];while(de!==0&&ae[de]!==-1&&de!=ae[de]);ae[U]=-1}for(V[0]+="/",U=1;U<ne;++U)D[U].type!==2&&(V[U]+="/")}function p(D,V,B){for(var U=D.start,q=D.size,K=[],ie=U;B&&q>0&&ie>=0;)K.push(V.slice(ie*k,ie*k+k)),q-=k,ie=_o(B,ie*4);return K.length===0?ce(0):Pr(K).slice(0,D.size)}function x(D,V,B,U,q){var K=F;if(D===F){if(V!==0)throw new Error("DIFAT chain shorter than expected")}else if(D!==-1){var ie=B[D],de=(U>>>2)-1;if(!ie)return;for(var ne=0;ne<de&&(K=_o(ie,ne*4))!==F;++ne)q.push(K);x(_o(ie,U-4),V-1,B,U,q)}}function v(D,V,B,U,q){var K=[],ie=[];q||(q=[]);var de=U-1,ne=0,ae=0;for(ne=V;ne>=0;){q[ne]=!0,K[K.length]=ne,ie.push(D[ne]);var se=B[Math.floor(ne*4/U)];if(ae=ne*4&de,U<4+ae)throw new Error("FAT boundary crossed: "+ne+" 4 "+U);if(!D[se])break;ne=_o(D[se],ae)}return{nodes:K,data:YO([ie])}}function b(D,V,B,U){var q=D.length,K=[],ie=[],de=[],ne=[],ae=U-1,se=0,pe=0,Se=0,je=0;for(se=0;se<q;++se)if(de=[],Se=se+V,Se>=q&&(Se-=q),!ie[Se]){ne=[];var xe=[];for(pe=Se;pe>=0;){xe[pe]=!0,ie[pe]=!0,de[de.length]=pe,ne.push(D[pe]);var Ne=B[Math.floor(pe*4/U)];if(je=pe*4&ae,U<4+je)throw new Error("FAT boundary crossed: "+pe+" 4 "+U);if(!D[Ne]||(pe=_o(D[Ne],je),xe[pe]))break}K[Se]={nodes:de,data:YO([ne])}}return K}function y(D,V,B,U,q,K,ie,de){for(var ne=0,ae=U.length?2:0,se=V[D].data,pe=0,Se=0,je;pe<se.length;pe+=128){var xe=se.slice(pe,pe+128);Mn(xe,64),Se=xe.read_shift(2),je=GS(xe,0,Se-ae),U.push(je);var Ne={name:je,type:xe.read_shift(1),color:xe.read_shift(1),L:xe.read_shift(4,"i"),R:xe.read_shift(4,"i"),C:xe.read_shift(4,"i"),clsid:xe.read_shift(16),state:xe.read_shift(4,"i"),start:0,size:0},Le=xe.read_shift(2)+xe.read_shift(2)+xe.read_shift(2)+xe.read_shift(2);Le!==0&&(Ne.ct=_(xe,xe.l-8));var It=xe.read_shift(2)+xe.read_shift(2)+xe.read_shift(2)+xe.read_shift(2);It!==0&&(Ne.mt=_(xe,xe.l-8)),Ne.start=xe.read_shift(4,"i"),Ne.size=xe.read_shift(4,"i"),Ne.size<0&&Ne.start<0&&(Ne.size=Ne.type=0,Ne.start=F,Ne.name=""),Ne.type===5?(ne=Ne.start,q>0&&ne!==F&&(V[ne].name="!StreamData")):Ne.size>=4096?(Ne.storage="fat",V[Ne.start]===void 0&&(V[Ne.start]=v(B,Ne.start,V.fat_addrs,V.ssz)),V[Ne.start].name=Ne.name,Ne.content=V[Ne.start].data.slice(0,Ne.size)):(Ne.storage="minifat",Ne.size<0?Ne.size=0:ne!==F&&Ne.start!==F&&V[ne]&&(Ne.content=p(Ne,V[ne].data,(V[de]||{}).data))),Ne.content&&Mn(Ne.content,0),K[je]=Ne,ie.push(Ne)}}function _(D,V){return new Date((In(D,V+4)/1e7*Math.pow(2,32)+In(D,V)/1e7-11644473600)*1e3)}function w(D,V){return u(),d(l.readFileSync(D),V)}function N(D,V){var B=V&&V.type;switch(B||rt&&Buffer.isBuffer(D)&&(B="buffer"),B||"base64"){case"file":return w(D,V);case"base64":return d(Ti(Ha(D)),V);case"binary":return d(Ti(D),V)}return d(D,V)}function S(D,V){var B=V||{},U=B.root||"Root Entry";if(D.FullPaths||(D.FullPaths=[]),D.FileIndex||(D.FileIndex=[]),D.FullPaths.length!==D.FileIndex.length)throw new Error("inconsistent CFB structure");D.FullPaths.length===0&&(D.FullPaths[0]=U+"/",D.FileIndex[0]={name:U,type:5}),B.CLSID&&(D.FileIndex[0].clsid=B.CLSID),E(D)}function E(D){var V="Sh33tJ5";if(!pt.find(D,"/"+V)){var B=ce(4);B[0]=55,B[1]=B[3]=50,B[2]=54,D.FileIndex.push({name:V,type:2,content:B,size:4,L:69,R:69,C:69}),D.FullPaths.push(D.FullPaths[0]+V),T(D)}}function T(D,V){S(D);for(var B=!1,U=!1,q=D.FullPaths.length-1;q>=0;--q){var K=D.FileIndex[q];switch(K.type){case 0:U?B=!0:(D.FileIndex.pop(),D.FullPaths.pop());break;case 1:case 2:case 5:U=!0,isNaN(K.R*K.L*K.C)&&(B=!0),K.R>-1&&K.L>-1&&K.R==K.L&&(B=!0);break;default:B=!0;break}}if(!(!B&&!V)){var ie=new Date(1987,1,19),de=0,ne=Object.create?Object.create(null):{},ae=[];for(q=0;q<D.FullPaths.length;++q)ne[D.FullPaths[q]]=!0,D.FileIndex[q].type!==0&&ae.push([D.FullPaths[q],D.FileIndex[q]]);for(q=0;q<ae.length;++q){var se=n(ae[q][0]);U=ne[se],U||(ae.push([se,{name:i(se).replace("/",""),type:1,clsid:O,ct:ie,mt:ie,content:null}]),ne[se]=!0)}for(ae.sort(function(je,xe){return r(je[0],xe[0])}),D.FullPaths=[],D.FileIndex=[],q=0;q<ae.length;++q)D.FullPaths[q]=ae[q][0],D.FileIndex[q]=ae[q][1];for(q=0;q<ae.length;++q){var pe=D.FileIndex[q],Se=D.FullPaths[q];if(pe.name=i(Se).replace("/",""),pe.L=pe.R=pe.C=-(pe.color=1),pe.size=pe.content?pe.content.length:0,pe.start=0,pe.clsid=pe.clsid||O,q===0)pe.C=ae.length>1?1:-1,pe.size=0,pe.type=5;else if(Se.slice(-1)=="/"){for(de=q+1;de<ae.length&&n(D.FullPaths[de])!=Se;++de);for(pe.C=de>=ae.length?-1:de,de=q+1;de<ae.length&&n(D.FullPaths[de])!=n(Se);++de);pe.R=de>=ae.length?-1:de,pe.type=1}else n(D.FullPaths[q+1]||"")==n(Se)&&(pe.R=q+1),pe.type=2}}}function P(D,V){var B=V||{};if(B.fileType=="mad")return QF(D,B);switch(T(D),B.fileType){case"zip":return VF(D,B)}var U=function(je){for(var xe=0,Ne=0,Le=0;Le<je.FileIndex.length;++Le){var It=je.FileIndex[Le];if(It.content){var Rt=It.content.length;Rt>0&&(Rt<4096?xe+=Rt+63>>6:Ne+=Rt+511>>9)}}for(var Ir=je.FullPaths.length+3>>2,Lu=xe+7>>3,Bu=xe+127>>7,Uu=Lu+Ne+Ir+Bu,eo=Uu+127>>7,Ev=eo<=109?0:Math.ceil((eo-109)/127);Uu+eo+Ev+127>>7>eo;)Ev=++eo<=109?0:Math.ceil((eo-109)/127);var da=[1,Ev,eo,Bu,Ir,Ne,xe,0];return je.FileIndex[0].size=xe<<6,da[7]=(je.FileIndex[0].start=da[0]+da[1]+da[2]+da[3]+da[4]+da[5])+(da[6]+7>>3),da}(D),q=ce(U[7]<<9),K=0,ie=0;{for(K=0;K<8;++K)q.write_shift(1,M[K]);for(K=0;K<8;++K)q.write_shift(2,0);for(q.write_shift(2,62),q.write_shift(2,3),q.write_shift(2,65534),q.write_shift(2,9),q.write_shift(2,6),K=0;K<3;++K)q.write_shift(2,0);for(q.write_shift(4,0),q.write_shift(4,U[2]),q.write_shift(4,U[0]+U[1]+U[2]+U[3]-1),q.write_shift(4,0),q.write_shift(4,4096),q.write_shift(4,U[3]?U[0]+U[1]+U[2]-1:F),q.write_shift(4,U[3]),q.write_shift(-4,U[1]?U[0]-1:F),q.write_shift(4,U[1]),K=0;K<109;++K)q.write_shift(-4,K<U[2]?U[1]+K:-1)}if(U[1])for(ie=0;ie<U[1];++ie){for(;K<236+ie*127;++K)q.write_shift(-4,K<U[2]?U[1]+K:-1);q.write_shift(-4,ie===U[1]-1?F:ie+1)}var de=function(je){for(ie+=je;K<ie-1;++K)q.write_shift(-4,K+1);je&&(++K,q.write_shift(-4,F))};for(ie=K=0,ie+=U[1];K<ie;++K)q.write_shift(-4,L.DIFSECT);for(ie+=U[2];K<ie;++K)q.write_shift(-4,L.FATSECT);de(U[3]),de(U[4]);for(var ne=0,ae=0,se=D.FileIndex[0];ne<D.FileIndex.length;++ne)se=D.FileIndex[ne],se.content&&(ae=se.content.length,!(ae<4096)&&(se.start=ie,de(ae+511>>9)));for(de(U[6]+7>>3);q.l&511;)q.write_shift(-4,L.ENDOFCHAIN);for(ie=K=0,ne=0;ne<D.FileIndex.length;++ne)se=D.FileIndex[ne],se.content&&(ae=se.content.length,!(!ae||ae>=4096)&&(se.start=ie,de(ae+63>>6)));for(;q.l&511;)q.write_shift(-4,L.ENDOFCHAIN);for(K=0;K<U[4]<<2;++K){var pe=D.FullPaths[K];if(!pe||pe.length===0){for(ne=0;ne<17;++ne)q.write_shift(4,0);for(ne=0;ne<3;++ne)q.write_shift(4,-1);for(ne=0;ne<12;++ne)q.write_shift(4,0);continue}se=D.FileIndex[K],K===0&&(se.start=se.size?se.start-1:F);var Se=K===0&&B.root||se.name;if(ae=2*(Se.length+1),q.write_shift(64,Se,"utf16le"),q.write_shift(2,ae),q.write_shift(1,se.type),q.write_shift(1,se.color),q.write_shift(-4,se.L),q.write_shift(-4,se.R),q.write_shift(-4,se.C),se.clsid)q.write_shift(16,se.clsid,"hex");else for(ne=0;ne<4;++ne)q.write_shift(4,0);q.write_shift(4,se.state||0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,se.start),q.write_shift(4,se.size),q.write_shift(4,0)}for(K=1;K<D.FileIndex.length;++K)if(se=D.FileIndex[K],se.size>=4096)if(q.l=se.start+1<<9,rt&&Buffer.isBuffer(se.content))se.content.copy(q,q.l,0,se.size),q.l+=se.size+511&-512;else{for(ne=0;ne<se.size;++ne)q.write_shift(1,se.content[ne]);for(;ne&511;++ne)q.write_shift(1,0)}for(K=1;K<D.FileIndex.length;++K)if(se=D.FileIndex[K],se.size>0&&se.size<4096)if(rt&&Buffer.isBuffer(se.content))se.content.copy(q,q.l,0,se.size),q.l+=se.size+63&-64;else{for(ne=0;ne<se.size;++ne)q.write_shift(1,se.content[ne]);for(;ne&63;++ne)q.write_shift(1,0)}if(rt)q.l=q.length;else for(;q.l<q.length;)q.write_shift(1,0);return q}function A(D,V){var B=D.FullPaths.map(function(ne){return ne.toUpperCase()}),U=B.map(function(ne){var ae=ne.split("/");return ae[ae.length-(ne.slice(-1)=="/"?2:1)]}),q=!1;V.charCodeAt(0)===47?(q=!0,V=B[0].slice(0,-1)+V):q=V.indexOf("/")!==-1;var K=V.toUpperCase(),ie=q===!0?B.indexOf(K):U.indexOf(K);if(ie!==-1)return D.FileIndex[ie];var de=!K.match(c0);for(K=K.replace(rf,""),de&&(K=K.replace(c0,"!")),ie=0;ie<B.length;++ie)if((de?B[ie].replace(c0,"!"):B[ie]).replace(rf,"")==K||(de?U[ie].replace(c0,"!"):U[ie]).replace(rf,"")==K)return D.FileIndex[ie];return null}var k=64,F=-2,H="d0cf11e0a1b11ae1",M=[208,207,17,224,161,177,26,225],O="00000000000000000000000000000000",L={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:H,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:O,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function R(D,V,B){u();var U=P(D,B);l.writeFileSync(V,U)}function z(D){for(var V=new Array(D.length),B=0;B<D.length;++B)V[B]=String.fromCharCode(D[B]);return V.join("")}function J(D,V){var B=P(D,V);switch(V&&V.type||"buffer"){case"file":return u(),l.writeFileSync(V.filename,B),B;case"binary":return typeof B=="string"?B:z(B);case"base64":return Nh(typeof B=="string"?B:z(B));case"buffer":if(rt)return Buffer.isBuffer(B)?B:es(B);case"array":return typeof B=="string"?Ti(B):B}return B}var W;function C(D){try{var V=D.InflateRaw,B=new V;if(B._processChunk(new Uint8Array([3,0]),B._finishFlushFlag),B.bytesRead)W=D;else throw new Error("zlib does not expose bytesRead")}catch(U){console.error("cannot use native zlib: "+(U.message||U))}}function G(D,V){if(!W)return hN(D,V);var B=W.InflateRaw,U=new B,q=U._processChunk(D.slice(D.l),U._finishFlushFlag);return D.l+=U.bytesRead,q}function Y(D){return W?W.deflateRawSync(D):xt(D)}var I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],fe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(D){var V=(D<<1|D<<11)&139536|(D<<5|D<<15)&558144;return(V>>16|V>>8|V)&255}for(var ee=typeof Uint8Array<"u",le=ee?new Uint8Array(256):[],te=0;te<256;++te)le[te]=me(te);function Z(D,V){var B=le[D&255];return V<=8?B>>>8-V:(B=B<<8|le[D>>8&255],V<=16?B>>>16-V:(B=B<<8|le[D>>16&255],B>>>24-V))}function ke(D,V){var B=V&7,U=V>>>3;return(D[U]|(B<=6?0:D[U+1]<<8))>>>B&3}function Ee(D,V){var B=V&7,U=V>>>3;return(D[U]|(B<=5?0:D[U+1]<<8))>>>B&7}function et(D,V){var B=V&7,U=V>>>3;return(D[U]|(B<=4?0:D[U+1]<<8))>>>B&15}function Re(D,V){var B=V&7,U=V>>>3;return(D[U]|(B<=3?0:D[U+1]<<8))>>>B&31}function we(D,V){var B=V&7,U=V>>>3;return(D[U]|(B<=1?0:D[U+1]<<8))>>>B&127}function Dt(D,V,B){var U=V&7,q=V>>>3,K=(1<<B)-1,ie=D[q]>>>U;return B<8-U||(ie|=D[q+1]<<8-U,B<16-U)||(ie|=D[q+2]<<16-U,B<24-U)||(ie|=D[q+3]<<24-U),ie&K}function ur(D,V,B){var U=V&7,q=V>>>3;return U<=5?D[q]|=(B&7)<<U:(D[q]|=B<<U&255,D[q+1]=(B&7)>>8-U),V+3}function un(D,V,B){var U=V&7,q=V>>>3;return B=(B&1)<<U,D[q]|=B,V+1}function $t(D,V,B){var U=V&7,q=V>>>3;return B<<=U,D[q]|=B&255,B>>>=8,D[q+1]=B,V+8}function $r(D,V,B){var U=V&7,q=V>>>3;return B<<=U,D[q]|=B&255,B>>>=8,D[q+1]=B&255,D[q+2]=B>>>8,V+16}function pi(D,V){var B=D.length,U=2*B>V?2*B:V+5,q=0;if(B>=V)return D;if(rt){var K=DO(U);if(D.copy)D.copy(K);else for(;q<D.length;++q)K[q]=D[q];return K}else if(ee){var ie=new Uint8Array(U);if(ie.set)ie.set(D);else for(;q<B;++q)ie[q]=D[q];return ie}return D.length=U,D}function _r(D){for(var V=new Array(D),B=0;B<D;++B)V[B]=0;return V}function ca(D,V,B){var U=1,q=0,K=0,ie=0,de=0,ne=D.length,ae=ee?new Uint16Array(32):_r(32);for(K=0;K<32;++K)ae[K]=0;for(K=ne;K<B;++K)D[K]=0;ne=D.length;var se=ee?new Uint16Array(ne):_r(ne);for(K=0;K<ne;++K)ae[q=D[K]]++,U<q&&(U=q),se[K]=0;for(ae[0]=0,K=1;K<=U;++K)ae[K+16]=de=de+ae[K-1]<<1;for(K=0;K<ne;++K)de=D[K],de!=0&&(se[K]=ae[de+16]++);var pe=0;for(K=0;K<ne;++K)if(pe=D[K],pe!=0)for(de=Z(se[K],U)>>U-pe,ie=(1<<U+4-pe)-1;ie>=0;--ie)V[de|ie<<pe]=pe&15|K<<4;return U}var Fu=ee?new Uint16Array(512):_r(512),re=ee?new Uint16Array(32):_r(32);if(!ee){for(var Ce=0;Ce<512;++Ce)Fu[Ce]=0;for(Ce=0;Ce<32;++Ce)re[Ce]=0}(function(){for(var D=[],V=0;V<32;V++)D.push(5);ca(D,re,32);var B=[];for(V=0;V<=143;V++)B.push(8);for(;V<=255;V++)B.push(9);for(;V<=279;V++)B.push(7);for(;V<=287;V++)B.push(8);ca(B,Fu,288)})();var Ae=function(){for(var V=ee?new Uint8Array(32768):[],B=0,U=0;B<fe.length-1;++B)for(;U<fe[B+1];++U)V[U]=B;for(;U<32768;++U)V[U]=29;var q=ee?new Uint8Array(259):[];for(B=0,U=0;B<Q.length-1;++B)for(;U<Q[B+1];++U)q[U]=B;function K(de,ne){for(var ae=0;ae<de.length;){var se=Math.min(65535,de.length-ae),pe=ae+se==de.length;for(ne.write_shift(1,+pe),ne.write_shift(2,se),ne.write_shift(2,~se&65535);se-- >0;)ne[ne.l++]=de[ae++]}return ne.l}function ie(de,ne){for(var ae=0,se=0,pe=ee?new Uint16Array(32768):[];se<de.length;){var Se=Math.min(65535,de.length-se);if(Se<10){for(ae=ur(ne,ae,+(se+Se==de.length)),ae&7&&(ae+=8-(ae&7)),ne.l=ae/8|0,ne.write_shift(2,Se),ne.write_shift(2,~Se&65535);Se-- >0;)ne[ne.l++]=de[se++];ae=ne.l*8;continue}ae=ur(ne,ae,+(se+Se==de.length)+2);for(var je=0;Se-- >0;){var xe=de[se];je=(je<<5^xe)&32767;var Ne=-1,Le=0;if((Ne=pe[je])&&(Ne|=se&-32768,Ne>se&&(Ne-=32768),Ne<se))for(;de[Ne+Le]==de[se+Le]&&Le<250;)++Le;if(Le>2){xe=q[Le],xe<=22?ae=$t(ne,ae,le[xe+1]>>1)-1:($t(ne,ae,3),ae+=5,$t(ne,ae,le[xe-23]>>5),ae+=3);var It=xe<8?0:xe-4>>2;It>0&&($r(ne,ae,Le-Q[xe]),ae+=It),xe=V[se-Ne],ae=$t(ne,ae,le[xe]>>3),ae-=3;var Rt=xe<4?0:xe-2>>1;Rt>0&&($r(ne,ae,se-Ne-fe[xe]),ae+=Rt);for(var Ir=0;Ir<Le;++Ir)pe[je]=se&32767,je=(je<<5^de[se])&32767,++se;Se-=Le-1}else xe<=143?xe=xe+48:ae=un(ne,ae,1),ae=$t(ne,ae,le[xe]),pe[je]=se&32767,++se}ae=$t(ne,ae,0)-1}return ne.l=(ae+7)/8|0,ne.l}return function(ne,ae){return ne.length<8?K(ne,ae):ie(ne,ae)}}();function xt(D){var V=ce(50+Math.floor(D.length*1.1)),B=Ae(D,V);return V.slice(0,B)}var tt=ee?new Uint16Array(32768):_r(32768),ua=ee?new Uint16Array(32768):_r(32768),uN=ee?new Uint16Array(128):_r(128),dN=1,fN=1;function UF(D,V){var B=Re(D,V)+257;V+=5;var U=Re(D,V)+1;V+=5;var q=et(D,V)+4;V+=4;for(var K=0,ie=ee?new Uint8Array(19):_r(19),de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ne=1,ae=ee?new Uint8Array(8):_r(8),se=ee?new Uint8Array(8):_r(8),pe=ie.length,Se=0;Se<q;++Se)ie[I[Se]]=K=Ee(D,V),ne<K&&(ne=K),ae[K]++,V+=3;var je=0;for(ae[0]=0,Se=1;Se<=ne;++Se)se[Se]=je=je+ae[Se-1]<<1;for(Se=0;Se<pe;++Se)(je=ie[Se])!=0&&(de[Se]=se[je]++);var xe=0;for(Se=0;Se<pe;++Se)if(xe=ie[Se],xe!=0){je=le[de[Se]]>>8-xe;for(var Ne=(1<<7-xe)-1;Ne>=0;--Ne)uN[je|Ne<<xe]=xe&7|Se<<3}var Le=[];for(ne=1;Le.length<B+U;)switch(je=uN[we(D,V)],V+=je&7,je>>>=3){case 16:for(K=3+ke(D,V),V+=2,je=Le[Le.length-1];K-- >0;)Le.push(je);break;case 17:for(K=3+Ee(D,V),V+=3;K-- >0;)Le.push(0);break;case 18:for(K=11+we(D,V),V+=7;K-- >0;)Le.push(0);break;default:Le.push(je),ne<je&&(ne=je);break}var It=Le.slice(0,B),Rt=Le.slice(B);for(Se=B;Se<286;++Se)It[Se]=0;for(Se=U;Se<30;++Se)Rt[Se]=0;return dN=ca(It,tt,286),fN=ca(Rt,ua,30),V}function zF(D,V){if(D[0]==3&&!(D[1]&3))return[Zo(V),2];for(var B=0,U=0,q=DO(V||1<<18),K=0,ie=q.length>>>0,de=0,ne=0;!(U&1);){if(U=Ee(D,B),B+=3,U>>>1)U>>1==1?(de=9,ne=5):(B=UF(D,B),de=dN,ne=fN);else{B&7&&(B+=8-(B&7));var ae=D[B>>>3]|D[(B>>>3)+1]<<8;if(B+=32,ae>0)for(!V&&ie<K+ae&&(q=pi(q,K+ae),ie=q.length);ae-- >0;)q[K++]=D[B>>>3],B+=8;continue}for(;;){!V&&ie<K+32767&&(q=pi(q,K+32767),ie=q.length);var se=Dt(D,B,de),pe=U>>>1==1?Fu[se]:tt[se];if(B+=pe&15,pe>>>=4,!(pe>>>8&255))q[K++]=pe;else{if(pe==256)break;pe-=257;var Se=pe<8?0:pe-4>>2;Se>5&&(Se=0);var je=K+Q[pe];Se>0&&(je+=Dt(D,B,Se),B+=Se),se=Dt(D,B,ne),pe=U>>>1==1?re[se]:ua[se],B+=pe&15,pe>>>=4;var xe=pe<4?0:pe-2>>1,Ne=fe[pe];for(xe>0&&(Ne+=Dt(D,B,xe),B+=xe),!V&&ie<je&&(q=pi(q,je+100),ie=q.length);K<je;)q[K]=q[K-Ne],++K}}}return V?[q,B+7>>>3]:[q.slice(0,K),B+7>>>3]}function hN(D,V){var B=D.slice(D.l||0),U=zF(B,V);return D.l+=U[1],U[0]}function mN(D,V){if(D)typeof console<"u"&&console.error(V);else throw new Error(V)}function pN(D,V){var B=D;Mn(B,0);var U=[],q=[],K={FileIndex:U,FullPaths:q};S(K,{root:V.root});for(var ie=B.length-4;(B[ie]!=80||B[ie+1]!=75||B[ie+2]!=5||B[ie+3]!=6)&&ie>=0;)--ie;B.l=ie+4,B.l+=4;var de=B.read_shift(2);B.l+=6;var ne=B.read_shift(4);for(B.l=ne,ie=0;ie<de;++ie){B.l+=20;var ae=B.read_shift(4),se=B.read_shift(4),pe=B.read_shift(2),Se=B.read_shift(2),je=B.read_shift(2);B.l+=8;var xe=B.read_shift(4),Ne=o(B.slice(B.l+pe,B.l+pe+Se));B.l+=pe+Se+je;var Le=B.l;B.l=xe+4,WF(B,ae,se,K,Ne),B.l=Le}return K}function WF(D,V,B,U,q){D.l+=2;var K=D.read_shift(2),ie=D.read_shift(2),de=s(D);if(K&8257)throw new Error("Unsupported ZIP encryption");for(var ne=D.read_shift(4),ae=D.read_shift(4),se=D.read_shift(4),pe=D.read_shift(2),Se=D.read_shift(2),je="",xe=0;xe<pe;++xe)je+=String.fromCharCode(D[D.l++]);if(Se){var Ne=o(D.slice(D.l,D.l+Se));(Ne[21589]||{}).mt&&(de=Ne[21589].mt),((q||{})[21589]||{}).mt&&(de=q[21589].mt)}D.l+=Se;var Le=D.slice(D.l,D.l+ae);switch(ie){case 8:Le=G(D,se);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ie)}var It=!1;K&8&&(ne=D.read_shift(4),ne==134695760&&(ne=D.read_shift(4),It=!0),ae=D.read_shift(4),se=D.read_shift(4)),ae!=V&&mN(It,"Bad compressed size: "+V+" != "+ae),se!=B&&mN(It,"Bad uncompressed size: "+B+" != "+se),jv(U,je,Le,{unsafe:!0,mt:de})}function VF(D,V){var B=V||{},U=[],q=[],K=ce(1),ie=B.compression?8:0,de=0,ne=0,ae=0,se=0,pe=0,Se=D.FullPaths[0],je=Se,xe=D.FileIndex[0],Ne=[],Le=0;for(ne=1;ne<D.FullPaths.length;++ne)if(je=D.FullPaths[ne].slice(Se.length),xe=D.FileIndex[ne],!(!xe.size||!xe.content||je=="Sh33tJ5")){var It=se,Rt=ce(je.length);for(ae=0;ae<je.length;++ae)Rt.write_shift(1,je.charCodeAt(ae)&127);Rt=Rt.slice(0,Rt.l),Ne[pe]=SNe.buf(xe.content,0);var Ir=xe.content;ie==8&&(Ir=Y(Ir)),K=ce(30),K.write_shift(4,67324752),K.write_shift(2,20),K.write_shift(2,de),K.write_shift(2,ie),xe.mt?a(K,xe.mt):K.write_shift(4,0),K.write_shift(-4,Ne[pe]),K.write_shift(4,Ir.length),K.write_shift(4,xe.content.length),K.write_shift(2,Rt.length),K.write_shift(2,0),se+=K.length,U.push(K),se+=Rt.length,U.push(Rt),se+=Ir.length,U.push(Ir),K=ce(46),K.write_shift(4,33639248),K.write_shift(2,0),K.write_shift(2,20),K.write_shift(2,de),K.write_shift(2,ie),K.write_shift(4,0),K.write_shift(-4,Ne[pe]),K.write_shift(4,Ir.length),K.write_shift(4,xe.content.length),K.write_shift(2,Rt.length),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(4,0),K.write_shift(4,It),Le+=K.l,q.push(K),Le+=Rt.length,q.push(Rt),++pe}return K=ce(22),K.write_shift(4,101010256),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(2,pe),K.write_shift(2,pe),K.write_shift(4,Le),K.write_shift(4,se),K.write_shift(2,0),Pr([Pr(U),Pr(q),K])}var om={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function HF(D,V){if(D.ctype)return D.ctype;var B=D.name||"",U=B.match(/\.([^\.]+)$/);return U&&om[U[1]]||V&&(U=(B=V).match(/[\.\\]([^\.\\])+$/),U&&om[U[1]])?om[U[1]]:"application/octet-stream"}function qF(D){for(var V=Nh(D),B=[],U=0;U<V.length;U+=76)B.push(V.slice(U,U+76));return B.join(`\r
`)+`\r
`}function GF(D){var V=D.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ae){var se=ae.charCodeAt(0).toString(16).toUpperCase();return"="+(se.length==1?"0"+se:se)});V=V.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),V.charAt(0)==`
`&&(V="=0D"+V.slice(1)),V=V.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var B=[],U=V.split(`\r
`),q=0;q<U.length;++q){var K=U[q];if(K.length==0){B.push("");continue}for(var ie=0;ie<K.length;){var de=76,ne=K.slice(ie,ie+de);ne.charAt(de-1)=="="?de--:ne.charAt(de-2)=="="?de-=2:ne.charAt(de-3)=="="&&(de-=3),ne=K.slice(ie,ie+de),ie+=de,ie<K.length&&(ne+="="),B.push(ne)}}return B.join(`\r
`)}function KF(D){for(var V=[],B=0;B<D.length;++B){for(var U=D[B];B<=D.length&&U.charAt(U.length-1)=="=";)U=U.slice(0,U.length-1)+D[++B];V.push(U)}for(var q=0;q<V.length;++q)V[q]=V[q].replace(/[=][0-9A-Fa-f]{2}/g,function(K){return String.fromCharCode(parseInt(K.slice(1),16))});return Ti(V.join(`\r
`))}function YF(D,V,B){for(var U="",q="",K="",ie,de=0;de<10;++de){var ne=V[de];if(!ne||ne.match(/^\s*$/))break;var ae=ne.match(/^(.*?):\s*([^\s].*)$/);if(ae)switch(ae[1].toLowerCase()){case"content-location":U=ae[2].trim();break;case"content-type":K=ae[2].trim();break;case"content-transfer-encoding":q=ae[2].trim();break}}switch(++de,q.toLowerCase()){case"base64":ie=Ti(Ha(V.slice(de).join("")));break;case"quoted-printable":ie=KF(V.slice(de));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+q)}var se=jv(D,U.slice(B.length),ie,{unsafe:!0});K&&(se.ctype=K)}function XF(D,V){if(z(D.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var B=V&&V.root||"",U=(rt&&Buffer.isBuffer(D)?D.toString("binary"):z(D)).split(`\r
`),q=0,K="";for(q=0;q<U.length;++q)if(K=U[q],!!/^Content-Location:/i.test(K)&&(K=K.slice(K.indexOf("file")),B||(B=K.slice(0,K.lastIndexOf("/")+1)),K.slice(0,B.length)!=B))for(;B.length>0&&(B=B.slice(0,B.length-1),B=B.slice(0,B.lastIndexOf("/")+1),K.slice(0,B.length)!=B););var ie=(U[1]||"").match(/boundary="(.*?)"/);if(!ie)throw new Error("MAD cannot find boundary");var de="--"+(ie[1]||""),ne=[],ae=[],se={FileIndex:ne,FullPaths:ae};S(se);var pe,Se=0;for(q=0;q<U.length;++q){var je=U[q];je!==de&&je!==de+"--"||(Se++&&YF(se,U.slice(pe,q),B),pe=q)}return se}function QF(D,V){var B=V||{},U=B.boundary||"SheetJS";U="------="+U;for(var q=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+U.slice(2)+'"',"","",""],K=D.FullPaths[0],ie=K,de=D.FileIndex[0],ne=1;ne<D.FullPaths.length;++ne)if(ie=D.FullPaths[ne].slice(K.length),de=D.FileIndex[ne],!(!de.size||!de.content||ie=="Sh33tJ5")){ie=ie.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Le){return"_x"+Le.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Le){return"_u"+Le.charCodeAt(0).toString(16)+"_"});for(var ae=de.content,se=rt&&Buffer.isBuffer(ae)?ae.toString("binary"):z(ae),pe=0,Se=Math.min(1024,se.length),je=0,xe=0;xe<=Se;++xe)(je=se.charCodeAt(xe))>=32&&je<128&&++pe;var Ne=pe>=Se*4/5;q.push(U),q.push("Content-Location: "+(B.root||"file:///C:/SheetJS/")+ie),q.push("Content-Transfer-Encoding: "+(Ne?"quoted-printable":"base64")),q.push("Content-Type: "+HF(de,ie)),q.push(""),q.push(Ne?GF(se):qF(se))}return q.push(U+`--\r
`),q.join(`\r
`)}function JF(D){var V={};return S(V,D),V}function jv(D,V,B,U){var q=U&&U.unsafe;q||S(D);var K=!q&&pt.find(D,V);if(!K){var ie=D.FullPaths[0];V.slice(0,ie.length)==ie?ie=V:(ie.slice(-1)!="/"&&(ie+="/"),ie=(ie+V).replace("//","/")),K={name:i(V),type:2},D.FileIndex.push(K),D.FullPaths.push(ie),q||pt.utils.cfb_gc(D)}return K.content=B,K.size=B?B.length:0,U&&(U.CLSID&&(K.clsid=U.CLSID),U.mt&&(K.mt=U.mt),U.ct&&(K.ct=U.ct)),K}function ZF(D,V){S(D);var B=pt.find(D,V);if(B){for(var U=0;U<D.FileIndex.length;++U)if(D.FileIndex[U]==B)return D.FileIndex.splice(U,1),D.FullPaths.splice(U,1),!0}return!1}function eL(D,V,B){S(D);var U=pt.find(D,V);if(U){for(var q=0;q<D.FileIndex.length;++q)if(D.FileIndex[q]==U)return D.FileIndex[q].name=i(B),D.FullPaths[q]=B,!0}return!1}function tL(D){T(D,!0)}return e.find=A,e.read=N,e.parse=d,e.write=J,e.writeFile=R,e.utils={cfb_new:JF,cfb_add:jv,cfb_del:ZF,cfb_mov:eL,cfb_gc:tL,ReadShift:af,CheckField:D6,prep_blob:Mn,bconcat:Pr,use_zlib:C,_deflateRaw:xt,_inflateRaw:hN,consts:L},e}();function NNe(t){return typeof t=="string"?pv(t):Array.isArray(t)?XSe(t):t}function rm(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=pv(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Eh(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([NNe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=t,s.href=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=tm(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Mr(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function zO(t,e){for(var r=[],n=Mr(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function WS(t){for(var e=[],r=Mr(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function vv(t){for(var e=[],r=Mr(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function jNe(t){for(var e=[],r=Mr(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var kg=new Date(1899,11,30,0,0,0);function Sn(t,e){var r=t.getTime(),n=kg.getTime()+(t.getTimezoneOffset()-kg.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var x6=new Date,ENe=kg.getTime()+(x6.getTimezoneOffset()-kg.getTimezoneOffset())*6e4,WO=x6.getTimezoneOffset();function v6(t){var e=new Date;return e.setTime(t*24*60*60*1e3+ENe),e.getTimezoneOffset()!==WO&&e.setTime(e.getTime()+(e.getTimezoneOffset()-WO)*6e4),e}var VO=new Date("2017-02-19T19:06:09.000Z"),y6=isNaN(VO.getFullYear())?new Date("2/19/17"):VO,TNe=y6.getFullYear()==2017;function on(t,e){var r=new Date(t);if(TNe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(y6.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function yv(t,e){if(rt&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return r[a]||a})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function Nn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Nn(t[r]));return e}function Vt(t,e){for(var r="";r.length<e;)r+=t;return r}function Da(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,a){return r=-r,a}),!isNaN(e=Number(n)))?e/r:e}var PNe=["january","february","march","april","may","june","july","august","september","october","november","december"];function jh(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),a=e.getDate();if(isNaN(a))return r;var s=t.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&PNe.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||a>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function We(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return rt?n=es(r):n=QSe(r),pt.utils.cfb_add(t,e,n)}pt.utils.cfb_add(t,e,r)}else t.file(e,r)}function VS(){return pt.utils.cfb_new()}var rr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,kNe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},HS=WS(kNe),qS=/[&<>'"]/g,ANe=/[\u0000-\u0008\u000b-\u001f]/g;function ut(t){var e=t+"";return e.replace(qS,function(r){return HS[r]}).replace(ANe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function HO(t){return ut(t).replace(/ /g,"_x0020_")}var b6=/[\u0000-\u001f]/g;function ONe(t){var e=t+"";return e.replace(qS,function(r){return HS[r]}).replace(/\n/g,"<br/>").replace(b6,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function CNe(t){var e=t+"";return e.replace(qS,function(r){return HS[r]}).replace(b6,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function MNe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function DNe(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function qy(t){for(var e="",r=0,n=0,i=0,a=0,s=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=i&63,e+=String.fromCharCode(s);continue}if(a=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|a&63);continue}s=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(a&63)<<6|s&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function qO(t){var e=Zo(2*t.length),r,n,i=1,a=0,s=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(e[a++]=s&255,e[a++]=s>>>8,s=0),e[a++]=r%256,e[a++]=r>>>8;return e.slice(0,a).toString("ucs2")}function GO(t){return es(t,"binary").toString("utf8")}var d0="foo bar bazâð£",nf=rt&&(GO(d0)==qy(d0)&&GO||qO(d0)==qy(d0)&&qO)||qy,Eh=rt?function(t){return es(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},$Ne=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}}(),w6=/(^\s|\s$|\n)/;function kr(t,e){return"<"+t+(e.match(w6)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Th(t){return Mr(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function ve(t,e,r){return"<"+t+(r!=null?Th(r):"")+(e!=null?(e.match(w6)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function t_(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function INe(t,e){switch(typeof t){case"string":var r=ve("vt:lpwstr",ut(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return ve((t|0)==t?"vt:i4":"vt:r8",ut(String(t)));case"boolean":return ve("vt:bool",t?"true":"false")}if(t instanceof Date)return ve("vt:filetime",t_(t));throw new Error("Unable to serialize "+t)}var gr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Mu=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],$n={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function RNe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,a=5;a>=0;--a)i=i*256+t[e+a];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function FNe(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,a=0,s=n?-e:e;isFinite(s)?s==0?i=a=0:(i=Math.floor(Math.log(s)/Math.LN2),a=s*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[r+o]=a&255;t[r+6]=(i&15)<<4|a&15,t[r+7]=i>>4|n}var KO=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,a=t[0][n].length;i<a;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},YO=rt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:es(e)})):KO(t)}:KO,XO=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(kd(t,i)));return n.join("").replace(rf,"")},GS=rt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(rf,""):XO(t,e,r)}:XO,QO=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},_6=rt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):QO(t,e,r)}:QO,JO=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(Il(t,i)));return n.join("")},nm=rt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):JO(e,r,n)}:JO,S6=function(t,e){var r=In(t,e);return r>0?nm(t,e+4,e+4+r-1):""},N6=S6,j6=function(t,e){var r=In(t,e);return r>0?nm(t,e+4,e+4+r-1):""},E6=j6,T6=function(t,e){var r=2*In(t,e);return r>0?nm(t,e+4,e+4+r-1):""},P6=T6,k6=function(e,r){var n=In(e,r);return n>0?GS(e,r+4,r+4+n):""},A6=k6,O6=function(t,e){var r=In(t,e);return r>0?nm(t,e+4,e+4+r):""},C6=O6,M6=function(t,e){return RNe(t,e)},Ag=M6,KS=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};rt&&(N6=function(e,r){if(!Buffer.isBuffer(e))return S6(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},E6=function(e,r){if(!Buffer.isBuffer(e))return j6(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},P6=function(e,r){if(!Buffer.isBuffer(e))return T6(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},A6=function(e,r){if(!Buffer.isBuffer(e))return k6(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},C6=function(e,r){if(!Buffer.isBuffer(e))return O6(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Ag=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):M6(e,r)},KS=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Il=function(t,e){return t[e]},kd=function(t,e){return t[e+1]*256+t[e]},LNe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},In=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},_o=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},BNe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function af(t,e){var r="",n,i,a=[],s,o,l,u;switch(e){case"dbcs":if(u=this.l,rt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(kd(this,u)),u+=2;t*=2;break;case"utf8":r=nm(this,this.l,this.l+t);break;case"utf16le":t*=2,r=GS(this,this.l,this.l+t);break;case"wstr":return af.call(this,t,"dbcs");case"lpstr-ansi":r=N6(this,this.l),t=4+In(this,this.l);break;case"lpstr-cp":r=E6(this,this.l),t=4+In(this,this.l);break;case"lpwstr":r=P6(this,this.l),t=4+2*In(this,this.l);break;case"lpp4":t=4+In(this,this.l),r=A6(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+In(this,this.l),r=C6(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(s=Il(this,this.l+t++))!==0;)a.push(l0(s));r=a.join("");break;case"_wstr":for(t=0,r="";(s=kd(this,this.l+t))!==0;)a.push(l0(s)),t+=2;t+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Il(this,u),this.l=u+1,o=af.call(this,t-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(l0(kd(this,u))),u+=2}r=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Il(this,u),this.l=u+1,o=af.call(this,t-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(l0(Il(this,u))),u+=1}r=a.join("");break;default:switch(t){case 1:return n=Il(this,this.l),this.l++,n;case 2:return n=(e==="i"?LNe:kd)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?_o:BNe)(this,this.l),this.l+=4,n):(i=In(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=Ag(this,this.l):i=Ag([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=_6(this,this.l,t);break}}return this.l+=t,r}var UNe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},zNe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},WNe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function VNe(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)WNe(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var s=e.charCodeAt(i);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,UNe(this,e,this.l);break;case 8:if(n=8,r==="f"){FNe(this,e,this.l);break}case 16:break;case-4:n=4,zNe(this,e,this.l);break}return this.l+=n,this}function D6(t,e){var r=_6(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Mn(t,e){t.l=e,t.read_shift=af,t.chk=D6,t.write_shift=VNe}function sa(t,e){t.l+=e}function ce(t){var e=Zo(t);return Mn(e,0),e}function wn(){var t=[],e=rt?256:2048,r=function(u){var d=ce(u);return Mn(d,0),d},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(i(),n=r(Math.max(u+1,e)))},s=function(){return i(),Pr(t)},o=function(u){i(),n=u,n.l==null&&(n.l=n.length),a(e)};return{next:a,push:o,end:s,_bufs:t}}function he(t,e,r,n){var i=+e,a;if(!isNaN(i)){n||(n=RAe[i].p||(r||[]).length||0),a=1+(i>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var s=t.next(a);i<=127?s.write_shift(1,i):(s.write_shift(1,(i&127)+128),s.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&KS(r)&&t.push(r)}}function sf(t,e,r){var n=Nn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function ZO(t,e,r){var n=Nn(t);return n.s=sf(n.s,e.s,r),n.e=sf(n.e,e.s,r),n}function of(t,e){if(t.cRel&&t.c<0)for(t=Nn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Nn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=ft(t);return!t.cRel&&t.cRel!=null&&(r=GNe(r)),!t.rRel&&t.rRel!=null&&(r=HNe(r)),r}function Gy(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Hr(t.s.c)+":"+(t.e.cRel?"":"$")+Hr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Or(t.s.r)+":"+(t.e.rRel?"":"$")+Or(t.e.r):of(t.s,e.biff)+":"+of(t.e,e.biff)}function YS(t){return parseInt(qNe(t),10)-1}function Or(t){return""+(t+1)}function HNe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function qNe(t){return t.replace(/\$(\d+)$/,"$1")}function XS(t){for(var e=KNe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Hr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function GNe(t){return t.replace(/^([A-Z])/,"$$$1")}function KNe(t){return t.replace(/^\$([A-Z])/,"$1")}function YNe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function xr(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function ft(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Wn(t){var e=t.indexOf(":");return e==-1?{s:xr(t),e:xr(t)}:{s:xr(t.slice(0,e)),e:xr(t.slice(e+1))}}function er(t,e){return typeof e>"u"||typeof e=="number"?er(t.s,t.e):(typeof t!="string"&&(t=ft(t)),typeof e!="string"&&(e=ft(e)),t==e?t:t+":"+e)}function kt(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,a=t.length;for(r=0;n<a&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<a&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===a||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=a&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=a&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function eC(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Us(t.z,r?Sn(e):e)}catch{}try{return t.w=Us((t.XF||{}).numFmtId||(r?14:0),r?Sn(e):e)}catch{return""+e}}function qa(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?im[t.v]||t.v:e==null?eC(t,t.v):eC(t,e))}function ml(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function $6(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,a=t||(i?[]:{}),s=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?xr(n.origin):n.origin;s=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=kt(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),s==-1&&(u.e.r=s=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[f].length;++h)if(!(typeof e[f][h]>"u")){var m={v:e[f][h]},g=s+f,p=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>p&&(u.s.c=p),u.e.r<g&&(u.e.r=g),u.e.c<p&&(u.e.c=p),e[f][h]&&typeof e[f][h]=="object"&&!Array.isArray(e[f][h])&&!(e[f][h]instanceof Date))m=e[f][h];else if(Array.isArray(m.v)&&(m.f=e[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||qt[14],n.cellDates?(m.t="d",m.w=Us(m.z,Sn(m.v))):(m.t="n",m.v=Sn(m.v),m.w=Us(m.z,m.v))):m.t="s";if(i)a[g]||(a[g]=[]),a[g][p]&&a[g][p].z&&(m.z=a[g][p].z),a[g][p]=m;else{var x=ft({c:p,r:g});a[x]&&a[x].z&&(m.z=a[x].z),a[x]=m}}}return u.s.c<1e7&&(a["!ref"]=er(u)),a}function Du(t,e){return $6(null,t,e)}function XNe(t){return t.read_shift(4,"i")}function Mi(t,e){return e||(e=ce(4)),e.write_shift(4,t),e}function qr(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function vr(t,e){var r=!1;return e==null&&(r=!0,e=ce(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function QNe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function JNe(t,e){return e||(e=ce(4)),e.write_shift(2,0),e.write_shift(2,0),e}function QS(t,e){var r=t.l,n=t.read_shift(1),i=qr(t),a=[],s={t:i,h:i};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(QNe(t));s.r=a}else s.r=[{ich:0,ifnt:0}];return t.l=r+e,s}function ZNe(t,e){var r=!1;return e==null&&(r=!0,e=ce(15+4*t.t.length)),e.write_shift(1,0),vr(t.t,e),r?e.slice(0,e.l):e}var eje=QS;function tje(t,e){var r=!1;return e==null&&(r=!0,e=ce(23+4*t.t.length)),e.write_shift(1,1),vr(t.t,e),e.write_shift(4,1),JNe({ich:0,ifnt:0},e),r?e.slice(0,e.l):e}function mi(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function pl(t,e){return e==null&&(e=ce(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function gl(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function xl(t,e){return e==null&&(e=ce(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var rje=qr,I6=vr;function JS(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Og(t,e){var r=!1;return e==null&&(r=!0,e=ce(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var nje=qr,r_=JS,ZS=Og;function R6(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?Ag([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):_o(e,0)>>2;return r?i/100:i}function F6(t,e){e==null&&(e=ce(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-(1<<29)&&t<1<<29?n=1:i==(i|0)&&i>=-(1<<29)&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function L6(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function ije(t,e){return e||(e=ce(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var vl=L6,$u=ije;function Iu(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function el(t,e){return(e||ce(8)).write_shift(8,t,"f")}function aje(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),a=t.read_shift(2,"i"),s=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var u=mje[i];u&&(e.rgb=dC(u));break;case 2:e.rgb=dC([s,o,l]);break;case 3:e.theme=i;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Cg(t,e){if(e||(e=ce(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function sje(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function oje(t,e){e||(e=ce(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var B6=2,kn=3,f0=11,Mg=19,h0=64,lje=65,cje=71,uje=4108,dje=4126,Tr=80,tC={1:{n:"CodePage",t:B6},2:{n:"Category",t:Tr},3:{n:"PresentationFormat",t:Tr},4:{n:"ByteCount",t:kn},5:{n:"LineCount",t:kn},6:{n:"ParagraphCount",t:kn},7:{n:"SlideCount",t:kn},8:{n:"NoteCount",t:kn},9:{n:"HiddenCount",t:kn},10:{n:"MultimediaClipCount",t:kn},11:{n:"ScaleCrop",t:f0},12:{n:"HeadingPairs",t:uje},13:{n:"TitlesOfParts",t:dje},14:{n:"Manager",t:Tr},15:{n:"Company",t:Tr},16:{n:"LinksUpToDate",t:f0},17:{n:"CharacterCount",t:kn},19:{n:"SharedDoc",t:f0},22:{n:"HyperlinksChanged",t:f0},23:{n:"AppVersion",t:kn,p:"version"},24:{n:"DigSig",t:lje},26:{n:"ContentType",t:Tr},27:{n:"ContentStatus",t:Tr},28:{n:"Language",t:Tr},29:{n:"Version",t:Tr},255:{},2147483648:{n:"Locale",t:Mg},2147483651:{n:"Behavior",t:Mg},1919054434:{}},rC={1:{n:"CodePage",t:B6},2:{n:"Title",t:Tr},3:{n:"Subject",t:Tr},4:{n:"Author",t:Tr},5:{n:"Keywords",t:Tr},6:{n:"Comments",t:Tr},7:{n:"Template",t:Tr},8:{n:"LastAuthor",t:Tr},9:{n:"RevNumber",t:Tr},10:{n:"EditTime",t:h0},11:{n:"LastPrinted",t:h0},12:{n:"CreatedDate",t:h0},13:{n:"ModifiedDate",t:h0},14:{n:"PageCount",t:kn},15:{n:"WordCount",t:kn},16:{n:"CharCount",t:kn},17:{n:"Thumbnail",t:cje},18:{n:"Application",t:Tr},19:{n:"DocSecurity",t:kn},255:{},2147483648:{n:"Locale",t:Mg},2147483651:{n:"Behavior",t:Mg},1919054434:{}};function fje(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var hje=fje([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),mje=Nn(hje),im={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},pje={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},m0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function U6(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function z6(t,e){var r=jNe(pje),n=[],i;n[n.length]=rr,n[n.length]=ve("Types",null,{xmlns:gr.CT,"xmlns:xsd":gr.xsd,"xmlns:xsi":gr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return ve("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(i=t[l][0],n[n.length]=ve("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:m0[l][e.bookType]||m0[l].xlsx}))},s=function(l){(t[l]||[]).forEach(function(u){n[n.length]=ve("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:m0[l][e.bookType]||m0[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){n[n.length]=ve("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return a("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Qe={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function W6(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function xc(t){var e=[rr,ve("Relationships",null,{xmlns:gr.RELS})];return Mr(t["!id"]).forEach(function(r){e[e.length]=ve("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function lt(t,e,r,n,i,a){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[Qe.HLINK,Qe.XPATH,Qe.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function gje(t){var e=[rr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function nC(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function xje(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function vje(t){var e=[rr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(nC(t[r][0],t[r][1])),e.push(xje("",t[r][0]));return e.push(nC("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function V6(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+jg.version+"</meta:generator></office:meta></office:document-meta>"}var Lo=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Ky(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=ut(e),n[n.length]=r?ve(t,e,r):kr(t,e))}function H6(t,e){var r=e||{},n=[rr,ve("cp:coreProperties",null,{"xmlns:cp":gr.CORE_PROPS,"xmlns:dc":gr.dc,"xmlns:dcterms":gr.dcterms,"xmlns:dcmitype":gr.dcmitype,"xmlns:xsi":gr.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Ky("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:t_(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&Ky("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:t_(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var a=0;a!=Lo.length;++a){var s=Lo[a],o=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:t?t[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Ky(s[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var vc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],q6=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function G6(t){var e=[],r=ve;return t||(t={}),t.Application="SheetJS",e[e.length]=rr,e[e.length]=ve("Properties",null,{xmlns:gr.EXT_PROPS,"xmlns:vt":gr.vt}),vc.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=ut(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ut(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function K6(t){var e=[rr,ve("Properties",null,{xmlns:gr.CUST_PROPS,"xmlns:vt":gr.vt})];if(!t)return e.join("");var r=1;return Mr(t).forEach(function(i){++r,e[e.length]=ve("property",INe(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ut(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var iC={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function yje(t,e){var r=[];return Mr(iC).map(function(n){for(var i=0;i<Lo.length;++i)if(Lo[i][1]==n)return Lo[i];for(i=0;i<vc.length;++i)if(vc[i][1]==n)return vc[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(kr(iC[n[1]]||n[1],i))}}),ve("DocumentProperties",r.join(""),{xmlns:$n.o})}function bje(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&Mr(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var s=0;s<Lo.length;++s)if(a==Lo[s][1])return;for(s=0;s<vc.length;++s)if(a==vc[s][1])return;for(s=0;s<r.length;++s)if(a==r[s])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(ve(HO(a),o,{"dt:dt":l}))}}),e&&Mr(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var s=e[a],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),i.push(ve(HO(a),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+$n.o+'">'+i.join("")+"</"+n+">"}function wje(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),i+=a);var s=ce(8);return s.write_shift(4,n),s.write_shift(4,i),s}function aC(t,e){var r=ce(4),n=ce(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=ce(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=wje(e);break;case 31:case 80:for(n=ce(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Pr([r,n])}var Y6=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function _je(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function sC(t,e,r){var n=ce(8),i=[],a=[],s=8,o=0,l=ce(8),u=ce(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),i.push(u),s+=8+l.length,!e){u=ce(8),u.write_shift(4,0),i.unshift(u);var d=[ce(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var f=t[o][0];for(l=ce(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Pr(d),a.unshift(l),s+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(Y6.indexOf(t[o][0])>-1||q6.indexOf(t[o][0])>-1)&&t[o][1]!=null){var h=t[o][1],m=0;if(e){m=+e[t[o][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}l=aC(g.t,h)}else{var x=_je(h);x==-1&&(x=31,h=String(h)),l=aC(x,h)}a.push(l),u=ce(8),u.write_shift(4,e?m:2+o),i.push(u),s+=8+l.length}var v=8*(a.length+1);for(o=0;o<a.length;++o)i[o].write_shift(4,v),v+=a[o].length;return n.write_shift(4,s),n.write_shift(4,a.length),Pr([n].concat(i).concat(a))}function oC(t,e,r,n,i,a){var s=ce(i?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,pt.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,i?2:1),s.write_shift(16,e,"hex"),s.write_shift(4,i?68:48);var l=sC(t,r,n);if(o.push(l),i){var u=sC(i,null,null);s.write_shift(16,a,"hex"),s.write_shift(4,68+l.length),o.push(u)}return Pr(o)}function Sje(t,e){e||(e=ce(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function Nje(t,e){return t.read_shift(e)===1}function Zr(t,e){return e||(e=ce(2)),e.write_shift(2,+!!t),e}function X6(t){return t.read_shift(2,"u")}function Qn(t,e){return e||(e=ce(2)),e.write_shift(2,t),e}function Q6(t,e,r){return r||(r=ce(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function J6(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=t.read_shift(1);a&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var s=n?t.read_shift(n,i):"";return s}function jje(t){var e=t.t||"",r=ce(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=ce(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return Pr(i)}function Eje(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Tje(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Eje(t,n,r)}function Pje(t,e,r){if(r.biff>5)return Tje(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function Z6(t,e,r){return r||(r=ce(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function lC(t,e){e||(e=ce(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function kje(t){var e=ce(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),a=i>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)e.write_shift(4,s[r]);if(a==28)n=n.slice(1),lC(n,e);else if(a&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)e.write_shift(1,parseInt(s[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),a&8&&lC(i>-1?n.slice(i+1):"",e)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)e.write_shift(1,parseInt(s[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function tl(t,e,r,n){return n||(n=ce(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function Aje(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),a=t.read_shift(n,"i"),s=t.read_shift(n,"i");return[i,a,s]}function Oje(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function eF(t,e){return e||(e=ce(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function eN(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=ce(i);return a.write_shift(2,n),a.write_shift(2,e),i>4&&a.write_shift(2,29282),i>6&&a.write_shift(2,1997),i>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Cje(t,e){var r=!e||e.biff==8,n=ce(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Mje(t,e){var r=!e||e.biff>=8?2:1,n=ce(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function Dje(t,e){var r=ce(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=jje(t[i]);var a=Pr([r].concat(n));return a.parts=[r.length].concat(n.map(function(s){return s.length})),a}function $je(){var t=ce(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Ije(t){var e=ce(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Rje(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,a=ce(i);return a.write_shift(2,(t.sz||12)*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function Fje(t,e,r,n){var i=ce(10);return tl(t,e,n,i),i.write_shift(4,r),i}function Lje(t,e,r,n,i){var a=!i||i.biff==8,s=ce(8+ +a+(1+a)*r.length);return tl(t,e,n,s),s.write_shift(2,r.length),a&&s.write_shift(1,1),s.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),s}function Bje(t,e,r,n){var i=r&&r.biff==5;n||(n=ce(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}function Uje(t,e){var r=e.biff==8||!e.biff?4:2,n=ce(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function cC(t,e,r,n){var i=r&&r.biff==5;n||(n=ce(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&i&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function zje(t){var e=ce(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Wje(t,e,r,n,i,a){var s=ce(8);return tl(t,e,n,s),Q6(r,a,s),s}function Vje(t,e,r,n){var i=ce(14);return tl(t,e,n,i),el(r,i),i}function Hje(t,e,r){if(r.biff<8)return qje(t,e,r);for(var n=[],i=t.l+e,a=t.read_shift(r.biff>8?4:2);a--!==0;)n.push(Aje(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function qje(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=J6(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function Gje(t){var e=ce(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)eF(t[r],e);return e}function Kje(t){var e=ce(24),r=xr(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return Pr([e,kje(t[1])])}function Yje(t){var e=t[1].Tooltip,r=ce(10+2*(e.length+1));r.write_shift(2,2048);var n=xr(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function Xje(t){return t||(t=ce(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Qje(t,e,r){if(!r.cellStyles)return sa(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),a=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var u={s:i,e:a,w:s,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function Jje(t,e){var r=ce(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Zje(t){for(var e=ce(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function eEe(t,e,r){var n=ce(15);return sm(n,t,e),n.write_shift(8,r,"f"),n}function tEe(t,e,r){var n=ce(9);return sm(n,t,e),n.write_shift(2,r),n}var rEe=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=WS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=Zo(1);switch(l.type){case"base64":d=Ti(Ha(o));break;case"binary":d=Ti(o);break;case"buffer":case"array":d=o;break}Mn(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,x=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(x=d.read_shift(2));var v=d.read_shift(2),b=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(b=t[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var y=[],_={},w=Math.min(d.length,f==2?521:x-10-(m?264:0)),N=g?32:11;d.l<w&&d[d.l]!=13;)switch(_={},_.name=wo.utils.decode(b,d.slice(d.l,d.l+N)).replace(/[\u0000\r\n].*$/g,""),d.l+=N,_.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(_.offset=d.read_shift(4)),_.len=d.read_shift(1),f==2&&(_.offset=d.read_shift(2)),_.dec=d.read_shift(1),_.name.length&&y.push(_),f!=2&&(d.l+=g?13:14),_.type){case"B":(!m||_.len!=8)&&l.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+_.type)}if(d[d.l]!==13&&(d.l=x-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=x;var S=0,E=0;for(u[0]=[],E=0;E!=y.length;++E)u[0][E]=y[E].name;for(;p-- >0;){if(d[d.l]===42){d.l+=v;continue}for(++d.l,u[++S]=[],E=0,E=0;E!=y.length;++E){var T=d.slice(d.l,d.l+y[E].len);d.l+=y[E].len,Mn(T,0);var P=wo.utils.decode(b,T);switch(y[E].type){case"C":P.trim().length&&(u[S][E]=P.replace(/\s+$/,""));break;case"D":P.length===8?u[S][E]=new Date(+P.slice(0,4),+P.slice(4,6)-1,+P.slice(6,8)):u[S][E]=P;break;case"F":u[S][E]=parseFloat(P.trim());break;case"+":case"I":u[S][E]=g?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(P.trim().toUpperCase()){case"Y":case"T":u[S][E]=!0;break;case"N":case"F":u[S][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+P+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[S][E]="##MEMO##"+(g?parseInt(P.trim(),10):T.read_shift(4));break;case"N":P=P.replace(/\u0000/g,"").trim(),P&&P!="."&&(u[S][E]=+P||0);break;case"@":u[S][E]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":u[S][E]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":u[S][E]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[S][E]=-T.read_shift(-8,"f");break;case"B":if(m&&y[E].len==8){u[S][E]=T.read_shift(8,"f");break}case"G":case"P":T.l+=y[E].len;break;case"0":if(y[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=y,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Du(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function i(o,l){try{return ml(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,l){var u=l||{};if(+u.codepage>=0&&Sh(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=wn(),f=Fg(o,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),g=o["!cols"]||[],p=0,x=0,v=0,b=1;for(p=0;p<h.length;++p){if(((g[p]||{}).DBF||{}).name){h[p]=g[p].DBF.name,++v;continue}if(h[p]!=null){if(++v,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(x=0;x<1024;++x)if(h.indexOf(h[p]+"_"+x)==-1){h[p]+="_"+x;break}}}}var y=kt(o["!ref"]),_=[],w=[],N=[];for(p=0;p<=y.e.c-y.s.c;++p){var S="",E="",T=0,P=[];for(x=0;x<m.length;++x)m[x][p]!=null&&P.push(m[x][p]);if(P.length==0||h[p]==null){_[p]="?";continue}for(x=0;x<P.length;++x){switch(typeof P[x]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=P[x]instanceof Date?"D":"C";break;default:E="C"}T=Math.max(T,String(P[x]).length),S=S&&S!=E?"C":E}T>250&&(T=250),E=((g[p]||{}).DBF||{}).type,E=="C"&&g[p].DBF.len>T&&(T=g[p].DBF.len),S=="B"&&E=="N"&&(S="N",N[p]=g[p].DBF.dec,T=g[p].DBF.len),w[p]=S=="C"||E=="N"?T:a[S]||0,b+=w[p],_[p]=S}var A=d.next(32);for(A.write_shift(4,318902576),A.write_shift(4,m.length),A.write_shift(2,296+32*v),A.write_shift(2,b),p=0;p<4;++p)A.write_shift(4,0);for(A.write_shift(4,0|(+e[r6]||3)<<8),p=0,x=0;p<h.length;++p)if(h[p]!=null){var k=d.next(32),F=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,F,"sbcs"),k.write_shift(1,_[p]=="?"?"C":_[p],"sbcs"),k.write_shift(4,x),k.write_shift(1,w[p]||a[_[p]]||0),k.write_shift(1,N[p]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),x+=w[p]||a[_[p]]||0}var H=d.next(264);for(H.write_shift(4,13),p=0;p<65;++p)H.write_shift(4,0);for(p=0;p<m.length;++p){var M=d.next(b);for(M.write_shift(1,0),x=0;x<h.length;++x)if(h[x]!=null)switch(_[x]){case"L":M.write_shift(1,m[p][x]==null?63:m[p][x]?84:70);break;case"B":M.write_shift(8,m[p][x]||0,"f");break;case"N":var O="0";for(typeof m[p][x]=="number"&&(O=m[p][x].toFixed(N[x]||0)),v=0;v<w[x]-O.length;++v)M.write_shift(1,32);M.write_shift(1,O,"sbcs");break;case"D":m[p][x]?(M.write_shift(4,("0000"+m[p][x].getFullYear()).slice(-4),"sbcs"),M.write_shift(2,("00"+(m[p][x].getMonth()+1)).slice(-2),"sbcs"),M.write_shift(2,("00"+m[p][x].getDate()).slice(-2),"sbcs")):M.write_shift(8,"00000000","sbcs");break;case"C":var L=String(m[p][x]!=null?m[p][x]:"").slice(0,w[x]);for(M.write_shift(1,L,"sbcs"),v=0;v<w[x]-L.length;++v)M.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:i,to_sheet:n,from_sheet:s}}(),nEe=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Mr(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=t[m];return typeof g=="number"?MO(g):g},n=function(h,m,g){var p=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return p==59?h:MO(p)};t["|"]=254;function i(h,m){switch(m.type){case"base64":return a(Ha(h),m);case"binary":return a(h,m);case"buffer":return a(rt&&Buffer.isBuffer(h)?h.toString("binary"):tm(h),m);case"array":return a(yv(h),m)}throw new Error("Unrecognized type "+m.type)}function a(h,m){var g=h.split(/[\n\r]+/),p=-1,x=-1,v=0,b=0,y=[],_=[],w=null,N={},S=[],E=[],T=[],P=0,A;for(+m.codepage>=0&&Sh(+m.codepage);v!==g.length;++v){P=0;var k=g[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),F=k.replace(/;;/g,"\0").split(";").map(function(I){return I.replace(/\u0000/g,";")}),H=F[0],M;if(k.length>0)switch(H){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&_.push(k.slice(3).replace(/;;/g,";"));break;case"C":var O=!1,L=!1,R=!1,z=!1,J=-1,W=-1;for(b=1;b<F.length;++b)switch(F[b].charAt(0)){case"A":break;case"X":x=parseInt(F[b].slice(1))-1,L=!0;break;case"Y":for(p=parseInt(F[b].slice(1))-1,L||(x=0),A=y.length;A<=p;++A)y[A]=[];break;case"K":M=F[b].slice(1),M.charAt(0)==='"'?M=M.slice(1,M.length-1):M==="TRUE"?M=!0:M==="FALSE"?M=!1:isNaN(Da(M))?isNaN(jh(M).getDate())||(M=on(M)):(M=Da(M),w!==null&&m6(w)&&(M=v6(M))),O=!0;break;case"E":z=!0;var C=tTe(F[b].slice(1),{r:p,c:x});y[p][x]=[y[p][x],C];break;case"S":R=!0,y[p][x]=[y[p][x],"S5S"];break;case"G":break;case"R":J=parseInt(F[b].slice(1))-1;break;case"C":W=parseInt(F[b].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}if(O&&(y[p][x]&&y[p][x].length==2?y[p][x][0]=M:y[p][x]=M,w=null),R){if(z)throw new Error("SYLK shared formula cannot have own formula");var G=J>-1&&y[J][W];if(!G||!G[1])throw new Error("SYLK shared formula cannot find base");y[p][x][1]=rTe(G[1],{r:p-J,c:x-W})}break;case"F":var Y=0;for(b=1;b<F.length;++b)switch(F[b].charAt(0)){case"X":x=parseInt(F[b].slice(1))-1,++Y;break;case"Y":for(p=parseInt(F[b].slice(1))-1,A=y.length;A<=p;++A)y[A]=[];break;case"M":P=parseInt(F[b].slice(1))/20;break;case"F":break;case"G":break;case"P":w=_[parseInt(F[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=F[b].slice(1).split(" "),A=parseInt(T[0],10);A<=parseInt(T[1],10);++A)P=parseInt(T[2],10),E[A-1]=P===0?{hidden:!0}:{wch:P},tN(E[A-1]);break;case"C":x=parseInt(F[b].slice(1))-1,E[x]||(E[x]={});break;case"R":p=parseInt(F[b].slice(1))-1,S[p]||(S[p]={}),P>0?(S[p].hpt=P,S[p].hpx=aF(P)):P===0&&(S[p].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}Y<1&&(w=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}}return S.length>0&&(N["!rows"]=S),E.length>0&&(N["!cols"]=E),m&&m.sheetRows&&(y=y.slice(0,m.sheetRows)),[y,N]}function s(h,m){var g=i(h,m),p=g[0],x=g[1],v=Du(p,m);return Mr(x).forEach(function(b){v[b]=x[b]}),v}function o(h,m){return ml(s(h,m),m)}function l(h,m,g,p){var x="C;Y"+(g+1)+";X"+(p+1)+";K";switch(h.t){case"n":x+=h.v||0,h.f&&!h.F&&(x+=";E"+nN(h.f,{r:g,c:p}));break;case"b":x+=h.v?"TRUE":"FALSE";break;case"e":x+=h.w||h.v;break;case"d":x+='"'+(h.w||h.v)+'"';break;case"s":x+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function u(h,m){m.forEach(function(g,p){var x="F;W"+(p+1)+" "+(p+1)+" ";g.hidden?x+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Dg(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=$g(g.wpx)),typeof g.wch=="number"&&(x+=Math.round(g.wch))),x.charAt(x.length-1)!=" "&&h.push(x)})}function d(h,m){m.forEach(function(g,p){var x="F;";g.hidden?x+="M0;":g.hpt?x+="M"+20*g.hpt+";":g.hpx&&(x+="M"+20*Ig(g.hpx)+";"),x.length>2&&h.push(x+"R"+(p+1))})}function f(h,m){var g=["ID;PWXL;N;E"],p=[],x=kt(h["!ref"]),v,b=Array.isArray(h),y=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var _=x.s.r;_<=x.e.r;++_)for(var w=x.s.c;w<=x.e.c;++w){var N=ft({r:_,c:w});v=b?(h[_]||[])[w]:h[N],!(!v||v.v==null&&(!v.f||v.F))&&p.push(l(v,h,_,w))}return g.join(y)+y+p.join(y)+y+"E"+y}return{to_workbook:o,to_sheet:s,from_sheet:f}}(),iEe=function(){function t(a,s){switch(s.type){case"base64":return e(Ha(a),s);case"binary":return e(a,s);case"buffer":return e(rt&&Buffer.isBuffer(a)?a.toString("binary"):tm(a),s);case"array":return e(yv(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){for(var o=a.split(`
`),l=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var h=o[d].trim().split(","),m=h[0],g=h[1];++d;for(var p=o[d]||"";(p.match(/["]/g)||[]).length&1&&d<o.length-1;)p+=`
`+o[++d];switch(p=p.trim(),+m){case-1:if(p==="BOT"){f[++l]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[l][u]=!0:p==="FALSE"?f[l][u]=!1:isNaN(Da(g))?isNaN(jh(g).getDate())?f[l][u]=g:f[l][u]=on(g):f[l][u]=Da(g),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[l][u++]=p!==""?p:null;break}if(p==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(a,s){return Du(t(a,s),s)}function n(a,s){return ml(r(a,s),s)}var i=function(){var a=function(l,u,d,f,h){l.push(u),l.push(d+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},s=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=kt(l["!ref"]),f,h=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){s(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var p=ft({r:m,c:g});if(f=h?(l[m]||[])[g]:l[p],!f){s(u,1,0,"");continue}switch(f.t){case"n":var x=f.w;!x&&f.v!=null&&(x=f.v),x==null?f.f&&!f.F?s(u,1,0,"="+f.f):s(u,1,0,""):s(u,0,x,"V");break;case"b":s(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Us(f.z||qt[14],Sn(on(f.v)))),s(u,0,f.w,"V");break;default:s(u,1,0,"")}}}s(u,-1,0,"EOD");var v=`\r
`,b=u.join(v);return b}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),tF=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),g=-1,p=-1,x=0,v=[];x!==m.length;++x){var b=m[x].trim().split(":");if(b[0]==="cell"){var y=xr(b[1]);if(v.length<=y.r)for(g=v.length;g<=y.r;++g)v[g]||(v[g]=[]);switch(g=y.r,p=y.c,b[2]){case"t":v[g][p]=t(b[3]);break;case"v":v[g][p]=+b[3];break;case"vtf":var _=b[b.length-1];case"vtc":switch(b[3]){case"nl":v[g][p]=!!+b[4];break;default:v[g][p]=+b[4];break}b[2]=="vtf"&&(v[g][p]=[v[g][p],_])}}}return h&&h.sheetRows&&(v=v.slice(0,h.sheetRows)),v}function n(f,h){return Du(r(f,h),h)}function i(f,h){return ml(n(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],g,p="",x=Wn(f["!ref"]),v=Array.isArray(f),b=x.s.r;b<=x.e.r;++b)for(var y=x.s.c;y<=x.e.c;++y)if(p=ft({r:b,c:y}),g=v?(f[b]||[])[y]:f[p],!(!g||g.v==null||g.t==="z")){switch(m=["cell",p,"t"],g.t){case"s":case"str":m.push(e(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=e(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=e(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var _=Sn(on(g.v));m[2]="vtc",m[3]="nd",m[4]=""+_,m[5]=g.w||Us(g.z||qt[14],_);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[a,s,o,s,u(f),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:d}}(),aEe=function(){function t(d,f,h,m,g){g.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(Da(d))?isNaN(jh(d).getDate())?f[h][m]=d:f[h][m]=on(d):f[h][m]=Da(d))}function e(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),p=g.length-1;p>=0&&g[p].length===0;)--p;for(var x=10,v=0,b=0;b<=p;++b)v=g[b].indexOf(" "),v==-1?v=g[b].length:v++,x=Math.max(x,v);for(b=0;b<=p;++b){m[b]=[];var y=0;for(t(g[b].slice(0,x).trim(),m,b,y,h),y=1;y<=(g[b].length-x)/10+1;++y)t(g[b].slice(x+(y-1)*10,x+y*10).trim(),m,b,y,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(d){for(var f={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(p,x){return p[0]-x[0]||n[p[1]]-n[x[1]]}),r[g.pop()[1]]||44}function a(d,f){var h=f||{},m="",g=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=i(d.slice(0,1024)):h&&h.FS?m=h.FS:m=i(d.slice(0,1024));var x=0,v=0,b=0,y=0,_=0,w=m.charCodeAt(0),N=!1,S=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=h.dateNF!=null?wNe(h.dateNF):null;function P(){var A=d.slice(y,_),k={};if(A.charAt(0)=='"'&&A.charAt(A.length-1)=='"'&&(A=A.slice(1,-1).replace(/""/g,'"')),A.length===0)k.t="z";else if(h.raw)k.t="s",k.v=A;else if(A.trim().length===0)k.t="s",k.v=A;else if(A.charCodeAt(0)==61)A.charCodeAt(1)==34&&A.charCodeAt(A.length-1)==34?(k.t="s",k.v=A.slice(2,-1).replace(/""/g,'"')):nTe(A)?(k.t="n",k.f=A.slice(1)):(k.t="s",k.v=A);else if(A=="TRUE")k.t="b",k.v=!0;else if(A=="FALSE")k.t="b",k.v=!1;else if(!isNaN(b=Da(A)))k.t="n",h.cellText!==!1&&(k.w=A),k.v=b;else if(!isNaN(jh(A).getDate())||T&&A.match(T)){k.z=h.dateNF||qt[14];var F=0;T&&A.match(T)&&(A=_Ne(A,h.dateNF,A.match(T)||[]),F=1),h.cellDates?(k.t="d",k.v=on(A,F)):(k.t="n",k.v=Sn(on(A,F))),h.cellText!==!1&&(k.w=Us(k.z,k.v instanceof Date?Sn(k.v):k.v)),h.cellNF||delete k.z}else k.t="s",k.v=A;if(k.t=="z"||(h.dense?(g[x]||(g[x]=[]),g[x][v]=k):g[ft({c:v,r:x})]=k),y=_+1,E=d.charCodeAt(y),p.e.c<v&&(p.e.c=v),p.e.r<x&&(p.e.r=x),S==w)++v;else if(v=0,++x,h.sheetRows&&h.sheetRows<=x)return!0}e:for(;_<d.length;++_)switch(S=d.charCodeAt(_)){case 34:E===34&&(N=!N);break;case w:case 10:case 13:if(!N&&P())break e;break}return _-y>0&&P(),g["!ref"]=er(p),g}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):Du(e(d,f),f)}function o(d,f){var h="",m=f.type=="string"?[0,0,0,0]:xOe(d,f);switch(f.type){case"base64":h=Ha(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof wo<"u"?h=wo.utils.decode(f.codepage,d):h=rt&&Buffer.isBuffer(d)?d.toString("binary"):tm(d);break;case"array":h=yv(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=nf(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=nf(h):f.type=="binary"&&typeof wo<"u"&&f.codepage&&(h=wo.utils.decode(f.codepage,wo.utils.encode(28591,h))),h.slice(0,19)=="socialcalc:version:"?tF.to_sheet(f.type=="string"?h:nf(h),f):s(h,f)}function l(d,f){return ml(o(d,f),f)}function u(d){for(var f=[],h=kt(d["!ref"]),m,g=Array.isArray(d),p=h.s.r;p<=h.e.r;++p){for(var x=[],v=h.s.c;v<=h.e.c;++v){var b=ft({r:p,c:v});if(m=g?(d[p]||[])[v]:d[b],!m||m.v==null){x.push("          ");continue}for(var y=(m.w||(qa(m),m.w)||"").slice(0,10);y.length<10;)y+=" ";x.push(y+(v===0?" ":""))}f.push(x.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}(),uC=function(){function t(C,G,Y){if(C){Mn(C,C.l||0);for(var I=Y.Enum||J;C.l<C.length;){var Q=C.read_shift(2),fe=I[Q]||I[65535],me=C.read_shift(2),ee=C.l+me,le=fe.f&&fe.f(C,me,Y);if(C.l=ee,G(le,fe,Q))return}}}function e(C,G){switch(G.type){case"base64":return r(Ti(Ha(C)),G);case"binary":return r(Ti(C),G);case"buffer":case"array":return r(C,G)}throw"Unsupported type "+G.type}function r(C,G){if(!C)return C;var Y=G||{},I=Y.dense?[]:{},Q="Sheet1",fe="",me=0,ee={},le=[],te=[],Z={s:{r:0,c:0},e:{r:0,c:0}},ke=Y.sheetRows||0;if(C[2]==0&&(C[3]==8||C[3]==9)&&C.length>=16&&C[14]==5&&C[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(C[2]==2)Y.Enum=J,t(C,function(we,Dt,ur){switch(ur){case 0:Y.vers=we,we>=4096&&(Y.qpro=!0);break;case 6:Z=we;break;case 204:we&&(fe=we);break;case 222:fe=we;break;case 15:case 51:Y.qpro||(we[1].v=we[1].v.slice(1));case 13:case 14:case 16:ur==14&&(we[2]&112)==112&&(we[2]&15)>1&&(we[2]&15)<15&&(we[1].z=Y.dateNF||qt[14],Y.cellDates&&(we[1].t="d",we[1].v=v6(we[1].v))),Y.qpro&&we[3]>me&&(I["!ref"]=er(Z),ee[Q]=I,le.push(Q),I=Y.dense?[]:{},Z={s:{r:0,c:0},e:{r:0,c:0}},me=we[3],Q=fe||"Sheet"+(me+1),fe="");var un=Y.dense?(I[we[0].r]||[])[we[0].c]:I[ft(we[0])];if(un){un.t=we[1].t,un.v=we[1].v,we[1].z!=null&&(un.z=we[1].z),we[1].f!=null&&(un.f=we[1].f);break}Y.dense?(I[we[0].r]||(I[we[0].r]=[]),I[we[0].r][we[0].c]=we[1]):I[ft(we[0])]=we[1];break}},Y);else if(C[2]==26||C[2]==14)Y.Enum=W,C[2]==14&&(Y.qpro=!0,C.l=0),t(C,function(we,Dt,ur){switch(ur){case 204:Q=we;break;case 22:we[1].v=we[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(we[3]>me&&(I["!ref"]=er(Z),ee[Q]=I,le.push(Q),I=Y.dense?[]:{},Z={s:{r:0,c:0},e:{r:0,c:0}},me=we[3],Q="Sheet"+(me+1)),ke>0&&we[0].r>=ke)break;Y.dense?(I[we[0].r]||(I[we[0].r]=[]),I[we[0].r][we[0].c]=we[1]):I[ft(we[0])]=we[1],Z.e.c<we[0].c&&(Z.e.c=we[0].c),Z.e.r<we[0].r&&(Z.e.r=we[0].r);break;case 27:we[14e3]&&(te[we[14e3][0]]=we[14e3][1]);break;case 1537:te[we[0]]=we[1],we[0]==me&&(Q=we[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+C[2]);if(I["!ref"]=er(Z),ee[fe||Q]=I,le.push(fe||Q),!te.length)return{SheetNames:le,Sheets:ee};for(var Ee={},et=[],Re=0;Re<te.length;++Re)ee[le[Re]]?(et.push(te[Re]||le[Re]),Ee[te[Re]]=ee[te[Re]]||ee[le[Re]]):(et.push(te[Re]),Ee[te[Re]]={"!ref":"A1"});return{SheetNames:et,Sheets:Ee}}function n(C,G){var Y=G||{};if(+Y.codepage>=0&&Sh(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var I=wn(),Q=kt(C["!ref"]),fe=Array.isArray(C),me=[];ye(I,0,a(1030)),ye(I,6,l(Q));for(var ee=Math.min(Q.e.r,8191),le=Q.s.r;le<=ee;++le)for(var te=Or(le),Z=Q.s.c;Z<=Q.e.c;++Z){le===Q.s.r&&(me[Z]=Hr(Z));var ke=me[Z]+te,Ee=fe?(C[le]||[])[Z]:C[ke];if(!(!Ee||Ee.t=="z"))if(Ee.t=="n")(Ee.v|0)==Ee.v&&Ee.v>=-32768&&Ee.v<=32767?ye(I,13,m(le,Z,Ee.v)):ye(I,14,p(le,Z,Ee.v));else{var et=qa(Ee);ye(I,15,f(le,Z,et.slice(0,239)))}}return ye(I,1),I.end()}function i(C,G){var Y=G||{};if(+Y.codepage>=0&&Sh(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var I=wn();ye(I,0,s(C));for(var Q=0,fe=0;Q<C.SheetNames.length;++Q)(C.Sheets[C.SheetNames[Q]]||{})["!ref"]&&ye(I,27,z(C.SheetNames[Q],fe++));var me=0;for(Q=0;Q<C.SheetNames.length;++Q){var ee=C.Sheets[C.SheetNames[Q]];if(!(!ee||!ee["!ref"])){for(var le=kt(ee["!ref"]),te=Array.isArray(ee),Z=[],ke=Math.min(le.e.r,8191),Ee=le.s.r;Ee<=ke;++Ee)for(var et=Or(Ee),Re=le.s.c;Re<=le.e.c;++Re){Ee===le.s.r&&(Z[Re]=Hr(Re));var we=Z[Re]+et,Dt=te?(ee[Ee]||[])[Re]:ee[we];if(!(!Dt||Dt.t=="z"))if(Dt.t=="n")ye(I,23,P(Ee,Re,me,Dt.v));else{var ur=qa(Dt);ye(I,22,S(Ee,Re,me,ur.slice(0,239)))}}++me}}return ye(I,1),I.end()}function a(C){var G=ce(2);return G.write_shift(2,C),G}function s(C){var G=ce(26);G.write_shift(2,4096),G.write_shift(2,4),G.write_shift(4,0);for(var Y=0,I=0,Q=0,fe=0;fe<C.SheetNames.length;++fe){var me=C.SheetNames[fe],ee=C.Sheets[me];if(!(!ee||!ee["!ref"])){++Q;var le=Wn(ee["!ref"]);Y<le.e.r&&(Y=le.e.r),I<le.e.c&&(I=le.e.c)}}return Y>8191&&(Y=8191),G.write_shift(2,Y),G.write_shift(1,Q),G.write_shift(1,I),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(1,1),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(4,0),G}function o(C,G,Y){var I={s:{c:0,r:0},e:{c:0,r:0}};return G==8&&Y.qpro?(I.s.c=C.read_shift(1),C.l++,I.s.r=C.read_shift(2),I.e.c=C.read_shift(1),C.l++,I.e.r=C.read_shift(2),I):(I.s.c=C.read_shift(2),I.s.r=C.read_shift(2),G==12&&Y.qpro&&(C.l+=2),I.e.c=C.read_shift(2),I.e.r=C.read_shift(2),G==12&&Y.qpro&&(C.l+=2),I.s.c==65535&&(I.s.c=I.e.c=I.s.r=I.e.r=0),I)}function l(C){var G=ce(8);return G.write_shift(2,C.s.c),G.write_shift(2,C.s.r),G.write_shift(2,C.e.c),G.write_shift(2,C.e.r),G}function u(C,G,Y){var I=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(I[0].c=C.read_shift(1),I[3]=C.read_shift(1),I[0].r=C.read_shift(2),C.l+=2):(I[2]=C.read_shift(1),I[0].c=C.read_shift(2),I[0].r=C.read_shift(2)),I}function d(C,G,Y){var I=C.l+G,Q=u(C,G,Y);if(Q[1].t="s",Y.vers==20768){C.l++;var fe=C.read_shift(1);return Q[1].v=C.read_shift(fe,"utf8"),Q}return Y.qpro&&C.l++,Q[1].v=C.read_shift(I-C.l,"cstr"),Q}function f(C,G,Y){var I=ce(7+Y.length);I.write_shift(1,255),I.write_shift(2,G),I.write_shift(2,C),I.write_shift(1,39);for(var Q=0;Q<I.length;++Q){var fe=Y.charCodeAt(Q);I.write_shift(1,fe>=128?95:fe)}return I.write_shift(1,0),I}function h(C,G,Y){var I=u(C,G,Y);return I[1].v=C.read_shift(2,"i"),I}function m(C,G,Y){var I=ce(7);return I.write_shift(1,255),I.write_shift(2,G),I.write_shift(2,C),I.write_shift(2,Y,"i"),I}function g(C,G,Y){var I=u(C,G,Y);return I[1].v=C.read_shift(8,"f"),I}function p(C,G,Y){var I=ce(13);return I.write_shift(1,255),I.write_shift(2,G),I.write_shift(2,C),I.write_shift(8,Y,"f"),I}function x(C,G,Y){var I=C.l+G,Q=u(C,G,Y);if(Q[1].v=C.read_shift(8,"f"),Y.qpro)C.l=I;else{var fe=C.read_shift(2);_(C.slice(C.l,C.l+fe),Q),C.l+=fe}return Q}function v(C,G,Y){var I=G&32768;return G&=-32769,G=(I?C:0)+(G>=8192?G-16384:G),(I?"":"$")+(Y?Hr(G):Or(G))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _(C,G){Mn(C,0);for(var Y=[],I=0,Q="",fe="",me="",ee="";C.l<C.length;){var le=C[C.l++];switch(le){case 0:Y.push(C.read_shift(8,"f"));break;case 1:fe=v(G[0].c,C.read_shift(2),!0),Q=v(G[0].r,C.read_shift(2),!1),Y.push(fe+Q);break;case 2:{var te=v(G[0].c,C.read_shift(2),!0),Z=v(G[0].r,C.read_shift(2),!1);fe=v(G[0].c,C.read_shift(2),!0),Q=v(G[0].r,C.read_shift(2),!1),Y.push(te+Z+":"+fe+Q)}break;case 3:if(C.l<C.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(C.read_shift(2));break;case 6:{for(var ke="";le=C[C.l++];)ke+=String.fromCharCode(le);Y.push('"'+ke.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:ee=Y.pop(),me=Y.pop(),Y.push(["AND","OR"][le-20]+"("+me+","+ee+")");break;default:if(le<32&&y[le])ee=Y.pop(),me=Y.pop(),Y.push(me+y[le]+ee);else if(b[le]){if(I=b[le][1],I==69&&(I=C[C.l++]),I>Y.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+Y.join("|")+"|");return}var Ee=Y.slice(-I);Y.length-=I,Y.push(b[le][0]+"("+Ee.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}Y.length==1?G[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function w(C){var G=[{c:0,r:0},{t:"n",v:0},0];return G[0].r=C.read_shift(2),G[3]=C[C.l++],G[0].c=C[C.l++],G}function N(C,G){var Y=w(C);return Y[1].t="s",Y[1].v=C.read_shift(G-4,"cstr"),Y}function S(C,G,Y,I){var Q=ce(6+I.length);Q.write_shift(2,C),Q.write_shift(1,Y),Q.write_shift(1,G),Q.write_shift(1,39);for(var fe=0;fe<I.length;++fe){var me=I.charCodeAt(fe);Q.write_shift(1,me>=128?95:me)}return Q.write_shift(1,0),Q}function E(C,G){var Y=w(C);Y[1].v=C.read_shift(2);var I=Y[1].v>>1;if(Y[1].v&1)switch(I&7){case 0:I=(I>>3)*5e3;break;case 1:I=(I>>3)*500;break;case 2:I=(I>>3)/20;break;case 3:I=(I>>3)/200;break;case 4:I=(I>>3)/2e3;break;case 5:I=(I>>3)/2e4;break;case 6:I=(I>>3)/16;break;case 7:I=(I>>3)/64;break}return Y[1].v=I,Y}function T(C,G){var Y=w(C),I=C.read_shift(4),Q=C.read_shift(4),fe=C.read_shift(2);if(fe==65535)return I===0&&Q===3221225472?(Y[1].t="e",Y[1].v=15):I===0&&Q===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var me=fe&32768;return fe=(fe&32767)-16446,Y[1].v=(1-me*2)*(Q*Math.pow(2,fe+32)+I*Math.pow(2,fe)),Y}function P(C,G,Y,I){var Q=ce(14);if(Q.write_shift(2,C),Q.write_shift(1,Y),Q.write_shift(1,G),I==0)return Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(2,65535),Q;var fe=0,me=0,ee=0,le=0;return I<0&&(fe=1,I=-I),me=Math.log2(I)|0,I/=Math.pow(2,me-31),le=I>>>0,le&2147483648||(I/=2,++me,le=I>>>0),I-=le,le|=2147483648,le>>>=0,I*=Math.pow(2,32),ee=I>>>0,Q.write_shift(4,ee),Q.write_shift(4,le),me+=16383+(fe?32768:0),Q.write_shift(2,me),Q}function A(C,G){var Y=T(C);return C.l+=G-14,Y}function k(C,G){var Y=w(C),I=C.read_shift(4);return Y[1].v=I>>6,Y}function F(C,G){var Y=w(C),I=C.read_shift(8,"f");return Y[1].v=I,Y}function H(C,G){var Y=F(C);return C.l+=G-10,Y}function M(C,G){return C[C.l+G-1]==0?C.read_shift(G,"cstr"):""}function O(C,G){var Y=C[C.l++];Y>G-1&&(Y=G-1);for(var I="";I.length<Y;)I+=String.fromCharCode(C[C.l++]);return I}function L(C,G,Y){if(!(!Y.qpro||G<21)){var I=C.read_shift(1);C.l+=17,C.l+=1,C.l+=2;var Q=C.read_shift(G-21,"cstr");return[I,Q]}}function R(C,G){for(var Y={},I=C.l+G;C.l<I;){var Q=C.read_shift(2);if(Q==14e3){for(Y[Q]=[0,""],Y[Q][0]=C.read_shift(2);C[C.l];)Y[Q][1]+=String.fromCharCode(C[C.l]),C.l++;C.l++}}return Y}function z(C,G){var Y=ce(5+C.length);Y.write_shift(2,14e3),Y.write_shift(2,G);for(var I=0;I<C.length;++I){var Q=C.charCodeAt(I);Y[Y.l++]=Q>127?95:Q}return Y[Y.l++]=0,Y}var J={0:{n:"BOF",f:X6},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:M},222:{n:"SHEETNAMELP",f:O},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:N},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:R},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:H},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:M},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:L},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}(),sEe=/^\s|\s$|[\t\n\r]/;function rF(t,e){if(!e.bookSST)return"";var r=[rr];r[r.length]=ve("sst",null,{xmlns:Mu[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],a="<si>";i.r?a+=i.r:(a+="<t",i.t||(i.t=""),i.t.match(sEe)&&(a+=' xml:space="preserve"'),a+=">"+ut(i.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function oEe(t){return[t.read_shift(4),t.read_shift(4)]}function lEe(t,e){return e||(e=ce(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var cEe=ZNe;function uEe(t){var e=wn();he(e,159,lEe(t));for(var r=0;r<t.length;++r)he(e,19,cEe(t[r]));return he(e,160),e.end()}function dEe(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function nF(t){var e=0,r,n=dEe(t),i=n.length+1,a,s,o,l,u;for(r=Zo(i),r[0]=n.length,a=1;a!=i;++a)r[a]=n[a-1];for(a=i-1;a>=0;--a)s=r[a],o=e&16384?1:0,l=e<<1&32767,u=o|l,e=u^s;return e^52811}var fEe=function(){function t(i,a){switch(a.type){case"base64":return e(Ha(i),a);case"binary":return e(i,a);case"buffer":return e(rt&&Buffer.isBuffer(i)?i.toString("binary"):tm(i),a);case"array":return e(yv(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){var s=a||{},o=s.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,m=0,g,p=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var x=d.slice(m,h.lastIndex-g[0].length);if(x[0]==" "&&(x=x.slice(1)),++p,x.length){var v={v:x,t:"s"};Array.isArray(o)?o[f][p]=v:o[ft({r:f,c:p})]=v}break}m=h.lastIndex}p>u.e.c&&(u.e.c=p)}),o["!ref"]=er(u),o}function r(i,a){return ml(t(i,a),a)}function n(i){for(var a=["{\\rtf1\\ansi"],s=kt(i["!ref"]),o,l=Array.isArray(i),u=s.s.r;u<=s.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=ft({r:u,c:d});o=l?(i[u]||[])[d]:i[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(qa(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function dC(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var hEe=6,$a=hEe;function Dg(t){return Math.floor((t+Math.round(128/$a)/256)*$a)}function $g(t){return Math.floor((t-5)/$a*100+.5)/100}function n_(t){return Math.round((t*$a+5)/$a*256)/256}function tN(t){t.width?(t.wpx=Dg(t.width),t.wch=$g(t.wpx),t.MDW=$a):t.wpx?(t.wch=$g(t.wpx),t.width=n_(t.wch),t.MDW=$a):typeof t.wch=="number"&&(t.width=n_(t.wch),t.wpx=Dg(t.width),t.MDW=$a),t.customWidth&&delete t.customWidth}var mEe=96,iF=mEe;function Ig(t){return t*96/iF}function aF(t){return t*iF/96}function pEe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=ve("numFmt",null,{numFmtId:n,formatCode:ut(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=ve("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function gEe(t){var e=[];return e[e.length]=ve("cellXfs",null),t.forEach(function(r){e[e.length]=ve("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=ve("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function sF(t,e){var r=[rr,ve("styleSheet",null,{xmlns:Mu[0],"xmlns:vt":gr.vt})],n;return t.SSF&&(n=pEe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=gEe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function xEe(t,e){var r=t.read_shift(2),n=qr(t);return[r,n]}function vEe(t,e,r){r||(r=ce(6+4*e.length)),r.write_shift(2,t),vr(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function yEe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=sje(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var a=t.read_shift(2);switch(a===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=t.read_shift(1);s!=0&&(n.underline=s);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=aje(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=qr(t),n}function bEe(t,e){e||(e=ce(25+4*32)),e.write_shift(2,t.sz*20),oje(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Cg(t.color,e);var n=0;return t.scheme=="major"&&(n=1),t.scheme=="minor"&&(n=2),e.write_shift(1,n),vr(t.name,e),e.length>e.l?e.slice(0,e.l):e}var wEe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Yy,_Ee=sa;function fC(t,e){e||(e=ce(4*3+8*7+16*1)),Yy||(Yy=WS(wEe));var r=Yy[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Cg({auto:1},e),Cg({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function SEe(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function oF(t,e,r){r||(r=ce(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function pd(t,e){return e||(e=ce(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var NEe=sa;function jEe(t,e){return e||(e=ce(51)),e.write_shift(1,0),pd(null,e),pd(null,e),pd(null,e),pd(null,e),pd(null,e),e.length>e.l?e.slice(0,e.l):e}function EEe(t,e){return e||(e=ce(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,+t.builtinId),e.write_shift(1,0),Og(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function TEe(t,e,r){var n=ce(2052);return n.write_shift(4,t),Og(e,n),Og(r,n),n.length>n.l?n.slice(0,n.l):n}function PEe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(he(t,615,Mi(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&he(t,44,vEe(i,e[i]))}),he(t,616))}}function kEe(t){var e=1;he(t,611,Mi(e)),he(t,43,bEe({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),he(t,612)}function AEe(t){var e=2;he(t,603,Mi(e)),he(t,45,fC({patternType:"none"})),he(t,45,fC({patternType:"gray125"})),he(t,604)}function OEe(t){var e=1;he(t,613,Mi(e)),he(t,46,jEe()),he(t,614)}function CEe(t){var e=1;he(t,626,Mi(e)),he(t,47,oF({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),he(t,627)}function MEe(t,e){he(t,617,Mi(e.length)),e.forEach(function(r){he(t,47,oF(r,0))}),he(t,618)}function DEe(t){var e=1;he(t,619,Mi(e)),he(t,48,EEe({xfId:0,builtinId:0,name:"Normal"})),he(t,620)}function $Ee(t){var e=0;he(t,505,Mi(e)),he(t,506)}function IEe(t){var e=0;he(t,508,TEe(e,"TableStyleMedium9","PivotStyleMedium4")),he(t,509)}function REe(t,e){var r=wn();return he(r,278),PEe(r,t.SSF),kEe(r),AEe(r),OEe(r),CEe(r),MEe(r,e.cellXfs),DEe(r),$Ee(r),IEe(r),he(r,279),r.end()}function lF(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[rr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function FEe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:qr(t)}}function LEe(t){var e=ce(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),vr(t.name,e),e.slice(0,e.l)}function BEe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function UEe(t){var e=ce(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function zEe(t,e){var r=ce(8+2*e.length);return r.write_shift(4,t),vr(e,r),r.slice(0,r.l)}function WEe(t){return t.l+=4,t.read_shift(4)!=0}function VEe(t,e){var r=ce(8);return r.write_shift(4,t),r.write_shift(4,1),r}function HEe(){var t=wn();return he(t,332),he(t,334,Mi(1)),he(t,335,LEe({name:"XLDAPR",version:12e4,flags:3496657072})),he(t,336),he(t,339,zEe(1,"XLDAPR")),he(t,52),he(t,35,Mi(514)),he(t,4096,Mi(0)),he(t,4097,Qn(1)),he(t,36),he(t,53),he(t,340),he(t,337,VEe(1)),he(t,51,UEe([[1,0]])),he(t,338),he(t,333),t.end()}function cF(){var t=[rr];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function qEe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=ft(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var ec=1024;function uF(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[ve("xml",null,{"xmlns:v":$n.v,"xmlns:o":$n.o,"xmlns:x":$n.x,"xmlns:mv":$n.mv}).replace(/\/>/,">"),ve("o:shapelayout",ve("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),ve("v:shapetype",[ve("v:stroke",null,{joinstyle:"miter"}),ve("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];ec<t*1e3;)ec+=1e3;return e.forEach(function(a){var s=xr(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?ve("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=ve("v:fill",l,o),d={on:"t",obscured:"t"};++ec,i=i.concat(["<v:shape"+Th({id:"_x0000_s"+ec,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,ve("v:shadow",null,d),ve("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",kr("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),kr("x:AutoFill","False"),kr("x:Row",String(s.r)),kr("x:Column",String(s.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function dF(t){var e=[rr,ve("comments",null,{xmlns:Mu[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var a=ut(i.a);r.indexOf(a)==-1&&(r.push(a),e.push("<author>"+a+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(ut(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),a.length<=1)e.push(kr("t",ut(a[0]||"")));else{for(var s=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)s+=`Reply:
    `+a[o]+`
`;e.push(kr("t",ut(s)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function GEe(t,e,r){var n=[rr,ve("ThreadedComments",null,{xmlns:gr.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var a="";(i[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&e.indexOf(s.a)==-1&&e.push(s.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,s.ID=l.id,s.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(s.a)).slice(-12)+"}"),n.push(ve("threadedComment",kr("text",s.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function KEe(t){var e=[rr,ve("personList",null,{xmlns:gr.TCMNT,"xmlns:x":Mu[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(ve("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function YEe(t){var e={};e.iauthor=t.read_shift(4);var r=vl(t);return e.rfx=r.s,e.ref=ft(r.s),t.l+=16,e}function XEe(t,e){return e==null&&(e=ce(36)),e.write_shift(4,t[1].iauthor),$u(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var QEe=qr;function JEe(t){return vr(t.slice(0,54))}function ZEe(t){var e=wn(),r=[];return he(e,628),he(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),he(e,632,JEe(i.a)))})}),he(e,631),he(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var a={s:xr(n[0]),e:xr(n[0])};he(e,635,XEe([a,i])),i.t&&i.t.length>0&&he(e,637,tje(i)),he(e,636),delete i.iauthor})}),he(e,634),he(e,629),e.end()}function eTe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&pt.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var fF=["xlsb","xlsm","xlam","biff8","xla"],tTe=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,a,s){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,i+(o?"":"$")+Hr(d)+(l?"":"$")+Or(u)}return function(i,a){return e=a,i.replace(t,r)}}(),rN=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,nN=function(){return function(e,r){return e.replace(rN,function(n,i,a,s,o,l){var u=XS(s)-(a?0:r.c),d=YS(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":a?u+1:"["+u+"]";return i+"R"+f+"C"+h})}}();function rTe(t,e){return t.replace(rN,function(r,n,i,a,s,o){return n+(i=="$"?i+a:Hr(XS(a)+e.c))+(s=="$"?s+o:Or(YS(o)+e.r))})}function nTe(t){return t.length!=1}function Xt(t){t.l+=1}function zs(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function hF(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return mF(t);r.biff==12&&(n=4)}var i=t.read_shift(n),a=t.read_shift(n),s=zs(t),o=zs(t);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function mF(t){var e=zs(t),r=zs(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function iTe(t,e,r){if(r.biff<8)return mF(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),a=zs(t),s=zs(t);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}function pF(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return aTe(t);var n=t.read_shift(r&&r.biff==12?4:2),i=zs(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function aTe(t){var e=zs(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function sTe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function oTe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return lTe(t);var i=t.read_shift(n>=12?4:2),a=t.read_shift(2),s=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;i>524287;)i-=1048576;if(s==1)for(;a>8191;)a=a-16384;return{r:i,c:a,cRel:s,rRel:o}}function lTe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function cTe(t,e,r){var n=(t[t.l++]&96)>>5,i=hF(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function uTe(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var s=hF(t,a,r);return[n,i,s]}function dTe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function fTe(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[n,i]}function hTe(t,e,r){var n=(t[t.l++]&96)>>5,i=iTe(t,e-1,r);return[n,i]}function mTe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function hC(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function pTe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],a=0;a<=n;++a)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function gTe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function xTe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function vTe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function yTe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function gF(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function bTe(t){return t.read_shift(2),gF(t)}function wTe(t){return t.read_shift(2),gF(t)}function _Te(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=pF(t,0,r);return[n,i]}function STe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=oTe(t,0,r);return[n,i]}function NTe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var a=pF(t,0,r);return[n,i,a]}function jTe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[jPe[i],yF[i],n]}function ETe(t,e,r){var n=t[t.l++],i=t.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:TTe(t);return[i,(a[0]===0?yF:NPe)[a[1]]]}function TTe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function PTe(t,e,r){t.l+=r&&r.biff==2?3:4}function kTe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function ATe(t){return t.l++,im[t.read_shift(1)]}function OTe(t){return t.l++,t.read_shift(2)}function CTe(t){return t.l++,t.read_shift(1)!==0}function MTe(t){return t.l++,Iu(t)}function DTe(t,e,r){return t.l++,J6(t,e-1,r)}function $Te(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Nje(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=im[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Iu(t);break;case 2:r[1]=Pje(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function ITe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],a=0;a!=n;++a)i.push((r.biff==12?vl:Oje)(t));return i}function RTe(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var a=0,s=[];a!=n&&(s[a]=[]);++a)for(var o=0;o!=i;++o)s[a][o]=$Te(t,r.biff);return s}function FTe(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,a=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,a]}function LTe(t,e,r){if(r.biff==5)return BTe(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),a=t.read_shift(4);return[n,i,a]}function BTe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function UTe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function zTe(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function WTe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function VTe(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[n,i]}var HTe=sa,qTe=sa,GTe=sa;function am(t,e,r){return t.l+=2,[sTe(t)]}function iN(t){return t.l+=6,[]}var KTe=am,YTe=iN,XTe=iN,QTe=am;function xF(t){return t.l+=2,[X6(t),t.read_shift(2)&1]}var JTe=am,ZTe=xF,ePe=iN,tPe=am,rPe=am,nPe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function iPe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),a=t.read_shift(2),s=nPe[r>>2&31];return{ixti:e,coltype:r&3,rt:s,idx:n,c:i,C:a}}function aPe(t){return t.l+=2,[t.read_shift(4)]}function sPe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function oPe(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function lPe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function cPe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function uPe(t){return t.l+=4,[0,0]}var mC={1:{n:"PtgExp",f:kTe},2:{n:"PtgTbl",f:GTe},3:{n:"PtgAdd",f:Xt},4:{n:"PtgSub",f:Xt},5:{n:"PtgMul",f:Xt},6:{n:"PtgDiv",f:Xt},7:{n:"PtgPower",f:Xt},8:{n:"PtgConcat",f:Xt},9:{n:"PtgLt",f:Xt},10:{n:"PtgLe",f:Xt},11:{n:"PtgEq",f:Xt},12:{n:"PtgGe",f:Xt},13:{n:"PtgGt",f:Xt},14:{n:"PtgNe",f:Xt},15:{n:"PtgIsect",f:Xt},16:{n:"PtgUnion",f:Xt},17:{n:"PtgRange",f:Xt},18:{n:"PtgUplus",f:Xt},19:{n:"PtgUminus",f:Xt},20:{n:"PtgPercent",f:Xt},21:{n:"PtgParen",f:Xt},22:{n:"PtgMissArg",f:Xt},23:{n:"PtgStr",f:DTe},26:{n:"PtgSheet",f:sPe},27:{n:"PtgEndSheet",f:oPe},28:{n:"PtgErr",f:ATe},29:{n:"PtgBool",f:CTe},30:{n:"PtgInt",f:OTe},31:{n:"PtgNum",f:MTe},32:{n:"PtgArray",f:mTe},33:{n:"PtgFunc",f:jTe},34:{n:"PtgFuncVar",f:ETe},35:{n:"PtgName",f:FTe},36:{n:"PtgRef",f:_Te},37:{n:"PtgArea",f:cTe},38:{n:"PtgMemArea",f:UTe},39:{n:"PtgMemErr",f:HTe},40:{n:"PtgMemNoMem",f:qTe},41:{n:"PtgMemFunc",f:zTe},42:{n:"PtgRefErr",f:WTe},43:{n:"PtgAreaErr",f:dTe},44:{n:"PtgRefN",f:STe},45:{n:"PtgAreaN",f:hTe},46:{n:"PtgMemAreaN",f:lPe},47:{n:"PtgMemNoMemN",f:cPe},57:{n:"PtgNameX",f:LTe},58:{n:"PtgRef3d",f:NTe},59:{n:"PtgArea3d",f:uTe},60:{n:"PtgRefErr3d",f:VTe},61:{n:"PtgAreaErr3d",f:fTe},255:{}},dPe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},fPe={1:{n:"PtgElfLel",f:xF},2:{n:"PtgElfRw",f:tPe},3:{n:"PtgElfCol",f:KTe},6:{n:"PtgElfRwV",f:rPe},7:{n:"PtgElfColV",f:QTe},10:{n:"PtgElfRadical",f:JTe},11:{n:"PtgElfRadicalS",f:ePe},13:{n:"PtgElfColS",f:YTe},15:{n:"PtgElfColSV",f:XTe},16:{n:"PtgElfRadicalLel",f:ZTe},25:{n:"PtgList",f:iPe},29:{n:"PtgSxName",f:aPe},255:{}},hPe={0:{n:"PtgAttrNoop",f:uPe},1:{n:"PtgAttrSemi",f:yTe},2:{n:"PtgAttrIf",f:xTe},4:{n:"PtgAttrChoose",f:pTe},8:{n:"PtgAttrGoto",f:gTe},16:{n:"PtgAttrSum",f:PTe},32:{n:"PtgAttrBaxcel",f:hC},33:{n:"PtgAttrBaxcel",f:hC},64:{n:"PtgAttrSpace",f:bTe},65:{n:"PtgAttrSpaceSemi",f:wTe},128:{n:"PtgAttrIfError",f:vTe},255:{}};function mPe(t,e,r,n){if(n.biff<8)return sa(t,e);for(var i=t.l+e,a=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=RTe(t,0,n),a.push(r[s][1]);break;case"PtgMemArea":r[s][2]=ITe(t,r[s][1],n),a.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=t.read_shift(4),a.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return e=i-t.l,e!==0&&a.push(sa(t,e)),a}function pPe(t,e,r){for(var n=t.l+e,i,a,s=[];n!=t.l;)e=n-t.l,a=t[t.l],i=mC[a]||mC[dPe[a]],(a===24||a===25)&&(i=(a===24?fPe:hPe)[t[t.l+1]]),!i||!i.f?sa(t,e):s.push([i.n,i.f(t,e,r)]);return s}function gPe(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],a=0;a<n.length;++a){var s=n[a];if(s)switch(s[0]){case 2:i.push('"'+s[1].replace(/"/g,'""')+'"');break;default:i.push(s[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var xPe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function vPe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function vF(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function pC(t,e,r){var n=vF(t,e,r);return n=="#REF"?n:vPe(n,r)}function lu(t,e,r,n,i){var a=i&&i.biff||8,s={s:{c:0,r:0},e:{c:0,r:0}},o=[],l,u,d,f=0,h=0,m,g="";if(!t[0]||!t[0][0])return"";for(var p=-1,x="",v=0,b=t[0].length;v<b;++v){var y=t[0][v];switch(y[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),p>=0){switch(t[0][p][1][0]){case 0:x=Vt(" ",t[0][p][1][1]);break;case 1:x=Vt("\r",t[0][p][1][1]);break;default:if(x="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+x,p=-1}o.push(u+xPe[y[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=sf(y[1][1],s,i),o.push(of(d,a));break;case"PtgRefN":d=r?sf(y[1][1],r,i):y[1][1],o.push(of(d,a));break;case"PtgRef3d":f=y[1][1],d=sf(y[1][2],s,i),g=pC(n,f,i),o.push(g+"!"+of(d,a));break;case"PtgFunc":case"PtgFuncVar":var _=y[1][0],w=y[1][1];_||(_=0),_&=127;var N=_==0?[]:o.slice(-_);o.length-=_,w==="User"&&(w=N.shift()),o.push(w+"("+N.join(",")+")");break;case"PtgBool":o.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(y[1]);break;case"PtgNum":o.push(String(y[1]));break;case"PtgStr":o.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(y[1]);break;case"PtgAreaN":m=ZO(y[1][1],r?{s:r}:s,i),o.push(Gy(m,i));break;case"PtgArea":m=ZO(y[1][1],s,i),o.push(Gy(m,i));break;case"PtgArea3d":f=y[1][1],m=y[1][2],g=pC(n,f,i),o.push(g+"!"+Gy(m,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=y[1][2];var S=(n.names||[])[h-1]||(n[0]||[])[h],E=S?S.Name:"SH33TJSNAME"+String(h);E&&E.slice(0,6)=="_xlfn."&&!i.xlfn&&(E=E.slice(6)),o.push(E);break;case"PtgNameX":var T=y[1][1];h=y[1][2];var P;if(i.biff<=5)T<0&&(T=-T),n[T]&&(P=n[T][h]);else{var A="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][h]&&n[T][h].itab>0&&(A=n.SheetNames[n[T][h].itab-1]+"!"):A=n.SheetNames[h-1]+"!"),n[T]&&n[T][h])A+=n[T][h].Name;else if(n[0]&&n[0][h])A+=n[0][h].Name;else{var k=(vF(n,T,i)||"").split(";;");k[h-1]?A=k[h-1]:A+="SH33TJSERRX"}o.push(A);break}P||(P={Name:"SH33TJSERRY"}),o.push(P.Name);break;case"PtgParen":var F="(",H=")";if(p>=0){switch(x="",t[0][p][1][0]){case 2:F=Vt(" ",t[0][p][1][1])+F;break;case 3:F=Vt("\r",t[0][p][1][1])+F;break;case 4:H=Vt(" ",t[0][p][1][1])+H;break;case 5:H=Vt("\r",t[0][p][1][1])+H;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}o.push(F+o.pop()+H);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:y[1][1],r:y[1][0]};var M={c:r.c,r:r.r};if(n.sharedf[ft(d)]){var O=n.sharedf[ft(d)];o.push(lu(O,s,M,n,i))}else{var L=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(lu(u[1],s,M,n,i)),L=!0;break}L||o.push(y[1])}break;case"PtgArray":o.push("{"+gPe(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var R=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&p>=0&&R.indexOf(t[0][v][0])==-1){y=t[0][p];var z=!0;switch(y[1][0]){case 4:z=!1;case 0:x=Vt(" ",y[1][1]);break;case 5:z=!1;case 1:x=Vt("\r",y[1][1]);break;default:if(x="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}o.push((z?x:"")+o.pop()+(z?"":x)),p=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function yPe(t){if(t==null){var e=ce(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return el(t);return el(0)}function bPe(t,e,r,n,i){var a=tl(e,r,i),s=yPe(t.v),o=ce(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=ce(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=Pr([a,s,o,u]);return f}function bv(t,e,r){var n=t.read_shift(4),i=pPe(t,n,r),a=t.read_shift(4),s=a>0?mPe(t,a,i,r):null;return[i,s]}var wPe=bv,wv=bv,_Pe=bv,SPe=bv,NPe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},yF={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},jPe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function EPe(t){var e="of:="+t.replace(rN,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function TPe(t){return t.replace(/\./,"!")}var lf=typeof Map<"u";function aN(t,e,r){var n=0,i=t.length;if(r){if(lf?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var a=lf?r.get(e):r[e];n<a.length;++n)if(t[a[n]].t===e)return t.Count++,a[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(lf?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function _v(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&($a=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=$g(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=n_(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function bF(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Zs(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,a=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){p6(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=a;++i)if(t[i].numFmtId===n)return i;return t[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function PPe(t,e,r){if(t&&t["!ref"]){var n=kt(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function kPe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+er(t[r])+'"/>';return e+"</mergeCells>"}function APe(t,e,r,n,i){var a=!1,s={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,s.codeName=Eh(ut(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+ve("outlinePr",null,u)}!a&&!o||(i[i.length]=ve("sheetPr",o,s))}var OPe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],CPe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function MPe(t){var e={sheet:1};return OPe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),CPe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=nF(t.password).toString(16).toUpperCase()),ve("sheetProtection",null,e)}function DPe(t){return bF(t),ve("pageMargins",null,t)}function $Pe(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=ve("col",null,_v(i,n)));return r[r.length]="</cols>",r.join("")}function IPe(t,e,r,n){var i=typeof t.ref=="string"?t.ref:er(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,s=Wn(i);s.s.r==s.e.r&&(s.e.r=Wn(e["!ref"]).e.r,i=er(s));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),ve("autoFilter",null,{ref:i})}function RPe(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),ve("sheetViews",ve("sheetView",null,i),{})}function FPe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",a=t.t,s=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=im[t.v];break;case"d":n&&n.cellDates?i=on(t.v,-1).toISOString():(t=Nn(t),t.t="n",i=""+(t.v=Sn(on(t.v)))),typeof t.z>"u"&&(t.z=qt[14]);break;default:i=t.v;break}var o=kr("v",ut(i)),l={r:e},u=Zs(n.cellXfs,t,n);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=kr("v",""+aN(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=s),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=ve("f",ut(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),ve("c",o,l)}function LPe(t,e,r,n){var i=[],a=[],s=kt(t["!ref"]),o="",l,u="",d=[],f=0,h=0,m=t["!rows"],g=Array.isArray(t),p={r:u},x,v=-1;for(h=s.s.c;h<=s.e.c;++h)d[h]=Hr(h);for(f=s.s.r;f<=s.e.r;++f){for(a=[],u=Or(f),h=s.s.c;h<=s.e.c;++h){l=d[h]+u;var b=g?(t[f]||[])[h]:t[l];b!==void 0&&(o=FPe(b,l,t,e))!=null&&a.push(o)}(a.length>0||m&&m[f])&&(p={r:u},m&&m[f]&&(x=m[f],x.hidden&&(p.hidden=1),v=-1,x.hpx?v=Ig(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(p.ht=v,p.customHeight=1),x.level&&(p.outlineLevel=x.level)),i[i.length]=ve("row",a.join(""),p))}if(m)for(;f<m.length;++f)m&&m[f]&&(p={r:f+1},x=m[f],x.hidden&&(p.hidden=1),v=-1,x.hpx?v=Ig(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(p.ht=v,p.customHeight=1),x.level&&(p.outlineLevel=x.level),i[i.length]=ve("row","",p));return i.join("")}function wF(t,e,r,n){var i=[rr,ve("worksheet",null,{xmlns:Mu[0],"xmlns:r":gr.r})],a=r.SheetNames[t],s=0,o="",l=r.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=kt(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=er(d)}n||(n={}),l["!comments"]=[];var f=[];APe(l,r,t,e,i),i[i.length]=ve("dimension",null,{ref:u}),i[i.length]=RPe(l,e,t,r),e.sheetFormat&&(i[i.length]=ve("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=$Pe(l,l["!cols"])),i[s=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=LPe(l,e),o.length>0&&(i[i.length]=o)),i.length>s+1&&(i[i.length]="</sheetData>",i[s]=i[s].replace("/>",">")),l["!protect"]&&(i[i.length]=MPe(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=IPe(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=kPe(l["!merges"]));var h=-1,m,g=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(p){p[1].Target&&(m={ref:p[0]},p[1].Target.charAt(0)!="#"&&(g=lt(n,-1,ut(p[1].Target).replace(/#.*$/,""),Qe.HLINK),m["r:id"]="rId"+g),(h=p[1].Target.indexOf("#"))>-1&&(m.location=ut(p[1].Target.slice(h+1))),p[1].Tooltip&&(m.tooltip=ut(p[1].Tooltip)),i[i.length]=ve("hyperlink",null,m))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=DPe(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=kr("ignoredErrors",ve("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=lt(n,-1,"../drawings/drawing"+(t+1)+".xml",Qe.DRAW),i[i.length]=ve("drawing",null,{"r:id":"rId"+g}),l["!drawing"]=f),l["!comments"].length>0&&(g=lt(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Qe.VML),i[i.length]=ve("legacyDrawing",null,{"r:id":"rId"+g}),l["!legacy"]=g),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function BPe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=i/20),r}function UPe(t,e,r){var n=ce(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var a=320;i.hpx?a=Ig(i.hpx)*20:i.hpt&&(a=i.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var s=0;i.level&&(s|=i.level),i.hidden&&(s|=16),(i.hpx||i.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[ft(u)];g&&(f<0&&(f=m),h=m)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var p=n.l;return n.l=l,n.write_shift(4,o),n.l=p,n.length>n.l?n.slice(0,n.l):n}function zPe(t,e,r,n){var i=UPe(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&he(t,0,i)}var WPe=vl,VPe=$u;function HPe(){}function qPe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=rje(t),r}function GPe(t,e,r){r==null&&(r=ce(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return Cg({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),I6(t,r),r.slice(0,r.l)}function KPe(t){var e=mi(t);return[e]}function YPe(t,e,r){return r==null&&(r=ce(8)),pl(e,r)}function XPe(t){var e=gl(t);return[e]}function QPe(t,e,r){return r==null&&(r=ce(4)),xl(e,r)}function JPe(t){var e=mi(t),r=t.read_shift(1);return[e,r,"b"]}function ZPe(t,e,r){return r==null&&(r=ce(9)),pl(e,r),r.write_shift(1,t.v?1:0),r}function eke(t){var e=gl(t),r=t.read_shift(1);return[e,r,"b"]}function tke(t,e,r){return r==null&&(r=ce(5)),xl(e,r),r.write_shift(1,t.v?1:0),r}function rke(t){var e=mi(t),r=t.read_shift(1);return[e,r,"e"]}function nke(t,e,r){return r==null&&(r=ce(9)),pl(e,r),r.write_shift(1,t.v),r}function ike(t){var e=gl(t),r=t.read_shift(1);return[e,r,"e"]}function ake(t,e,r){return r==null&&(r=ce(8)),xl(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function ske(t){var e=mi(t),r=t.read_shift(4);return[e,r,"s"]}function oke(t,e,r){return r==null&&(r=ce(12)),pl(e,r),r.write_shift(4,e.v),r}function lke(t){var e=gl(t),r=t.read_shift(4);return[e,r,"s"]}function cke(t,e,r){return r==null&&(r=ce(8)),xl(e,r),r.write_shift(4,e.v),r}function uke(t){var e=mi(t),r=Iu(t);return[e,r,"n"]}function dke(t,e,r){return r==null&&(r=ce(16)),pl(e,r),el(t.v,r),r}function fke(t){var e=gl(t),r=Iu(t);return[e,r,"n"]}function hke(t,e,r){return r==null&&(r=ce(12)),xl(e,r),el(t.v,r),r}function mke(t){var e=mi(t),r=R6(t);return[e,r,"n"]}function pke(t,e,r){return r==null&&(r=ce(12)),pl(e,r),F6(t.v,r),r}function gke(t){var e=gl(t),r=R6(t);return[e,r,"n"]}function xke(t,e,r){return r==null&&(r=ce(8)),xl(e,r),F6(t.v,r),r}function vke(t){var e=mi(t),r=QS(t);return[e,r,"is"]}function yke(t){var e=mi(t),r=qr(t);return[e,r,"str"]}function bke(t,e,r){return r==null&&(r=ce(12+4*t.v.length)),pl(e,r),vr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function wke(t){var e=gl(t),r=qr(t);return[e,r,"str"]}function _ke(t,e,r){return r==null&&(r=ce(8+4*t.v.length)),xl(e,r),vr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Ske(t,e,r){var n=t.l+e,i=mi(t);i.r=r["!row"];var a=t.read_shift(1),s=[i,a,"b"];if(r.cellFormula){t.l+=2;var o=wv(t,n-t.l,r);s[3]=lu(o,null,i,r.supbooks,r)}else t.l=n;return s}function Nke(t,e,r){var n=t.l+e,i=mi(t);i.r=r["!row"];var a=t.read_shift(1),s=[i,a,"e"];if(r.cellFormula){t.l+=2;var o=wv(t,n-t.l,r);s[3]=lu(o,null,i,r.supbooks,r)}else t.l=n;return s}function jke(t,e,r){var n=t.l+e,i=mi(t);i.r=r["!row"];var a=Iu(t),s=[i,a,"n"];if(r.cellFormula){t.l+=2;var o=wv(t,n-t.l,r);s[3]=lu(o,null,i,r.supbooks,r)}else t.l=n;return s}function Eke(t,e,r){var n=t.l+e,i=mi(t);i.r=r["!row"];var a=qr(t),s=[i,a,"str"];if(r.cellFormula){t.l+=2;var o=wv(t,n-t.l,r);s[3]=lu(o,null,i,r.supbooks,r)}else t.l=n;return s}var Tke=vl,Pke=$u;function kke(t,e){return e==null&&(e=ce(4)),e.write_shift(4,t),e}function Ake(t,e){var r=t.l+e,n=vl(t),i=JS(t),a=qr(t),s=qr(t),o=qr(t);t.l=r;var l={rfx:n,relId:i,loc:a,display:o};return s&&(l.Tooltip=s),l}function Oke(t,e){var r=ce(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));$u({s:xr(t[0]),e:xr(t[0])},r),ZS("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return vr(i||"",r),vr(t[1].Tooltip||"",r),vr("",r),r.slice(0,r.l)}function Cke(){}function Mke(t,e,r){var n=t.l+e,i=L6(t),a=t.read_shift(1),s=[i];if(s[2]=a,r.cellFormula){var o=wPe(t,n-t.l,r);s[1]=o}else t.l=n;return s}function Dke(t,e,r){var n=t.l+e,i=vl(t),a=[i];if(r.cellFormula){var s=SPe(t,n-t.l,r);a[1]=s,t.l=n}else t.l=n;return a}function $ke(t,e,r){r==null&&(r=ce(18));var n=_v(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var _F=["left","right","top","bottom","header","footer"];function Ike(t){var e={};return _F.forEach(function(r){e[r]=Iu(t)}),e}function Rke(t,e){return e==null&&(e=ce(6*8)),bF(t),_F.forEach(function(r){el(t[r],e)}),e}function Fke(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Lke(t,e,r){r==null&&(r=ce(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Bke(t){var e=ce(24);return e.write_shift(4,4),e.write_shift(4,1),$u(t,e),e}function Uke(t,e){return e==null&&(e=ce(16*4+2)),e.write_shift(2,t.password?nF(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function zke(){}function Wke(){}function Vke(t,e,r,n,i,a,s){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Nn(e),e.z=e.z||qt[14],e.v=Sn(on(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Zs(i.cellXfs,e,i),e.l&&a["!links"].push([ft(l),e.l]),e.c&&a["!comments"].push([ft(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=aN(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,s?he(t,18,cke(e,l)):he(t,7,oke(e,l))):(l.t="str",s?he(t,17,_ke(e,l)):he(t,6,bke(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?s?he(t,13,xke(e,l)):he(t,2,pke(e,l)):s?he(t,16,hke(e,l)):he(t,5,dke(e,l)),!0;case"b":return l.t="b",s?he(t,15,tke(e,l)):he(t,4,ZPe(e,l)),!0;case"e":return l.t="e",s?he(t,14,ake(e,l)):he(t,3,nke(e,l)),!0}return s?he(t,12,QPe(e,l)):he(t,1,YPe(e,l)),!0}function Hke(t,e,r,n){var i=kt(e["!ref"]||"A1"),a,s="",o=[];he(t,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var d=i.s.r;d<=u;++d){s=Or(d),zPe(t,e,i,d);var f=!1;if(d<=i.e.r)for(var h=i.s.c;h<=i.e.c;++h){d===i.s.r&&(o[h]=Hr(h)),a=o[h]+s;var m=l?(e[d]||[])[h]:e[a];if(!m){f=!1;continue}f=Vke(t,m,d,h,n,e,f)}}he(t,146)}function qke(t,e){!e||!e["!merges"]||(he(t,177,kke(e["!merges"].length)),e["!merges"].forEach(function(r){he(t,176,Pke(r))}),he(t,178))}function Gke(t,e){!e||!e["!cols"]||(he(t,390),e["!cols"].forEach(function(r,n){r&&he(t,60,$ke(n,r))}),he(t,391))}function Kke(t,e){!e||!e["!ref"]||(he(t,648),he(t,649,Bke(kt(e["!ref"]))),he(t,650))}function Yke(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=lt(r,-1,n[1].Target.replace(/#.*$/,""),Qe.HLINK);he(t,494,Oke(n,i))}}),delete e["!links"]}function Xke(t,e,r,n){if(e["!comments"].length>0){var i=lt(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Qe.VML);he(t,551,ZS("rId"+i)),e["!legacy"]=i}}function Qke(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],a=typeof i.ref=="string"?i.ref:er(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Wn(a);o.s.r==o.e.r&&(o.e.r=Wn(e["!ref"]).e.r,a=er(o));for(var l=0;l<s.length;++l){var u=s[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),he(t,161,$u(kt(a))),he(t,162)}}function Jke(t,e,r){he(t,133),he(t,137,Lke(e,r)),he(t,138),he(t,134)}function Zke(t,e){e["!protect"]&&he(t,535,Uke(e["!protect"]))}function eAe(t,e,r,n){var i=wn(),a=r.SheetNames[t],s=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=kt(s["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],he(i,129),(r.vbaraw||s["!outline"])&&he(i,147,GPe(o,s["!outline"])),he(i,148,VPe(l)),Jke(i,s,r.Workbook),Gke(i,s),Hke(i,s,t,e),Zke(i,s),Qke(i,s,r,t),qke(i,s),Yke(i,s,n),s["!margins"]&&he(i,476,Rke(s["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Kke(i,s),Xke(i,s,t,n),he(i,130),i.end()}function tAe(t,e){t.l+=10;var r=qr(t);return{name:r}}var rAe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function nAe(t){return!t.Workbook||!t.Workbook.WBProps?"false":DNe(t.Workbook.WBProps.date1904)?"true":"false"}var iAe="][*?/\\".split("");function SF(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return iAe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function aAe(t,e,r){t.forEach(function(n,i){SF(n);for(var a=0;a<i;++a)if(n==t[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=e&&e[i]&&e[i].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function sAe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];aAe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)PPe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function NF(t){var e=[rr];e[e.length]=ve("workbook",null,{xmlns:Mu[0],"xmlns:r":gr.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(rAe.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=ve("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],a=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!i[a]||!i[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var s={name:ut(t.SheetNames[a].slice(0,31))};if(s.sheetId=""+(a+1),s["r:id"]="rId"+(a+1),i[a])switch(i[a].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}e[e.length]=ve("sheet",null,s)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=ve("definedName",ut(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function oAe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=r_(t),r.name=qr(t),r}function lAe(t,e){return e||(e=ce(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),ZS(t.strRelID,e),vr(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function cAe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?qr(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function uAe(t,e){e||(e=ce(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),I6(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function dAe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),a=nje(t),s=_Pe(t,0,r),o=JS(t);t.l=n;var l={Name:a,Ptg:s};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function fAe(t,e){he(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};he(t,156,lAe(i))}he(t,144)}function hAe(t,e){e||(e=ce(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return vr("SheetJS",e),vr(jg.version,e),vr(jg.version,e),vr("7262",e),e.length>e.l?e.slice(0,e.l):e}function mAe(t,e){e||(e=ce(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function pAe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&a==-1&&(a=n);a>i||(he(t,135),he(t,158,mAe(i)),he(t,136))}}function gAe(t,e){var r=wn();return he(r,131),he(r,128,hAe()),he(r,153,uAe(t.Workbook&&t.Workbook.WBProps||null)),pAe(r,t),fAe(r,t),he(r,132),r.end()}function xAe(t,e,r){return(e.slice(-4)===".bin"?gAe:NF)(t)}function vAe(t,e,r,n,i){return(e.slice(-4)===".bin"?eAe:wF)(t,r,n,i)}function yAe(t,e,r){return(e.slice(-4)===".bin"?REe:sF)(t,r)}function bAe(t,e,r){return(e.slice(-4)===".bin"?uEe:rF)(t,r)}function wAe(t,e,r){return(e.slice(-4)===".bin"?ZEe:dF)(t)}function _Ae(t){return(t.slice(-4)===".bin"?HEe:cF)()}function SAe(t,e){var r=[];return t.Props&&r.push(yje(t.Props,e)),t.Custprops&&r.push(bje(t.Props,t.Custprops)),r.join("")}function NAe(){return""}function jAe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var a=[];a.push(ve("NumberFormat",null,{"ss:Format":ut(qt[n.numFmtId])}));var s={"ss:ID":"s"+(21+i)};r.push(ve("Style",a.join(""),s))}),ve("Styles",r.join(""))}function jF(t){return ve("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+nN(t.Ref,{r:0,c:0})})}function EAe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(jF(i)))}return ve("Names",r.join(""))}function TAe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,a=[],s=0;s<i.length;++s){var o=i[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(jF(o)))}return a.join("")}function PAe(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(ve("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(ve("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(ve("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(ve("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(kr("ProtectContents","True")),t["!protect"].objects&&i.push(kr("ProtectObjects","True")),t["!protect"].scenarios&&i.push(kr("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(kr("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(kr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){t["!protect"][s[0]]&&i.push("<"+s[1]+"/>")})),i.length==0?"":ve("WorksheetOptions",i.join(""),{xmlns:$n.x})}function kAe(t){return t.map(function(e){var r=MNe(e.t||""),n=ve("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ve("Comment",n,{"ss:Author":e.a})}).join("")}function AAe(t,e,r,n,i,a,s){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+ut(nN(t.f,s))),t.F&&t.F.slice(0,e.length)==e){var l=xr(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==s.r?"":"["+(l.r-s.r)+"]")+"C"+(l.c==s.c?"":"["+(l.c-s.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=ut(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=ut(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=s.c||u[d].s.r!=s.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(t.v);break;case"b":f="Boolean",h=t.v?"1":"0";break;case"e":f="Error",h=im[t.v];break;case"d":f="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||qt[14]);break;case"s":f="String",h=CNe(t.v||"");break}var m=Zs(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=s.c+1;var g=t.v!=null?h:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(t.c||[]).length>0&&(p+=kAe(t.c)),ve("Cell",p,o)}function OAe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=aF(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function CAe(t,e,r,n){if(!t["!ref"])return"";var i=kt(t["!ref"]),a=t["!merges"]||[],s=0,o=[];t["!cols"]&&t["!cols"].forEach(function(x,v){tN(x);var b=!!x.width,y=_v(v,x),_={"ss:Index":v+1};b&&(_["ss:Width"]=Dg(y.width)),x.hidden&&(_["ss:Hidden"]="1"),o.push(ve("Column",null,_))});for(var l=Array.isArray(t),u=i.s.r;u<=i.e.r;++u){for(var d=[OAe(u,(t["!rows"]||[])[u])],f=i.s.c;f<=i.e.c;++f){var h=!1;for(s=0;s!=a.length;++s)if(!(a[s].s.c>f)&&!(a[s].s.r>u)&&!(a[s].e.c<f)&&!(a[s].e.r<u)){(a[s].s.c!=f||a[s].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},g=ft(m),p=l?(t[u]||[])[f]:t[g];d.push(AAe(p,g,t,e,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function MAe(t,e,r){var n=[],i=r.SheetNames[t],a=r.Sheets[i],s=a?TAe(a,e,t,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=a?CAe(a,e,t,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(PAe(a,e,t,r)),n.join("")}function DAe(t,e){e||(e={}),t.SSF||(t.SSF=Nn(qt)),t.SSF&&(xv(),gv(t.SSF),e.revssf=vv(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Zs(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(SAe(t,e)),r.push(NAe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(ve("Worksheet",MAe(n,e,t),{"ss:Name":ut(t.SheetNames[n])}));return r[2]=jAe(t,e),r[3]=EAe(t),rr+ve("Workbook",r.join(""),{xmlns:$n.ss,"xmlns:o":$n.o,"xmlns:x":$n.x,"xmlns:ss":$n.ss,"xmlns:dt":$n.dt,"xmlns:html":$n.html})}var Xy={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function $Ae(t,e){var r=[],n=[],i=[],a=0,s,o=zO(tC,"n"),l=zO(rC,"n");if(t.Props)for(s=Mr(t.Props),a=0;a<s.length;++a)(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],t.Props[s[a]]]);if(t.Custprops)for(s=Mr(t.Custprops),a=0;a<s.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},s[a])||(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],t.Custprops[s[a]]]);var u=[];for(a=0;a<i.length;++a)Y6.indexOf(i[a][0])>-1||q6.indexOf(i[a][0])>-1||i[a][1]!=null&&u.push(i[a]);n.length&&pt.utils.cfb_add(e,"/SummaryInformation",oC(n,Xy.SI,l,rC)),(r.length||u.length)&&pt.utils.cfb_add(e,"/DocumentSummaryInformation",oC(r,Xy.DSI,o,tC,u.length?u:null,Xy.UDI))}function IAe(t,e){var r=e||{},n=pt.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return pt.utils.cfb_add(n,i,EF(t,r)),r.biff==8&&(t.Props||t.Custprops)&&$Ae(t,n),r.biff==8&&t.vbaraw&&eTe(n,pt.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var RAe={0:{f:BPe},1:{f:KPe},2:{f:mke},3:{f:rke},4:{f:JPe},5:{f:uke},6:{f:yke},7:{f:ske},8:{f:Eke},9:{f:jke},10:{f:Ske},11:{f:Nke},12:{f:XPe},13:{f:gke},14:{f:ike},15:{f:eke},16:{f:fke},17:{f:wke},18:{f:lke},19:{f:QS},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:dAe},40:{},42:{},43:{f:yEe},44:{f:xEe},45:{f:_Ee},46:{f:NEe},47:{f:SEe},48:{},49:{f:XNe},50:{},51:{f:BEe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Qje},62:{f:vke},63:{f:qEe},64:{f:zke},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:sa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Fke},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:qPe},148:{f:WPe,p:16},151:{f:Cke},152:{},153:{f:cAe},154:{},155:{},156:{f:oAe},157:{},158:{},159:{T:1,f:oEe},160:{T:-1},161:{T:1,f:vl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Tke},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:FEe},336:{T:-1},337:{f:WEe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:r_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Hje},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Mke},427:{f:Dke},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Ike},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:HPe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Ake},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:r_},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:QEe},633:{T:1},634:{T:-1},635:{T:1,f:YEe},636:{T:-1},637:{f:eje},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:tAe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Wke},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ye(t,e,r,n){var i=e;if(!isNaN(i)){var a=n||(r||[]).length||0,s=t.next(4);s.write_shift(2,i),s.write_shift(2,a),a>0&&KS(r)&&t.push(r)}}function FAe(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return ye(t,e,r,i);var a=e;if(!isNaN(a)){for(var s=r.parts||[],o=0,l=0,u=0;u+(s[o]||8224)<=8224;)u+=s[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,a),d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u;l<i;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(s[o]||8224)<=8224;)u+=s[o]||8224,o++;d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u}}}function sm(t,e,r){return t||(t=ce(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function LAe(t,e,r,n){var i=ce(9);return sm(i,t,e),Q6(r,n||"b",i),i}function BAe(t,e,r){var n=ce(8+2*r.length);return sm(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function UAe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Sn(on(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?ye(t,2,tEe(r,n,i)):ye(t,3,eEe(r,n,i));return;case"b":case"e":ye(t,5,LAe(r,n,e.v,e.t));return;case"s":case"str":ye(t,4,BAe(r,n,(e.v||"").slice(0,255)));return}ye(t,1,sm(null,r,n))}function zAe(t,e,r,n){var i=Array.isArray(e),a=kt(e["!ref"]||"A1"),s,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),s=er(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Or(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=Hr(d)),s=l[d]+o;var f=i?(e[u]||[])[d]:e[s];f&&UAe(t,f,u,d)}}}function WAe(t,e){for(var r=e||{},n=wn(),i=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==r.sheet&&(i=a);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return ye(n,r.biff==4?1033:r.biff==3?521:9,eN(t,16,r)),zAe(n,t.Sheets[t.SheetNames[i]],i,r),ye(n,10),n.end()}function VAe(t,e,r){ye(t,49,Rje({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function HAe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&ye(t,1054,Bje(i,e[i],r))})}function qAe(t,e){var r=ce(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),ye(t,2151,r),r=ce(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),eF(kt(e["!ref"]||"A1"),r),r.write_shift(4,4),ye(t,2152,r)}function GAe(t,e){for(var r=0;r<16;++r)ye(t,224,cC({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){ye(t,224,cC(n,0,e))})}function KAe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];ye(t,440,Kje(n)),n[1].Tooltip&&ye(t,2048,Yje(n))}delete e["!links"]}function YAe(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&ye(t,125,Jje(_v(i,n),i))})}}function XAe(t,e,r,n,i){var a=16+Zs(i.cellXfs,e,i);if(e.v==null&&!e.bf){ye(t,513,tl(r,n,a));return}if(e.bf)ye(t,6,bPe(e,r,n,i,a));else switch(e.t){case"d":case"n":var s=e.t=="d"?Sn(on(e.v)):e.v;ye(t,515,Vje(r,n,s,a));break;case"b":case"e":ye(t,517,Wje(r,n,e.v,a,i,e.t));break;case"s":case"str":if(i.bookSST){var o=aN(i.Strings,e.v,i.revStrings);ye(t,253,Fje(r,n,o,a))}else ye(t,516,Lje(r,n,(e.v||"").slice(0,255),a,i));break;default:ye(t,513,tl(r,n,a))}}function QAe(t,e,r){var n=wn(),i=r.SheetNames[t],a=r.Sheets[i]||{},s=(r||{}).Workbook||{},o=(s.Sheets||[])[t]||{},l=Array.isArray(a),u=e.biff==8,d,f="",h=[],m=kt(a["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}ye(n,2057,eN(r,16,e)),ye(n,13,Qn(1)),ye(n,12,Qn(100)),ye(n,15,Zr(!0)),ye(n,17,Zr(!1)),ye(n,16,el(.001)),ye(n,95,Zr(!0)),ye(n,42,Zr(!1)),ye(n,43,Zr(!1)),ye(n,130,Qn(1)),ye(n,128,zje()),ye(n,131,Zr(!1)),ye(n,132,Zr(!1)),u&&YAe(n,a["!cols"]),ye(n,512,Uje(m,e)),u&&(a["!links"]=[]);for(var p=m.s.r;p<=m.e.r;++p){f=Or(p);for(var x=m.s.c;x<=m.e.c;++x){p===m.s.r&&(h[x]=Hr(x)),d=h[x]+f;var v=l?(a[p]||[])[x]:a[d];v&&(XAe(n,v,p,x,e),u&&v.l&&a["!links"].push([d,v.l]))}}var b=o.CodeName||o.name||i;return u&&ye(n,574,Ije((s.Views||[])[0])),u&&(a["!merges"]||[]).length&&ye(n,229,Gje(a["!merges"])),u&&KAe(n,a),ye(n,442,Z6(b)),u&&qAe(n,a),ye(n,10),n.end()}function JAe(t,e,r){var n=wn(),i=(t||{}).Workbook||{},a=i.Sheets||[],s=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(ye(n,2057,eN(t,5,r)),r.bookType=="xla"&&ye(n,135),ye(n,225,o?Qn(1200):null),ye(n,193,Sje(2)),l&&ye(n,191),l&&ye(n,192),ye(n,226),ye(n,92,Cje("SheetJS",r)),ye(n,66,Qn(o?1200:1252)),o&&ye(n,353,Qn(0)),o&&ye(n,448),ye(n,317,Zje(t.SheetNames.length)),o&&t.vbaraw&&ye(n,211),o&&t.vbaraw){var u=s.CodeName||"ThisWorkbook";ye(n,442,Z6(u))}ye(n,156,Qn(17)),ye(n,25,Zr(!1)),ye(n,18,Zr(!1)),ye(n,19,Qn(0)),o&&ye(n,431,Zr(!1)),o&&ye(n,444,Qn(0)),ye(n,61,$je()),ye(n,64,Zr(!1)),ye(n,141,Qn(0)),ye(n,34,Zr(nAe(t)=="true")),ye(n,14,Zr(!0)),o&&ye(n,439,Zr(!1)),ye(n,218,Qn(0)),VAe(n,t,r),HAe(n,t.SSF,r),GAe(n,r),o&&ye(n,352,Zr(!1));var d=n.end(),f=wn();o&&ye(f,140,Xje()),o&&r.Strings&&FAe(f,252,Dje(r.Strings)),ye(f,10);var h=f.end(),m=wn(),g=0,p=0;for(p=0;p<t.SheetNames.length;++p)g+=(o?12:11)+(o?2:1)*t.SheetNames[p].length;var x=d.length+g+h.length;for(p=0;p<t.SheetNames.length;++p){var v=a[p]||{};ye(m,133,Mje({pos:x,hs:v.Hidden||0,dt:0,name:t.SheetNames[p]},r)),x+=e[p].length}var b=m.end();if(g!=b.length)throw new Error("BS8 "+g+" != "+b.length);var y=[];return d.length&&y.push(d),b.length&&y.push(b),h.length&&y.push(h),Pr(y)}function ZAe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Nn(qt)),t&&t.SSF&&(xv(),gv(t.SSF),r.revssf=vv(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,sN(r),r.cellXfs=[],Zs(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=QAe(i,r,t);return n.unshift(JAe(t,n,r)),Pr(n)}function EF(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Wn(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return ZAe(t,e);case 4:case 3:case 2:return WAe(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function eOe(t,e,r,n){for(var i=t["!merges"]||[],a=[],s=e.s.c;s<=e.e.c;++s){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>r||i[u].s.c>s)&&!(i[u].e.r<r||i[u].e.c<s)){if(i[u].s.r<r||i[u].s.c<s){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var d=ft({r,c:s}),f=n.dense?(t[r]||[])[s]:t[d],h=f&&f.v!=null&&(f.h||ONe(f.w||(qa(f),f.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,a.push(ve("td",h,m))}}var g="<tr>";return g+a.join("")+"</tr>"}var tOe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',rOe="</body></html>";function nOe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function TF(t,e){var r=e||{},n=r.header!=null?r.header:tOe,i=r.footer!=null?r.footer:rOe,a=[n],s=Wn(t["!ref"]);r.dense=Array.isArray(t),a.push(nOe(t,s,r));for(var o=s.s.r;o<=s.e.r;++o)a.push(eOe(t,s,o,r));return a.push("</table>"+i),a.join("")}function PF(t,e,r){var n=r||{},i=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var s=typeof n.origin=="string"?xr(n.origin):n.origin;i=s.r,a=s.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:a}};if(t["!ref"]){var d=Wn(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),i==-1&&(u.e.r=i=d.e.r+1)}var f=[],h=0,m=t["!rows"]||(t["!rows"]=[]),g=0,p=0,x=0,v=0,b=0,y=0;for(t["!cols"]||(t["!cols"]=[]);g<o.length&&p<l;++g){var _=o[g];if(gC(_)){if(n.display)continue;m[p]={hidden:!0}}var w=_.children;for(x=v=0;x<w.length;++x){var N=w[x];if(!(n.display&&gC(N))){var S=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):$Ne(N.innerHTML),E=N.getAttribute("data-z")||N.getAttribute("z");for(h=0;h<f.length;++h){var T=f[h];T.s.c==v+a&&T.s.r<p+i&&p+i<=T.e.r&&(v=T.e.c+1-a,h=-1)}y=+N.getAttribute("colspan")||1,((b=+N.getAttribute("rowspan")||1)>1||y>1)&&f.push({s:{r:p+i,c:v+a},e:{r:p+i+(b||1)-1,c:v+a+(y||1)-1}});var P={t:"s",v:S},A=N.getAttribute("data-t")||N.getAttribute("t")||"";S!=null&&(S.length==0?P.t=A||"z":n.raw||S.trim().length==0||A=="s"||(S==="TRUE"?P={t:"b",v:!0}:S==="FALSE"?P={t:"b",v:!1}:isNaN(Da(S))?isNaN(jh(S).getDate())||(P={t:"d",v:on(S)},n.cellDates||(P={t:"n",v:Sn(P.v)}),P.z=n.dateNF||qt[14]):P={t:"n",v:Da(S)})),P.z===void 0&&E!=null&&(P.z=E);var k="",F=N.getElementsByTagName("A");if(F&&F.length)for(var H=0;H<F.length&&!(F[H].hasAttribute("href")&&(k=F[H].getAttribute("href"),k.charAt(0)!="#"));++H);k&&k.charAt(0)!="#"&&(P.l={Target:k}),n.dense?(t[p+i]||(t[p+i]=[]),t[p+i][v+a]=P):t[ft({c:v+a,r:p+i})]=P,u.e.c<v+a&&(u.e.c=v+a),v+=y}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+i),t["!ref"]=er(u),p>=l&&(t["!fullref"]=er((u.e.r=o.length-g+p-1+i,u))),t}function kF(t,e){var r=e||{},n=r.dense?[]:{};return PF(n,t,e)}function iOe(t,e){return ml(kF(t,e),e)}function gC(t){var e="",r=aOe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function aOe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var sOe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Th({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return rr+e}}(),xC=function(){var t=function(a){return ut(a).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,s,o){var l=[];l.push('      <table:table table:name="'+ut(s.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Wn(a["!ref"]||"A1"),h=a["!merges"]||[],m=0,g=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",x=a["!rows"]||[];for(u=0;u<f.s.r;++u)p=x[u]?' table:style-name="ro'+x[u].ods+'"':"",l.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=x[u]?' table:style-name="ro'+x[u].ods+'"':"",l.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)l.push(e);for(;d<=f.e.c;++d){var v=!1,b={},y="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(v=!0),b["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,b["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(v){l.push(r);continue}var _=ft({r:u,c:d}),w=g?(a[u]||[])[d]:a[_];if(w&&w.f&&(b["table:formula"]=ut(EPe(w.f)),w.F&&w.F.slice(0,_.length)==_)){var N=Wn(w.F);b["table:number-matrix-columns-spanned"]=N.e.c-N.s.c+1,b["table:number-matrix-rows-spanned"]=N.e.r-N.s.r+1}if(!w){l.push(e);continue}switch(w.t){case"b":y=w.v?"TRUE":"FALSE",b["office:value-type"]="boolean",b["office:boolean-value"]=w.v?"true":"false";break;case"n":y=w.w||String(w.v||0),b["office:value-type"]="float",b["office:value"]=w.v||0;break;case"s":case"str":y=w.v==null?"":w.v,b["office:value-type"]="string";break;case"d":y=w.w||on(w.v).toISOString(),b["office:value-type"]="date",b["office:date-value"]=on(w.v).toISOString(),b["table:style-name"]="ce1";break;default:l.push(e);continue}var S=t(y);if(w.l&&w.l.Target){var E=w.l.Target;E=E.charAt(0)=="#"?"#"+TPe(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),S=ve("text:a",S,{"xlink:href":E.replace(/&/g,"&amp;")})}l.push("          "+ve("table:table-cell",ve("text:p",S,{}),b)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(a,s){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;tN(f),f.ods=o;var h=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(s,o){var l=[rr],u=Th({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Th({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(V6().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,s),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)l.push(n(s.Sheets[s.SheetNames[f]],s,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function AF(t,e){if(e.bookType=="fods")return xC(t,e);var r=VS(),n="",i=[],a=[];return n="mimetype",We(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",We(r,n,xC(t,e)),i.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",We(r,n,sOe(t,e)),i.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",We(r,n,rr+V6()),i.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",We(r,n,vje(a)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",We(r,n,gje(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Rg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function oOe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Ti(Eh(t))}function lOe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Ws(t){var e=t.reduce(function(i,a){return i+a.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function cOe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var a=0;i>=1;++a,i/=256)t[e+a]=i&255;t[e+15]|=r>=0?0:128}function Ph(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function st(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function yc(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function ir(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=Ph(t,r),a=i&7;i=Math.floor(i/8);var s=0,o;if(i==0)break;switch(a){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:s=4,o=t.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=t.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=Ph(t,r),o=t.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(n))}var u={data:o,type:a};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function Nr(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(st(n*8+i.type)),i.type==2&&e.push(st(i.data.length)),e.push(i.data))})}),Ws(e)}function vi(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=Ph(t,n),a=ir(t.slice(n[0],n[0]+i));n[0]+=i;var s={id:yc(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=ir(o.data),u=yc(l[3][0].data);s.messages.push({meta:l,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=a[3])!=null&&e[0]&&(s.merge=yc(a[3][0].data)>>>0>0),r.push(s)}return r}function Ol(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:st(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:st(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(s){i.push(s.data),s.meta[3]=[{type:0,data:st(s.data.length)}],n[2].push({data:Nr(s.meta),type:2})});var a=Nr(n);e.push(st(a.length)),e.push(a),i.forEach(function(s){return e.push(s)})}),Ws(e)}function uOe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Ph(e,r),i=[];r[0]<e.length;){var a=e[r[0]]&3;if(a==0){var s=e[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=e[r[0]],o>1&&(s|=e[r[0]+1]<<8),o>2&&(s|=e[r[0]+2]<<16),o>3&&(s|=e[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}i.push(e.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var l=0,u=0;if(a==1?(u=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,a==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[Ws(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var d=Ws(i);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function yi(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(uOe(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Ws(e)}function Cl(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var a=st(n),s=a.length;e.push(a),n<=60?(s++,e.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),s+=n,i[0]=0,i[1]=s&255,i[2]=s>>8&255,i[3]=s>>16&255,r+=n}return Ws(e)}function Qy(t,e){var r=new Uint8Array(32),n=Rg(r),i=12,a=0;switch(r[0]=5,t.t){case"n":r[1]=2,cOe(r,i,t.v),a|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),a|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,a,!0),r.slice(0,i)}function Jy(t,e){var r=new Uint8Array(32),n=Rg(r),i=12,a=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),a|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),a|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,a,!0),r.slice(0,i)}function as(t){var e=ir(t);return Ph(e[1][0].data)}function dOe(t,e,r){var n,i,a,s;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(a=t[8])==null?void 0:a[0])==null?void 0:s.data)&&yc(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Rg(t[7][0].data),d=0,f=[],h=Rg(t[4][0].data),m=0,g=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),h.setUint16(p*2,m,!0);var x,v;switch(typeof e[p]){case"string":x=Qy({t:"s",v:e[p]},r),v=Jy({t:"s",v:e[p]},r);break;case"number":x=Qy({t:"n",v:e[p]},r),v=Jy({t:"n",v:e[p]},r);break;case"boolean":x=Qy({t:"b",v:e[p]},r),v=Jy({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(x),d+=x.length,g.push(v),m+=v.length,++l}for(t[2][0].data=st(l);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return t[6][0].data=Ws(f),t[3][0].data=Ws(g),l}function fOe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Wn(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(er(n)));var a=Fg(r,{range:n,header:1}),s=["~Sh33tJ5~"];a.forEach(function(G){return G.forEach(function(Y){typeof Y=="string"&&s.push(Y)})});var o={},l=[],u=pt.read(e.numbers,{type:"base64"});u.FileIndex.map(function(G,Y){return[G,u.FullPaths[Y]]}).forEach(function(G){var Y=G[0],I=G[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var Q=Y.content,fe=yi(Q),me=vi(fe);me.forEach(function(ee){l.push(ee.id),o[ee.id]={deps:[],location:I,type:yc(ee.messages[0].meta[1][0].data)}})}}),l.sort(function(G,Y){return G-Y});var d=l.filter(function(G){return G>1}).map(function(G){return[G,st(G)]});u.FileIndex.map(function(G,Y){return[G,u.FullPaths[Y]]}).forEach(function(G){var Y=G[0];if(G[1],!!Y.name.match(/\.iwa/)){var I=vi(yi(Y.content));I.forEach(function(Q){Q.messages.forEach(function(fe){d.forEach(function(me){Q.messages.some(function(ee){return yc(ee.meta[1][0].data)!=11006&&lOe(ee.data,me[1])})&&o[me[0]].deps.push(Q.id)})})})}});for(var f=pt.find(u,o[1].location),h=vi(yi(f.content)),m,g=0;g<h.length;++g){var p=h[g];p.id==1&&(m=p)}var x=as(ir(m.messages[0].data)[1][0].data);for(f=pt.find(u,o[x].location),h=vi(yi(f.content)),g=0;g<h.length;++g)p=h[g],p.id==x&&(m=p);for(x=as(ir(m.messages[0].data)[2][0].data),f=pt.find(u,o[x].location),h=vi(yi(f.content)),g=0;g<h.length;++g)p=h[g],p.id==x&&(m=p);for(x=as(ir(m.messages[0].data)[2][0].data),f=pt.find(u,o[x].location),h=vi(yi(f.content)),g=0;g<h.length;++g)p=h[g],p.id==x&&(m=p);var v=ir(m.messages[0].data);{v[6][0].data=st(n.e.r+1),v[7][0].data=st(n.e.c+1);var b=as(v[46][0].data),y=pt.find(u,o[b].location),_=vi(yi(y.content));{for(var w=0;w<_.length&&_[w].id!=b;++w);if(_[w].id!=b)throw"Bad ColumnRowUIDMapArchive";var N=ir(_[w].messages[0].data);N[1]=[],N[2]=[],N[3]=[];for(var S=0;S<=n.e.c;++S){var E=[];E[1]=E[2]=[{type:0,data:st(S+420690)}],N[1].push({type:2,data:Nr(E)}),N[2].push({type:0,data:st(S)}),N[3].push({type:0,data:st(S)})}N[4]=[],N[5]=[],N[6]=[];for(var T=0;T<=n.e.r;++T)E=[],E[1]=E[2]=[{type:0,data:st(T+726270)}],N[4].push({type:2,data:Nr(E)}),N[5].push({type:0,data:st(T)}),N[6].push({type:0,data:st(T)});_[w].messages[0].data=Nr(N)}y.content=Cl(Ol(_)),y.size=y.content.length,delete v[46];var P=ir(v[4][0].data);{P[7][0].data=st(n.e.r+1);var A=ir(P[1][0].data),k=as(A[2][0].data);y=pt.find(u,o[k].location),_=vi(yi(y.content));{if(_[0].id!=k)throw"Bad HeaderStorageBucket";var F=ir(_[0].messages[0].data);for(T=0;T<a.length;++T){var H=ir(F[2][0].data);H[1][0].data=st(T),H[4][0].data=st(a[T].length),F[2][T]={type:F[2][0].type,data:Nr(H)}}_[0].messages[0].data=Nr(F)}y.content=Cl(Ol(_)),y.size=y.content.length;var M=as(P[2][0].data);y=pt.find(u,o[M].location),_=vi(yi(y.content));{if(_[0].id!=M)throw"Bad HeaderStorageBucket";for(F=ir(_[0].messages[0].data),S=0;S<=n.e.c;++S)H=ir(F[2][0].data),H[1][0].data=st(S),H[4][0].data=st(n.e.r+1),F[2][S]={type:F[2][0].type,data:Nr(H)};_[0].messages[0].data=Nr(F)}y.content=Cl(Ol(_)),y.size=y.content.length;var O=as(P[4][0].data);(function(){for(var G=pt.find(u,o[O].location),Y=vi(yi(G.content)),I,Q=0;Q<Y.length;++Q){var fe=Y[Q];fe.id==O&&(I=fe)}var me=ir(I.messages[0].data);{me[3]=[];var ee=[];s.forEach(function(Z,ke){ee[1]=[{type:0,data:st(ke)}],ee[2]=[{type:0,data:st(1)}],ee[3]=[{type:2,data:oOe(Z)}],me[3].push({type:2,data:Nr(ee)})})}I.messages[0].data=Nr(me);var le=Ol(Y),te=Cl(le);G.content=te,G.size=G.content.length})();var L=ir(P[3][0].data);{var R=L[1][0];delete L[2];var z=ir(R.data);{var J=as(z[2][0].data);(function(){for(var G=pt.find(u,o[J].location),Y=vi(yi(G.content)),I,Q=0;Q<Y.length;++Q){var fe=Y[Q];fe.id==J&&(I=fe)}var me=ir(I.messages[0].data);{delete me[6],delete L[7];var ee=new Uint8Array(me[5][0].data);me[5]=[];for(var le=0,te=0;te<=n.e.r;++te){var Z=ir(ee);le+=dOe(Z,a[te],s),Z[1][0].data=st(te),me[5].push({data:Nr(Z),type:2})}me[1]=[{type:0,data:st(n.e.c+1)}],me[2]=[{type:0,data:st(n.e.r+1)}],me[3]=[{type:0,data:st(le)}],me[4]=[{type:0,data:st(n.e.r+1)}]}I.messages[0].data=Nr(me);var ke=Ol(Y),Ee=Cl(ke);G.content=Ee,G.size=G.content.length})()}R.data=Nr(z)}P[3][0].data=Nr(L)}v[4][0].data=Nr(P)}m.messages[0].data=Nr(v);var W=Ol(h),C=Cl(W);return f.content=C,f.size=f.content.length,u}function hOe(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function sN(t){hOe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function mOe(t,e){return e.bookType=="ods"?AF(t,e):e.bookType=="numbers"?fOe(t,e):e.bookType=="xlsb"?pOe(t,e):gOe(t,e)}function pOe(t,e){ec=1024,t&&!t.SSF&&(t.SSF=Nn(qt)),t&&t.SSF&&(xv(),gv(t.SSF),e.revssf=vv(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,lf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=fF.indexOf(e.bookType)>-1,i=U6();sN(e=e||{});var a=VS(),s="",o=0;if(e.cellXfs=[],Zs(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),s="docProps/core.xml",We(a,s,H6(t.Props,e)),i.coreprops.push(s),lt(e.rels,2,s,Qe.CORE_PROPS),s="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,We(a,s,G6(t.Props)),i.extprops.push(s),lt(e.rels,3,s,Qe.EXT_PROPS),t.Custprops!==t.Props&&Mr(t.Custprops||{}).length>0&&(s="docProps/custom.xml",We(a,s,K6(t.Custprops)),i.custprops.push(s),lt(e.rels,4,s,Qe.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},f=t.Sheets[t.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,We(a,s,vAe(o-1,s,e,t,d)),i.sheets.push(s),lt(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Qe.WS[0])}if(f){var m=f["!comments"],g=!1,p="";m&&m.length>0&&(p="xl/comments"+o+"."+r,We(a,p,wAe(m,p)),i.comments.push(p),lt(d,-1,"../comments"+o+"."+r,Qe.CMNT),g=!0),f["!legacy"]&&g&&We(a,"xl/drawings/vmlDrawing"+o+".vml",uF(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&We(a,W6(s),xc(d))}return e.Strings!=null&&e.Strings.length>0&&(s="xl/sharedStrings."+r,We(a,s,bAe(e.Strings,s,e)),i.strs.push(s),lt(e.wbrels,-1,"sharedStrings."+r,Qe.SST)),s="xl/workbook."+r,We(a,s,xAe(t,s)),i.workbooks.push(s),lt(e.rels,1,s,Qe.WB),s="xl/theme/theme1.xml",We(a,s,lF(t.Themes,e)),i.themes.push(s),lt(e.wbrels,-1,"theme/theme1.xml",Qe.THEME),s="xl/styles."+r,We(a,s,yAe(t,s,e)),i.styles.push(s),lt(e.wbrels,-1,"styles."+r,Qe.STY),t.vbaraw&&n&&(s="xl/vbaProject.bin",We(a,s,t.vbaraw),i.vba.push(s),lt(e.wbrels,-1,"vbaProject.bin",Qe.VBA)),s="xl/metadata."+r,We(a,s,_Ae(s)),i.metadata.push(s),lt(e.wbrels,-1,"metadata."+r,Qe.XLMETA),We(a,"[Content_Types].xml",z6(i,e)),We(a,"_rels/.rels",xc(e.rels)),We(a,"xl/_rels/workbook."+r+".rels",xc(e.wbrels)),delete e.revssf,delete e.ssf,a}function gOe(t,e){ec=1024,t&&!t.SSF&&(t.SSF=Nn(qt)),t&&t.SSF&&(xv(),gv(t.SSF),e.revssf=vv(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,lf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=fF.indexOf(e.bookType)>-1,i=U6();sN(e=e||{});var a=VS(),s="",o=0;if(e.cellXfs=[],Zs(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),s="docProps/core.xml",We(a,s,H6(t.Props,e)),i.coreprops.push(s),lt(e.rels,2,s,Qe.CORE_PROPS),s="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,We(a,s,G6(t.Props)),i.extprops.push(s),lt(e.rels,3,s,Qe.EXT_PROPS),t.Custprops!==t.Props&&Mr(t.Custprops||{}).length>0&&(s="docProps/custom.xml",We(a,s,K6(t.Custprops)),i.custprops.push(s),lt(e.rels,4,s,Qe.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var f={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,We(a,s,wF(o-1,e,t,f)),i.sheets.push(s),lt(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Qe.WS[0])}if(h){var g=h["!comments"],p=!1,x="";if(g&&g.length>0){var v=!1;g.forEach(function(b){b[1].forEach(function(y){y.T==!0&&(v=!0)})}),v&&(x="xl/threadedComments/threadedComment"+o+"."+r,We(a,x,GEe(g,d,e)),i.threadedcomments.push(x),lt(f,-1,"../threadedComments/threadedComment"+o+"."+r,Qe.TCMNT)),x="xl/comments"+o+"."+r,We(a,x,dF(g)),i.comments.push(x),lt(f,-1,"../comments"+o+"."+r,Qe.CMNT),p=!0}h["!legacy"]&&p&&We(a,"xl/drawings/vmlDrawing"+o+".vml",uF(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&We(a,W6(s),xc(f))}return e.Strings!=null&&e.Strings.length>0&&(s="xl/sharedStrings."+r,We(a,s,rF(e.Strings,e)),i.strs.push(s),lt(e.wbrels,-1,"sharedStrings."+r,Qe.SST)),s="xl/workbook."+r,We(a,s,NF(t)),i.workbooks.push(s),lt(e.rels,1,s,Qe.WB),s="xl/theme/theme1.xml",We(a,s,lF(t.Themes,e)),i.themes.push(s),lt(e.wbrels,-1,"theme/theme1.xml",Qe.THEME),s="xl/styles."+r,We(a,s,sF(t,e)),i.styles.push(s),lt(e.wbrels,-1,"styles."+r,Qe.STY),t.vbaraw&&n&&(s="xl/vbaProject.bin",We(a,s,t.vbaraw),i.vba.push(s),lt(e.wbrels,-1,"vbaProject.bin",Qe.VBA)),s="xl/metadata."+r,We(a,s,cF()),i.metadata.push(s),lt(e.wbrels,-1,"metadata."+r,Qe.XLMETA),d.length>1&&(s="xl/persons/person.xml",We(a,s,KEe(d)),i.people.push(s),lt(e.wbrels,-1,"persons/person.xml",Qe.PEOPLE)),We(a,"[Content_Types].xml",z6(i,e)),We(a,"_rels/.rels",xc(e.rels)),We(a,"xl/_rels/workbook."+r+".rels",xc(e.wbrels)),delete e.revssf,delete e.ssf,a}function xOe(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Ha(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function OF(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return rm(e.file,pt.write(t,{type:rt?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return pt.write(t,e)}function vOe(t,e){var r=Nn(e||{}),n=mOe(t,r);return yOe(n,r)}function yOe(t,e){var r={},n=rt?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?pt.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(pv(i))}return e.password&&typeof encrypt_agile<"u"?OF(encrypt_agile(i,e.password),e):e.type==="file"?rm(e.file,i):e.type=="string"?nf(i):i}function bOe(t,e){var r=e||{},n=IAe(t,r);return OF(n,r)}function Vi(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return Nh(Eh(n));case"binary":return Eh(n);case"string":return t;case"file":return rm(e.file,n,"utf8");case"buffer":return rt?es(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Vi(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function wOe(t,e){switch(e.type){case"base64":return Nh(t);case"binary":return t;case"string":return t;case"file":return rm(e.file,t,"binary");case"buffer":return rt?es(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function p0(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?Nh(r):e.type=="string"?nf(r):r;case"file":return rm(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function CF(t,e){YSe(),sAe(t);var r=Nn(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=CF(t,r);return r.type="array",pv(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Vi(DAe(t,r),r);case"slk":case"sylk":return Vi(nEe.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return Vi(TF(t.Sheets[t.SheetNames[i]],r),r);case"txt":return wOe(MF(t.Sheets[t.SheetNames[i]],r),r);case"csv":return Vi(oN(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return Vi(iEe.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return p0(rEe.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return Vi(aEe.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return Vi(fEe.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return Vi(tF.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return Vi(AF(t,r),r);case"wk1":return p0(uC.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return p0(uC.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),p0(EF(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),bOe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return vOe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function _Oe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function SOe(t,e,r){var n={};return n.type="file",n.file=e,_Oe(n),CF(t,n)}function NOe(t,e,r,n,i,a,s,o){var l=Or(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!s||t[r])for(var m=e.s.c;m<=e.e.c;++m){var g=s?t[r][m]:t[n[m]+l];if(g===void 0||g.t===void 0){if(u===void 0)continue;a[m]!=null&&(h[a[m]]=u);continue}var p=g.v;switch(g.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(a[m]!=null){if(p==null)if(g.t=="e"&&p===null)h[a[m]]=null;else if(u!==void 0)h[a[m]]=u;else if(d&&p===null)h[a[m]]=null;else continue;else h[a[m]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?p:qa(g,p,o);p!=null&&(f=!1)}}return{row:h,isempty:f}}function Fg(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,a=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=kt(d);break;case"number":l=kt(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(i=0);var f=Or(l.s.r),h=[],m=[],g=0,p=0,x=Array.isArray(t),v=l.s.r,b=0,y={};x&&!t[v]&&(t[v]=[]);var _=u.skipHidden&&t["!cols"]||[],w=u.skipHidden&&t["!rows"]||[];for(b=l.s.c;b<=l.e.c;++b)if(!(_[b]||{}).hidden)switch(h[b]=Hr(b),r=x?t[v][b]:t[h[b]+f],n){case 1:a[b]=b-l.s.c;break;case 2:a[b]=h[b];break;case 3:a[b]=u.header[b-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=qa(r,null,u),p=y[s]||0,!p)y[s]=1;else{do o=s+"_"+p++;while(y[o]);y[s]=p,y[o]=1}a[b]=o}for(v=l.s.r+i;v<=l.e.r;++v)if(!(w[v]||{}).hidden){var N=NOe(t,l,v,h,n,a,x,u);(N.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=N.row)}return m.length=g,m}var vC=/"/g;function jOe(t,e,r,n,i,a,s,o){for(var l=!0,u=[],d="",f=Or(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var m=o.dense?(t[r]||[])[h]:t[n[h]+f];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:qa(m,null,o));for(var g=0,p=0;g!==d.length;++g)if((p=d.charCodeAt(g))===i||p===a||p===34||o.forceQuotes){d='"'+d.replace(vC,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(vC,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(s)}function oN(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=kt(t["!ref"]),a=n.FS!==void 0?n.FS:",",s=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],g=i.s.c;g<=i.e.c;++g)(h[g]||{}).hidden||(f[g]=Hr(g));for(var p=0,x=i.s.r;x<=i.e.r;++x)(m[x]||{}).hidden||(d=jOe(t,i,x,f,s,l,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?o:"")+d)));return delete n.dense,r.join("")}function MF(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=oN(t,e);return r}function EOe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=kt(t["!ref"]),a="",s=[],o,l=[],u=Array.isArray(t);for(o=i.s.c;o<=i.e.c;++o)s[o]=Hr(o);for(var d=i.s.r;d<=i.e.r;++d)for(a=Or(d),o=i.s.c;o<=i.e.c;++o)if(e=s[o]+a,r=u?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function DF(t,e,r){var n=r||{},i=+!n.skipHeader,a=t||{},s=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?xr(n.origin):n.origin;s=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:s+e.length-1+i}};if(a["!ref"]){var f=kt(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+e.length-1+i)}else s==-1&&(s=0,d.e.r=e.length-1+i);var h=n.header||[],m=0;e.forEach(function(p,x){Mr(p).forEach(function(v){(m=h.indexOf(v))==-1&&(h[m=h.length]=v);var b=p[v],y="z",_="",w=ft({c:o+m,r:s+x+i});u=kh(a,w),b&&typeof b=="object"&&!(b instanceof Date)?a[w]=b:(typeof b=="number"?y="n":typeof b=="boolean"?y="b":typeof b=="string"?y="s":b instanceof Date?(y="d",n.cellDates||(y="n",b=Sn(b)),_=n.dateNF||qt[14]):b===null&&n.nullError&&(y="e",b=0),u?(u.t=y,u.v=b,delete u.w,delete u.R,_&&(u.z=_)):a[w]=u={t:y,v:b},_&&(u.z=_))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=Or(s);if(i)for(m=0;m<h.length;++m)a[Hr(m+o)+g]={t:"s",v:h[m]};return a["!ref"]=er(d),a}function TOe(t,e){return DF(null,t,e)}function kh(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=xr(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?kh(t,ft(e)):kh(t,ft({r:e,c:r||0}))}function POe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function kOe(){return{SheetNames:[],Sheets:{}}}function AOe(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var s=a&&a[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=s+i)!=-1;++i);}if(SF(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function OOe(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=POe(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function COe(t,e){return t.z=e,t}function $F(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function MOe(t,e,r){return $F(t,"#"+e,r)}function DOe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function $Oe(t,e,r,n){for(var i=typeof e!="string"?e:kt(e),a=typeof e=="string"?e:er(e),s=i.s.r;s<=i.e.r;++s)for(var o=i.s.c;o<=i.e.c;++o){var l=kh(t,s,o);l.t="n",l.F=a,delete l.v,s==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Zy={encode_col:Hr,encode_row:Or,encode_cell:ft,encode_range:er,decode_col:XS,decode_row:YS,split_cell:YNe,decode_cell:xr,decode_range:Wn,format_cell:qa,sheet_add_aoa:$6,sheet_add_json:DF,sheet_add_dom:PF,aoa_to_sheet:Du,json_to_sheet:TOe,table_to_sheet:kF,table_to_book:iOe,sheet_to_csv:oN,sheet_to_txt:MF,sheet_to_json:Fg,sheet_to_html:TF,sheet_to_formulae:EOe,sheet_to_row_object_array:Fg,sheet_get_cell:kh,book_new:kOe,book_append_sheet:AOe,book_set_sheet_visibility:OOe,cell_set_number_format:COe,cell_set_hyperlink:$F,cell_set_internal_link:MOe,cell_add_comment:DOe,sheet_set_array_formula:$Oe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const i_=t=>{var e;if(!t)return{formattedDetails:"-",summary:"-"};try{const r=typeof t=="string"?JSON.parse(t):t;let n="";if(r.type==="vendor_rental")n=`Rental: ${((e=r.vendor_details)==null?void 0:e.name)||"Unknown Vendor"}`;else if(r.products){const a=r.products.length,s=r.total;n=`${a} product${a>1?"s":""}, Total: ${s} OMR`}return{formattedDetails:JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:").replace(/[{[]/g,a=>`${a}
  `).replace(/[}\]]/g,a=>`
${a}`),summary:n}}catch{return{formattedDetails:String(t),summary:String(t).slice(0,50)+(String(t).length>50?"...":"")}}},IOe=(t,e,r)=>{const n=t.map(l=>{const{summary:u}=i_(l.details);return{[r.date]:$e(new Date(l.transaction_date),"yyyy-MM-dd HH:mm"),[r.transactionId]:l.transaction_id,[r.branch]:l.branch_name,[r.transactionType]:r[l.transaction_type]||l.transaction_type,[r.amount]:l.amount,[r.ownerProfit]:l.owner_profit_from_this_transcation||0,[r.paymentMethod]:r[l.payment_method]||l.payment_method,[r.vendorName]:l.vendor_name||"-",[r.transactionReason]:l.transaction_reason||"-",[r.details]:u}}),i=Zy.book_new(),a=Zy.json_to_sheet(n,{header:[r.date,r.transactionId,r.branch,r.transactionType,r.amount,r.ownerProfit,r.paymentMethod,r.vendorName,r.transactionReason,r.details]}),s=[{wch:20},{wch:15},{wch:15},{wch:15},{wch:12},{wch:12},{wch:15},{wch:20},{wch:25},{wch:40}];a["!cols"]=s,Zy.book_append_sheet(i,a,"Transactions");const o=`transactions_${$e(new Date,"yyyy-MM-dd_HH-mm")}.xlsx`;SOe(i,o)};function ROe({businessCode:t,selectedBranch:e,dateRange:r}){const{language:n}=_e(),i=Cu[n],[a,s]=j.useState({}),o=HSe({businessCode:t,branchName:e,startDate:r.startDate,endDate:r.endDate,filters:a}),l=j.useMemo(()=>o.data?{paymentMethods:Object.keys(o.data.byPaymentMethod),transactionTypes:Object.keys(o.data.byTransactionType),statuses:Object.keys(o.data.byStatus),vendors:Object.entries(o.data.byVendor).map(([h,m])=>{var g;return{code:h,name:((g=o.data.recentTransactions.find(p=>p.vendor_code===h))==null?void 0:g.vendor_name)||h}})}:{paymentMethods:[],transactionTypes:[],statuses:[],vendors:[]},[o.data]),u=f=>`${f.toFixed(3)} OMR`,d=f=>c.jsxs("div",{className:"space-y-8",children:[c.jsx(qSe,{filters:a,onFiltersChange:s,...l}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:i.totalTransactions}),c.jsx("p",{className:"text-3xl font-bold text-blue-900",children:f.totalTransactions}),c.jsx("p",{className:"mt-2 text-lg font-semibold text-blue-700",children:u(f.totalAmount)})]}),c.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-sm font-medium text-emerald-800 mb-2",children:i.ownerSales}),c.jsx("p",{className:"text-3xl font-bold text-emerald-900",children:f.ownerTransactions.count}),c.jsx("p",{className:"mt-2 text-lg font-semibold text-emerald-700",children:u(f.ownerTransactions.profit)})]}),c.jsxs("div",{className:"bg-gradient-to-br from-violet-50 to-violet-100 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("h3",{className:"text-sm font-medium text-violet-800 mb-2",children:i.vendorSales}),c.jsx("p",{className:"text-3xl font-bold text-violet-900",children:f.vendorTransactions.count}),c.jsx("p",{className:"mt-2 text-lg font-semibold text-violet-700",children:u(f.vendorTransactions.profit)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[c.jsx("div",{className:"px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:c.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${n==="ar"?"text-right":"text-left"}`,children:i.paymentMethodsTitle})}),c.jsxs("div",{children:[c.jsxs("div",{className:`bg-gray-50 px-6 py-4 grid grid-cols-4 gap-4 text-sm font-medium text-gray-600 ${n==="ar"?"text-right":"text-left"}`,children:[c.jsx("div",{children:i.method}),c.jsx("div",{children:i.count}),c.jsx("div",{children:i.amount}),c.jsx("div",{children:i.profit})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:Object.entries(f.byPaymentMethod).map(([h,m])=>c.jsxs("div",{className:`px-6 py-4 grid grid-cols-4 gap-4 hover:bg-gray-50 transition-colors ${n==="ar"?"text-right":"text-left"}`,children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:i[h]||h}),c.jsx("div",{className:"text-sm text-gray-600",children:m.count}),c.jsx("div",{className:"text-sm font-medium text-gray-900",children:u(m.amount)}),c.jsx("div",{className:"text-sm font-medium text-emerald-600",children:u(m.profit)})]},h))})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[c.jsx("div",{className:"px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:c.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${n==="ar"?"text-right":"text-left"}`,children:i.transactionTypeTitle})}),c.jsxs("div",{children:[c.jsxs("div",{className:`bg-gray-50 px-6 py-4 grid grid-cols-4 gap-4 text-sm font-medium text-gray-600 ${n==="ar"?"text-right":"text-left"}`,children:[c.jsx("div",{children:i.method}),c.jsx("div",{children:i.count}),c.jsx("div",{children:i.amount}),c.jsx("div",{children:i.profit})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:Object.entries(f.byTransactionType).map(([h,m])=>c.jsxs("div",{className:`px-6 py-4 grid grid-cols-4 gap-4 hover:bg-gray-50 transition-colors ${n==="ar"?"text-right":"text-left"}`,children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:i[h]||h}),c.jsx("div",{className:"text-sm text-gray-600",children:m.count}),c.jsx("div",{className:"text-sm font-medium text-gray-900",children:u(m.amount)}),c.jsx("div",{className:"text-sm font-medium text-emerald-600",children:u(m.profit)})]},h))})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white flex justify-between items-center",children:[c.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${n==="ar"?"text-right":"text-left"}`,children:i.recentTransactions}),c.jsxs("button",{onClick:()=>IOe(f.recentTransactions,n,i),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[c.jsx(u3,{className:"w-4 h-4 mr-2"}),i.exportReport]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:`min-w-full divide-y divide-gray-200 ${n==="ar"?"text-right":"text-left"}`,children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50",children:[c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.date}),c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.transactionId}),c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.branch}),c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.transactionType}),c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.amount}),c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.ownerProfit}),c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.paymentMethod}),c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.vendorName}),c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.transactionReason}),c.jsx("th",{className:`px-6 py-4 text-xs font-medium text-gray-500 uppercase tracking-wider ${n==="ar"?"text-right":"text-left"}`,children:i.details})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:f.recentTransactions.length>0?f.recentTransactions.map(h=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 ${n==="ar"?"text-right":"text-left"}`,children:$e(new Date(h.transaction_date),"yyyy-MM-dd HH:mm")}),c.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-600 ${n==="ar"?"text-right":"text-left"}`,children:[h.transaction_id.slice(0,8),"..."]}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-600 ${n==="ar"?"text-right":"text-left"}`,children:h.branch_name}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-600 ${n==="ar"?"text-right":"text-left"}`,children:i[h.transaction_type]||h.transaction_type}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 ${n==="ar"?"text-right":"text-left"}`,children:u(h.amount)}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${h.owner_profit_from_this_transcation>0?"text-emerald-600":"text-gray-900"} ${n==="ar"?"text-right":"text-left"}`,children:h.owner_profit_from_this_transcation?u(h.owner_profit_from_this_transcation):"-"}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-600 ${n==="ar"?"text-right":"text-left"}`,children:i[h.payment_method]||h.payment_method}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-600 ${n==="ar"?"text-right":"text-left"}`,children:h.vendor_name||"-"}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-600 ${n==="ar"?"text-right":"text-left"}`,children:h.transaction_reason||"-"}),c.jsx("td",{className:`px-6 py-4 text-sm text-gray-600 ${n==="ar"?"text-right":"text-left"}`,children:h.details?c.jsxs("div",{className:"group relative",children:[c.jsx("div",{className:"cursor-pointer",children:i_(h.details).summary}),c.jsx("div",{className:"hidden group-hover:block absolute z-10 top-0 left-0 mt-6 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-lg",children:c.jsx("pre",{className:"text-xs whitespace-pre-wrap break-words bg-gray-50 p-2 rounded",children:i_(h.details).formattedDetails})})]}):"-"})]},h.transaction_id)):c.jsx("tr",{children:c.jsx("td",{colSpan:10,className:"px-6 py-4 text-center text-sm text-gray-500",children:i.noTransactions})})})]})})]})]});return c.jsx(WSe,{title:i.transactionSummary,data:o,renderContent:d})}function FOe({selectedReport:t,onReportChange:e}){const{language:r}=_e(),n=Cu[r],i=[{type:"transactions",label:n.transactionSummary},{type:"sales",label:n.monthlySales},{type:"products",label:n.topSellingProducts},{type:"inventory",label:n.inventory}];return c.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(({type:a,label:s})=>c.jsx("button",{onClick:()=>e(a),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors
            ${t===a?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s},a))})}function LOe(){const{language:t}=_e(),{userProfile:e,fetchUserProfile:r}=f2(),n=Cu[t],[i,a]=j.useState("all"),[s,o]=j.useState("today"),[l,u]=j.useState("transactions"),[d,f]=j.useState([]),[h,m]=j.useState(!0),[g,p]=j.useState(()=>{const y=ei(new Date),_=At(y);return{startDate:$e(_,"yyyy-MM-dd"),endDate:$e(y,"yyyy-MM-dd")}});j.useEffect(()=>{e||r()},[e,r]),j.useEffect(()=>{(async()=>{if(!(e!=null&&e.business_code)){h||m(!0);return}try{const _=await Z3(e.business_code);f(_),a(e.main_branch||"all")}catch(_){console.error("Error fetching branches:",_)}finally{m(!1)}})()},[e==null?void 0:e.business_code,e==null?void 0:e.main_branch]);const x=y=>{if(o(y),y!=="custom"){const _=ei(new Date);let w=At(_);switch(y){case"today":w=At(_);break;case"yesterday":w=At(lc(_,1));break;case"last7days":w=At(lc(_,7));break;case"last30days":w=At(lc(_,30));break;case"thisWeek":w=At(d5(_,1));break;case"thisMonth":w=At(Cf(_,1));break}p({startDate:$e(w,"yyyy-MM-dd"),endDate:$e(_,"yyyy-MM-dd")})}},v=(y,_)=>{p({startDate:y,endDate:_})},b=()=>{if(!(e!=null&&e.business_code))return null;const y={businessCode:e.business_code,selectedBranch:i,branches:d,dateRange:g,onBranchChange:a};switch(l){case"transactions":return c.jsx(ROe,{...y});case"sales":case"products":case"inventory":return c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsx("h2",{className:"text-lg font-semibold mb-4",children:n.comingSoon})})}};return e?c.jsxs("div",{className:"space-y-6 p-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx(FOe,{selectedReport:l,onReportChange:u}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[c.jsx(f5,{branches:d,selectedBranch:i,onBranchChange:a}),c.jsx(zSe,{selectedPeriod:s,onPeriodChange:x,onCustomDateChange:v,customStartDate:g.startDate,customEndDate:g.endDate})]})]}),h?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("p",{className:"text-gray-500",children:n.loading})}):c.jsx("div",{className:"grid grid-cols-1 gap-6",children:b()})]}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-500",children:n.loading})})}const lN={ar:{settings:"الإعدادات",saveSettings:"حفظ الإعدادات",saving:"جاري الحفظ...",productTypes:"أنواع المنتجات",allowedProducts:"المنتجات المسموح بها",foodProducts:"منتجات غذائية",nonFoodProducts:"منتجات غير غذائية",defaultProductType:"النوع الافتراضي للمنتجات",receipt:"الفاتورة",receiptHeader:"ترويسة الفاتورة",receiptFooter:"تذييل الفاتورة",showLogo:"إظهار شعار المتجر في الفاتورة",loyaltySystem:"نظام الولاء",enableLoyalty:"تفعيل نظام النقاط والولاء",tax:"الضريبة",enableTax:"تفعيل الضريبة",taxPercentage:"نسبة الضريبة (%)",settingsSaved:"تم حفظ الإعدادات بنجاح",vendorCommission:"عمولة الموردين",enableCommission:"تفعيل العمولة على مبيعات الموردين",defaultCommission:"العمولة الافتراضية",minimumAmount:"الحد الأدنى للمبلغ",minimumAmountHint:"سيتم تطبيق العمولة فقط على المبيعات التي تتجاوز هذا المبلغ",cancel:"إلغاء",currency:"ر.ع",businessLogo:"شعار المتجر",uploadLogo:"رفع شعار المتجر",chooseFile:"اختر صورة",uploadInstructions:"PNG, JPG حتى 5MB",uploading:"جاري الرفع...",errorUploadingLogo:"حدث خطأ أثناء رفع الشعار",loading:"جاري التحميل...",errorLoadingSettings:"حدث خطأ أثناء تحميل الإعدادات",errorSavingSettings:"حدث خطأ أثناء حفظ الإعدادات",monthlyVendorTax:"ضريبة شهرية على الموردين",monthlyVendorTaxPercentage:"نسبة الضريبة الشهرية على الموردين (%)",monthlyVendorTaxes:"الضرائب الشهرية للموردين",vendorName:"اسم المورد",branchName:"اسم الفرع",assignmentDate:"تاريخ التعيين",noVendorsFound:"لم يتم العثور على موردين",loading:"جاري التحميل...",filterByBranch:"تصفية حسب الفرع",filterByBusiness:"تصفية حسب المتجر",allBranches:"جميع الفروع",allBusinesses:"جميع المتاجر",searchBusiness:"البحث عن متجر...",selectMonth:"اختر الشهر",selectYear:"اختر السنة",monthlyProfit:"الربح الشهري",monthlyTax:"الضريبة الشهرية",monthlyTaxHistory:"سجل الضرائب الشهرية",paidTaxes:"الضرائب المدفوعة",paymentStatus:"حالة الدفع",paymentAmount:"مبلغ الدفع",payTax:"دفع الضريبة",confirmTaxPayment:"تأكيد دفع الضريبة",confirmTaxPaymentMessage:"هل أنت متأكد من تسجيل هذه الضريبة كمدفوعة؟ المبلغ: {amount} ريال عماني",taxPaymentSuccess:"تم تسجيل دفع الضريبة بنجاح",taxPaymentError:"خطأ في تسجيل دفع الضريبة",totalMonthlyProfit:"إجمالي الأرباح الشهرية",totalPaidTaxes:"إجمالي الضرائب المدفوعة",totalPendingTaxes:"إجمالي الضرائب المعلقة",vendors:"موردين",vendorsCount:"عدد الموردين",paidVendorsCount:"عدد الموردين الذين دفعوا",pendingVendorsCount:"عدد الموردين المعلقين",selectPaymentMethod:"اختر طريقة الدفع",paymentMethod:"طريقة الدفع",cash:"نقداً",card:"بطاقة",online:"تحويل بنكي",amount:"المبلغ",confirmPayment:"تأكيد الدفع",months:{1:"يناير",2:"فبراير",3:"مارس",4:"أبريل",5:"مايو",6:"يونيو",7:"يوليو",8:"أغسطس",9:"سبتمبر",10:"أكتوبر",11:"نوفمبر",12:"ديسمبر"}},en:{settings:"Settings",saveSettings:"Save Settings",saving:"Saving...",productTypes:"Product Types",allowedProducts:"Allowed Products",foodProducts:"Food Products",nonFoodProducts:"Non-Food Products",defaultProductType:"Default Product Type",receipt:"Receipt",receiptHeader:"Receipt Header",receiptFooter:"Receipt Footer",showLogo:"Show Store Logo on Receipt",loyaltySystem:"Loyalty System",enableLoyalty:"Enable Points and Loyalty System",tax:"Tax",enableTax:"Enable Tax",taxPercentage:"Tax Percentage (%)",settingsSaved:"Settings saved successfully",vendorCommission:"Vendor Commission",enableCommission:"Enable commission on vendor sales",defaultCommission:"Default Commission",minimumAmount:"Minimum Amount",minimumAmountHint:"Commission will only apply to sales above this amount",cancel:"Cancel",currency:"OMR",businessLogo:"Business Logo",uploadLogo:"Upload Business Logo",chooseFile:"Choose file",uploadInstructions:"PNG, JPG up to 5MB",uploading:"Uploading...",errorUploadingLogo:"Error uploading logo",loading:"Loading...",errorLoadingSettings:"Error loading settings",errorSavingSettings:"Error saving settings",monthlyVendorTax:"Monthly Vendor Tax",monthlyVendorTaxPercentage:"Monthly Vendor Tax Percentage (%)",monthlyVendorTaxes:"Monthly Vendor Taxes",vendorName:"Vendor Name",branchName:"Branch Name",assignmentDate:"Assignment Date",noVendorsFound:"No vendors found",loading:"Loading...",filterByBranch:"Filter by Branch",filterByBusiness:"Filter by Business",allBranches:"All Branches",allBusinesses:"All Businesses",searchBusiness:"Search business...",selectMonth:"Select Month",selectYear:"Select Year",monthlyProfit:"Monthly Profit",monthlyTax:"Monthly Tax",monthlyTaxHistory:"Monthly Tax History",paidTaxes:"Paid Taxes",paymentStatus:"Payment Status",paymentAmount:"Payment Amount",payTax:"Pay Tax",confirmTaxPayment:"Confirm Tax Payment",confirmTaxPaymentMessage:"Are you sure you want to mark this tax as paid? Amount: {amount} OMR",taxPaymentSuccess:"Tax payment recorded successfully",taxPaymentError:"Error recording tax payment",totalMonthlyProfit:"Total Monthly Profit",totalPaidTaxes:"Total Paid Taxes",totalPendingTaxes:"Total Pending Taxes",vendors:"vendors",vendorsCount:"Vendor Count",paidVendorsCount:"Paid Vendors Count",pendingVendorsCount:"Pending Vendors Count",selectPaymentMethod:"Select Payment Method",paymentMethod:"Payment Method",cash:"Cash",card:"Card",online:"Online Transfer",amount:"Amount",confirmPayment:"Confirm Payment",months:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}};function BOe({settings:t,onUpdate:e}){const{language:r}=_e();qe();const n=lN[r],[i,a]=X.useState(!1),s=async o=>{try{a(!0),e(o)}catch(l){console.error("Error updating vendor commission settings:",l)}finally{a(!1)}};return c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow divide-y",children:[c.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[c.jsx(Qb,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h2",{className:"text-lg font-medium",children:n.vendorCommission})]}),c.jsxs("div",{className:"pt-4 space-y-4",children:[c.jsx("div",{children:c.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx("input",{type:"checkbox",checked:t.vendor_commission_enabled,onChange:o=>s({vendor_commission_enabled:o.target.checked}),disabled:i,className:"rounded text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:n.enableCommission})]})}),t.vendor_commission_enabled&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n.defaultCommission}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"number",value:t.default_commission_rate,onChange:o=>s({default_commission_rate:parseFloat(o.target.value)}),disabled:i,min:"0",max:"100",step:"0.1",className:"w-24 px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),c.jsx("span",{className:"mr-2",children:"%"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n.minimumAmount}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"number",value:t.minimum_commission_amount,onChange:o=>s({minimum_commission_amount:parseFloat(o.target.value)}),disabled:i,min:"0",step:"0.1",className:"w-32 px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),c.jsx("span",{className:"mr-2",children:n.currency})]}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n.minimumAmountHint})]})]})]})]})}function UOe(){const{language:t}=_e(),{user:e}=qe(),{settings:r,setSettings:n}=Ii(),i=lN[t],[a,s]=j.useState(!1),[o,l]=j.useState(null),{upload:u,isUploading:d}=jS(),[f,h]=j.useState(null);j.useEffect(()=>{r!=null&&r.url_logo_of_business&&h(r.url_logo_of_business)},[r==null?void 0:r.url_logo_of_business]);const m=async p=>{var v;const x=(v=p.target.files)==null?void 0:v[0];if(x){l(null);try{const b=URL.createObjectURL(x);h(b);const y=await u(x);if(console.log("Uploaded logo URL:",y),!y)throw new Error("Failed to upload logo");r&&(n({...r,url_logo_of_business:y}),await eE(e.businessCode,{url_logo_of_business:y}),console.log("Logo URL saved to settings"))}catch(b){console.error("Error uploading logo:",b),l(i.errorUploadingLogo),h(null),r!=null&&r.url_logo_of_business&&h(r.url_logo_of_business)}}},g=async()=>{s(!0),l(null);const p={receipt_header:r.receipt_header,receipt_footer:r.receipt_footer,url_logo_of_business:r.url_logo_of_business,loyalty_system_enabled:r.loyalty_system_enabled,vendor_commission_enabled:r.vendor_commission_enabled,default_commission_rate:r.default_commission_rate,minimum_commission_amount:r.minimum_commission_amount,tax_enabled:r.tax_enabled,tax_rate:r.tax_rate,extra_tax_monthly_on_vendors:r.extra_tax_monthly_on_vendors};try{if(!(e!=null&&e.businessCode)||!r)return;console.log("Saving settings:",p),await eE(e.businessCode,p);const x=await Y3(e.businessCode);n(x),alert(i.settingsSaved)}catch(x){console.error("Error saving settings:",x),l(i.errorSavingSettings)}finally{s(!1)}};return r?c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:i.settings}),c.jsx("button",{onClick:g,disabled:a,className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-400",children:a?i.saving:i.saveSettings})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow divide-y",children:[c.jsxs("div",{className:"p-6",children:[o&&c.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(_n,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),c.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-6",children:[c.jsx(J7,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h2",{className:"text-lg font-medium",children:i.businessLogo})]}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"flex items-start space-x-4 space-x-reverse",children:[c.jsx("div",{className:"w-32 h-32 border-2 border-gray-300 rounded-lg overflow-hidden flex items-center justify-center bg-gray-50",children:f?c.jsxs("div",{className:"relative w-full h-full",children:[c.jsx("img",{src:f,alt:"Business logo",className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>{h(null),r&&n({...r,url_logo_of_business:null})},className:"absolute top-1 right-1 bg-red-100 text-red-600 rounded-full p-1 hover:bg-red-200",children:"×"})]}):c.jsx(Yt,{className:"w-12 h-12 text-gray-400"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i.uploadLogo}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx(n2,{className:"mx-auto h-12 w-12 text-gray-400"}),c.jsx("div",{className:"flex text-sm text-gray-600",children:c.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500",children:[c.jsx("span",{children:i.chooseFile}),c.jsx("input",{type:"file",accept:"image/*",onChange:m,className:"sr-only",disabled:d})]})}),c.jsx("p",{className:"text-xs text-gray-500",children:d?i.uploading:i.uploadInstructions})]})})]})]})})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[c.jsx(p3,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h2",{className:"text-lg font-medium",children:i.productTypes})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.receiptHeader,":"]}),c.jsx("textarea",{value:r.receipt_header||"",onChange:p=>n({...r,receipt_header:p.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.receiptFooter,":"]}),c.jsx("textarea",{value:r.receipt_footer||"",onChange:p=>n({...r,receipt_footer:p.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsx("div",{children:c.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx("input",{type:"checkbox",checked:!!r.url_logo_of_business,onChange:p=>n({...r,url_logo_of_business:p.target.checked?"":null}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:i.showLogo})]})})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[c.jsx(Ld,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h2",{className:"text-lg font-medium",children:i.loyaltySystem})]}),c.jsx("div",{children:c.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx("input",{type:"checkbox",checked:r.loyalty_system_enabled,onChange:p=>n({...r,loyalty_system_enabled:p.target.checked}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:i.enableLoyalty})]})})]}),c.jsx(BOe,{settings:r,onUpdate:p=>{n({...r,...p})}}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[c.jsx(Qb,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h2",{className:"text-lg font-medium",children:i.tax})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{children:c.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx("input",{type:"checkbox",checked:r.tax_enabled,onChange:p=>n({...r,tax_enabled:p.target.checked}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:i.enableTax})]})}),r.tax_enabled&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.taxPercentage,":"]}),c.jsx("input",{type:"number",min:"0",max:"100",value:r.tax_rate||0,onChange:p=>n({...r,tax_rate:parseFloat(p.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",dir:"ltr"})]}),o&&c.jsx("div",{className:"rounded-md bg-red-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(_n,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:o})})]})})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[c.jsx(Qb,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h2",{className:"text-lg font-medium",children:i.monthlyVendorTax})]}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-medium text-gray-700 mb-2",children:i.monthlyVendorTax}),c.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm w-48",children:[c.jsx("input",{type:"number",value:r.extra_tax_monthly_on_vendors||"",onChange:p=>n({...r,extra_tax_monthly_on_vendors:parseFloat(p.target.value)}),className:"block w-full rounded-md border-gray-300 pl-3 pr-10 py-2 text-base focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00",step:"0.1",min:"0"}),c.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:c.jsx("span",{className:"text-gray-500 text-base",children:"%"})})]}),c.jsx("p",{className:"mt-2 text-sm text-gray-500",children:i.monthlyVendorTaxDescription})]})})]})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-500",children:i.loading})})}const zOe={ar:{settings:"الإعدادات",businessInformation:"معلومات المتجر",businessName:"اسم المتجر",ownerName:"اسم المالك",email:"البريد الإلكتروني",phone:"رقم الهاتف",businessCode:"رمز المتجر",businessCodeHint:"رمز المتجر يستخدم للتعريف الفريد في النظام ولا يمكن تغييره",save:"حفظ التغييرات",saving:"جاري الحفظ...",loading:"جاري التحميل...",errorLoadingProfile:"حدث خطأ أثناء تحميل البيانات",errorSavingProfile:"حدث خطأ أثناء حفظ التغييرات",profileUpdated:"تم تحديث البيانات بنجاح"},en:{settings:"Settings",businessInformation:"Business Information",businessName:"Business Name",ownerName:"Owner Name",email:"Email",phone:"Phone",businessCode:"Business Code",businessCodeHint:"Business code is used for unique identification and cannot be changed",save:"Save Changes",saving:"Saving...",loading:"Loading...",errorLoadingProfile:"Error loading profile data",errorSavingProfile:"Error saving changes",profileUpdated:"Profile updated successfully"}};async function cN(t){try{const{data:e,error:r}=await oe.from("vendor_assignments").select("*").eq("owner_business_code",t);if(r)throw r;if(!e)return[];const{data:n,error:i}=await oe.from("profiles").select('business_code,"vendor_business _name",full_name,business_name').in("business_code",e.map(s=>s.vendor_business_code));if(i)throw i;console.log("Vendor Profiles:",n);const a=e.map(s=>{const o=n==null?void 0:n.find(l=>l.business_code===s.vendor_business_code);return console.log("Processing assignment:",{assignmentData:s,foundProfile:o,vendorBusinessCode:s.vendor_business_code}),{...s,profile:o?{full_name:o.full_name,vendor_business_name:o["vendor_business _name"]||o.business_name||"Unknown"}:void 0}});return console.log("Enriched Assignments:",a),a}catch(e){throw console.error("Error fetching vendor assignments:",e),e}}async function WOe(t){try{const e=`VND${Math.random().toString(36).substr(2,9).toUpperCase()}`,{data:r}=await oe.from("profiles").select("*").eq("his_email",t.email).maybeSingle();if(r)throw new Error("A vendor with this email already exists");const{data:n,error:i}=await oe.auth.signUp({email:t.email,password:t.password,options:{data:{role:"vendor",business_code:e}}});if(i)throw i;if(!n.user)throw new Error("Failed to create vendor account");const{data:a,error:s}=await oe.from("profiles").insert({user_id:n.user.id,full_name:t.full_name,his_email:t.email,phone_number:t.phone_number,role:"vendor",is_vendor:!0,business_code:e,working_status:"working","vendor_business _name":t.vendor_business_name}).select().single();if(s)throw s;if(!a)throw new Error("Failed to create vendor profile");return{business_code:a.business_code,full_name:a.full_name||"",vendor_business_name:a["vendor_business _name"]||"",his_email:a.his_email||""}}catch(e){throw console.error("Error in createVendor:",e),e}}async function IF(t){try{console.log("Fetching assignments for vendor:",t);const{data:e,error:r}=await oe.from("vendor_assignments").select(`
        assignment_id,
        vendor_business_code,
        owner_business_code,
        owner_business_name,
        branch_name,
        date_of_assignment,
        vendor_email_identifier
      `).eq("vendor_business_code",t);if(r)throw console.error("Error fetching vendor assignments:",r),r;if(console.log("Fetched assignments:",e),!e||e.length===0)return console.log("No assignments found for vendor:",t),[];const n=e.map(i=>({assignment_id:i.assignment_id,vendor_business_code:i.vendor_business_code,owner_business_code:i.owner_business_code,owner_business_name:i.owner_business_name||"Unnamed Business",branch_name:i.branch_name||"",date_of_assignment:i.date_of_assignment,vendor_email_identifier:i.vendor_email_identifier}));return console.log("Processed assignments:",n),n}catch(e){throw console.error("Error in getVendorAssignmentsByVendor:",e),e}}async function VOe(t){const{data:e,error:r}=await oe.from("profiles").select('business_code, full_name, "vendor_business _name", his_email').eq("his_email",t).eq("is_vendor",!0).maybeSingle();return r?(console.error("Error checking vendor email:",r),null):e!=null&&e.business_code?{business_code:e.business_code,full_name:e.full_name||"",vendor_business_name:e["vendor_business _name"]||"",his_email:t}:(console.error("Vendor profile incomplete:",e),null)}async function eb(t){try{const{data:e,error:r}=await oe.from("profiles").select('business_code, "vendor_business _name"').eq("his_email",t.vendor_email_identifier).eq("is_vendor",!0).single();if(r||!e)throw new Error("Vendor not found");const{data:n,error:i}=await oe.from("profiles").select("business_name, role").eq("business_code",t.owner_business_code).eq("role","owner").single();if(i||!(n!=null&&n.business_name))throw new Error("Could not find owner profile. Make sure the business code belongs to a store owner.");const{data:a,error:s}=await oe.from("vendor_assignments").select("assignment_id").eq("vendor_business_code",e.business_code).eq("branch_name",t.branch_name);if(s)throw console.error("Error checking existing assignments:",s),s;if(a&&a.length>0)throw new Error("Vendor already assigned to this branch");const{data:o,error:l}=await oe.from("vendor_assignments").insert([{vendor_business_code:e.business_code,owner_business_code:t.owner_business_code,branch_name:t.branch_name,vendor_email_identifier:t.vendor_email_identifier,owner_business_name:n.business_name}]).select().single();if(l)throw console.error("Error assigning vendor:",l),l;return o}catch(e){throw console.error("Error in assignVendor:",e),e}}async function HOe(t){const{error:e}=await oe.from("vendor_assignments").delete().eq("assignment_id",t);if(e)throw console.error("Error removing vendor assignment:",e),e;return!0}async function qOe(t){const{data:e,error:r}=await oe.from("profiles").select('business_code, full_name, "vendor_business _name", his_email').eq("business_code",t).eq("is_vendor",!0).single();if(r)throw console.error("Error fetching vendor profile:",r),r;return e?{business_code:e.business_code,full_name:e.full_name||"",vendor_business_name:e["vendor_business _name"]||"",his_email:e.his_email||""}:null}async function GOe(t,e){const{error:r}=await oe.from("profiles").update({full_name:e.full_name,"vendor_business _name":e.vendor_business_name,his_email:e.his_email}).eq("business_code",t).eq("is_vendor",!0);if(r)throw console.error("Error updating vendor profile:",r),r}async function KOe(t,e,r,n,i){try{const a=new Date(i,n-1,1).toISOString().split("T")[0],s=new Date(i,n,0).toISOString().split("T")[0],{data:o,error:l}=await oe.from("vendor_transactions").select("amount").eq("business_code",t).eq("vendor_code",e).eq("branch_name",r).eq("status","completed").gte("transaction_date",a).lte("transaction_date",s);if(l)throw l;const{data:u,error:d}=await oe.from("transactions_overall").select("owner_profit_from_this_transcation").eq("business_code",t).eq("vendor_code",e).eq("branch_name",r).gte("transaction_date",a).lte("transaction_date",s);if(d)throw d;const f=(o==null?void 0:o.reduce((m,g)=>m+(Number(g.amount)||0),0))||0,h=(u==null?void 0:u.reduce((m,g)=>m+(Number(g.owner_profit_from_this_transcation)||0),0))||0;return{vendorProfit:f,ownerProfit:h}}catch(a){throw console.error("Error fetching vendor profits:",a),a}}async function YOe(t,e,r){try{const{data:n,error:i}=await oe.from("vendor_transactions").select("*").eq("business_code",t).eq("vendor_code",e).eq("branch_name",r).eq("status","completed").order("transaction_date",{ascending:!1});if(i)throw i;return n||[]}catch(n){throw console.error("Error fetching vendor transactions:",n),n}}async function XOe(){try{const{data:t,error:e}=await oe.from("profiles").select("*").eq("role","vendor").eq("is_vendor",!0).order("vendor_business _name",{ascending:!0});if(e)throw console.error("Error fetching vendors:",e),e;return t||[]}catch(t){throw console.error("Error in getAllVendors:",t),t}}function QOe(){const{language:t}=_e(),{user:e}=qe(),r=zOe[t],[n,i]=j.useState(null),[a,s]=j.useState(!0),[o,l]=j.useState(!1),[u,d]=j.useState(null),[f,h]=j.useState(!1);j.useEffect(()=>{e!=null&&e.businessCode&&m()},[e==null?void 0:e.businessCode]);const m=async()=>{try{s(!0);const p=await qOe(e.businessCode);i(p)}catch(p){console.error("Error loading profile:",p),d(r.errorLoadingProfile)}finally{s(!1)}},g=async p=>{p.preventDefault(),d(null),h(!1),l(!0);try{const x=new FormData(p.currentTarget),v={full_name:x.get("full_name"),vendor_business_name:x.get("business_name"),his_email:x.get("email")};await GOe(e.businessCode,v),h(!0),await m()}catch(x){console.error("Error updating profile:",x),d(r.errorSavingProfile)}finally{l(!1)}};return a?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-500",children:r.loading})}):c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("div",{className:"flex justify-between items-center",children:c.jsx("h1",{className:"text-2xl font-bold",children:r.settings})}),c.jsx("div",{className:"bg-white rounded-lg shadow",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mb-6",children:[c.jsx("div",{className:"bg-indigo-100 p-3 rounded-full",children:c.jsx(Yt,{className:"w-6 h-6 text-indigo-600"})}),c.jsx("h2",{className:"text-lg font-semibold",children:r.businessInformation})]}),c.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.businessName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"business_name",defaultValue:(n==null?void 0:n.vendor_business_name)||"",required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.ownerName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"full_name",defaultValue:(n==null?void 0:n.full_name)||"",required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.email," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(h3,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"email",name:"email",defaultValue:(n==null?void 0:n.his_email)||"",required:!0,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.businessCode}),c.jsx("input",{type:"text",value:(n==null?void 0:n.business_code)||"",readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-50",dir:"ltr"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r.businessCodeHint})]}),u&&c.jsx("div",{className:"rounded-md bg-red-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(_n,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:u})})]})}),f&&c.jsx("div",{className:"rounded-md bg-green-50 p-4",children:c.jsx("p",{className:"text-sm text-green-700",children:r.profileUpdated})}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-400",children:o?r.saving:r.save})})]})]})})]})}const JOe={ar:{branches:"الفروع",addBranch:"إضافة فرع",editBranch:"تعديل الفرع",branchName:"اسم الفرع",location:"الموقع",phone:"رقم الهاتف",searchBranch:"ابحث عن فرع...",status:"الحالة",active:"نشط",inactive:"غير نشط",currentBranch:"الفرع الحالي",allBranches:"جميع الفروع",save:"حفظ",cancel:"إلغاء",activate:"تفعيل",deactivate:"إيقاف",confirmDeactivate:"هل أنت متأكد من إيقاف هذا الفرع؟",confirmActivate:"تأكيد تفعيل الفرع",confirmActivateMessage:"هل أنت متأكد من تفعيل فرع {name}؟",confirm:"تأكيد",branchAdded:"تم إضافة الفرع بنجاح",branchUpdated:"تم تحديث الفرع بنجاح",branchDeactivated:"تم إيقاف الفرع بنجاح",branchActivated:"تم تفعيل الفرع بنجاح",loading:"جاري التحميل...",errorLoadingBranches:"حدث خطأ أثناء تحميل الفروع",errorSavingBranch:"حدث خطأ أثناء حفظ الفرع",errorDeactivatingBranch:"حدث خطأ أثناء إيقاف الفرع",errorActivatingBranch:"حدث خطأ أثناء تفعيل الفرع"},en:{branches:"Branches",addBranch:"Add Branch",editBranch:"Edit Branch",branchName:"Branch Name",location:"Location",phone:"Phone Number",searchBranch:"Search for a branch...",status:"Status",active:"Active",inactive:"Inactive",currentBranch:"Current Branch",allBranches:"All Branches",save:"Save",cancel:"Cancel",activate:"Activate",deactivate:"Deactivate",confirmDeactivate:"Are you sure you want to deactivate this branch?",confirmActivate:"Confirm Branch Activation",confirmActivateMessage:"Are you sure you want to activate branch {name}?",confirm:"Confirm",branchAdded:"Branch added successfully",branchUpdated:"Branch updated successfully",branchDeactivated:"Branch deactivated successfully",branchActivated:"Branch activated successfully",loading:"Loading...",errorLoadingBranches:"Error loading branches",errorSavingBranch:"Error saving branch",errorDeactivatingBranch:"Error deactivating branch",errorActivatingBranch:"Error activating branch"}};async function ZOe(t){const{data:e,error:r}=await oe.from("branches").select("*").eq("business_code",t);if(r)throw console.error("Error fetching branches:",r),r;return e||[]}async function eCe(t){const{data:e,error:r}=await oe.from("branches").insert([t]).select().single();if(r)throw console.error("Error creating branch:",r),r;return e}async function tCe(t,e){const{data:r,error:n}=await oe.from("branches").update(e).eq("branch_id",t).select().single();if(n)throw console.error("Error updating branch:",n),n;return r}async function rCe(t,e){try{const{data:r,error:n}=await oe.from("branches").update({is_active:e}).eq("branch_id",t).select().single();if(n)throw n;if(!r)throw new Error("Branch not found");return r}catch(r){throw console.error("Error updating branch status:",r),r}}function nCe(){const{language:t}=_e(),{user:e}=qe(),r=JOe[t],[n,i]=j.useState(null),[a,s]=j.useState([]),[o,l]=j.useState(!0),[u,d]=j.useState(null),[f,h]=j.useState(!1),[m,g]=j.useState(null),[p,x]=j.useState("");j.useEffect(()=>{e!=null&&e.businessCode&&v()},[e==null?void 0:e.businessCode]);const v=async()=>{try{l(!0);const w=await ZOe(e.businessCode);s(w)}catch(w){console.error("Error loading branches:",w),d(r.errorLoadingBranches)}finally{l(!1)}},b=async w=>{w.preventDefault(),d(null);const N=new FormData(w.currentTarget);try{const S={branch_name:N.get("name"),is_active:N.get("status")==="active",business_code:e.businessCode};m?await tCe(m.branch_id,S):await eCe(S),await v(),h(!1),g(null)}catch(S){console.error("Error saving branch:",S),d(r.errorSavingBranch)}},y=async w=>{try{await rCe(w.branch_id,!w.is_active),await v()}catch(N){console.error("Error toggling branch status:",N),d(w.is_active?r.errorDeactivatingBranch:r.errorActivatingBranch)}},_=a.filter(w=>w.branch_name.toLowerCase().includes(p.toLowerCase())||w.location.toLowerCase().includes(p.toLowerCase()));return o?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-500",children:r.loading})}):c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:r.branches}),c.jsxs("button",{onClick:()=>h(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center",children:[c.jsx($i,{className:"w-5 h-5 ml-2"}),r.addBranch]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:p,onChange:w=>x(w.target.value),placeholder:r.searchBranch,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]})}),u&&c.jsx("div",{className:"p-4 bg-red-50",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(_n,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:u})})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.branchName}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.status}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:r.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(w=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(pu,{className:"h-6 w-6 text-gray-400"})}),c.jsx("div",{className:"mr-4",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.branch_name})})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r[w.is_active?"active":"inactive"]})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[c.jsx("button",{onClick:()=>{g(w),h(!0)},className:"text-indigo-600 hover:text-indigo-900 ml-4",children:r.edit}),c.jsx("button",{onClick:()=>w.is_active?confirm(r.confirmDeactivate)&&y(w):i(w),className:`${w.is_active?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:w.is_active?r.deactivate:r.activate})]})]},w.branch_id))})]})})]}),f&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:m?r.editBranch:r.addBranch}),c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.branchName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"name",defaultValue:m==null?void 0:m.branch_name,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.status}),c.jsxs("select",{name:"status",defaultValue:m!=null&&m.is_active?"active":"inactive",className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"active",children:r.active}),c.jsx("option",{value:"inactive",children:r.inactive})]})]}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:()=>{h(!1),g(null)},className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:r.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:r.save})]})]})]})}),n&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:r.confirmActivate}),c.jsx("p",{className:"text-gray-600 mb-6",children:r.confirmActivateMessage.replace("{name}",n.branch_name)}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:r.cancel}),c.jsx("button",{onClick:()=>{y(n),i(null)},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:r.confirm})]})]})})]})}const RF={ar:{cashiers:"إدارة الكاشير",addCashier:"إضافة كاشير",searchCashier:"ابحث عن كاشير...",noSearchResults:"لا توجد نتائج للبحث",noCashiers:"لا يوجد كاشير",loading:"جاري التحميل...",filter:"تصفية",cashier:"الكاشير",name:"الاسم",email:"البريد الإلكتروني",phoneNumber:"رقم الهاتف",branch:"الفرع",changeStatus:"تغيير الحالة",selectNewStatus:"اختر الحالة الجديدة",selectBranch:"اختر الفرع",status:"الحالة",actions:"إجراءات",edit:"تعديل",delete:"حذف",confirmDelete:"تأكيد الحذف",deleteConfirmMessage:"هل أنت متأكد من حذف الكاشير {name}؟ سيتم حذف حسابه بشكل نهائي.",active:"نشط",onLeave:"في إجازة",suspended:"موقوف",working:"يعمل",vacation:"إجازة",sick:"مرضي",absent:"غائب",salary:"الراتب",addSalary:"إضافة راتب",editSalary:"تعديل الراتب",basicSalary:"الراتب الأساسي",bonus:"المكافآت",deductions:"الخصومات",paymentDate:"تاريخ الدفع",notes:"ملاحظات",totalSalary:"إجمالي الراتب",salaryHistory:"سجل الرواتب",viewSalary:"عرض الراتب",currency:"ر.ع",addNewCashier:"إضافة كاشير جديد",editCashier:"تعديل بيانات الكاشير",cashierName:"اسم الكاشير",password:"كلمة المرور",confirmPassword:"تأكيد كلمة المرور",save:"حفظ",cancel:"إلغاء",required:"مطلوب",delete:"حذف",confirmAction:"تأكيد الإجراء",confirmActionMessage:"هل أنت متأكد من تنفيذ هذا الإجراء؟",confirm:"تأكيد",currency:"ر.ع",errorLoadingCashiers:"حدث خطأ أثناء تحميل الكاشير",errorSavingCashier:"حدث خطأ أثناء حفظ الكاشير",errorUpdatingStatus:"حدث خطأ أثناء تحديث الحالة",errorUpdatingSalary:"حدث خطأ أثناء تحديث الراتب",errorDeletingCashier:"حدث خطأ أثناء حذف الكاشير"},en:{cashiers:"Cashier Management",addCashier:"Add Cashier",searchCashier:"Search for a cashier...",noSearchResults:"No search results found",noCashiers:"No cashiers found",loading:"Loading...",filter:"Filter",cashier:"Cashier",name:"Name",email:"Email",phoneNumber:"Phone Number",branch:"Branch",changeStatus:"Change Status",selectNewStatus:"Select new status",selectBranch:"Select Branch",status:"Status",actions:"Actions",edit:"Edit",delete:"Delete",confirmDelete:"Confirm Delete",deleteConfirmMessage:"Are you sure you want to delete cashier {name}? Their account will be permanently removed.",active:"Active",onLeave:"On Leave",working:"Working",vacation:"Vacation",sick:"Sick",absent:"Absent",salary:"Salary",addSalary:"Add Salary",editSalary:"Edit Salary",basicSalary:"Basic Salary",bonus:"Bonus",deductions:"Deductions",paymentDate:"Payment Date",notes:"Notes",totalSalary:"Total Salary",salaryHistory:"Salary History",viewSalary:"View Salary",currency:"OMR",addNewCashier:"Add New Cashier",editCashier:"Edit Cashier",cashierName:"Cashier Name",password:"Password",confirmPassword:"Confirm Password",permissions:"Permissions",canManageProducts:"Manage Products",canManageCustomers:"Manage Customers",canViewReports:"View Reports",canProcessRefunds:"Process Refunds",save:"Save",cancel:"Cancel",required:"Required",passwordMismatch:"Passwords do not match",suspendCashier:"Suspend Cashier",confirmSuspend:"Are you sure you want to suspend this cashier?",suspended:"Suspended",activeCashier:"Activate Cashier",errorUpdatingSalary:"Error updating salary",errorDeletingCashier:"Error deleting cashier"}};function iCe({isOpen:t,onClose:e,onSubmit:r,initialData:n}){const{language:i}=_e(),a=RF[i],s=u=>{u.preventDefault();const d=new FormData(u.currentTarget);r({basicSalary:parseFloat(d.get("basicSalary")),bonus:parseFloat(d.get("bonus"))||0,deductions:parseFloat(d.get("deductions"))||0,notes:d.get("notes"),paymentDate:d.get("paymentDate")})};if(!t)return null;const o=(u,d,f)=>u+d-f,l=u=>{const d=u.target.form;if(!d)return;const f=parseFloat(d.basicSalary.value)||0,h=parseFloat(d.bonus.value)||0,m=parseFloat(d.deductions.value)||0,g=o(f,h,m),p=d.querySelector("#total-salary");p&&(p.textContent=g.toFixed(3))};return c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-6",children:[c.jsx("div",{className:"bg-indigo-100 p-2 rounded-full",children:c.jsx(kf,{className:"w-6 h-6 text-indigo-600"})}),c.jsx("h2",{className:"text-xl font-semibold",children:n?a.editSalary:a.addSalary})]}),c.jsxs("form",{onSubmit:s,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.basicSalary," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",name:"basicSalary",defaultValue:n==null?void 0:n.basicSalary,onChange:l,required:!0,min:"0",step:"0.001",className:"w-full pl-3 pr-12 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),c.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:a.currency})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a.bonus}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",name:"bonus",defaultValue:n==null?void 0:n.bonus,onChange:l,min:"0",step:"0.001",className:"w-full pl-3 pr-12 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),c.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:a.currency})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a.deductions}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",name:"deductions",defaultValue:n==null?void 0:n.deductions,onChange:l,min:"0",step:"0.001",className:"w-full pl-3 pr-12 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),c.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:a.currency})]})]}),c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(H7,{className:"w-5 h-5 text-gray-500"}),c.jsxs("span",{className:"font-medium",children:[a.totalSalary,":"]})]}),c.jsxs("div",{className:"text-xl font-bold text-indigo-600",children:[c.jsx("span",{id:"total-salary",children:o((n==null?void 0:n.basicSalary)||0,(n==null?void 0:n.bonus)||0,(n==null?void 0:n.deductions)||0).toFixed(3)}),c.jsx("span",{className:"mr-1 text-sm",children:a.currency})]})]})}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.paymentDate," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",name:"paymentDate",defaultValue:n==null?void 0:n.paymentDate,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a.notes}),c.jsx("textarea",{name:"notes",defaultValue:n==null?void 0:n.notes,rows:3,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:i==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:a.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:a.save})]})]})]})})}async function aCe(t){const{data:e,error:r}=await oe.from("profiles").select("*").eq("business_code",t).eq("role","cashier").order("created_at",{ascending:!1});if(r)throw console.error("Error fetching cashiers:",r),r;return e||[]}async function sCe(t){try{const{data:e}=await oe.from("profiles").select("*").eq("his_email",t.email).maybeSingle();if(e)throw new Error("A user with this email already exists");const{data:r,error:n}=await oe.from("profiles").select("business_name").eq("business_code",t.business_code).eq("role","owner").single();if(n)throw console.error("Error fetching business name:",n),n;const{data:i,error:a}=await oe.auth.signUp({email:t.email,password:t.password,options:{data:{role:"cashier",business_code:t.business_code}}});if(a)throw a;if(!i.user)throw new Error("Failed to create cashier account");const{data:s,error:o}=await oe.from("profiles").insert({user_id:i.user.id,full_name:t.full_name,his_email:t.email,main_branch:t.main_branch,phone_number:t.phone_number,salary:t.salary,role:"cashier",business_code:t.business_code,working_status:t.working_status,business_name:r.business_name}).select().single();if(o)throw console.error("Error creating cashier profile:",o),o;return s}catch(e){throw console.error("Error in createCashier:",e),e}}async function yC(t,e){const{data:r,error:n}=await oe.from("profiles").update(e).eq("user_id",t).eq("role","cashier").select().single();if(n)throw console.error("Error updating cashier:",n),n;return r}async function oCe(t,e){const{data:r,error:n}=await oe.from("profiles").update({working_status:e}).eq("user_id",t).eq("role","cashier").select().single();if(n)throw console.error("Error updating cashier status:",n),n;return r}async function lCe(t){try{const{data:e,error:r}=await oe.from("profiles").select("role, business_code").eq("user_id",t).single();if(r)throw console.error("Error fetching cashier profile:",r),r;if(!e||e.role!=="cashier")throw new Error("User is not a cashier");const{error:n}=await oe.from("profiles").delete().eq("user_id",t).eq("role","cashier");if(n)throw console.error("Error deleting cashier profile:",n),n;return!0}catch(e){throw console.error("Error in deleteCashier:",e),e}}function cCe(){const{language:t}=_e(),{user:e}=qe(),{branches:r}=tr(),n=RF[t],[i,a]=j.useState([]),[s,o]=j.useState(!0),[l,u]=j.useState(null),[d,f]=j.useState(!1),[h,m]=j.useState(null),[g,p]=j.useState(!1),[x,v]=j.useState(null),[b,y]=j.useState(""),[_,w]=j.useState(null),[N,S]=j.useState(null),E=async H=>{try{await lCe(H.user_id),await T(),S(null)}catch(M){console.error("Error deleting cashier:",M),u(n.errorDeletingCashier)}};j.useEffect(()=>{e!=null&&e.businessCode&&T()},[e==null?void 0:e.businessCode]);const T=async()=>{try{o(!0);const H=await aCe(e.businessCode);a(H)}catch(H){console.error("Error loading cashiers:",H),u(n.errorLoadingCashiers)}finally{o(!1)}},P=async H=>{if(h)try{await yC(h.user_id,{salary:H.basicSalary}),await T(),f(!1),m(null)}catch(M){console.error("Error updating salary:",M),u(n.errorUpdatingSalary)}},A=async H=>{H.preventDefault(),u(null);const M=new FormData(H.currentTarget),O={email:M.get("email"),password:M.get("password"),working_status:M.get("working_status"),full_name:M.get("full_name"),main_branch:M.get("main_branch"),salary:parseFloat(M.get("salary")),business_code:e.businessCode,phone_number:M.get("phone_number")};try{x?await yC(x.user_id,{full_name:O.full_name,main_branch:O.main_branch,salary:O.salary,working_status:O.working_status,phone_number:O.phone_number}):await sCe(O),await T(),p(!1),v(null)}catch(L){console.error("Error saving cashier:",L),u(n.errorSavingCashier)}},k=async(H,M)=>{try{await oCe(H,M),await T(),w(null)}catch(O){console.error("Error updating status:",O),u(n.errorUpdatingStatus)}},F=i.filter(H=>{var M,O;return((M=H.full_name)==null?void 0:M.toLowerCase().includes(b.toLowerCase()))||((O=H.his_email)==null?void 0:O.toLowerCase().includes(b.toLowerCase()))});return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:n.cashiers}),c.jsxs("button",{onClick:()=>{v(null),p(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center",children:[c.jsx($i,{className:"w-5 h-5 ml-2"}),n.addCashier]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:b,onChange:H=>y(H.target.value),placeholder:n.searchCashier,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[c.jsx(cx,{className:"w-5 h-5 ml-2"}),n.filter]})]})}),l&&c.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:c.jsx("p",{className:"text-sm text-red-600",children:l})}),c.jsx("div",{className:"overflow-x-auto",children:s?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:n.loading})}):F.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:b?n.noSearchResults:n.noCashiers})}):c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.name}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.email}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.phoneNumber}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.branch}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.status}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.salary}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:n.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(H=>{var M;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"})}),c.jsx("div",{className:"mr-4",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.full_name})})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.his_email}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.phone_number?H.phone_number:"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.main_branch}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${H.working_status==="working"?"bg-green-100 text-green-800":H.working_status==="vacation"?"bg-yellow-100 text-yellow-800":H.working_status==="sick"?"bg-orange-100 text-orange-800":H.working_status==="absent"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:n[H.working_status]})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(M=H.salary)==null?void 0:M.toFixed(3)," ",n.currency]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium",children:[c.jsx("button",{onClick:()=>{v(H),p(!0)},className:"text-indigo-600 hover:text-indigo-900 ml-4",children:n.edit}),c.jsx("button",{onClick:()=>{m(H),f(!0)},className:"text-green-600 hover:text-green-900 ml-4",children:n.salary}),c.jsx("button",{onClick:()=>w(H.user_id),className:"text-yellow-600 hover:text-yellow-900 ml-4",children:n.changeStatus}),c.jsx("button",{onClick:()=>S(H),className:"text-red-600 hover:text-red-900",children:n.delete})]})]},H.user_id)})})]})})]}),c.jsx(iCe,{isOpen:d,onClose:()=>{f(!1),m(null)},onSubmit:P,initialData:h?{basicSalary:h.salary||0,bonus:0,deductions:0,paymentDate:new Date().toISOString().split("T")[0]}:void 0}),g&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:x?n.editCashier:n.addNewCashier}),c.jsxs("form",{onSubmit:A,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.cashierName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"full_name",defaultValue:x==null?void 0:x.full_name,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.email," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"email",name:"email",defaultValue:x==null?void 0:x.his_email,required:!0,readOnly:!!x,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${x?"bg-gray-100":""}`,dir:"ltr"})]}),!x&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.password," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"password",name:"password",required:!0,minLength:6,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.phoneNumber," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"tel",name:"phone_number",defaultValue:x==null?void 0:x.phone_number,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.status," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{name:"working_status",defaultValue:(x==null?void 0:x.working_status)||"working",required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"working",children:n.working}),c.jsx("option",{value:"vacation",children:n.vacation}),c.jsx("option",{value:"sick",children:n.sick}),c.jsx("option",{value:"absent",children:n.absent}),c.jsx("option",{value:"suspended",children:n.suspended})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.branch," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{name:"main_branch",defaultValue:x==null?void 0:x.main_branch,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"",children:n.selectBranch}),r.filter(H=>H.is_active).map(H=>c.jsx("option",{value:H.branch_name,children:H.branch_name},H.branch_id))]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.salary," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",name:"salary",defaultValue:x==null?void 0:x.salary,required:!0,min:"0",step:"0.001",className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:()=>{p(!1),v(null)},className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:n.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:n.save})]})]})]})}),_&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:n.changeStatus}),c.jsx("p",{className:"text-gray-600 mb-6",children:n.selectNewStatus}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:n.cancel}),c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>k(_,"working"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:n.working}),c.jsx("button",{onClick:()=>k(_,"vacation"),className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2",children:n.vacation}),c.jsx("button",{onClick:()=>k(_,"sick"),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:n.sick}),c.jsx("button",{onClick:()=>k(_,"absent"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:n.absent}),c.jsx("button",{onClick:()=>k(_,"suspended"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:n.suspended})]})]})]})}),N&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:n.confirmDelete}),c.jsx("p",{className:"text-gray-600 mb-6",children:n.deleteConfirmMessage.replace("{name}",N.full_name||"")}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:n.cancel}),c.jsx("button",{onClick:()=>E(N),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:n.confirmDelete})]})]})})]})}const uCe={ar:{managers:"إدارة المدراء",addManager:"إضافة مدير",searchManager:"ابحث عن مدير...",noSearchResults:"لا توجد نتائج للبحث",noManagers:"لا يوجد مدراء",loading:"جاري التحميل...",filter:"تصفية",manager:"المدير",name:"الاسم",email:"البريد الإلكتروني",phoneNumber:"رقم الهاتف",branch:"الفرع",changeStatus:"تغيير الحالة",selectNewStatus:"اختر الحالة الجديدة",selectBranch:"اختر الفرع",status:"الحالة",actions:"إجراءات",edit:"تعديل",delete:"حذف",confirmDelete:"تأكيد الحذف",deleteConfirmMessage:"هل أنت متأكد من حذف المدير {name}؟ سيتم حذف حسابه بشكل نهائي.",active:"نشط",onLeave:"في إجازة",suspended:"موقوف",working:"يعمل",vacation:"إجازة",sick:"مرضي",absent:"غائب",salary:"الراتب",addNewManager:"إضافة مدير جديد",editManager:"تعديل بيانات المدير",managerName:"اسم المدير",password:"كلمة المرور",save:"حفظ",cancel:"إلغاء",required:"مطلوب",delete:"حذف",confirmAction:"تأكيد الإجراء",confirmActionMessage:"هل أنت متأكد من تنفيذ هذا الإجراء؟",confirm:"تأكيد",currency:"ر.ع",errorLoadingManagers:"حدث خطأ أثناء تحميل المدراء",errorSavingManager:"حدث خطأ أثناء حفظ المدير",errorUpdatingStatus:"حدث خطأ أثناء تحديث الحالة",errorDeletingManager:"حدث خطأ أثناء حذف المدير"},en:{managers:"Manager Management",addManager:"Add Manager",searchManager:"Search for a manager...",noSearchResults:"No search results found",noManagers:"No managers found",loading:"Loading...",filter:"Filter",manager:"Manager",name:"Name",email:"Email",phoneNumber:"Phone Number",branch:"Branch",changeStatus:"Change Status",selectNewStatus:"Select new status",selectBranch:"Select Branch",status:"Status",actions:"Actions",edit:"Edit",delete:"Delete",confirmDelete:"Confirm Delete",deleteConfirmMessage:"Are you sure you want to delete manager {name}? Their account will be permanently removed.",active:"Active",onLeave:"On Leave",working:"Working",vacation:"Vacation",sick:"Sick",absent:"Absent",salary:"Salary",addNewManager:"Add New Manager",editManager:"Edit Manager",managerName:"Manager Name",password:"Password",save:"Save",cancel:"Cancel",required:"Required",passwordMismatch:"Passwords do not match",suspended:"Suspended",errorLoadingManagers:"Error loading managers",errorSavingManager:"Error saving manager",errorDeletingManager:"Error deleting manager",currency:"OMR"}};async function dCe(t){const{data:e,error:r}=await oe.from("profiles").select("*").eq("business_code",t).eq("role","manager").order("created_at",{ascending:!1});if(r)throw console.error("Error fetching managers:",r),r;return e||[]}async function fCe(t){try{const{data:e,error:r}=await oe.from("profiles").select("business_name").eq("business_code",t.business_code).eq("role","owner").single();if(r)throw console.error("Error fetching business name:",r),r;const{data:n,error:i}=await oe.auth.signUp({email:t.email,password:t.password,options:{data:{role:"manager",business_code:t.business_code}}});if(i)throw i;if(!n.user)throw new Error("Failed to create auth user");const{data:a,error:s}=await oe.from("profiles").insert({user_id:n.user.id,full_name:t.full_name,his_email:t.email,main_branch:t.main_branch,phone_number:t.phone_number,salary:t.salary,role:"manager",business_code:t.business_code,working_status:t.working_status,business_name:e.business_name}).select().single();if(s)throw console.error("Error creating manager profile:",s),s;return a}catch(e){throw console.error("Error in createManager:",e),e}}async function hCe(t,e){const{data:r,error:n}=await oe.from("profiles").update(e).eq("user_id",t).eq("role","manager").select().single();if(n)throw console.error("Error updating manager:",n),n;return r}async function mCe(t,e){const{data:r,error:n}=await oe.from("profiles").update({working_status:e}).eq("user_id",t).eq("role","manager").select().single();if(n)throw console.error("Error updating manager status:",n),n;return r}async function pCe(t){try{const{data:e,error:r}=await oe.from("profiles").select("role, business_code").eq("user_id",t).single();if(r)throw console.error("Error fetching manager profile:",r),r;if(!e||e.role!=="manager")throw new Error("User is not a manager");const{error:n}=await oe.from("profiles").delete().eq("user_id",t).eq("role","manager");if(n)throw console.error("Error deleting manager profile:",n),n;return!0}catch(e){throw console.error("Error in deleteManager:",e),e}}function gCe(){const{language:t}=_e(),{user:e}=qe(),{branches:r}=tr(),n=uCe[t],i=(e==null?void 0:e.role)==="owner",[a,s]=j.useState([]),[o,l]=j.useState(!0),[u,d]=j.useState(null),[f,h]=j.useState(!1),[m,g]=j.useState(null),[p,x]=j.useState(""),[v,b]=j.useState(null),[y,_]=j.useState(null);j.useEffect(()=>{e!=null&&e.businessCode&&w()},[e==null?void 0:e.businessCode]);const w=async()=>{try{l(!0);const P=await dCe(e.businessCode);s(P)}catch(P){console.error("Error loading managers:",P),d(n.errorLoadingManagers)}finally{l(!1)}},N=async P=>{P.preventDefault(),d(null);const A=new FormData(P.currentTarget),k={email:A.get("email"),password:A.get("password"),working_status:A.get("working_status"),full_name:A.get("full_name"),main_branch:A.get("main_branch"),salary:parseFloat(A.get("salary")),phone_number:A.get("phone_number"),business_code:e.businessCode};try{m?await hCe(m.user_id,{full_name:k.full_name,main_branch:k.main_branch,salary:k.salary,working_status:k.working_status,phone_number:k.phone_number}):await fCe(k),await w(),h(!1),g(null)}catch(F){console.error("Error saving manager:",F),d(n.errorSavingManager)}},S=async(P,A)=>{try{await mCe(P,A),await w(),b(null)}catch(k){console.error("Error updating status:",k),d(n.errorUpdatingStatus)}},E=async P=>{try{await pCe(P.user_id),await w(),_(null)}catch(A){console.error("Error deleting manager:",A),d(n.errorDeletingManager)}},T=a.filter(P=>{var A,k;return((A=P.full_name)==null?void 0:A.toLowerCase().includes(p.toLowerCase()))||((k=P.his_email)==null?void 0:k.toLowerCase().includes(p.toLowerCase()))});return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:n.managers}),i&&c.jsxs("button",{onClick:()=>{g(null),h(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center",children:[c.jsx($i,{className:"w-5 h-5 ml-2"}),n.addManager]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:p,onChange:P=>x(P.target.value),placeholder:n.searchManager,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[c.jsx(cx,{className:"w-5 h-5 ml-2"}),n.filter]})]})}),u&&c.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:c.jsx("p",{className:"text-sm text-red-600",children:u})}),c.jsx("div",{className:"overflow-x-auto",children:o?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:n.loading})}):T.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:p?n.noSearchResults:n.noManagers})}):c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.name}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.email}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.phoneNumber}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.branch}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.status}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.salary}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:n.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(P=>{var A;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"})}),c.jsx("div",{className:"mr-4",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.full_name})})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.his_email}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.phone_number?P.phone_number:"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.main_branch}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${P.working_status==="working"?"bg-green-100 text-green-800":P.working_status==="vacation"?"bg-yellow-100 text-yellow-800":P.working_status==="sick"?"bg-orange-100 text-orange-800":P.working_status==="absent"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:n[P.working_status]})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(A=P.salary)==null?void 0:A.toFixed(3)," ",n.currency]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium",children:[c.jsx("button",{onClick:()=>{g(P),h(!0)},className:"text-indigo-600 hover:text-indigo-900 ml-4",children:n.edit}),i&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>b(P.user_id),className:"text-yellow-600 hover:text-yellow-900 ml-4",children:n.changeStatus}),c.jsx("button",{onClick:()=>_(P),className:"text-red-600 hover:text-red-900",children:n.delete})]})]})]},P.user_id)})})]})})]}),f&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:m?n.editManager:n.addNewManager}),c.jsxs("form",{onSubmit:N,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.managerName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"full_name",defaultValue:m==null?void 0:m.full_name,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.email," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"email",name:"email",defaultValue:m==null?void 0:m.his_email,required:!0,readOnly:!!m,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${m?"bg-gray-100":""}`,dir:"ltr"})]}),!m&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.password," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"password",name:"password",required:!0,minLength:6,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.phoneNumber," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"tel",name:"phone_number",defaultValue:m==null?void 0:m.phone_number,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.status," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{name:"working_status",defaultValue:(m==null?void 0:m.working_status)||"working",required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"working",children:n.working}),c.jsx("option",{value:"vacation",children:n.vacation}),c.jsx("option",{value:"sick",children:n.sick}),c.jsx("option",{value:"absent",children:n.absent}),c.jsx("option",{value:"suspended",children:n.suspended})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.branch," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{name:"main_branch",defaultValue:m==null?void 0:m.main_branch,required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"",children:n.selectBranch}),r.filter(P=>P.is_active).map(P=>c.jsx("option",{value:P.branch_name,children:P.branch_name},P.branch_id))]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.salary," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",name:"salary",defaultValue:m==null?void 0:m.salary,required:!0,min:"0",step:"0.001",className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:()=>{h(!1),g(null)},className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:n.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:n.save})]})]})]})}),v&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:n.changeStatus}),c.jsx("p",{className:"text-gray-600 mb-6",children:n.selectNewStatus}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>b(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:n.cancel}),c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>S(v,"working"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:n.working}),c.jsx("button",{onClick:()=>S(v,"vacation"),className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2",children:n.vacation}),c.jsx("button",{onClick:()=>S(v,"sick"),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:n.sick}),c.jsx("button",{onClick:()=>S(v,"absent"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:n.absent}),c.jsx("button",{onClick:()=>S(v,"suspended"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:n.suspended})]})]})]})}),y&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:n.confirmDelete}),c.jsx("p",{className:"text-gray-600 mb-6",children:n.deleteConfirmMessage.replace("{name}",y.full_name||"")}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:n.cancel}),c.jsx("button",{onClick:()=>E(y),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:n.confirmDelete})]})]})})]})}const xCe={ar:{subVendors:"إدارة الموردين",vendors:"الموردين",addVendor:"إضافة مورد",vendorName:"اسم المورد",vendorBusinessName:"اسم المتجر",phoneNumber:"رقم الهاتف",password:"كلمة المرور",searchVendor:"ابحث عن مورد...",filter:"تصفية",totalVendors:"إجمالي الموردين",activeVendors:"موردين نشطين",pendingApproval:"في انتظار الموافقة",vendor:"المورد",vendorName:"اسم المورد",vendorBusinessName:"اسم المتجر",newVendorDetails:"تفاصيل المورد الجديد",createAndAssign:"إنشاء وتعيين",passwordHint:"سيتم إرسال كلمة المرور إلى البريد الإلكتروني للمورد",productCount:"عدد المنتجات",sales:"المبيعات",status:"الحالة",joinDate:"تاريخ الانضمام",actions:"إجراءات",edit:"تعديل",suspend:"إيقاف",active:"نشط",pending:"في انتظار الموافقة",suspended:"متوقف",loading:"جاري التحميل...",noVendors:"لا يوجد موردين",vendorEmail:"البريد الإلكتروني للمورد",branch:"الفرع",selectBranch:"اختر الفرع",assignmentDate:"تاريخ التعيين",assignedBranches:"الفروع المعينة",unknownBusiness:"عمل غير معروف",businessName:"اسم العمل",email:"البريد الإلكتروني",phone:"رقم الهاتف",add:"إضافة",remove:"إزالة",confirm:"تأكيد",cancel:"إلغاء",confirmRemove:"تأكيد إزالة المورد",removeConfirmationMessage:"هل أنت متأكد من إزالة هذا المورد؟",vendorNotFound:"لم يتم العثور على المورد بهذا البريد الإلكتروني",errorAddingVendor:"حدث خطأ أثناء إضافة المورد",product:"منتج",currency:"ر.ع",selectVendor:"اختر المورد",selectExistingVendor:"اختر من الموردين الحاليين",or:"أو",fullName:"الاسم الكامل",selectBranchFirst:"الرجاء اختيار الفرع أولاً",removeVendor:"إزالة المورد",confirmRemoveVendor:"هل أنت متأكد من رغبتك في إزالة هذا المورد؟",yes:"نعم",no:"لا",searchVendors:"البحث عن الموردين...",noVendorsFound:"لم يتم العثور على موردين",addFirstVendor:"إضافة أول مورد"},en:{subVendors:"Vendor Management",vendors:"Vendors",addVendor:"Add Vendor",vendorName:"Vendor Name",vendorBusinessName:"Business Name",phoneNumber:"Phone Number",password:"Password",searchVendor:"Search for a vendor...",filter:"Filter",totalVendors:"Total Vendors",activeVendors:"Active Vendors",pendingApproval:"Pending Approval",vendor:"Vendor",vendorName:"Vendor Name",vendorBusinessName:"Business Name",newVendorDetails:"New Vendor Details",createAndAssign:"Create & Assign",passwordHint:"Password will be sent to vendor's email",productCount:"Product Count",sales:"Sales",status:"Status",joinDate:"Join Date",actions:"Actions",edit:"Edit",suspend:"Suspend",active:"Active",pending:"Pending Approval",suspended:"Suspended",loading:"Loading...",noVendors:"No vendors found",vendorEmail:"Vendor Email",branch:"Branch",selectBranch:"Select Branch",assignmentDate:"Assignment Date",assignedBranches:"Assigned Branches",unknownBusiness:"Unknown Business",businessName:"Business Name",email:"Email",phone:"Phone",add:"Add",remove:"Remove",confirm:"Confirm",cancel:"Cancel",confirmRemove:"Confirm Vendor Removal",removeConfirmationMessage:"Are you sure you want to remove this vendor?",vendorNotFound:"No vendor found with this email",errorAddingVendor:"Error adding vendor",product:"Product",currency:"OMR",selectVendor:"Select Vendor",selectExistingVendor:"Select from Existing Vendors",or:"or",fullName:"Full Name",selectBranchFirst:"Please select a branch first",removeVendor:"Remove Vendor",confirmRemoveVendor:"Are you sure you want to remove this vendor?",yes:"Yes",no:"No",searchVendors:"Search vendors...",noVendorsFound:"No vendors found",addFirstVendor:"Add your first vendor"}};function vCe(){const{language:t}=_e(),{user:e}=qe(),{branches:r}=tr(),n=xCe[t],[i,a]=j.useState([]),[s,o]=j.useState([]),[l,u]=j.useState(!0),[d,f]=j.useState(!1),[h,m]=j.useState(""),[g,p]=j.useState(""),[x,v]=j.useState(""),[b,y]=j.useState(!1),[_,w]=j.useState(null),[N,S]=j.useState({full_name:"",phone_number:"",vendor_business_name:"",password:""}),[E,T]=j.useState(null),[P,A]=j.useState(null);j.useEffect(()=>{e!=null&&e.businessCode&&(k(),F())},[e==null?void 0:e.businessCode]);const k=async()=>{try{u(!0);const W=await cN(e.businessCode);a(W)}catch(W){console.error("Error loading vendors:",W)}finally{u(!1)}},F=async()=>{try{const W=await XOe();o(W)}catch(W){console.error("Error loading available vendors:",W)}},H=async W=>{if(W.preventDefault(),T(null),!x){T(n.selectBranchFirst);return}try{if(_)await eb({vendor_business_code:_.business_code,owner_business_code:e.businessCode,owner_business_name:"",branch_name:x,vendor_email_identifier:_.his_email||""});else if(b){const C=await WOe({email:g,password:N.password,full_name:N.full_name,vendor_business_name:N.vendor_business_name,phone_number:N.phone_number});await eb({vendor_business_code:C.business_code,owner_business_code:e.businessCode,owner_business_name:"",branch_name:x,vendor_email_identifier:g})}else{const C=await VOe(g);if(!C){y(!0);return}await eb({vendor_business_code:C.business_code,owner_business_code:e.businessCode,owner_business_name:"",branch_name:x,vendor_email_identifier:g})}await k(),f(!1),p(""),v(""),y(!1),w(null),S({full_name:"",phone_number:"",vendor_business_name:"",password:""})}catch(C){console.error("Error adding vendor:",C),T(n.errorAddingVendor)}},M=async W=>{try{await HOe(W.assignment_id),await k(),A(null)}catch(C){console.error("Error removing vendor:",C)}},O=i.filter(W=>W.vendor_email_identifier.toLowerCase().includes(h.toLowerCase())||W.branch_name.toLowerCase().includes(h.toLowerCase())),[L,R]=j.useState(new Set),z=W=>{R(C=>{const G=new Set(C);return G.has(W)?G.delete(W):G.add(W),G})},J=j.useMemo(()=>{const W=new Map;return i.forEach(C=>{const G=W.get(C.vendor_email_identifier)||[];W.set(C.vendor_email_identifier,[...G,C])}),W},[i]);return c.jsxs("div",{className:"space-y-8 p-6 bg-gray-50",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:n.subVendors}),c.jsxs("button",{onClick:()=>f(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-offset-2 flex items-center text-lg font-semibold shadow-lg",children:[c.jsx($i,{className:"w-6 h-6 ml-2"}),n.addVendor]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:h,onChange:W=>m(W.target.value),placeholder:n.searchVendor,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]})}),c.jsx("div",{className:"overflow-x-auto",children:l?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:n.loading})}):O.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:n.noVendors})}):c.jsx("div",{className:"divide-y divide-gray-200",children:Array.from(J.entries()).map(([W,C])=>{var Y,I;const G=L.has(W);return c.jsxs("div",{className:"bg-white hover:bg-blue-50 transition-colors duration-150",children:[c.jsxs("div",{className:"px-8 py-6 cursor-pointer flex items-center justify-between border-l-4 border-blue-500",onClick:()=>z(W),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-16 w-16",children:c.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center shadow-inner",children:c.jsx(Yt,{className:"h-8 w-8 text-blue-600"})})}),c.jsxs("div",{className:"mr-6",children:[c.jsx("div",{className:"text-xl font-bold text-blue-700",children:((Y=C[0].profile)==null?void 0:Y["vendor_business _name"])||n.unknownBusiness}),c.jsx("div",{className:"text-lg text-gray-600 mt-1",children:W})]})]}),G?c.jsx(G7,{className:"h-8 w-8 text-blue-600"}):c.jsx(wd,{className:"h-8 w-8 text-blue-600"})]}),G&&c.jsxs("div",{className:"border-t-2 border-gray-100 bg-blue-50",children:[c.jsx("div",{className:"px-8 py-4",children:c.jsx("div",{className:"grid grid-cols-2 gap-6",children:c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[c.jsx("label",{className:"text-sm font-semibold text-gray-600",children:n.phone}),c.jsx("p",{className:"text-lg text-gray-900 mt-1 font-medium",children:((I=s.find(Q=>Q.his_email===W))==null?void 0:I.phone_number)||"-"})]})})}),c.jsxs("table",{className:"min-w-full divide-y-2 divide-blue-100",children:[c.jsx("thead",{className:"bg-blue-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-8 py-4 text-right text-sm font-bold text-blue-900 uppercase tracking-wider border-b-2 border-blue-200",children:n.branch}),c.jsx("th",{scope:"col",className:"px-8 py-4 text-right text-sm font-bold text-blue-900 uppercase tracking-wider border-b-2 border-blue-200",children:n.assignmentDate}),c.jsx("th",{scope:"col",className:"relative px-8 py-4 border-b-2 border-blue-200",children:c.jsx("span",{className:"sr-only",children:n.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-blue-100",children:C.map(Q=>c.jsxs("tr",{className:"hover:bg-blue-50 transition-colors duration-150",children:[c.jsx("td",{className:"px-8 py-5 whitespace-nowrap text-lg text-gray-900 font-medium border-r border-blue-100",children:Q.branch_name}),c.jsx("td",{className:"px-8 py-5 whitespace-nowrap text-lg text-gray-600 border-r border-blue-100",children:new Date(Q.date_of_assignment).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"})}),c.jsx("td",{className:"px-8 py-5 whitespace-nowrap text-left text-lg font-medium",children:c.jsx("button",{onClick:()=>A(Q),className:"text-red-600 hover:text-red-800 hover:bg-red-50 px-4 py-2 rounded-lg transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-red-500",children:n.remove})})]},Q.assignment_id))})]})]})]},W)})})})]}),d&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:b?n.newVendorDetails:n.addVendor}),c.jsxs("form",{onSubmit:H,className:"space-y-4",children:[!b&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n.selectExistingVendor}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-md shadow-sm p-2",value:(_==null?void 0:_.user_id)||"",onChange:W=>{const C=s.find(G=>G.user_id===W.target.value);w(C||null),C&&p(C.his_email||"")},children:[c.jsx("option",{value:"",children:n.selectVendor}),s.map(W=>c.jsx("option",{value:W.user_id,children:W["vendor_business _name"]||W.full_name},W.user_id))]}),c.jsx("div",{className:"mt-2",children:c.jsx("span",{className:"text-sm text-gray-500",children:n.or})})]}),!_&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n.vendorEmail}),c.jsx("input",{type:"email",name:"email",value:g,onChange:W=>p(W.target.value),className:"w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),!b&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.branch," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:x,onChange:W=>v(W.target.value),required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"",children:n.selectBranch}),r.filter(W=>W.is_active).map(W=>c.jsx("option",{value:W.branch_name,children:W.branch_name},W.branch_id))]})]}),b&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.vendorBusinessName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:N.vendor_business_name,onChange:W=>S(C=>({...C,vendor_business_name:W.target.value})),required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.vendorName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:N.full_name,onChange:W=>S(C=>({...C,full_name:W.target.value})),required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.phoneNumber," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"tel",value:N.phone_number,onChange:W=>S(C=>({...C,phone_number:W.target.value})),required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n.password," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"password",value:N.password,onChange:W=>S(C=>({...C,password:W.target.value})),required:!0,minLength:6,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n.passwordHint})]})]}),E&&c.jsx("div",{className:"rounded-md bg-red-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(_n,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:E})})]})}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:()=>{f(!1),T(null),y(!1),S({full_name:"",phone_number:"",vendor_business_name:"",password:""}),v(""),w(null)},className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:n.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:b?n.createAndAssign:n.add})]})]})]})}),P&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:n.confirmRemove}),c.jsx("p",{className:"text-gray-600 mb-6",children:n.removeConfirmationMessage}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:n.cancel}),c.jsx("button",{onClick:()=>M(P),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:n.confirm})]})]})})]})}const yCe={ar:{coupons:"إدارة الكوبونات",addCoupon:"إضافة كوبون",editCoupon:"تعديل الكوبون",searchCoupon:"ابحث عن كوبون...",allCoupons:"جميع الكوبونات",activeCoupons:"الكوبونات النشطة",expiredCoupons:"الكوبونات المنتهية",couponCode:"رمز الكوبون",discountType:"نوع الخصم",discountValue:"قيمة الخصم",startDate:"تاريخ البدء",expiryDate:"تاريخ الانتهاء",status:"الحالة",usageCount:"عدد الاستخدامات",maxUsage:"الحد الأقصى للاستخدام",actions:"إجراءات",active:"نشط",expired:"منتهي",inactive:"غير نشط",deactivate:"إيقاف",activate:"تفعيل",deactivateCoupon:"إيقاف الكوبون",activateCoupon:"تفعيل الكوبون",deactivateConfirmMessage:"هل أنت متأكد من إيقاف هذا الكوبون؟",activateConfirmMessage:"هل أنت متأكد من تفعيل هذا الكوبون؟",fixed:"مبلغ ثابت",percentage:"نسبة مئوية",unlimited:"غير محدود",edit:"تعديل",delete:"حذف",save:"حفظ",cancel:"إلغاء",couponName:"اسم الكوبون",description:"الوصف",minimumPurchase:"الحد الأدنى للشراء",generateCode:"توليد رمز",currency:"ر.ع",required:"مطلوب",optional:"اختياري",couponDeleted:"تم حذف الكوبون بنجاح",couponAdded:"تم إضافة الكوبون بنجاح",couponUpdated:"تم تحديث الكوبون بنجاح",confirmDelete:"هل أنت متأكد من حذف هذا الكوبون؟",usedCoupons:"الكوبونات المستخدمة",remainingUses:"الاستخدامات المتبقية",noLimit:"بلا حد",times:"مرات"},en:{coupons:"Coupon Management",addCoupon:"Add Coupon",editCoupon:"Edit Coupon",searchCoupon:"Search for a coupon...",allCoupons:"All Coupons",activeCoupons:"Active Coupons",expiredCoupons:"Expired Coupons",couponCode:"Coupon Code",discountType:"Discount Type",discountValue:"Discount Value",startDate:"Start Date",expiryDate:"Expiry Date",status:"Status",usageCount:"Usage Count",maxUsage:"Maximum Usage",actions:"Actions",active:"Active",expired:"Expired",inactive:"Inactive",deactivate:"Deactivate",activate:"Activate",deactivateCoupon:"Deactivate Coupon",activateCoupon:"Activate Coupon",deactivateConfirmMessage:"Are you sure you want to deactivate this coupon?",activateConfirmMessage:"Are you sure you want to activate this coupon?",fixed:"Fixed Amount",percentage:"Percentage",unlimited:"Unlimited",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",couponName:"Coupon Name",description:"Description",minimumPurchase:"Minimum Purchase",generateCode:"Generate Code",currency:"OMR",required:"Required",optional:"Optional",couponDeleted:"Coupon deleted successfully",couponAdded:"Coupon added successfully",couponUpdated:"Coupon updated successfully",confirmDelete:"Are you sure you want to delete this coupon?",usedCoupons:"Used Coupons",remainingUses:"Remaining Uses",noLimit:"No Limit",times:"times"}};function bCe(){const{language:t}=_e(),{user:e}=qe(),r=yCe[t],[n,i]=j.useState([]),[a,s]=j.useState(!0),[o,l]=j.useState(null),[u,d]=j.useState(!1),[f,h]=j.useState(null),[m,g]=j.useState(""),[p,x]=j.useState("all"),[v,b]=j.useState("created_at"),[y,_]=j.useState("desc"),[w,N]=j.useState(null);j.useEffect(()=>{e!=null&&e.businessCode&&S()},[e==null?void 0:e.businessCode]);const S=async()=>{try{s(!0);const O=await pbe(e.businessCode);i(O)}catch(O){console.error("Error loading coupons:",O),l(r.errorLoadingCoupons)}finally{s(!1)}},E=O=>{v===O?_(L=>L==="asc"?"desc":"asc"):(b(O),_("asc"))},T=({field:O,children:L})=>c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>E(O),title:v===O&&y==="asc"?r.sortDesc:r.sortAsc,children:c.jsxs("div",{className:"flex items-center justify-end space-x-1 space-x-reverse",children:[c.jsx("span",{children:L}),c.jsx(l3,{className:`w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity ${v===O?"opacity-100 text-indigo-500":"text-gray-400"}`})]})}),P=n.filter(O=>{const L=O.coupon_code.toLowerCase().includes(m.toLowerCase()),R=O.expiry_date&&new Date(O.expiry_date)<new Date;return L&&(p==="all"||p==="active"&&!R||p==="expired"&&R)}),A=X.useMemo(()=>[...P].sort((O,L)=>{let R=0;switch(v){case"coupon_code":R=O.coupon_code.localeCompare(L.coupon_code);break;case"discount_value":R=O.discount_value-L.discount_value;break;case"number_of_uses":R=O.number_of_uses-L.number_of_uses;break;case"expiry_date":!O.expiry_date&&!L.expiry_date?R=0:O.expiry_date?L.expiry_date?R=new Date(O.expiry_date).getTime()-new Date(L.expiry_date).getTime():R=-1:R=1;break;case"created_at":R=new Date(O.created_at).getTime()-new Date(L.created_at).getTime();break}return y==="asc"?R:-R}),[P,v,y]),k=O=>{const L=O.expiry_date&&new Date(O.expiry_date)<new Date;if(O.is_active){if(L)return{text:r.expired,className:"bg-red-100 text-red-800"}}else return{text:r.inactive,className:"bg-gray-100 text-gray-800"};return O.max_uses&&O.number_of_uses>=O.max_uses?{text:r.expired,className:"bg-red-100 text-red-800"}:{text:r.active,className:"bg-green-100 text-green-800"}},F=async O=>{try{await xA(O.coupon_id,{is_active:!O.is_active}),await S(),N(null)}catch(L){console.error("Error toggling coupon status:",L),l(r.errorUpdatingStatus)}},H=async O=>{try{const L={business_code:e.businessCode,coupon_code:O.get("code"),discount_type:O.get("type"),discount_value:parseFloat(O.get("value")),max_uses:O.get("maxUsage")?parseInt(O.get("maxUsage")):null,expiry_date:O.get("expiryDate")||null,min_purchase_amount:O.get("minimumPurchase")?parseFloat(O.get("minimumPurchase")):0,max_purchase_amount:O.get("maximumPurchase")?parseFloat(O.get("maximumPurchase")):0,is_active:!0};f?await xA(f.coupon_id,L):await gbe(L),await S(),d(!1),h(null)}catch(L){console.error("Error saving coupon:",L),l(r.errorSavingCoupon)}},M=async O=>{try{await xbe(O),await S()}catch(L){console.error("Error deleting coupon:",L),l(r.errorDeletingCoupon)}};return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:r.coupons}),c.jsxs("button",{onClick:()=>d(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center",children:[c.jsx($i,{className:"w-5 h-5 ml-2"}),r.addCoupon]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:m,onChange:O=>g(O.target.value),placeholder:r.searchCoupon,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("select",{value:p,onChange:O=>x(O.target.value),className:"border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"all",children:r.allCoupons}),c.jsx("option",{value:"active",children:r.activeCoupons}),c.jsx("option",{value:"expired",children:r.expiredCoupons})]})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx(T,{field:"coupon_code",children:r.couponCode}),c.jsx(T,{field:"discount_value",children:r.discountType}),c.jsx(T,{field:"expiry_date",children:r.expiryDate}),c.jsx(T,{field:"number_of_uses",children:r.usageCount}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.status}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:r.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(O=>{const L=k(O);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.coupon_code})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.discount_type==="fixed"?c.jsxs("span",{children:[O.discount_value," ",r.currency]}):c.jsxs("span",{children:[O.discount_value,"%"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.expiry_date?new Date(O.expiry_date).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):"-"}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[O.number_of_uses," / ",O.max_uses||r.unlimited]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${L.className}`,children:L.text})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[c.jsx("button",{onClick:()=>h(O),className:"text-indigo-600 hover:text-indigo-900 ml-4",children:r.edit}),c.jsx("button",{onClick:()=>N(O),className:`text-${O.is_active?"red":"green"}-600 hover:text-${O.is_active?"red":"green"}-900 ml-4`,children:O.is_active?r.deactivate:r.activate}),c.jsx("button",{onClick:()=>{window.confirm(r.confirmDelete)&&M(O.coupon_id)},className:"text-red-600 hover:text-red-900",children:r.delete})]})]},O.coupon_id)})})]})})]}),(u||f)&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:f?r.editCoupon:r.addCoupon}),c.jsx("form",{onSubmit:O=>{O.preventDefault(),H(new FormData(O.currentTarget))},children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.couponCode," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsx("input",{type:"text",name:"code",defaultValue:f==null?void 0:f.coupon_code,required:!0,className:"flex-1 px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"}),c.jsx("button",{type:"button",onClick:O=>{const L=O.currentTarget.previousElementSibling;L.value=vbe()},className:"px-3 py-2 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:c.jsx(s9,{className:"w-5 h-5"})})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.discountType," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{name:"type",defaultValue:(f==null?void 0:f.discount_type)||"fixed",required:!0,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"fixed",children:r.fixed}),c.jsx("option",{value:"percentage",children:r.percentage})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.discountValue," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",name:"value",defaultValue:f==null?void 0:f.discount_value,required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.expiryDate}),c.jsx("input",{type:"date",name:"expiryDate",defaultValue:f!=null&&f.expiry_date?new Date(f.expiry_date).toISOString().split("T")[0]:"",className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.minimumPurchase}),c.jsx("input",{type:"number",name:"minimumPurchase",defaultValue:f==null?void 0:f.min_purchase_amount,min:"0",step:"0.01",className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.maxUsage}),c.jsx("input",{type:"number",name:"maxUsage",defaultValue:f==null?void 0:f.max_uses,min:"0",className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:"ltr"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:()=>{d(!1),h(null)},className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:r.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:r.save})]})]})})]})}),w&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:w.is_active?r.deactivateCoupon:r.activateCoupon}),c.jsx("p",{className:"text-gray-600 mb-6",children:w.is_active?r.deactivateConfirmMessage:r.activateConfirmMessage}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>N(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:r.cancel}),c.jsx("button",{onClick:()=>F(w),className:`px-4 py-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${w.is_active?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-green-600 hover:bg-green-700 focus:ring-green-500"}`,children:r.confirm})]})]})}),o&&c.jsx("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:o})]})}const wCe={ar:{developerInfo:"معلومات المطور",developerName:"سالم السناني",role:"مطور برمجيات أول",about:"نبذة",description:"مطور برمجيات متخصص في تطوير حلول الأعمال المتكاملة وأنظمة نقاط البيع. خبرة واسعة في تطوير تطبيقات الويب والموبايل مع التركيز على تقديم حلول عملية وفعالة للشركات.",specialties:"التخصصات",skills:["تطوير الويب","تطوير الموبايل","أنظمة نقاط البيع","قواعد البيانات","تطوير واجهات المستخدم","حلول الأعمال","الدعم الفني"],support:"الدعم الفني",supportText:"للحصول على الدعم الفني أو الاستفسارات، يرجى التواصل عبر البريد الإلكتروني أو الهاتف. نحن هنا لمساعدتكم وضمان عمل النظام بكفاءة.",contactInfo:"معلومات التواصل",email:"البريد الإلكتروني",phone:"الهاتف"},en:{developerInfo:"Developer Information",developerName:"Salim Al Senani",role:"Senior Software Developer",about:"About",description:"Software developer specializing in integrated business solutions and POS systems. Extensive experience in web and mobile application development with a focus on delivering practical and effective solutions for businesses.",specialties:"Specialties",skills:["Web Development","Mobile Development","POS Systems","Databases","UI Development","Business Solutions","Technical Support"],support:"Technical Support",supportText:"For technical support or inquiries, please contact via email or phone. We are here to help you and ensure the system runs efficiently.",contactInfo:"Contact Information",email:"Email",phone:"Phone"}};function _Ce(){const{language:t}=_e(),e=wCe[t];return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("div",{className:"flex justify-between items-center",children:c.jsx("h1",{className:"text-2xl font-bold",children:e.developerInfo})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[c.jsx("div",{className:"relative h-48 bg-gradient-to-r from-indigo-500 to-purple-600",children:c.jsx("div",{className:"absolute -bottom-16 left-1/2 transform -translate-x-1/2",children:c.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white bg-white shadow-lg flex items-center justify-center",children:c.jsx("span",{className:"text-4xl font-bold text-indigo-600",children:"SA"})})})}),c.jsxs("div",{className:"pt-20 pb-8 px-6 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.developerName}),c.jsx("p",{className:"mt-2 text-gray-600",children:e.role}),c.jsxs("div",{className:"mt-8 space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 space-x-reverse",children:[c.jsx(h3,{className:"w-5 h-5 text-gray-500"}),c.jsx("a",{href:"mailto:contact.salim.alsenani@gmail.com",className:"text-indigo-600 hover:text-indigo-800",children:"contact.salim.alsenani@gmail.com"})]}),c.jsxs("div",{className:"flex items-center justify-center space-x-3 space-x-reverse",children:[c.jsx(n9,{className:"w-5 h-5 text-gray-500"}),c.jsx("a",{href:"tel:+96892309390",className:"text-indigo-600 hover:text-indigo-800",children:"+968 92309390"})]})]}),c.jsx("div",{className:"mt-8",children:c.jsxs("div",{className:"border-t border-gray-200 pt-8",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:e.about}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:e.description})]})}),c.jsx("div",{className:"mt-8",children:c.jsxs("div",{className:"border-t border-gray-200 pt-8",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:e.specialties}),c.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:e.skills.map((r,n)=>c.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm",children:r},n))})]})}),c.jsx("div",{className:"mt-8",children:c.jsxs("div",{className:"border-t border-gray-200 pt-8",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:e.support}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:e.supportText})]})})]})]})]})}const SCe={ar:{storeOwners:"أصحاب المتاجر",addOwner:"إضافة مالك متجر",editOwner:"تعديل بيانات المالك",searchOwners:"ابحث عن مالك متجر...",owner:"المالك",contact:"معلومات الاتصال",stores:"المتاجر",status:"الحالة",lastLogin:"آخر تسجيل دخول",actions:"إجراءات",edit:"تعديل",suspend:"إيقاف",delete:"حذف",save:"حفظ",cancel:"إلغاء",active:"نشط",suspended:"موقوف",never:"لم يسجل الدخول بعد",confirmSuspend:"هل أنت متأكد من إيقاف هذا المالك؟",confirmDelete:"هل أنت متأكد من حذف هذا المالك؟",ownerName:"اسم المالك",email:"البريد الإلكتروني",phone:"رقم الهاتف",username:"اسم المستخدم",password:"كلمة المرور",confirmPassword:"تأكيد كلمة المرور",required:"مطلوب",optional:"اختياري",passwordMismatch:"كلمات المرور غير متطابقة"},en:{storeOwners:"Store Owners",addOwner:"Add Store Owner",editOwner:"Edit Store Owner",searchOwners:"Search for store owner...",owner:"Owner",contact:"Contact Info",stores:"Stores",status:"Status",lastLogin:"Last Login",actions:"Actions",edit:"Edit",suspend:"Suspend",delete:"Delete",save:"Save",cancel:"Cancel",active:"Active",suspended:"Suspended",never:"Never logged in",confirmSuspend:"Are you sure you want to suspend this owner?",confirmDelete:"Are you sure you want to delete this owner?",ownerName:"Owner Name",email:"Email",phone:"Phone",username:"Username",password:"Password",confirmPassword:"Confirm Password",required:"Required",optional:"Optional",passwordMismatch:"Passwords do not match"}};function NCe(){const[t,e]=j.useState([]),[r,n]=j.useState(!0),[i,a]=j.useState(null),{user:s}=qe();return j.useEffect(()=>{async function o(){try{if(!s){console.warn("No authenticated user found"),a("Please sign in to view profiles"),n(!1);return}if(console.log("Fetching profiles for user role:",s.role),s.role!=="admin"){a("Access denied: Admin role required"),n(!1);return}const{data:l,error:u}=await oe.from("profiles").select("*");if(console.log("Supabase response:",{data:l,error:u}),u)throw console.error("Supabase error:",u),u;if(!l){console.warn("No data returned from Supabase"),e([]);return}console.log("Fetched profiles:",l),e(l)}catch(l){console.error("Error in fetchProfiles:",l),a(l instanceof Error?l.message:"An error occurred while fetching profiles")}finally{n(!1)}}o()},[s]),{profiles:t,loading:r,error:i}}function jCe(t){if(!t)return"No profile data";if(console.log("Profile business data:",{id:t.id,is_vendor:t.is_vendor,vendor_business_name:t["vendor_business _name"],business_name:t.business_name,all_keys:Object.keys(t)}),t.is_vendor){const e=t["vendor_business _name"];return console.log("Vendor name from column:",e),e||"No vendor business name"}return t.business_name||"No business name"}function bC({options:t,value:e,onChange:r,label:n,className:i=""}){return c.jsxs("div",{className:`flex items-center ${i}`,children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 ml-4",children:[n,":"]}),c.jsxs("select",{value:e,onChange:a=>r(a.target.value),className:"ml-2 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[c.jsx("option",{value:"",children:"All"}),t.map(a=>c.jsx("option",{value:a.value,children:a.label},a.value))]})]})}let Lg=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function ECe(){const[t,e]=j.useState(!1),[r,n]=j.useState(null);return{createUser:async a=>{e(!0),n(null);try{const s=Lg(10),{data:o,error:l}=await oe.auth.signUp({email:a.email,password:a.password,options:{data:{role:a.role}}});if(l)throw new Error(l.message);if(!o.user)throw new Error("Failed to create user");const u={user_id:o.user.id,his_email:a.email,full_name:a.full_name,role:a.role,is_vendor:a.is_vendor,business_code:s,phone_number:a.phone_number||null,main_branch:a.main_branch||null};a.is_vendor?Object.assign(u,{"vendor_business _name":a.vendor_business_name}):Object.assign(u,{business_name:a.business_name});const{error:d}=await oe.from("profiles").insert(u);if(d)throw console.error("Profile creation error:",d),new Error(d.message);return{success:!0,business_code:s}}catch(s){const o=s instanceof Error?s.message:"An error occurred";return console.error("Error creating user:",s),n(o),{success:!1,error:o}}finally{e(!1)}},loading:t,error:r}}function TCe({isOpen:t,onClose:e,onSuccess:r}){const{createUser:n,loading:i,error:a}=ECe(),[s,o]=j.useState({email:"",password:"",full_name:"",role:"cashier",is_vendor:!1,vendor_business_name:"",business_name:"",phone_number:"",main_branch:"",business_code:Lg(10)}),[l,u]=j.useState(!1),d=async h=>{h.preventDefault(),(await n(s)).success&&(u(!0),setTimeout(()=>{r(),e()},3e3))},f=h=>{const{name:m,value:g,type:p}=h.target;o(x=>({...x,[m]:p==="checkbox"?h.target.checked:g}))};return t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Add New User"}),c.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:c.jsx(Xa,{className:"w-6 h-6"})})]}),a&&c.jsx("div",{className:"mb-4 p-2 bg-red-100 border border-red-400 text-red-700 rounded",children:a}),l&&c.jsx("div",{className:"mb-4 p-2 bg-green-100 border border-green-400 text-green-700 rounded",children:"User created successfully! A confirmation email has been sent to the user. This window will close automatically..."}),c.jsxs("form",{onSubmit:d,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email *"}),c.jsx("input",{type:"email",name:"email",required:!0,value:s.email,onChange:f,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password *"}),c.jsx("input",{type:"password",name:"password",required:!0,value:s.password,onChange:f,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name *"}),c.jsx("input",{type:"text",name:"full_name",required:!0,value:s.full_name,onChange:f,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role *"}),c.jsxs("select",{name:"role",required:!0,value:s.role,onChange:f,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[c.jsx("option",{value:"admin",children:"Admin"}),c.jsx("option",{value:"owner",children:"Owner"}),c.jsx("option",{value:"manager",children:"Manager"}),c.jsx("option",{value:"cashier",children:"Cashier"}),c.jsx("option",{value:"vendor",children:"Vendor"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_vendor",name:"is_vendor",checked:s.is_vendor,onChange:f,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"is_vendor",className:"ml-2 block text-sm text-gray-700",children:"Is Vendor"})]}),s.is_vendor&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vendor Business Name *"}),c.jsx("input",{type:"text",name:"vendor_business_name",required:s.is_vendor,value:s.vendor_business_name,onChange:f,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),!s.is_vendor&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Name"}),c.jsx("input",{type:"text",name:"business_name",value:s.business_name,onChange:f,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Code *"}),c.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[c.jsx("input",{type:"text",name:"business_code",required:!0,value:s.business_code,onChange:f,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),c.jsx("button",{type:"button",onClick:()=>o(h=>({...h,business_code:Lg(10)})),className:"ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Generate New"})]}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You can edit this code or generate a new one"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),c.jsx("input",{type:"tel",name:"phone_number",value:s.phone_number,onChange:f,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Main Branch"}),c.jsx("input",{type:"text",name:"main_branch",value:s.main_branch,onChange:f,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:i?"Creating...":"Create User"})]})]})]})}):null}function FF(){const[t,e]=j.useState(!1),[r,n]=j.useState(null);return{updateProfile:async(s,o)=>{e(!0),n(null);try{const l={...o};"is_vendor"in o&&(o.is_vendor?(l.vendor_business_name=o.vendor_business_name,l.business_name=null):(l.vendor_business_name=null,l.business_name=o.business_name));const{error:u}=await oe.from("profiles").update(l).eq("id",s);if(u)throw new Error(u.message);return{success:!0}}catch(l){const u=l instanceof Error?l.message:"An error occurred";return n(u),{success:!1,error:u}}finally{e(!1)}},deleteProfile:async s=>{e(!0),n(null);try{const{data:o,error:l}=await oe.functions.invoke("delete-user",{body:{user_id:s.user_id}});if(l)throw console.error("Error deleting auth user:",l),new Error(l.message);const{error:u}=await oe.from("profiles").delete().eq("id",s.id);if(u)throw console.error("Error deleting profile:",u),new Error(u.message);return{success:!0}}catch(o){const l=o instanceof Error?o.message:"An error occurred";return console.error("Error in deleteProfile:",o),n(l),{success:!1,error:l}}finally{e(!1)}},loading:t,error:r}}function PCe({isOpen:t,onClose:e,onSuccess:r,profile:n}){const{updateProfile:i,loading:a,error:s}=FF(),[o,l]=j.useState({full_name:"",role:"",is_vendor:!1,vendor_business_name:"",business_name:"",phone_number:"",main_branch:"",business_code:""}),[u,d]=j.useState(!1);j.useEffect(()=>{var m;n&&l({full_name:n.full_name||"",role:n.role||"",is_vendor:n.is_vendor||!1,vendor_business_name:n["vendor_business _name"]||"",business_name:n.business_name||"",phone_number:((m=n.phone_number)==null?void 0:m.toString())||"",main_branch:n.main_branch||"",business_code:n.business_code||""})},[n]);const f=async m=>{m.preventDefault(),(await i(n.id,o)).success&&(d(!0),setTimeout(()=>{r(),e()},2e3))},h=m=>{const{name:g,value:p,type:x}=m.target;l(v=>({...v,[g]:x==="checkbox"?m.target.checked:p}))};return t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Edit Profile"}),c.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:c.jsx(Xa,{className:"w-6 h-6"})})]}),s&&c.jsx("div",{className:"mb-4 p-2 bg-red-100 border border-red-400 text-red-700 rounded",children:s}),u&&c.jsx("div",{className:"mb-4 p-2 bg-green-100 border border-green-400 text-green-700 rounded",children:"Profile updated successfully! Closing..."}),c.jsxs("form",{onSubmit:f,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name *"}),c.jsx("input",{type:"text",name:"full_name",required:!0,value:o.full_name,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role *"}),c.jsxs("select",{name:"role",required:!0,value:o.role,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[c.jsx("option",{value:"admin",children:"Admin"}),c.jsx("option",{value:"owner",children:"Owner"}),c.jsx("option",{value:"manager",children:"Manager"}),c.jsx("option",{value:"cashier",children:"Cashier"}),c.jsx("option",{value:"vendor",children:"Vendor"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_vendor",name:"is_vendor",checked:o.is_vendor,onChange:h,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"is_vendor",className:"ml-2 block text-sm text-gray-700",children:"Is Vendor"})]}),o.is_vendor&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vendor Business Name *"}),c.jsx("input",{type:"text",name:"vendor_business_name",required:o.is_vendor,value:o.vendor_business_name,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),!o.is_vendor&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Name"}),c.jsx("input",{type:"text",name:"business_name",value:o.business_name,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Code *"}),c.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[c.jsx("input",{type:"text",name:"business_code",required:!0,value:o.business_code,onChange:h,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),c.jsx("button",{type:"button",onClick:()=>l(m=>({...m,business_code:Lg(10)})),className:"ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Generate New"})]}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You can edit this code or generate a new one"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),c.jsx("input",{type:"tel",name:"phone_number",value:o.phone_number,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Main Branch"}),c.jsx("input",{type:"text",name:"main_branch",value:o.main_branch,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:a?"Saving...":"Save Changes"})]})]})]})}):null}function kCe(){const{language:t}=_e(),e=SCe[t],{profiles:r,loading:n,error:i}=NCe(),{deleteProfile:a}=FF(),[s,o]=j.useState(""),[l,u]=j.useState(!1),[d,f]=j.useState(null),[h,m]=j.useState(""),[g,p]=j.useState(""),x=j.useMemo(()=>{const y=new Set(r.map(_=>_.role).filter(Boolean));return Array.from(y).map(_=>({value:_,label:_.charAt(0).toUpperCase()+_.slice(1)}))},[r]),v=[{value:"vendor",label:"Vendors Only"},{value:"non-vendor",label:"Non-Vendors Only"}],b=j.useMemo(()=>r.filter(y=>{var S,E,T;const _=((S=y.full_name)==null?void 0:S.toLowerCase().includes(s.toLowerCase()))||((E=y.his_email)==null?void 0:E.toLowerCase().includes(s.toLowerCase()))||((T=y.business_name)==null?void 0:T.toLowerCase().includes(s.toLowerCase())),w=!h||y.role===h,N=!g||g==="vendor"&&y.is_vendor||g==="non-vendor"&&!y.is_vendor;return _&&w&&N}),[r,s,h,g]);return n?c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsx(f3,{className:"w-8 h-8 animate-spin text-indigo-600"})}):i?c.jsxs("div",{className:"flex items-center justify-center h-screen text-red-600",children:[c.jsx(_n,{className:"w-6 h-6 mr-2"}),c.jsx("span",{children:i})]}):c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:e.storeOwners}),c.jsxs("button",{onClick:()=>u(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center space-x-2",children:[c.jsx($i,{className:"w-5 h-5"}),c.jsx("span",{children:"Add New User"})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:space-y-0 sm:space-x-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:s,onChange:y=>o(y.target.value),placeholder:e.searchOwners,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsx(bC,{options:x,value:h,onChange:m,label:"Role",className:"sm:w-48"}),c.jsx(bC,{options:v,value:g,onChange:p,label:"Type",className:"sm:w-48"})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.owner}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.contact}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Business Name"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Business Code"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:e.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(y=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:c.jsx(Yt,{className:"h-6 w-6 text-indigo-600"})})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.full_name}),c.jsx("div",{className:"text-sm text-gray-500",children:y.his_email})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.phone_number}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-900",children:jCe(y)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-900",children:y.business_code||"N/A"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.role}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y.working_status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.working_status||"N/A"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.main_branch||"N/A"}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[c.jsx("button",{onClick:()=>f(y),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:c.jsx(u9,{className:"w-5 h-5"})}),c.jsx("button",{onClick:async()=>{window.confirm("Are you sure you want to delete this profile?")&&(await a(y)).success&&window.location.reload()},className:"text-red-600 hover:text-red-900",children:c.jsx(x3,{className:"w-5 h-5"})})]})]},y.id))})]})})]}),l&&c.jsx(TCe,{isOpen:l,onClose:()=>u(!1),onSuccess:()=>{u(!1),window.location.reload()}}),d&&c.jsx(PCe,{isOpen:!!d,profile:d,onClose:()=>f(null),onSuccess:()=>{f(null),window.location.reload()}})]})}const ACe={ar:{cashiers:"الكاشير",addCashier:"إضافة كاشير",editCashier:"تعديل بيانات الكاشير",searchCashiers:"ابحث عن كاشير...",cashier:"الكاشير",store:"المتجر",contact:"معلومات الاتصال",status:"الحالة",lastLogin:"آخر تسجيل دخول",actions:"إجراءات",edit:"تعديل",suspend:"إيقاف",delete:"حذف",save:"حفظ",cancel:"إلغاء",active:"نشط",suspended:"موقوف",never:"لم يسجل الدخول بعد",confirmSuspend:"هل أنت متأكد من إيقاف هذا الكاشير؟",confirmDelete:"هل أنت متأكد من حذف هذا الكاشير؟",cashierName:"اسم الكاشير",email:"البريد الإلكتروني",phone:"رقم الهاتف",username:"اسم المستخدم",password:"كلمة المرور",confirmPassword:"تأكيد كلمة المرور",required:"مطلوب",optional:"اختياري",passwordMismatch:"كلمات المرور غير متطابقة"},en:{cashiers:"Cashiers",addCashier:"Add Cashier",editCashier:"Edit Cashier",searchCashiers:"Search for cashier...",cashier:"Cashier",store:"Store",contact:"Contact Info",status:"Status",lastLogin:"Last Login",actions:"Actions",edit:"Edit",suspend:"Suspend",delete:"Delete",save:"Save",cancel:"Cancel",active:"Active",suspended:"Suspended",never:"Never logged in",confirmSuspend:"Are you sure you want to suspend this cashier?",confirmDelete:"Are you sure you want to delete this cashier?",cashierName:"Cashier Name",email:"Email",phone:"Phone",username:"Username",password:"Password",confirmPassword:"Confirm Password",required:"Required",optional:"Optional",passwordMismatch:"Passwords do not match"}};function OCe(){const{language:t}=_e(),e=ACe[t],[r,n]=j.useState(""),[i,a]=j.useState(!1),[s,o]=j.useState(null),l=[{id:"1",name:"فاطمة أحمد",email:"fatima@store.com",phone:"96812345678",storeId:"1",storeName:"سوبرماركت السعادة",status:"active",joinDate:"2024-01-01",lastLogin:"2024-03-15T10:30:00"},{id:"2",name:"نورة سالم",email:"noura@store.com",phone:"96887654321",storeId:"2",storeName:"متجر البركة",status:"suspended",joinDate:"2024-02-01",lastLogin:null}];return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:e.cashiers}),c.jsxs("button",{onClick:()=>a(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center",children:[c.jsx($i,{className:"w-5 h-5 ml-2"}),e.addCashier]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:r,onChange:u=>n(u.target.value),placeholder:e.searchCashiers,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.cashier}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.store}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.contact}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.status}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.lastLogin}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:e.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(u=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:c.jsx(Ld,{className:"h-6 w-6 text-indigo-600"})})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.name}),c.jsx("div",{className:"text-sm text-gray-500",children:u.email})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.storeName}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.phone}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e[u.status]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.lastLogin?new Date(u.lastLogin).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"}):e.never}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[c.jsx("button",{onClick:()=>o(u),className:"text-indigo-600 hover:text-indigo-900 ml-4",children:e.edit}),c.jsx("button",{onClick:()=>{confirm(u.status==="active"?e.confirmSuspend:e.confirmDelete)&&console.log("Changing cashier status:",u.id)},className:"text-red-600 hover:text-red-900",children:u.status==="active"?e.suspend:e.delete})]})]},u.id))})]})})]})]})}const CCe={ar:{superAdmin:"إدارة المتاجر",addVendor:"إضافة متجر جديد",searchVendor:"ابحث عن متجر...",filter:"تصفية",totalVendors:"إجمالي المتاجر",activeVendors:"المتاجر النشطة",suspendedVendors:"المتاجر المعلقة",vendor:"المتجر",storeName:"اسم المتجر",ownerName:"اسم المالك",email:"البريد الإلكتروني",phone:"رقم الهاتف",location:"الموقع",status:"الحالة",joinDate:"تاريخ الانضمام",actions:"إجراءات",edit:"تعديل",suspend:"تعليق",activate:"تفعيل",delete:"حذف",active:"نشط",suspended:"معلق",inactive:"غير نشط",save:"حفظ",cancel:"إلغاء",required:"مطلوب",optional:"اختياري",username:"اسم المستخدم",password:"كلمة المرور",confirmPassword:"تأكيد كلمة المرور",passwordMismatch:"كلمات المرور غير متطابقة",confirmSuspend:"هل أنت متأكد من تعليق هذا المتجر؟",confirmDelete:"هل أنت متأكد من حذف هذا المتجر؟",vendorAdded:"تم إضافة المتجر بنجاح",vendorUpdated:"تم تحديث بيانات المتجر بنجاح",vendorDeleted:"تم حذف المتجر بنجاح",statusChanged:"تم تغيير حالة المتجر بنجاح",subVendorsCount:"عدد الموردين",cashiersCount:"عدد الكاشير",lastLogin:"آخر تسجيل دخول",never:"لم يسجل الدخول بعد"},en:{superAdmin:"Stores Management",addVendor:"Add New Store",searchVendor:"Search for a store...",filter:"Filter",totalVendors:"Total Stores",activeVendors:"Active Stores",suspendedVendors:"Suspended Stores",vendor:"Store",storeName:"Store Name",ownerName:"Owner Name",email:"Email",phone:"Phone",location:"Location",status:"Status",joinDate:"Join Date",actions:"Actions",edit:"Edit",suspend:"Suspend",activate:"Activate",delete:"Delete",active:"Active",suspended:"Suspended",inactive:"Inactive",save:"Save",cancel:"Cancel",required:"Required",optional:"Optional",username:"Username",password:"Password",confirmPassword:"Confirm Password",passwordMismatch:"Passwords do not match",confirmSuspend:"Are you sure you want to suspend this store?",confirmDelete:"Are you sure you want to delete this store?",vendorAdded:"Store added successfully",vendorUpdated:"Store updated successfully",vendorDeleted:"Store deleted successfully",statusChanged:"Store status changed successfully",subVendorsCount:"Sub-vendors Count",cashiersCount:"Cashiers Count",lastLogin:"Last Login",never:"Never logged in"}};function MCe(){const{language:t}=_e(),e=CCe[t],[r,n]=j.useState(""),[i,a]=j.useState(!1),[s,o]=j.useState(null),l=[{id:"1",storeName:"سوبرماركت السعادة",ownerName:"أحمد محمد",username:"ahmed_store",email:"ahmed@store.com",phone:"96812345678",location:"مسقط، عمان",status:"active",joinDate:"2024-01-01",lastLogin:"2024-03-15T10:30:00",subVendorsCount:5,cashiersCount:8},{id:"2",storeName:"متجر البركة",ownerName:"فاطمة علي",username:"fatima_store",email:"fatima@store.com",phone:"96887654321",location:"صلالة، عمان",status:"suspended",joinDate:"2024-02-01",lastLogin:null,subVendorsCount:2,cashiersCount:3}];return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:e.superAdmin}),c.jsxs("button",{onClick:()=>a(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center",children:[c.jsx($i,{className:"w-5 h-5 ml-2"}),e.addVendor]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-indigo-100 p-3 rounded-full",children:c.jsx(Yt,{className:"w-6 h-6 text-indigo-600"})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:e.totalVendors}),c.jsx("p",{className:"text-3xl font-bold mt-1",children:l.length})]})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:c.jsx(Yt,{className:"w-6 h-6 text-green-600"})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:e.activeVendors}),c.jsx("p",{className:"text-3xl font-bold mt-1",children:l.filter(u=>u.status==="active").length})]})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:c.jsx(_n,{className:"w-6 h-6 text-red-600"})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:e.suspendedVendors}),c.jsx("p",{className:"text-3xl font-bold mt-1",children:l.filter(u=>u.status==="suspended").length})]})]})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:r,onChange:u=>n(u.target.value),placeholder:e.searchVendor,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.vendor}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.location}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.subVendorsCount}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.status}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.lastLogin}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:e.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(u=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:c.jsx(Yt,{className:"h-6 w-6 text-indigo-600"})})}),c.jsxs("div",{className:"mr-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.storeName}),c.jsx("div",{className:"text-sm text-gray-500",children:u.ownerName})]})]})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm text-gray-900",children:u.location}),c.jsx("div",{className:"text-sm text-gray-500",children:u.phone})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsxs("div",{className:"text-sm text-gray-900",children:[u.subVendorsCount," ",t==="ar"?"مورد":"vendors"]}),c.jsxs("div",{className:"text-sm text-gray-500",children:[u.cashiersCount," ",t==="ar"?"كاشير":"cashiers"]})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e[u.status]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.lastLogin?new Date(u.lastLogin).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"}):e.never}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[c.jsx("button",{onClick:()=>o(u),className:"text-indigo-600 hover:text-indigo-900 ml-4",children:e.edit}),c.jsx("button",{onClick:()=>{confirm(u.status==="active"?e.confirmSuspend:e.confirmDelete)&&console.log("Changing vendor status:",u.id)},className:"text-red-600 hover:text-red-900",children:u.status==="active"?e.suspend:e.delete})]})]},u.id))})]})})]})]})}const Sv={ar:{dashboard:"لوحة تحكم المورد",loading:"جاري التحميل...",noAssignments:"لم يتم تعيينك لأي متجر بعد",totalStores:"إجمالي المتاجر",totalBusinesses:"إجمالي المتاجر",allBusinesses:"جميع المتاجر",allBranches:"جميع الفروع",totalBranches:"إجمالي الفروع",allOwners:"جميع أصحاب المتاجر",activeProducts:"المنتجات النشطة",monthlyRevenue:"الإيرادات الشهرية",commission:"نسبة العمولة",allStores:"جميع المتاجر",salesOverTime:"المبيعات عبر الزمن",salesAmount:"قيمة المبيعات",totalAmount:"إجمالي المبلغ",products:"المنتجات",productName:"اسم المنتج",store:"المتجر",branch:"الفرع",businessName:"اسم المتجر",branchName:"اسم الفرع",price:"السعر",quantity:"الكمية",status:"الحالة",active:"نشط",inactive:"غير نشط",outOfStock:"نفذت الكمية",edit:"تعديل",currency:"ر.ع",today:"اليوم",yesterday:"الأمس",thisWeek:"هذا الأسبوع",thisMonth:"هذا الشهر",last3Months:"آخر 3 أشهر",customRange:"تاريخ مخصص",transactions:"المعاملات",date:"التاريخ",transactionType:"نوع المعاملة",amount:"المبلغ",profit:"الربح",completed:"مكتمل",pending:"قيد الانتظار",cancelled:"ملغي",product_sale:"مبيعات المنتجات",productSales:"مبيعات المنتجات",tax:"الضريبة الشهرية",expense:"مصروفات",rental:"إيجار",errorLoadingTransactions:"حدث خطأ أثناء تحميل المعاملات",notes:"ملاحظات",taxPeriod:"فترة الضريبة",rentalPeriod:"فترة الإيجار",startDate:"تاريخ البداية",endDate:"تاريخ النهاية",location:"موقع المعاملة"},en:{dashboard:"Vendor Dashboard",loading:"Loading...",noAssignments:"You have not been assigned to any stores yet",totalStores:"Total Stores",totalBusinesses:"Total Businesses",allBusinesses:"All Businesses",allBranches:"All Branches",totalBranches:"Total Branches",allOwners:"All Store Owners",activeProducts:"Active Products",monthlyRevenue:"Monthly Revenue",commission:"Commission Rate",allStores:"All Stores",salesOverTime:"Sales Over Time",salesAmount:"Sales Amount",totalAmount:"Total Amount",products:"Products",productName:"Product Name",store:"Store",branch:"Branch",businessName:"Business Name",branchName:"Branch Name",price:"Price",quantity:"Quantity",status:"Status",active:"Active",inactive:"Inactive",outOfStock:"Out of Stock",edit:"Edit",currency:"OMR",today:"Today",yesterday:"Yesterday",thisWeek:"This Week",thisMonth:"This Month",last3Months:"Last 3 Months",customRange:"Custom Range",transactions:"Transactions",date:"Date",transactionType:"Transaction Type",amount:"Amount",profit:"Profit",completed:"Completed",pending:"Pending",cancelled:"Cancelled",product_sale:"Product Sales",productSales:"Product Sales",tax:"Monthly Tax",expense:"Expense",rental:"Rental",errorLoadingTransactions:"Error loading transactions",notes:"Notes",taxPeriod:"Tax Period",rentalPeriod:"Rental Period",startDate:"Start Date",endDate:"End Date",location:"Transaction Location"}},DCe=(t,e,r)=>{const n=new Date;switch(t){case"today":return{startDate:At(n),endDate:ei(n)};case"yesterday":const i=lc(n,1);return{startDate:At(i),endDate:ei(i)};case"this_week":return{startDate:qo(n,{weekStartsOn:1}),endDate:o5(n,{weekStartsOn:1})};case"this_month":return{startDate:s5(n),endDate:a5(n)};case"last_3_months":return{startDate:At(Cf(n,3)),endDate:ei(n)};case"custom":if(!e||!r)throw new Error("Custom date range requires both start and end dates");return{startDate:At(e),endDate:ei(r)};default:return{startDate:At(n),endDate:ei(n)}}},$Ce=async({vendorCode:t,dateRange:e,customStartDate:r,customEndDate:n})=>{try{const{startDate:i,endDate:a}=DCe(e,r,n),{data:s,error:o}=await oe.from("vendor_transactions").select("*").eq("vendor_code",t).gte("transaction_date",i.toISOString()).lte("transaction_date",a.toISOString()).order("transaction_date",{ascending:!1});if(o)throw o;return s}catch(i){throw console.error("Error fetching vendor transactions:",i),i}};function g0({title:t,value:e,icon:r,iconColor:n="text-indigo-600",trend:i}){return c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),c.jsx("p",{className:"text-2xl font-semibold mt-1",children:e}),i&&c.jsxs("p",{className:`text-sm mt-1 ${i.isPositive?"text-green-600":"text-red-600"}`,children:[i.isPositive?"↑":"↓"," ",Math.abs(i.value),"%"]})]}),c.jsx(r,{className:`h-8 w-8 ${n}`})]})})}function ICe({transactions:t,dateRange:e}){const{language:r}=_e(),n=Sv[r],[i,a]=j.useState({totalBusinesses:0,totalBranches:0,totalAmount:0,productSales:0,taxAmount:0,rentalAmount:0,expenseAmount:0});return j.useEffect(()=>{const s=new Set,o=new Set;let l=0,u=0,d=0,f=0,h=0;t.forEach(m=>{s.add(m.business_code),m.branch_name&&o.add(`${m.business_code}-${m.branch_name}`);const g=Number(m.amount)||0;switch(l+=g,m.transaction_type){case"product_sale":u+=g;break;case"tax":d+=g;break;case"rental":f+=g;break;case"expense":h+=g;break}}),a({totalBusinesses:s.size,totalBranches:o.size,totalAmount:l,productSales:u,taxAmount:d,rentalAmount:f,expenseAmount:h})},[t]),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[c.jsx(g0,{title:n.totalBusinesses,value:i.totalBusinesses,icon:pu,iconColor:"text-blue-600"}),c.jsx(g0,{title:n.totalBranches,value:i.totalBranches,icon:Yt,iconColor:"text-indigo-600"}),c.jsx(g0,{title:n.totalAmount,value:`${i.totalAmount.toFixed(3)} ${n.currency}`,icon:v3,iconColor:"text-green-600"}),c.jsx(g0,{title:n.productSales,value:`${i.productSales.toFixed(3)} ${n.currency}`,icon:m3,iconColor:"text-yellow-600"})]})}function RCe({transactions:t,selectedBusiness:e,selectedBranch:r,onBusinessChange:n,onBranchChange:i}){const{language:a}=_e(),s=Sv[a],{businesses:o,branches:l}=j.useMemo(()=>{const u=new Map,d=new Map;return t.forEach(f=>{var h;f.business_code&&f.business_name&&u.set(f.business_code,{code:f.business_code,name:f.business_name}),f.business_code&&f.branch_name&&(d.has(f.business_code)||d.set(f.business_code,new Set),(h=d.get(f.business_code))==null||h.add(f.branch_name))}),{businesses:Array.from(u.values()),branches:e?Array.from(d.get(e)||[]):[]}},[t,e]);return c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(pu,{className:"h-4 w-4"}),s.businessName]})}),c.jsxs("select",{value:e||"",onChange:u=>n(u.target.value||null),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"",children:s.allBusinesses}),o.map(u=>c.jsx("option",{value:u.code,children:u.name},u.code))]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Yt,{className:"h-4 w-4"}),s.branchName]})}),c.jsxs("select",{value:r||"",onChange:u=>i(u.target.value||null),disabled:!e,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:[c.jsx("option",{value:"",children:s.allBranches}),l.map(u=>c.jsx("option",{value:u,children:u},u))]})]})]})}function FCe({vendorCode:t}){const{language:e}=_e(),r=Sv[e],[n,i]=j.useState(!0),[a,s]=j.useState(null),[o,l]=j.useState([]),[u,d]=j.useState("today"),[f,h]=j.useState(null),[m,g]=j.useState(null),[p,x]=j.useState(null),[v,b]=j.useState(null),y=async()=>{try{if(u==="custom"&&(!f||!m))return;i(!0),s(null);const P=await $Ce({vendorCode:t,dateRange:u,customStartDate:f||void 0,customEndDate:m||void 0});l(P)}catch(P){s(r.errorLoadingTransactions),console.error("Error loading transactions:",P)}finally{i(!1)}};j.useEffect(()=>{y()},[t,u,f,m]);const _=P=>{d(P),P!=="custom"&&(h(null),g(null))},w=j.useMemo(()=>o.filter(P=>!(p&&P.business_code!==p||v&&P.branch_name!==v)),[o,p,v]),N=P=>$e(new Date(P),"PPP",{locale:e==="ar"?Fw:Oc}),S=P=>P.transaction_type==="tax"&&P.tax_period?c.jsx("span",{className:"text-gray-500 text-sm",children:P.tax_period}):P.transaction_type==="rental"&&P.rental_start_date&&P.rental_end_date?c.jsxs("span",{className:"text-gray-500 text-sm",children:[N(P.rental_start_date)," - ",N(P.rental_end_date)]}):null,E=P=>c.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[c.jsx(Yt,{className:"h-4 w-4 text-gray-400"}),c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium",children:P.business_name}),P.branch_name&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mx-1 text-gray-400",children:"•"}),c.jsx("span",{className:"text-gray-600",children:P.branch_name})]})]})]}),T=P=>{x(P),b(null)};return n?c.jsx("div",{className:"text-center py-4",children:r.loading}):a?c.jsx("div",{className:"text-red-600 text-center py-4",children:a}):c.jsxs("div",{className:"space-y-4",children:[c.jsx(ICe,{transactions:w,dateRange:u}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-lg font-medium",children:r.transactions}),c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[c.jsxs("select",{value:u,onChange:P=>_(P.target.value),className:"border rounded-md px-3 py-1.5 focus:ring-2 focus:ring-indigo-500",children:[c.jsx("option",{value:"today",children:r.today}),c.jsx("option",{value:"yesterday",children:r.yesterday}),c.jsx("option",{value:"this_week",children:r.thisWeek}),c.jsx("option",{value:"this_month",children:r.thisMonth}),c.jsx("option",{value:"last_3_months",children:r.last3Months}),c.jsx("option",{value:"custom",children:r.customRange})]}),u==="custom"&&c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(Ho,{className:"h-5 w-5 text-gray-400"}),c.jsx("input",{type:"date",value:(f==null?void 0:f.toISOString().split("T")[0])||"",onChange:P=>{const A=P.target.value?new Date(P.target.value):null;h(A),A&&m&&m<A&&g(null)},className:"border rounded-md px-2 py-1",max:m==null?void 0:m.toISOString().split("T")[0]}),c.jsx("span",{children:"-"}),c.jsx("input",{type:"date",value:(m==null?void 0:m.toISOString().split("T")[0])||"",onChange:P=>g(P.target.value?new Date(P.target.value):null),className:"border rounded-md px-2 py-1",min:f==null?void 0:f.toISOString().split("T")[0]})]})]})]}),c.jsx(RCe,{transactions:o,selectedBusiness:p,selectedBranch:v,onBusinessChange:T,onBranchChange:b}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.date}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.location}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.transactionType}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.productName}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.quantity}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.amount}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.profit}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.notes}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.status})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(P=>c.jsxs("tr",{children:[c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[N(P.transaction_date),S(P)]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E(P)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r[P.transaction_type]||P.transaction_type}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.product_name||"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.product_quantity||"-"}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[P.amount.toFixed(3)," ",r.currency]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[P.profit.toFixed(3)," ",r.currency]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.notes||"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${P.status==="completed"?"bg-green-100 text-green-800":P.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:r[P.status]||P.status})})]},P.transaction_id))})]})})]})}function LCe(){const{language:t}=_e(),{user:e}=qe(),r=Sv[t],[n,i]=j.useState([]),[a,s]=j.useState(!0);j.useEffect(()=>{e!=null&&e.businessCode&&o()},[e==null?void 0:e.businessCode]);const o=async()=>{try{s(!0);const l=await IF(e.businessCode);i(l)}catch(l){console.error("Error loading assignments:",l)}finally{s(!1)}};return a?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-500",children:r.loading})}):n.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[c.jsx(Yt,{className:"w-16 h-16 text-gray-400"}),c.jsx("p",{className:"text-gray-500",children:r.noAssignments})]}):c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("div",{className:"flex justify-between items-center",children:c.jsx("h1",{className:"text-2xl font-bold",children:r.dashboard})}),c.jsx("div",{className:"bg-white rounded-lg shadow",children:c.jsx("div",{className:"p-6",children:c.jsx(FCe,{vendorCode:(e==null?void 0:e.businessCode)||""})})})]})}function BCe({selectedBusinessCode:t,onBusinessChange:e,assignments:r,className:n=""}){const{language:i}=_e();console.log("ProposedBusinessFilter - Raw assignments:",r);const a=Array.from(new Set(r.map(l=>l.owner_business_code))).map(l=>{const u=r.find(d=>d.owner_business_code===l);return{code:l,name:(u==null?void 0:u.owner_business_name)||"Unnamed Business"}});console.log("ProposedBusinessFilter - Unique businesses:",a);const o={ar:{proposedBusinesses:"المتاجر المقترحة",allBusinesses:"جميع المتاجر",selectBusiness:"اختر متجر..."},en:{proposedBusinesses:"Proposed Businesses",allBusinesses:"All Businesses",selectBusiness:"Select business..."}}[i];return c.jsxs("div",{className:`flex items-center space-x-2 space-x-reverse ${n}`,children:[c.jsx(Yt,{className:"w-5 h-5 text-gray-400"}),c.jsxs("select",{value:t,onChange:l=>e(l.target.value),className:"flex-1 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:i==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"all",children:o.allBusinesses}),a.map(l=>c.jsx("option",{value:l.code,children:l.name},l.code))]})]})}function UCe({onSubmit:t,initialData:e,ownerBusinessCode:r,vendorBusinessCode:n,assignments:i,onCancel:a}){const{language:s}=_e(),o=dl[s],{upload:l,isUploading:u,error:d}=jS(),{generateProductBarcode:f}=_S(),[h,m]=j.useState((e==null?void 0:e.type)||"non-food"),[g,p]=j.useState((e==null?void 0:e.expiry_date)||""),[x,v]=j.useState((e==null?void 0:e.production_date)||""),[b,y]=j.useState((e==null?void 0:e.image_url)||""),[_,w]=j.useState((e==null?void 0:e.image_url)||null),[N,S]=j.useState((e==null?void 0:e.barcode)||""),[E,T]=j.useState(null),[P,A]=j.useState((e==null?void 0:e.branch_name)||""),k=i.find(L=>L.owner_business_code===r),F=i.filter(L=>L.owner_business_code===r).map(L=>L.branch_name),H=async(L,R)=>{try{const z=await f({productId:Math.random().toString(36).substring(7),vendorId:n,name:L,price:R});return S(z),z}catch(z){return console.error("Error generating barcode:",z),null}};j.useEffect(()=>{T(r!=="all"&&!P?o.selectBranchFirst:null)},[r,P]);const M=async L=>{var z;const R=(z=L.target.files)==null?void 0:z[0];if(R){const J=URL.createObjectURL(R);w(J);try{const W=await l(R);W&&y(W)}catch{T(o.errorUploadingImage)}}},O=async L=>{if(L.preventDefault(),T(null),r==="all"){T(o.selectBusinessFirst);return}if(!P){T(o.selectBranchFirst);return}const R=new FormData(L.currentTarget),z=R.get("product_name"),J=parseFloat(R.get("price"));let W=N;if(!e&&!W&&(W=await H(z,J),!W)){T(o.errorGeneratingBarcode);return}const C={product_name:z,type:h,price:J,quantity:parseInt(R.get("quantity"),10),description:R.get("description"),image_url:b,barcode:W,business_code_of_owner:r,business_code_if_vendor:n,branch_name:P,current_page:"upcoming_products",accepted:!1,trackable:h==="food",production_date:h==="food"?x:void 0};h==="food"&&g&&(C.expiry_date=g);try{await t(C)}catch{T(o.errorSavingProduct)}};return c.jsxs("form",{onSubmit:O,className:"space-y-6",dir:s==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:`border rounded-lg p-4 space-y-4 ${r==="all"?"bg-red-50 border-red-100":"bg-indigo-50 border-indigo-100"}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(Yt,{className:`w-5 h-5 ${r==="all"?"text-red-600":"text-indigo-600"}`}),c.jsxs("span",{className:"font-medium",children:[o.sendingTo,":"]}),c.jsx("span",{className:r==="all"?"text-red-700 font-bold":"text-indigo-700",children:(k==null?void 0:k.owner_business_name)||o.selectBusiness})]}),c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx(pu,{className:`w-5 h-5 ${r==="all"?"text-red-600":"text-indigo-600"}`}),c.jsxs("select",{value:P,onChange:L=>A(L.target.value),required:!0,className:`flex-1 border rounded-md focus:ring-2 ${r==="all"?"bg-red-50 focus:ring-red-500 focus:border-red-500 cursor-not-allowed":"focus:ring-indigo-500 focus:border-indigo-500"}`,disabled:r==="all",dir:s==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"",children:o.selectBranch}),F.map(L=>c.jsx("option",{value:L,children:L},L))]})]})]}),c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(_n,{className:"h-5 w-5 text-yellow-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-yellow-700",children:o.pendingApprovalNotice})})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.productImage," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"flex items-center space-x-4 space-x-reverse",children:c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:_?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:_,alt:"Product preview",className:"h-40 w-40 object-cover rounded-md"}),c.jsx("button",{type:"button",onClick:()=>{w(null),y("")},className:"absolute top-0 right-0 -mr-2 -mt-2 bg-red-100 text-red-600 rounded-full p-1 hover:bg-red-200",children:"×"})]}):c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx(n2,{className:"mx-auto h-12 w-12 text-gray-400"}),c.jsx("div",{className:"flex text-sm text-gray-600",children:c.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500",children:[c.jsx("span",{children:o.chooseImage}),c.jsx("input",{type:"file",accept:"image/*",required:!(e!=null&&e.image_url),onChange:M,className:"sr-only"})]})}),c.jsx("p",{className:"text-xs text-gray-500",children:o.uploadInstructions})]})})})})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[o.productType," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:h,onChange:L=>m(L.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[c.jsx("option",{value:"food",children:o.food}),c.jsx("option",{value:"non-food",children:o.nonFood})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[o.productName," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"product_name",defaultValue:e==null?void 0:e.product_name,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",dir:s==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[o.price," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",name:"price",defaultValue:e==null?void 0:e.price,step:"0.001",min:"0",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",dir:"ltr"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[o.quantity," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",name:"quantity",defaultValue:e==null?void 0:e.quantity,min:"0",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",dir:"ltr"})]}),h==="food"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[o.productionDate," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx(Ho,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"date",value:x,onChange:L=>v(L.target.value),required:!0,className:"block w-full pr-10 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[o.expiryDate," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx(Ho,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"date",value:g,onChange:L=>p(L.target.value),required:!0,className:"block w-full pr-10 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[o.description,c.jsxs("span",{className:"text-gray-500 text-xs mr-1",children:["(",o.optional,")"]})]}),c.jsx("textarea",{name:"description",defaultValue:e==null?void 0:e.description,rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",dir:s==="ar"?"rtl":"ltr"})]})]}),(E||d)&&c.jsx("div",{className:"rounded-md bg-red-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(_n,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:E||d})})]})}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:o.cancel}),c.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:u?o.uploading:e?o.updateProduct:o.addProduct})]})]})}function zCe(){const{language:t}=_e(),{user:e}=qe(),r=dl[t],[n,i]=j.useState([]),[a,s]=j.useState("all"),[o,l]=j.useState("all"),[u,d]=j.useState([]),[f,h]=j.useState(!0),[m,g]=j.useState(!1),[p,x]=j.useState(null),[v,b]=j.useState(""),[y,_]=j.useState("all"),[w,N]=j.useState(null),[S,E]=j.useState(null),[T,P]=j.useState("product_name"),[A,k]=j.useState("asc");j.useEffect(()=>{e!=null&&e.businessCode&&F()},[e==null?void 0:e.businessCode]),j.useEffect(()=>{e!=null&&e.businessCode&&(a==="all"&&l("all"),a!=="all"&&N(null),H())},[a,o,e==null?void 0:e.businessCode]);const F=async()=>{try{h(!0);const W=await IF(e.businessCode);i(W)}catch(W){console.error("Error loading assignments:",W),N(r.errorLoadingAssignments)}finally{h(!1)}},H=async()=>{if(e!=null&&e.businessCode)try{h(!0),console.log("Loading products with params:",{businessCode:a,vendorBusinessCode:e.businessCode,branchName:o,isViewingAll:a==="all"});const W=await Abe({businessCode:a==="all"?void 0:a,vendorBusinessCode:e.businessCode,branchName:o==="all"?void 0:o});console.log("Loaded products:",W),d(W)}catch(W){console.error("Error loading products:",W),N(r.errorLoadingProducts)}finally{h(!1)}},M=async W=>{if(a)try{const C={...W,business_code_of_owner:a,business_code_if_vendor:e.businessCode,current_page:"upcoming_products",accepted:!1};p?await lR(p.product_id,C):await oR(C),await H(),g(!1),x(null)}catch(C){console.error("Error saving product:",C),N(r.errorSavingProduct)}},O=async W=>{try{await NS(W.product_id),await H(),E(null)}catch(C){console.error("Error deleting product:",C),N(r.errorDeletingProduct)}},R=[...u.filter(W=>{const C=W.product_name.toLowerCase().includes(v.toLowerCase()),G=y==="all"||W.type===y;return C&&G})].sort((W,C)=>{var Y,I;const G=A==="asc"?1:-1;switch(T){case"product_name":return G*W.product_name.localeCompare(C.product_name);case"business":const Q=((Y=n.find(ee=>ee.owner_business_code===W.business_code_of_owner))==null?void 0:Y.owner_business_name)||"",fe=((I=n.find(ee=>ee.owner_business_code===C.business_code_of_owner))==null?void 0:I.owner_business_name)||"";return G*Q.localeCompare(fe);case"branch":return G*(W.branch_name||"").localeCompare(C.branch_name||"");case"type":return G*(W.type||"").localeCompare(C.type||"");case"price":return G*(W.price-C.price);case"quantity":return G*(W.quantity-C.quantity);case"status":const me=ee=>ee.accepted?3:ee.rejection_reason?1:2;return G*(me(W)-me(C));case"production_date":return W.production_date?C.production_date?G*W.production_date.localeCompare(C.production_date):-G:G;case"expiry_date":return W.expiry_date?C.expiry_date?G*W.expiry_date.localeCompare(C.expiry_date):-G:G;default:return 0}}),z=({field:W,children:C})=>c.jsx("th",{scope:"col",className:`px-6 py-3 text-${t==="ar"?"right":"left"} text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer group`,onClick:()=>{W===T?k(A==="asc"?"desc":"asc"):(P(W),k("asc"))},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:C}),c.jsxs("div",{className:"flex flex-col ml-1",children:[c.jsx("span",{className:`h-2 ${T===W&&A==="asc"?"text-indigo-600":"text-gray-400"}`,children:"▲"}),c.jsx("span",{className:`h-2 ${T===W&&A==="desc"?"text-indigo-600":"text-gray-400"}`,children:"▼"})]})]})}),J=j.useMemo(()=>{if(a==="all")return[];const W=n.filter(C=>C.owner_business_code===a).map(C=>C.branch_name).filter(C=>!!C);return console.log("Available branches for business",a,":",W),W},[n,a]);return console.log("Available branches:",J),f&&n.length===0?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-500",children:r.loading})}):n.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[c.jsx(Pa,{className:"w-16 h-16 text-gray-400"}),c.jsx("p",{className:"text-gray-500",children:r.noAssignments})]}):c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:r.products}),c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse w-full max-w-xl",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx(BCe,{selectedBusinessCode:a,onBusinessChange:s,assignments:n,className:"w-full"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.branch}),c.jsxs("select",{value:o,onChange:W=>{console.log("Selected branch:",W.target.value),l(W.target.value)},className:`w-full border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${a==="all"?"opacity-50":""}`,dir:t==="ar"?"rtl":"ltr",disabled:a==="all",children:[c.jsx("option",{value:"all",children:a==="all"?r.allBranches:r.selectBranch}),J.map(W=>c.jsx("option",{value:W,children:W||"Unnamed Branch"},W))]})]})]}),c.jsxs("button",{onClick:()=>{if(a==="all"){N(r.selectBusinessFirst);return}N(null),x(null),g(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center",children:[c.jsx($i,{className:"w-5 h-5 ml-2"}),r.addProduct]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:v,onChange:W=>b(W.target.value),placeholder:r.searchProduct,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("select",{value:y,onChange:W=>_(W.target.value),className:"border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"all",children:r.allProducts}),c.jsx("option",{value:"food",children:r.foodProducts}),c.jsx("option",{value:"non-food",children:r.nonFoodProducts})]})]})}),w&&c.jsx("div",{className:"p-4 bg-red-50",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(_n,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:w})})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx(z,{field:"product_name",children:r.productName}),c.jsx(z,{field:"business",children:r.business}),c.jsx(z,{field:"branch",children:r.branch}),c.jsx(z,{field:"type",children:r.productTypeColumn}),c.jsx(z,{field:"price",children:r.price}),c.jsx(z,{field:"quantity",children:r.quantity}),c.jsx(z,{field:"production_date",children:r.productionDate}),c.jsx(z,{field:"expiry_date",children:r.expiryDate}),c.jsx(z,{field:"status",children:r.acceptanceStatus}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:r.actions})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(W=>{var C;return c.jsxs("tr",{children:[c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-${t==="ar"?"right":"left"}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:W.image_url?c.jsx("img",{src:W.image_url,alt:W.product_name,className:"h-10 w-10 rounded-full object-cover"}):c.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:c.jsx(Pa,{className:"h-6 w-6 text-gray-500"})})}),c.jsxs("div",{className:`${t==="ar"?"mr-4":"ml-4"}`,children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:W.product_name}),W.description&&c.jsx("div",{className:"text-sm text-gray-500",children:W.description})]})]})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-${t==="ar"?"right":"left"}`,children:c.jsx("div",{className:"text-sm text-gray-900",children:((C=n.find(G=>G.owner_business_code===W.business_code_of_owner))==null?void 0:C.owner_business_name)||r.unknownBusiness})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-${t==="ar"?"right":"left"}`,children:c.jsx("div",{className:"text-sm text-gray-900",children:W.branch_name||"-"})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-${t==="ar"?"right":"left"}`,children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${W.type==="food"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:W.type==="food"?r.food:r.nonFood})}),c.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-${t==="ar"?"right":"left"}`,children:[W.price.toFixed(3)," ",r.currency]}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-${t==="ar"?"right":"left"}`,children:W.quantity}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-${t==="ar"?"right":"left"}`,children:W.type==="food"&&W.production_date?new Date(W.production_date).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"}):"-"}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-${t==="ar"?"right":"left"}`,children:W.type==="food"&&W.expiry_date?c.jsx("span",{className:W.expiry_date&&new Date(W.expiry_date)<new Date?"text-red-600 font-medium":"",children:new Date(W.expiry_date).toLocaleDateString(t==="ar"?"ar":"en-US",{dateStyle:"medium"})}):"-"}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-${t==="ar"?"right":"left"}`,children:c.jsxs("div",{className:"flex flex-col space-y-1",children:[c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${W.accepted?"bg-green-100 text-green-800":W.rejection_reason?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:W.accepted?r.approved:W.rejection_reason?r.rejected:r.pending}),W.rejection_reason&&c.jsx("p",{className:"text-xs text-red-600",children:W.rejection_reason})]})}),c.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-${t==="ar"?"right":"left"} text-sm font-medium`,children:[c.jsx("button",{onClick:()=>{x(W),g(!0)},className:`text-indigo-600 hover:text-indigo-900 ${t==="ar"?"ml-4":"mr-4"}`,children:r.edit}),c.jsx("button",{onClick:()=>E(W),className:"text-red-600 hover:text-red-900",children:r.delete})]})]},W.product_id)})})]})})]}),m&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:p?r.editProduct:r.addProduct}),c.jsx(UCe,{onSubmit:M,initialData:p||void 0,ownerBusinessCode:a,assignments:n,onCancel:()=>{g(!1),x(null)}})]})}),S&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:r.confirmDelete}),c.jsx("p",{className:"text-gray-600 mb-6",children:r.deleteConfirmationMessage.replace("{name}",S.product_name)}),c.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:r.cancel}),c.jsx("button",{onClick:()=>O(S),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:r.confirmDelete})]})]})})]})}const WCe={ar:{receiptsHistory:"سجل الفواتير",export:"تصدير",searchReceipt:"البحث عن فاتورة أو رقم هاتف",allTypes:"جميع الأنواع",sales:"المبيعات",returns:"المرتجعات",allPaymentMethods:"جميع طرق الدفع",cash:"نقداً",card:"بطاقة",online:"دفع إلكتروني",receiptNumber:"رقم الفاتورة",date:"التاريخ",customer:"العميل",amount:"المبلغ",paymentMethod:"طريقة الدفع",type:"النوع",view:"عرض",guestCustomer:"عميل عام",loading:"جاري التحميل...",noReceipts:"لا توجد فواتير",errorLoadingReceipts:"حدث خطأ أثناء تحميل الفواتير",completed:"مكتملة",returned:"مرتجعة",currency:"ر.ع",print:"طباعة",printing:"جاري الطباعة...",printError:"خطأ في الطباعة",printerSize:"حجم الطابعة",tax:"الضريبة",discount:"الخصم",note:"ملاحظة"},en:{receiptsHistory:"Receipts History",export:"Export",searchReceipt:"Search receipt or phone number",allTypes:"All Types",sales:"Sales",returns:"Returns",allPaymentMethods:"All Payment Methods",cash:"Cash",card:"Card",online:"Online",receiptNumber:"Receipt Number",date:"Date",customer:"Customer",amount:"Amount",paymentMethod:"Payment Method",type:"Type",view:"View",guestCustomer:"Guest Customer",loading:"Loading...",noReceipts:"No receipts found",errorLoadingReceipts:"Error loading receipts",completed:"Completed",returned:"Returned",currency:"OMR",print:"Print",printing:"Printing...",printError:"Print Error",printerSize:"Printer Size",tax:"Tax",discount:"Discount",note:"Note"}};function VCe(){const{language:t}=_e(),{businessCode:e}=qe(),{settings:r}=Ii(),n=WCe[t],{print:i,isPrinting:a,error:s,selectedPrinterWidth:o,setSelectedPrinterWidth:l}=tR(),[u,d]=j.useState([]),[f,h]=j.useState(!0),[m,g]=j.useState(null),[p,x]=j.useState(""),[v,b]=j.useState("all"),[y,_]=j.useState("all");j.useState(""),j.useState("");const[w,N]=j.useState(null),[S,E]=j.useState(!1),[T,P]=j.useState({from:$e(new Date().setDate(new Date().getDate()-7),"yyyy-MM-dd"),to:$e(new Date,"yyyy-MM-dd")}),[A,k]=j.useState("all"),[F,H]=j.useState("all");j.useEffect(()=>{(async()=>{if(e)try{h(!0),g(null);const J={startDate:T.from,endDate:T.to,paymentMethod:A!=="all"?A:void 0,isReturn:F!=="all"?F==="return":void 0},W=await abe(e,J);d(W)}catch(J){console.error("Error loading receipts:",J),g(n.errorLoadingReceipts)}finally{h(!1)}})()},[e,T.from,T.to,A,F]);const M=u.filter(z=>{if(v==="sales"&&z.is_return||v==="returns"&&!z.is_return||y!=="all"&&z.payment_method!==y)return!1;if(p){const J=p.toLowerCase();return z.receipt_id.toLowerCase().includes(J)||z.customer_phone&&z.customer_phone.toLowerCase().includes(J)}return!0}),O=z=>{N(z),E(!0)},L=()=>{const z=M.map(J=>({receipt_id:J.receipt_id,date:$e(new Date(J.receipt_date),"yyyy-MM-dd HH:mm:ss"),customer:J.customer_name||n.guestCustomer,phone:J.customer_phone||"-",total:J.total_amount,payment:J.payment_method,status:J.is_return?n.returned:n.completed}));console.log("Exporting receipts:",z)},R=async z=>{try{await i(z,[])}catch(J){console.error("Error printing receipt:",J)}};return c.jsxs("div",{className:"space-y-6",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:n.receiptsHistory}),c.jsxs("button",{onClick:L,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[c.jsx(u3,{className:"w-5 h-5 ml-2"}),n.export]})]}),m&&c.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:m}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Kr,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",value:p,onChange:z=>x(z.target.value),placeholder:n.searchReceipt,className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr"})]}),c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ho,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"date",value:T.from,onChange:z=>P(J=>({...J,from:z.target.value})),className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ho,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"date",value:T.to,onChange:z=>P(J=>({...J,to:z.target.value})),className:"w-full pr-10 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),c.jsxs("select",{value:F,onChange:z=>H(z.target.value),className:"w-full py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"all",children:n.allTypes}),c.jsx("option",{value:"sale",children:n.sales}),c.jsx("option",{value:"return",children:n.returns})]}),c.jsxs("select",{value:A,onChange:z=>k(z.target.value),className:"w-full py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",dir:t==="ar"?"rtl":"ltr",children:[c.jsx("option",{value:"all",children:n.allPaymentMethods}),c.jsx("option",{value:"cash",children:n.cash}),c.jsx("option",{value:"card",children:n.card}),c.jsx("option",{value:"online",children:n.online})]})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.receiptNumber}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.date}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.customer}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.amount}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.paymentMethod}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.type}),c.jsx("th",{scope:"col",className:"relative px-6 py-3",children:c.jsx("span",{className:"sr-only",children:n.view})})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500",children:n.loading})}):M.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500",children:n.noReceipts})}):M.map(z=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z.receipt_id}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$e(new Date(z.receipt_date),"PPpp",{locale:t==="ar"?gh:void 0})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.customer_name?c.jsxs("div",{children:[c.jsx("div",{children:z.customer_name}),c.jsx("div",{className:"text-xs text-gray-400",children:z.customer_phone})]}):n.guestCustomer}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[z.total_amount.toFixed(3)," ",n.currency]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.payment_method==="cash"?n.cash:z.payment_method==="card"?n.card:n.online}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${z.is_return?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:z.is_return?n.returned:n.completed})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium",children:c.jsx("button",{onClick:()=>O(z),className:"text-indigo-600 hover:text-indigo-900",children:n.view})})]},z.receipt_id))})]})})]}),S&&w&&c.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:c.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-xl font-semibold",children:[n.receiptNumber,": ",w.receipt_id]}),c.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[c.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[c.jsxs("label",{className:"text-sm text-gray-600",children:[n.printerSize,":"]}),c.jsxs("select",{value:o,onChange:z=>l(z.target.value),className:"text-sm border rounded p-1",children:[c.jsx("option",{value:"57mm",children:"57mm"}),c.jsx("option",{value:"80mm",children:"80mm"}),c.jsx("option",{value:"85mm",children:"85mm"})]})]}),c.jsxs("button",{onClick:()=>R(w),disabled:a,className:`bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition-colors flex items-center space-x-2 rtl:space-x-reverse ${a?"opacity-50 cursor-not-allowed":""}`,children:[c.jsx(r2,{className:"w-4 h-4"}),c.jsx("span",{children:a?n.printing:n.print})]}),c.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700",children:c.jsx(Xa,{size:24})})]})]}),c.jsx("div",{className:"font-mono bg-white p-6 rounded-lg shadow-inner border text-center whitespace-pre-wrap",style:{direction:"ltr"},children:w.long_text_receipt?w.long_text_receipt:c.jsxs("div",{className:"text-left space-y-2",children:[c.jsx("div",{className:"text-center font-bold text-lg mb-4",children:r==null?void 0:r.business_name}),c.jsxs("div",{children:[n.date,": ",$e(new Date(w.created_at),"yyyy/MM/dd hh:mm a",{locale:t==="ar"?gh:void 0})]}),c.jsxs("div",{children:[n.receiptNumber,": ",w.receipt_id]}),w.branch_name&&c.jsxs("div",{children:["Branch: ",w.branch_name]}),w.cashier_name&&c.jsxs("div",{children:["Cashier: ",w.cashier_name]}),c.jsxs("div",{children:[n.customer,": ",w.customer_name||n.guestCustomer]}),w.customer_phone&&c.jsxs("div",{children:["Phone: ",w.customer_phone]}),c.jsxs("div",{className:"border-t border-b py-2 my-2",children:[c.jsxs("div",{children:[n.amount,": ",w.total_amount," ",n.currency]}),w.discount>0&&c.jsxs("div",{children:[n.discount,": ",w.discount," ",n.currency]}),w.tax>0&&c.jsxs("div",{children:[n.tax,": ",w.tax," ",n.currency]})]}),c.jsxs("div",{children:[n.paymentMethod,": ",n[w.payment_method]]}),w.is_return&&c.jsxs(c.Fragment,{children:[c.jsx("div",{children:"Return Receipt"}),w.return_reason&&c.jsxs("div",{children:["Return Reason: ",w.return_reason]})]}),w.note&&c.jsxs("div",{children:[n.note,": ",w.note]})]})})]})})}),s&&c.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[c.jsx("strong",{className:"font-bold",children:n.printError}),c.jsxs("span",{className:"block sm:inline",children:[" ",s.message]})]})]})}function HCe({data:t,columns:e,className:r=""}){const{language:n}=_e(),i=n==="ar"?"rtl":"ltr";return c.jsx("div",{className:`overflow-x-auto ${r}`,dir:i,children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:e.map((a,s)=>c.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.header},s))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((a,s)=>c.jsx("tr",{children:e.map((o,l)=>c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:typeof o.accessor=="function"?o.accessor(a):String(a[o.accessor])},l))},s))})]})})}function qCe({selectedMonth:t,selectedYear:e,onMonthChange:r,onYearChange:n}){const{language:i}=_e(),a=new Date().getFullYear(),s=Array.from({length:5},(l,u)=>a-u),o=i==="ar"?["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]:["January","February","March","April","May","June","July","August","September","October","November","December"];return c.jsxs("div",{className:"flex gap-4 items-center",dir:i==="ar"?"rtl":"ltr",children:[c.jsx("select",{value:t,onChange:l=>r(Number(l.target.value)),className:"block w-40 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:o.map((l,u)=>c.jsx("option",{value:u+1,children:l},u))}),c.jsx("select",{value:e,onChange:l=>n(Number(l.target.value)),className:"block w-32 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:s.map(l=>c.jsx("option",{value:l,children:l},l))})]})}function wC({value:t,onChange:e,options:r,label:n,placeholder:i}){const{language:a}=_e(),s=a==="ar"?"rtl":"ltr";return c.jsxs("div",{className:"flex flex-col gap-1",dir:s,children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:n}),c.jsxs("select",{value:t,onChange:o=>e(o.target.value),className:"block w-48 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[c.jsx("option",{value:"",children:i||(a==="ar"?"الكل":"All")}),r.map(o=>c.jsx("option",{value:o,children:o},o))]})]})}const GCe={product_sale:{ar:"بيع منتج",en:"product_sale"},tax:{ar:"ضريبة",en:"tax"},expense:{ar:"مصروف",en:"expense"},"Bulk sale through POS - Products":{ar:"بيع بالجملة عبر نقطة البيع - المنتجات",en:"Bulk sale through POS - Products"},"Bulk sale through POS":{ar:"بيع بالجملة عبر نقطة البيع",en:"Bulk sale through POS"},Products:{ar:"المنتجات",en:"Products"},"Monthly tax payment for":{ar:"دفع الضريبة الشهرية لـ",en:"Monthly tax payment for"}};function KCe({isOpen:t,onClose:e,transactions:r,vendorName:n,branchName:i}){const{language:a}=_e(),s=a==="ar"?"rtl":"ltr",o=l=>{const u=GCe[l];return u?a==="ar"?u.ar:u.en:l};return t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-11/12 max-w-4xl max-h-[90vh] flex flex-col",dir:s,children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[c.jsx("h2",{className:"text-xl font-semibold",children:a==="ar"?`سجل معاملات ${n} - ${i}`:`Transaction History for ${n} - ${i}`}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full",children:c.jsx(Xa,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"overflow-auto flex-1 p-4",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:a==="ar"?"التاريخ":"Date"}),c.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:a==="ar"?"نوع المعاملة":"Type"}),c.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:a==="ar"?"المنتج":"Product"}),c.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:a==="ar"?"الكمية":"Quantity"}),c.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:a==="ar"?"السعر":"Price"}),c.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:a==="ar"?"المبلغ":"Amount"}),c.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:a==="ar"?"ملاحظات":"Notes"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(l=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:new Date(l.transaction_date).toLocaleDateString(a==="ar"?"ar-OM":"en-US")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:o(l.transaction_type)}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:l.product_name||"-"}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:l.product_quantity||"-"}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right",children:l.unit_price?`${l.unit_price.toFixed(3)} OMR`:"-"}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right",children:`${l.amount.toFixed(3)} OMR`}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:l.notes||"-"})]},l.transaction_id))})]})})]})}):null}function YCe({isOpen:t,onClose:e,vendorName:r,vendorCode:n,branchName:i,ownerBusinessCode:a,ownerBusinessName:s}){const{language:o}=_e(),l=o==="ar"?"rtl":"ltr",[u,d]=j.useState(""),[f,h]=j.useState("deposit"),[m,g]=j.useState(!1),[p,x]=j.useState(null),[v,b]=j.useState(s),[y,_]=j.useState(!0);j.useEffect(()=>{async function N(){_(!0);try{const S=await u2(a);b(S)}catch(S){console.error("Error fetching business name:",S),x(o==="ar"?"حدث خطأ أثناء جلب بيانات الشركة":"Error fetching business details")}finally{_(!1)}}N()},[a,o]);const w=async N=>{if(N.preventDefault(),!u||isNaN(Number(u))||Number(u)<=0){x(o==="ar"?"يرجى إدخال مبلغ صحيح":"Please enter a valid amount");return}g(!0),x(null);const S=Number(u);try{const E=`${a}-${new Date().getTime()}`,{data:T,error:P}=await oe.from("vendor_transactions").insert([{transaction_id:E,business_code:a,business_name:v,vendor_code:n,vendor_name:r,branch_name:i,transaction_type:"expense",amount:f==="deposit"?S:-S,profit:f==="deposit"?S:-S,transaction_date:new Date().toISOString(),status:"completed",notes:f==="deposit"?o==="ar"?`إيداع من ${v}`:`Deposit from ${v}`:o==="ar"?`سحب إلى ${v}`:`Withdrawal to ${v}`}]);if(P)throw P;const{error:A}=await oe.from("transactions_overall").insert([{business_code:a,business_name:v,branch_name:i,transaction_type:f==="deposit"?"vendor_deposit":"vendor_withdrawal",amount:f==="deposit"?-S:S,owner_profit_from_this_transcation:f==="deposit"?-S:S,vendor_code:n,vendor_name:r,transaction_date:new Date().toISOString(),payment_method:"cash",currency:"OMR",transaction_reason:f==="deposit"?o==="ar"?`إيداع للمورد ${r}`:`Deposit to vendor ${r}`:o==="ar"?`سحب من المورد ${r}`:`Withdrawal from vendor ${r}`}]);if(A)throw A;e(),d(""),h("deposit")}catch(E){console.error("Error processing payment:",E),x(o==="ar"?"حدث خطأ أثناء معالجة الدفع":"Error processing payment")}finally{g(!1)}};return t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",dir:l,children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold",children:o==="ar"?`إدارة الدفعات - ${r}`:`Payment Management - ${r}`}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full",children:c.jsx(Xa,{className:"w-6 h-6"})})]}),c.jsxs("div",{className:"mb-6 text-sm text-gray-600",children:[c.jsxs("div",{className:"flex justify-between py-1 border-b",children:[c.jsx("span",{children:o==="ar"?"اسم المورد:":"Vendor Name:"}),c.jsx("span",{className:"font-medium",children:r})]}),c.jsxs("div",{className:"flex justify-between py-1 border-b",children:[c.jsx("span",{children:o==="ar"?"الفرع:":"Branch:"}),c.jsx("span",{className:"font-medium",children:i})]})]}),c.jsxs("form",{onSubmit:w,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o==="ar"?"نوع العملية":"Operation Type"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"deposit",checked:f==="deposit",onChange:N=>h(N.target.value),className:"mr-2"}),o==="ar"?"إيداع":"Deposit"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"withdrawal",checked:f==="withdrawal",onChange:N=>h(N.target.value),className:"mr-2"}),o==="ar"?"سحب":"Withdrawal"]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o==="ar"?"المبلغ":"Amount"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-gray-500 text-sm font-medium",children:"OMR"}),c.jsx("input",{type:"number",value:u,onChange:N=>d(N.target.value),className:"block w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"0.000",min:"0",step:"0.001",dir:"ltr"})]})]}),p&&c.jsx("div",{className:"text-red-500 text-sm",children:p}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:o==="ar"?"إلغاء":"Cancel"}),c.jsx("button",{type:"submit",disabled:m||y,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?o==="ar"?"جارٍ المعالجة...":"Processing...":y?o==="ar"?"جارٍ التحميل...":"Loading...":o==="ar"?"تأكيد":"Confirm"})]})]})]})}):null}function _C(){const{language:t}=_e(),{user:e}=qe(),[r,n]=j.useState([]),[i,a]=j.useState(!0),[s,o]=j.useState(null),[l,u]=j.useState([]),[d,f]=j.useState(!1),[h,m]=j.useState(!1),[g,p]=j.useState(null),[x,v]=j.useState(null),b=new Date,[y,_]=j.useState(b.getMonth()+1),[w,N]=j.useState(b.getFullYear()),[S,E]=j.useState(""),[T,P]=j.useState("");j.useEffect(()=>{e!=null&&e.businessCode&&A()},[e==null?void 0:e.businessCode,y,w]);const A=async()=>{try{a(!0),o(null);const L=await cN(e.businessCode),R=await Promise.all(L.map(async z=>{const J=await KOe(e.businessCode,z.vendor_business_code,z.branch_name,y,w);return{...z,vendorProfit:J.vendorProfit,ownerProfit:J.ownerProfit}}));n(R)}catch(L){console.error("Error loading vendors:",L),o(t==="ar"?"حدث خطأ أثناء تحميل البيانات":"Error loading vendor data")}finally{a(!1)}},k=async L=>{var R;try{const z=await YOe(e.businessCode,L.vendor_business_code,L.branch_name);u(z),p({name:((R=L.profile)==null?void 0:R.vendor_business_name)||"",branch:L.branch_name,code:L.vendor_business_code}),f(!0)}catch(z){console.error("Error loading transactions:",z)}},F=j.useMemo(()=>[...new Set(r.map(L=>L.branch_name))].sort(),[r]),H=j.useMemo(()=>[...new Set(r.map(L=>{var R;return((R=L.profile)==null?void 0:R.vendor_business_name)||""}))].filter(Boolean).sort(),[r]),M=j.useMemo(()=>r.filter(L=>{var J;const R=!S||L.branch_name===S,z=!T||((J=L.profile)==null?void 0:J.vendor_business_name)===T;return R&&z}),[r,S,T]),O=[{header:t==="ar"?"اسم المورد":"Business Name",accessor:L=>{var R;return((R=L.profile)==null?void 0:R.vendor_business_name)||"N/A"}},{header:t==="ar"?"الفرع":"Branch",accessor:"branch_name"},{header:t==="ar"?"أرباح المورد":"Vendor Profit",accessor:L=>typeof L.vendorProfit=="number"?`${L.vendorProfit.toFixed(3)} OMR`:"N/A"},{header:t==="ar"?"أرباح المالك":"Owner Profit",accessor:L=>typeof L.ownerProfit=="number"?`${L.ownerProfit.toFixed(3)} OMR`:"N/A"},{header:t==="ar"?"الإجراءات":"Actions",accessor:L=>c.jsxs("div",{className:"flex gap-2 justify-center",children:[c.jsx("button",{onClick:()=>k(L),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded transition-colors",title:t==="ar"?"عرض السجل":"View History",children:t==="ar"?"السجل":"History"}),c.jsx("button",{onClick:()=>{var R;v({name:((R=L.profile)==null?void 0:R.vendor_business_name)||"",branch:L.branch_name,code:L.vendor_business_code}),m(!0)},className:"px-3 py-1.5 text-sm font-medium text-green-600 hover:bg-green-50 rounded transition-colors",title:t==="ar"?"إدارة الدفعات":"Payment Management",children:t==="ar"?"الدفعات":"Payments"})]})}];return c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-semibold",children:t==="ar"?"أرباح الموردين":"Vendor Profits"}),c.jsx(qCe,{selectedMonth:y,selectedYear:w,onMonthChange:_,onYearChange:N})]}),c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsx(wC,{value:S,onChange:E,options:F,label:t==="ar"?"الفرع":"Branch",placeholder:t==="ar"?"جميع الفروع":"All Branches"}),c.jsx(wC,{value:T,onChange:P,options:H,label:t==="ar"?"المورد":"Vendor",placeholder:t==="ar"?"جميع الموردين":"All Vendors"})]})]}),i?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx(f3,{className:"w-8 h-8 animate-spin"})}):s?c.jsx("div",{className:"text-red-500 text-center py-4",children:s}):M.length===0?c.jsx("div",{className:"text-gray-500 text-center py-4",children:t==="ar"?"لا يوجد موردين":"No vendors found"}):c.jsx(HCe,{data:M,columns:O,className:"w-full"}),g&&c.jsx(KCe,{isOpen:d,onClose:()=>{f(!1),p(null)},transactions:l,vendorName:g.name,branchName:g.branch}),x&&c.jsx(YCe,{isOpen:h,onClose:()=>{m(!1),v(null),A()},vendorName:x.name,vendorCode:x.code,branchName:x.branch,ownerBusinessCode:e.businessCode,ownerBusinessName:e.businessName||""})]})}async function SC(t){try{const{data:e,error:r}=await oe.from("vendor_assignments").select("*").eq("owner_business_code",t);if(r)throw r;if(!e)return[];const{data:n,error:i}=await oe.from("profiles").select("*").in("his_email",e.map(s=>s.vendor_email_identifier));if(i)throw i;return e.map(s=>{const o=n==null?void 0:n.find(l=>l.his_email===s.vendor_email_identifier);return{...s,profile:o?{full_name:o.full_name,phone_number:o.phone_number,vendor_business_name:o["vendor_business _name"]}:void 0}})}catch(e){throw console.error("Error fetching vendor assignments:",e),e}}const XCe=async({businessCode:t,branchName:e,vendorCode:r,startDate:n,endDate:i})=>{try{const a=n?$e(n,"yyyy-MM-dd"):void 0,s=i?$e(i,"yyyy-MM-dd"):void 0;console.log("Fetching profits with params:",{businessCode:t,branchName:e,vendorCode:r,startDate:a,endDate:s});let o=oe.from("vendor_transactions").select("profit").eq("business_code",t).eq("branch_name",e).eq("vendor_code",r).eq("status","completed").eq("transaction_type","product_sale");a&&(o=o.gte("transaction_date",a)),s&&(o=o.lte("transaction_date",s));const{data:l,error:u}=await o;if(u)return console.error("Error fetching vendor profit:",u),{totalAmount:0,transactionCount:0};console.log("Fetched transactions:",l);const d=l.reduce((f,h)=>{const m=Number(h.profit)||0;return console.log("Processing transaction profit:",m),f+m},0);return console.log("Calculated total profit:",d),{totalAmount:d,transactionCount:l.length}}catch(a){return console.error("Error in getVendorPeriodProfit:",a),{totalAmount:0,transactionCount:0}}},QCe=async({businessCode:t,branchName:e,vendorCode:r,month:n,year:i})=>{console.log("Getting monthly profit for:",{businessCode:t,branchName:e,vendorCode:r,month:n,year:i});const a=new Date(i,n-1,1),s=new Date(i,n,0);return console.log("Date range:",{startDate:$e(a,"yyyy-MM-dd"),endDate:$e(s,"yyyy-MM-dd")}),XCe({businessCode:t,branchName:e,vendorCode:r,startDate:a,endDate:s})},JCe=async t=>{try{const{businessCode:e,branchName:r,vendorCode:n,vendorName:i,amount:a,month:s,year:o,paymentMethod:l}=t,{data:u}=await oe.from("vendor_assignments").select("owner_business_name").eq("owner_business_code",e).eq("vendor_business_code",n).eq("branch_name",r).maybeSingle(),d=(u==null?void 0:u.owner_business_name)||e;if(l==="cash"){const{data:p}=await oe.from("cash_tracking").select("new_total_cash").eq("business_code",e).eq("business_branch_name",r).order("created_at",{ascending:!1}).limit(1).single(),x=(p==null?void 0:p.new_total_cash)||0,v=x+a,{error:b}=await oe.from("cash_tracking").insert([{tracking_id:`TAX${Math.random().toString(36).substring(2,10).toUpperCase()}`,business_code:e,business_branch_name:r,previous_total_cash:x,new_total_cash:v,cash_additions:a,cash_removals:0,cash_change_reason:`دفع ضريبة شهرية من المورد ${i} لشهر ${s}/${o}`,total_returns:0,transaction_date:new Date().toISOString().split("T")[0]}]);if(b)throw console.error("Error creating cash tracking record:",b),b}const f=new Date(o,s-1,1).toISOString().split("T")[0],h=`tax_${e}_${n}_${s}_${o}_${Date.now()}_${Math.floor(Math.random()*1e6)}`;await iR.createTransaction({business_code:e,business_name:d,branch_name:r,vendor_code:n,vendor_name:i,transaction_date:f,transaction_type:"tax",amount:-a,profit:-a,status:"completed",transaction_id:h,notes:`دفع ضريبة شهرية لشهر ${s}/${o}`,tax_period:`${o}-${String(s).padStart(2,"0")}`,tax_description:`دفع ضريبة شهرية لشهر ${s}/${o}`});const{data:m,error:g}=await oe.from("transactions_overall").insert({business_code:e,business_name:d,branch_name:r,transaction_type:"tax",transaction_reason:`دفع ضريبة شهرية لشهر ${s}/${o}`,amount:a,currency:"OMR",owner_profit_from_this_transcation:a,payment_method:l,vendor_code:n,vendor_name:i,details:{month:s,year:o,taxType:"monthly",description:`دفع ضريبة شهرية من المورد ${i} (${n})`,vendor_transaction_id:h,payment_method:l}}).select().single();if(g)throw console.error("Error recording tax transaction:",g),g;return console.log("Successfully recorded tax transactions:",{vendorTransaction:"completed",overallTransaction:m}),m}catch(e){throw console.error("Error in recordMonthlyTaxTransaction:",e),e}},ZCe=()=>{const{language:t}=_e(),{businessCode:e}=qe();tr();const r=lN[t],[n,i]=j.useState([]),[a,s]=j.useState(new Date().getMonth()+1),[o,l]=j.useState(new Date().getFullYear()),[u,d]=j.useState(!0),[f,h]=j.useState(null),[m,g]=j.useState(""),[p,x]=j.useState(""),[v,b]=j.useState(null),[y,_]=j.useState(!0),[w,N]=j.useState([]);j.useState(!1);const[S,E]=j.useState(null),[T,P]=j.useState(!1),[A,k]=j.useState("cash"),F=j.useMemo(()=>new Date,[]),H=j.useMemo(()=>{const I=F.getFullYear(),Q=2025,fe=I+5;return Array.from({length:fe-Q+1},(me,ee)=>Q+ee)},[F]);j.useEffect(()=>{e&&(async()=>{_(!0);const{data:Q,error:fe}=await oe.from("business_settings").select("extra_tax_monthly_on_vendors").eq("business_code_",e).single();if(fe){console.error("Error loading business settings:",fe),_(!1);return}console.log("Loaded business settings:",Q),b(Q),_(!1)})()},[e]),j.useEffect(()=>{(async()=>{if(!(!e||y)){d(!0);try{const Q=await SC(e),fe=await O(Q);i(fe)}catch(Q){h(Q instanceof Error?Q.message:"Error loading vendors")}finally{d(!1)}}})()},[e,a,o,y]);const M=async()=>{if(!e){console.log("Cannot load tax history - missing business code");return}console.log("Loading tax history with params:",{businessCode:e,selectedBranch:m,month:a,year:o});const I=oe.from("monthly_tax_history").select("*").eq("owner_business_code",e).eq("month",a).eq("year",o).order("created_at",{ascending:!1});m&&I.eq("branch_name",m);const{data:Q,error:fe}=await I;if(fe){console.error("Error fetching tax history:",fe);return}console.log("Loaded tax history:",Q==null?void 0:Q.length,"records"),N(Q||[])};j.useEffect(()=>{M()},[e,m,a,o]);const O=async I=>{const{data:Q}=await oe.from("monthly_tax_history").select("*").eq("owner_business_code",e).eq("month",a).eq("year",o);return console.log("Tax history for current month/year:",Q),await Promise.all(I.map(async me=>{try{console.log("Loading profit for vendor:",{businessCode:e,branchName:me.branch_name,vendorCode:me.vendor_business_code,month:a,year:o});const ee=await QCe({businessCode:e,branchName:me.branch_name,vendorCode:me.vendor_business_code,month:a,year:o}),le=Q==null?void 0:Q.find(ke=>ke.vendor_business_code===me.vendor_business_code&&ke.branch_name===me.branch_name);console.log("Found tax record for vendor:",{vendorCode:me.vendor_business_code,taxRecord:le,month:a,year:o});const te=Number((v==null?void 0:v.extra_tax_monthly_on_vendors)||0),Z=ee.totalAmount*te/100;return{...me,monthlyProfit:ee.totalAmount,monthlyTax:Z,taxStatus:(le==null?void 0:le.payment_status)||"pending"}}catch(ee){return console.error("Error fetching vendor profit:",ee),{...me,monthlyProfit:0,monthlyTax:0,taxStatus:"pending"}}}))},L=I=>$e(new Date(I),"PPP",{locale:t==="ar"?Fw:Oc}),R=I=>{const Q=new Intl.NumberFormat("en-US",{style:"currency",currency:"OMR",minimumFractionDigits:3,maximumFractionDigits:3}).format(I);return t==="ar"?Q.replace("OMR","").trim()+" OMR":Q},z=j.useMemo(()=>n.reduce((I,Q)=>!Q.monthlyProfit||!Q.monthlyTax?I:{totalProfit:I.totalProfit+Q.monthlyProfit,totalTax:I.totalTax+Q.monthlyTax,paidTax:I.paidTax+(Q.taxStatus==="paid"?Q.monthlyTax:0),pendingTax:I.pendingTax+(Q.taxStatus==="pending"?Q.monthlyTax:0),vendorCount:I.vendorCount+1,paidCount:I.paidCount+(Q.taxStatus==="paid"?1:0)},{totalProfit:0,totalTax:0,paidTax:0,pendingTax:0,vendorCount:0,paidCount:0}),[n]),{uniqueBranches:J,uniqueBusinesses:W}=j.useMemo(()=>{const I=new Set,Q=new Set;return n.forEach(fe=>{var ee;fe.branch_name&&I.add(fe.branch_name);const me=((ee=fe.profile)==null?void 0:ee.vendor_business_name)||fe.vendor_email_identifier;me&&Q.add(me)}),{uniqueBranches:Array.from(I).sort(),uniqueBusinesses:Array.from(Q).sort()}},[n]),C=j.useMemo(()=>n.filter(I=>{var ee;const Q=!m||I.branch_name===m,fe=((ee=I.profile)==null?void 0:ee.vendor_business_name)||I.vendor_email_identifier;return Q&&(!p||fe===p)}),[n,m,p]),G=async I=>{console.log("Initiating tax payment for vendor:",{vendor_code:I.vendor_business_code,branch:I.branch_name,monthlyTax:I.monthlyTax,currentStatus:I.taxStatus}),E(I),P(!0)},Y=async()=>{var Q,fe;if(!S||!e){console.error("Missing required data:",{hasSelectedVendor:!!S,businessCode:e});return}const I=S.branch_name;console.log("Confirming tax payment with data:",{owner_business_code:e,branch_name:I,vendor_business_code:S.vendor_business_code,tax_amount:S.monthlyTax,month:a,year:o,payment_status:"paid",payment_method:A});try{const{data:me,error:ee}=await oe.from("monthly_tax_history").insert({owner_business_code:e,branch_name:I,vendor_business_code:S.vendor_business_code,vendor_business_name:((Q=S.profile)==null?void 0:Q.vendor_business_name)||S.vendor_email_identifier,tax_amount:S.monthlyTax,payment_status:"paid",month:a,year:o,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(ee)throw console.error("Error inserting tax payment:",ee),ee;await JCe({businessCode:e,branchName:I,vendorCode:S.vendor_business_code,vendorName:((fe=S.profile)==null?void 0:fe.vendor_business_name)||S.vendor_email_identifier,amount:S.monthlyTax||0,month:a,year:o,paymentMethod:A}),console.log("Successfully recorded tax payment:",me),P(!1);const le=await SC(e),te=await O(le);i(te),await M()}catch(me){console.error("Error processing payment:",me)}};return u?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("p",{className:"text-gray-600",children:r.loading})}):f?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"bg-red-50 p-4 rounded-md",children:c.jsx("p",{className:"text-red-700",children:f})})}):c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900",children:r.monthlyVendorTaxes}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:r.totalMonthlyProfit}),c.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[R(z.totalProfit)," ",r.currency]}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[z.vendorCount," ",r.vendors]})]}),c.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:c.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:r.totalPaidTaxes}),c.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[R(z.paidTax)," ",r.currency]}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[z.paidCount," ",r.paidVendorsCount]})]}),c.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:c.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:r.totalPendingTaxes}),c.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[R(z.pendingTax)," ",r.currency]}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[z.vendorCount-z.paidCount," ",r.pendingVendorsCount]})]}),c.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:c.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),c.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.selectMonth}),c.jsxs("div",{className:"relative",children:[c.jsx("select",{value:a,onChange:I=>s(Number(I.target.value)),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:Object.entries(r.months).map(([I,Q])=>c.jsx("option",{value:I,children:Q},I))}),c.jsx(wd,{className:"absolute right-2 top-2.5 h-5 w-5 text-gray-400 pointer-events-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.selectYear}),c.jsxs("div",{className:"relative",children:[c.jsx("select",{value:o,onChange:I=>l(Number(I.target.value)),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:H.map(I=>c.jsx("option",{value:I,children:I},I))}),c.jsx(wd,{className:"absolute right-2 top-2.5 h-5 w-5 text-gray-400 pointer-events-none"})]})]})]}),c.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.filterByBranch}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:m,onChange:I=>g(I.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"",children:r.allBranches}),J.map(I=>c.jsx("option",{value:I,children:I},I))]}),c.jsx(wd,{className:"absolute right-2 top-2.5 h-5 w-5 text-gray-400 pointer-events-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.filterByBusiness}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:p,onChange:I=>x(I.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"",children:r.allBusinesses}),W.map(I=>c.jsx("option",{value:I,children:I},I))]}),c.jsx(wd,{className:"absolute right-2 top-2.5 h-5 w-5 text-gray-400 pointer-events-none"})]})]})]}),C.length===0?c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsx("p",{className:"text-gray-600 text-center",children:r.noVendorsFound})}):c.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:`px-6 py-3 ${t==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:t==="ar"?"اسم المتجر":"Business Name"}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${t==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:r.branchName}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${t==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:r.assignmentDate}),c.jsxs("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.monthlyProfit," (OMR)"]}),c.jsxs("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.monthlyTax," (",(v==null?void 0:v.extra_tax_monthly_on_vendors)||0,"%)"]}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${t==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:r.paymentStatus}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${t==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider`})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(I=>{var Q;return c.jsxs("tr",{className:t==="ar"?"text-right":"text-left",children:[c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t==="ar"?"text-right":"text-left"}`,children:((Q=I.profile)==null?void 0:Q.vendor_business_name)||I.vendor_email_identifier}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t==="ar"?"text-right":"text-left"}`,children:I.branch_name}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t==="ar"?"text-right":"text-left"}`,children:L(I.date_of_assignment)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:R(I.monthlyProfit||0)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:R(I.monthlyTax||0)}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t==="ar"?"text-right":"text-left"}`,children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${I.taxStatus==="paid"?"bg-green-100 text-green-800":I.taxStatus==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:I.taxStatus})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t==="ar"?"text-right":"text-left"}`,children:I.taxStatus!=="paid"&&I.monthlyTax!==void 0&&I.monthlyProfit>0&&c.jsx("button",{onClick:()=>G(I),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:r.payTax})})]},`${I.vendor_business_code}-${I.branch_name}-${I.assignment_id}`)})})]})})}),c.jsxs("div",{className:"mt-8",children:[c.jsx("h2",{className:`text-xl font-semibold mb-4 ${t==="ar"?"text-right":"text-left"}`,children:r.monthlyTaxHistory}),c.jsx("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:`px-6 py-3 ${t==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:r.branchName}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${t==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:t==="ar"?"اسم المتجر":"Business Name"}),c.jsxs("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.paymentAmount," (OMR)"]}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${t==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:r.paymentStatus}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${t==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:r.date})]})}),c.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[w.map(I=>c.jsxs("tr",{children:[c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t==="ar"?"text-right":"text-left"}`,children:I.branch_name}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t==="ar"?"text-right":"text-left"}`,children:I.vendor_business_name}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:R(I.tax_amount)}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t==="ar"?"text-right":"text-left"}`,children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                      ${I.payment_status==="paid"?"bg-green-100 text-green-800":I.payment_status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:I.payment_status})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${t==="ar"?"text-right":"text-left"}`,children:$e(new Date(I.created_at),"PPP",{locale:t==="ar"?Fw:Oc})})]},`${I.vendor_business_code}-${I.branch_name}-${I.id}`)),w.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-6 py-4 whitespace-nowrap text-sm text-center text-gray-500",children:r.noRecordsFound})})]})]})})]}),T&&S&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:r.selectPaymentMethod}),c.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700",children:c.jsx(Xa,{size:24})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r.paymentMethod}),c.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[c.jsx("button",{className:`px-4 py-2 rounded-lg border ${A==="cash"?"bg-blue-500 text-white border-blue-500":"border-gray-300 hover:border-blue-500"}`,onClick:()=>k("cash"),children:r.cash}),c.jsx("button",{className:`px-4 py-2 rounded-lg border ${A==="card"?"bg-blue-500 text-white border-blue-500":"border-gray-300 hover:border-blue-500"}`,onClick:()=>k("card"),children:r.card}),c.jsx("button",{className:`px-4 py-2 rounded-lg border ${A==="online"?"bg-blue-500 text-white border-blue-500":"border-gray-300 hover:border-blue-500"}`,onClick:()=>k("online"),children:r.online})]})]}),c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("span",{className:"font-medium",children:[r.amount,":"]})," ",c.jsx("span",{className:"text-lg",children:R(S.monthlyTax||0)})]}),c.jsx("button",{onClick:Y,className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:r.confirmPayment})]})]})]})})]})};async function e4e(t){const{data:e,error:r}=await oe.from("vendor_rentals").select("*").eq("owner_business_code",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching vendor rentals:",r),r;return e||[]}async function t4e(t){const{data:e,error:r}=await oe.from("vendor_rentals").insert([t]).select().single();if(r)throw console.error("Error creating vendor rental:",r),r;return e}async function r4e(t,e){const{data:r,error:n}=await oe.from("vendor_rentals").update(e).eq("rental_id",t).select().single();if(n)throw console.error("Error updating vendor rental:",n),n;return r}async function n4e(t){const{error:e}=await oe.from("vendor_rentals").delete().eq("rental_id",t);if(e)throw console.error("Error deleting vendor rental:",e),e}const Ru={ar:{title:"مساحات الموردين",addNew:"إضافة مساحة جديدة",activeSpaces:"المساحات النشطة",paymentHistory:"سجل المدفوعات",vendor:"المورد",branch:"الفرع",spaceName:"اسم المساحة",monthlyRent:"الإيجار الشهري",assignedDate:"تاريخ التعيين",actions:"الإجراءات",amount:"المبلغ",status:"الحالة",paymentDate:"تاريخ الدفع",selectVendor:"اختر المورد",vendorName:"اسم المورد",selectBranch:"اختر الفرع",enterSpaceName:"أدخل اسم المساحة",enterAmount:"أدخل المبلغ",payRent:"دفع الإيجار",paymentFor:"الدفع لـ",period:"الفترة",save:"حفظ",update:"تحديث",cancel:"إلغاء",pay:"دفع",edit:"تعديل",delete:"حذف",paid:"مدفوع",pending:"معلق",overdue:"متأخر",unknown:"غير معروف",saving:"جاري الحفظ...",month:"الشهر",year:"السنة",noSpacesFound:"لم يتم العثور على مساحات",noPaymentsFound:"لم يتم العثور على مدفوعات لهذه الفترة",loading:"جاري التحميل...",processing:"جاري المعالجة...",totalSpaces:"إجمالي المساحات",paidSpaces:"المساحات المدفوعة",pendingSpaces:"المساحات المعلقة",totalAmount:"الإيجار الشهري الإجمالي",errorLoadingStats:"فشل تحميل الإحصائيات",selectVendorPlaceholder:"اختر موردًا",selectBranchPlaceholder:"اختر فرعًا",errorLoadingVendors:"فشل تحميل الموردين",errorInvalidAmount:"الرجاء إدخال مبلغ صحيح",errorVendorNotFound:"المورد أو الفرع المحدد غير موجود",errorSavingSpace:"فشل حفظ المساحة",paymentMethod:"طريقة الدفع",selectPaymentMethod:"اختر طريقة الدفع",cash:"نقداً",card:"بطاقة",online:"تحويل بنكي"},en:{title:"Vendor Spaces",addNew:"Add New Space",activeSpaces:"Active Spaces",paymentHistory:"Rental Payment History",vendor:"Vendor",branch:"Branch",spaceName:"Space Name",monthlyRent:"Monthly Rent",assignedDate:"Assigned Date",actions:"Actions",amount:"Amount",status:"Status",paymentDate:"Payment Date",selectVendor:"Select Vendor",vendorName:"Vendor Name",selectBranch:"Select Branch",enterSpaceName:"Enter space name",enterAmount:"Enter amount",payRent:"Pay Rent",paymentFor:"Payment for",period:"Period",save:"Save",update:"Update",cancel:"Cancel",pay:"Pay",edit:"Edit",delete:"Delete",paid:"PAID",pending:"PENDING",overdue:"OVERDUE",unknown:"Unknown",saving:"Saving...",month:"Month",year:"Year",noSpacesFound:"No vendor spaces found",noPaymentsFound:"No rental payments found for this period",loading:"Loading...",processing:"Processing...",totalSpaces:"Total Spaces",paidSpaces:"Paid Spaces",pendingSpaces:"Pending Spaces",totalAmount:"Total Monthly Rent",errorLoadingStats:"Failed to load statistics",selectVendorPlaceholder:"Select a vendor",selectBranchPlaceholder:"Select a branch",errorLoadingVendors:"Failed to load vendors",errorInvalidAmount:"Please enter a valid amount",errorVendorNotFound:"Selected vendor or branch not found",errorSavingSpace:"Failed to save space",paymentMethod:"Payment Method",selectPaymentMethod:"Select payment method",cash:"Cash",card:"Card",online:"Online Transfer"}};function i4e({businessCode:t,onClose:e,onSuccess:r,editingRental:n}){var P,A;const{language:i}=_e(),a=Ru[i],[s,o]=j.useState([]),[l,u]=j.useState(""),[d,f]=j.useState(""),[h,m]=j.useState(""),[g,p]=j.useState("0"),[x,v]=j.useState(!0),[b,y]=j.useState(null),[_,w]=j.useState(!1),N=i==="ar";j.useEffect(()=>{var k;n?(u(n.vendor_business_code),f(n.branch_name),m(n.space_name),p(((k=n.rent_amount)==null?void 0:k.toString())||"0")):(u(""),f(""),m(""),p("0"))},[n]),j.useEffect(()=>{S()},[t]),j.useEffect(()=>{n||f(""),y(null)},[l,n]);const S=async()=>{try{v(!0),y(null);const k=await cN(t);o(k)}catch(k){y(a.errorLoadingVendors),console.error(k)}finally{v(!1)}},E=async k=>{var M,O;if(k.preventDefault(),!l||!d||!h)return;const F=parseFloat(g);if(isNaN(F)||F<0){y(a.errorInvalidAmount);return}const H=s.find(L=>L.vendor_business_code===l&&L.branch_name===d);if(!H){y(a.errorVendorNotFound);return}try{w(!0),y(null),n?await r4e(n.rental_id,{vendor_business_code:l,vendor_business_name:((M=H.profile)==null?void 0:M.vendor_business_name)||"Unknown",space_name:h.trim(),branch_name:d,rent_amount:F}):await t4e({owner_business_code:t,vendor_business_code:l,vendor_business_name:((O=H.profile)==null?void 0:O.vendor_business_name)||"Unknown",space_name:h.trim(),branch_name:d,rent_amount:F}),r==null||r(),e()}catch(L){console.error("Error saving vendor rental:",L),y((L==null?void 0:L.message)||a.errorSavingSpace)}finally{w(!1)}},T=j.useMemo(()=>s.filter(k=>k.vendor_business_code===l).map(k=>k.branch_name),[s,l]);return x?c.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-2xl mx-auto",children:c.jsx("div",{className:"flex items-center justify-center py-4",children:c.jsx("div",{className:"text-gray-600",children:a.loading})})}):c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-2xl mx-auto",dir:N?"rtl":"ltr",children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:n?a.editSpace:a.addNew}),b&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded",children:b}),c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-1 ${N?"text-right":"text-left"}`,children:a.selectVendor}),c.jsxs("select",{value:l,onChange:k=>u(k.target.value),className:`w-full p-2 border rounded ${N?"text-right":"text-left"}`,required:!0,disabled:n!==null,children:[c.jsx("option",{value:"",children:a.selectVendorPlaceholder}),[...new Set(s.map(k=>k.vendor_business_code))].map(k=>{var H;const F=s.find(M=>M.vendor_business_code===k);return c.jsx("option",{value:k,className:"py-2",children:((H=F==null?void 0:F.profile)==null?void 0:H.vendor_business_name)||a.unknown},k)})]})]}),l&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-1 ${N?"text-right":"text-left"}`,children:a.vendorName}),c.jsx("input",{type:"text",value:((A=(P=s.find(k=>k.vendor_business_code===l))==null?void 0:P.profile)==null?void 0:A.vendor_business_name)||a.unknown,className:`w-full p-2 border rounded bg-gray-100 ${N?"text-right":"text-left"}`,disabled:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-1 ${N?"text-right":"text-left"}`,children:a.selectBranch}),c.jsxs("select",{value:d,onChange:k=>f(k.target.value),className:`w-full p-2 border rounded ${N?"text-right":"text-left"}`,required:!0,disabled:n!==null,children:[c.jsx("option",{value:"",children:a.selectBranchPlaceholder}),T.map(k=>c.jsx("option",{value:k,className:"py-2",children:k},k))]})]})]}),d&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-1 ${N?"text-right":"text-left"}`,children:a.spaceName}),c.jsx("input",{type:"text",value:h,onChange:k=>m(k.target.value),className:`w-full p-2 border rounded ${N?"text-right":"text-left"}`,required:!0,placeholder:a.enterSpaceName})]}),c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-1 ${N?"text-right":"text-left"}`,children:a.monthlyRent}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",value:g,onChange:k=>p(k.target.value),className:`w-full p-2 border rounded ${N?"text-right pr-12":"text-left pl-12"}`,required:!0,min:"0",step:"0.01",placeholder:"0.00"}),c.jsx("span",{className:`absolute ${N?"right-3":"left-3"} top-2 text-gray-500`,children:"OMR"})]})]})]}),c.jsxs("div",{className:`flex justify-end space-x-2 mt-6 ${N?"space-x-reverse":""}`,children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded hover:bg-gray-100 disabled:bg-gray-50 disabled:text-gray-400",disabled:_,children:a.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:!l||!d||!h||_,children:_?a.saving:n?a.update:a.save})]})]})]})}async function a4e(t,e,r){const{data:n,error:i}=await oe.from("vendor_rentals_history").select("*").eq("owner_business_code",t).eq("month",e).eq("year",r).order("created_at",{ascending:!1});if(i)throw console.error("Error fetching rental history:",i),i;return n||[]}async function s4e(t){const{data:e,error:r}=await oe.from("vendor_rentals_history").insert([{...t,payment_status:"pending"}]).select().single();if(r)throw console.error("Error creating rental history:",r),r;return e}async function o4e(t,e){const{data:r,error:n}=await oe.from("vendor_rentals_history").update({payment_status:e}).eq("id",t).select().single();if(n)throw console.error("Error updating payment status:",n),n;return r}async function l4e(t,e,r,n,i){try{const{data:a,error:s}=await oe.from("vendor_rentals_history").select("*").eq("owner_business_code",t).eq("vendor_business_code",e).eq("month",n).eq("year",i).eq("payment_status","paid");if(s)throw console.error("Error checking existing payment:",s),new Error("Failed to check existing payment");return(a==null?void 0:a.some(o=>o.branch_name===r&&o.payment_status==="paid"))||!1}catch(a){return console.error("Error in checkExistingPayment:",a),!1}}let x0;const c4e=new Uint8Array(16);function u4e(){if(!x0&&(x0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x0(c4e)}const Sr=[];for(let t=0;t<256;++t)Sr.push((t+256).toString(16).slice(1));function d4e(t,e=0){return Sr[t[e+0]]+Sr[t[e+1]]+Sr[t[e+2]]+Sr[t[e+3]]+"-"+Sr[t[e+4]]+Sr[t[e+5]]+"-"+Sr[t[e+6]]+Sr[t[e+7]]+"-"+Sr[t[e+8]]+Sr[t[e+9]]+"-"+Sr[t[e+10]]+Sr[t[e+11]]+Sr[t[e+12]]+Sr[t[e+13]]+Sr[t[e+14]]+Sr[t[e+15]]}const f4e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),NC={randomUUID:f4e};function h4e(t,e,r){if(NC.randomUUID&&!e&&!t)return NC.randomUUID();t=t||{};const n=t.random||(t.rng||u4e)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,d4e(n)}async function m4e(t){const e=`RENT_${h4e()}`,r=new Date,n=`${t.month}/${t.year}`,i=new Date(t.year,t.month-1,1),a=new Date(t.year,t.month,0),{error:s}=await oe.from("vendor_transactions").insert({transaction_id:e,transaction_type:"rental",transaction_date:r.toISOString(),business_code:t.owner_business_code,business_name:t.owner_business_name,vendor_code:t.vendor_business_code,vendor_name:t.vendor_business_name,branch_name:t.branch_name,amount:-t.amount,profit:-t.amount,tax_period:n,tax_description:`Rent payment for ${t.branch_name} - ${n}`,status:"completed",rental_start_date:i.toISOString().split("T")[0],rental_end_date:a.toISOString().split("T")[0],rental_period:`${i.toLocaleDateString()} - ${a.toLocaleDateString()}`});if(s)throw console.error("Error recording vendor space payment:",s),new Error("Failed to record vendor payment");return{transactionId:e}}async function p4e({business_code:t,business_name:e,vendor_code:r,vendor_name:n,branch_name:i,amount:a,payment_method:s,transaction_reason:o,cashier_name:l="System"}){const{error:u}=await oe.from("transactions_overall").insert({business_code:t,business_name:e,vendor_code:r,vendor_name:n,branch_name:i,amount:a,payment_method:s,transaction_type:"rental_income",transaction_reason:o||"Vendor Space Rental Payment",currency:"OMR",owner_profit_from_this_transcation:a,details:{type:"vendor_rental",payment_method:s,vendor_details:{code:r,name:n,branch:i}}});if(u)throw console.error("Error recording business rental income:",u),new Error("Failed to record business transaction");if(s==="cash")try{await wS(t,i,l,a,o||"Vendor Space Rental Payment")}catch(d){throw console.error("Error updating cash tracking:",d),new Error("Failed to update cash tracking")}}function g4e({rental:t,month:e,year:r,onClose:n,onSuccess:i}){var v;const{language:a}=_e(),{user:s}=qe(),o=Ru[a],[l,u]=j.useState(()=>{var b;return((b=t.rent_amount)==null?void 0:b.toString())||"0"}),[d,f]=j.useState("cash"),[h,m]=j.useState(!1),[g,p]=j.useState(null),x=async b=>{b.preventDefault();const y=parseFloat(l);if(isNaN(y)||y<=0){p("Please enter a valid amount");return}try{if(m(!0),p(null),await l4e(t.owner_business_code,t.vendor_business_code,t.branch_name,e,r)){p("Payment for this month already exists");return}const w=await u2(t.owner_business_code),N=await s4e({owner_business_code:t.owner_business_code,vendor_business_code:t.vendor_business_code,vendor_business_name:t.vendor_business_name,branch_name:t.branch_name,month:e,year:r,tax_amount:y});await m4e({owner_business_code:t.owner_business_code,owner_business_name:w,vendor_business_code:t.vendor_business_code,vendor_business_name:t.vendor_business_name,branch_name:t.branch_name,amount:y,month:e,year:r});const S=a==="ar"?`دفع إيجار مستلم من ${t.vendor_business_name} لشهر ${e}/${r}`:`Rent payment received from ${t.vendor_business_name} for ${e}/${r}`;await p4e({business_code:t.owner_business_code,business_name:w,vendor_code:t.vendor_business_code,vendor_name:t.vendor_business_name,branch_name:t.branch_name,amount:y,payment_method:d,transaction_reason:S,cashier_name:(s==null?void 0:s.name)||"Unknown User"}),await o4e(N.id,"paid"),i(),n()}catch(_){console.error("Error processing payment:",_),p((_==null?void 0:_.message)||"Failed to process payment")}finally{m(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:o.pay_rent}),c.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",disabled:h,children:c.jsx(Xa,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:x,className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:[o.paymentFor,": ",c.jsx("span",{className:"font-medium",children:t.vendor_business_name})]}),c.jsxs("p",{className:"text-sm text-gray-600",children:[o.branch,": ",c.jsx("span",{className:"font-medium",children:t.branch_name})]}),c.jsxs("p",{className:"text-sm text-gray-600",children:[o.space,": ",c.jsx("span",{className:"font-medium",children:t.space_name})]}),c.jsxs("p",{className:"text-sm text-gray-600",children:[o.period,": ",c.jsx("span",{className:"font-medium",children:new Date(r,e-1).toLocaleString("default",{month:"long",year:"numeric"})})]}),c.jsxs("p",{className:"text-sm text-gray-600",children:[o.monthly_rent,": ",c.jsxs("span",{className:"font-medium",children:[((v=t.rent_amount)==null?void 0:v.toFixed(2))||"0.00"," OMR"]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o.amount}),c.jsx("input",{type:"number",value:l,onChange:b=>u(b.target.value),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:o.enterAmount,required:!0,min:"0",step:"0.01",disabled:h})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o.paymentMethod}),c.jsxs("select",{value:d,onChange:b=>f(b.target.value),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:h,required:!0,children:[c.jsx("option",{value:"cash",children:o.cash}),c.jsx("option",{value:"card",children:o.card}),c.jsx("option",{value:"online",children:o.online})]})]})]})]}),g&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-600 rounded text-sm",children:g}),c.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border rounded hover:bg-gray-50 disabled:bg-gray-100",disabled:h,children:o.cancel}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-blue-300",disabled:h,children:h?o.processing:o.pay})]})]})]})})}function x4e({businessCode:t,onEdit:e,onDeleted:r,refreshTrigger:n=0,selectedMonth:i,selectedYear:a}){const{language:s}=_e(),o=Ru[s],[l,u]=j.useState([]),[d,f]=j.useState(new Set),[h,m]=j.useState(!0),[g,p]=j.useState(null),[x,v]=j.useState(null),[b,y]=j.useState(null),_=j.useCallback(async()=>{try{m(!0),p(null);const S=await e4e(t);u(S);const{data:E}=await oe.from("vendor_rentals_history").select("vendor_business_code, branch_name").eq("owner_business_code",t).eq("month",i).eq("year",a).eq("payment_status","paid"),T=new Set((E||[]).map(P=>`${P.vendor_business_code}-${P.branch_name}`));f(T)}catch(S){console.error("Error loading rentals:",S),p("Failed to load vendor spaces")}finally{m(!1)}},[t,i,a]);j.useEffect(()=>{_()},[_,n]);const w=S=>d.has(`${S.vendor_business_code}-${S.branch_name}`),N=async S=>{if(confirm("Are you sure you want to delete this space?"))try{v(S),await n4e(S),u(l.filter(E=>E.rental_id!==S)),r==null||r()}catch(E){console.error("Error deleting rental:",E),p("Failed to delete space")}finally{v(null)}};return h&&l.length===0?c.jsx("div",{className:"bg-white rounded-lg shadow",children:c.jsx("div",{className:"flex items-center justify-center p-6",children:c.jsx("div",{className:"text-gray-600",children:o.loading})})}):g?c.jsx("div",{className:"bg-white rounded-lg shadow",children:c.jsxs("div",{className:"p-4 text-red-600 flex justify-between items-center",children:[c.jsx("span",{children:g}),c.jsx("button",{onClick:()=>_(),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1 rounded",children:"Retry"})]})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:`px-6 py-3 ${s==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4`,children:o.vendor}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${s==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6`,children:o.branch}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${s==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6`,children:o.spaceName}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${s==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6`,children:o.monthlyRent}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${s==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6`,children:o.assignedDate}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${s==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-28`,children:o.actions})]})}),c.jsxs("tbody",{className:`bg-white divide-y divide-gray-200 ${h?"opacity-50":""}`,children:[l.map(S=>{var E;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${s==="ar"?"text-right":"text-left"}`,children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.vendor_business_name})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${s==="ar"?"text-right":"text-left"}`,children:c.jsx("div",{className:"text-sm text-gray-900",children:S.branch_name})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${s==="ar"?"text-right":"text-left"}`,children:c.jsx("div",{className:"text-sm text-gray-900",children:S.space_name})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${s==="ar"?"text-right":"text-left"}`,children:c.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[((E=S.rent_amount)==null?void 0:E.toFixed(2))||"0.00"," OMR"]})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${s==="ar"?"text-right":"text-left"}`,children:c.jsx("div",{className:"text-sm text-gray-900",children:$e(new Date(S.created_at),"MMM d, yyyy")})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${s==="ar"?"text-right":"text-left"}`,children:c.jsxs("div",{className:`flex ${s==="ar"?"justify-end space-x-reverse":"justify-start"} space-x-2`,children:[c.jsx("button",{onClick:()=>e==null?void 0:e(S),className:"px-3 py-1 text-xs font-medium text-indigo-700 bg-indigo-50 rounded-full hover:bg-indigo-100 disabled:opacity-50",title:o.edit,disabled:h,children:o.edit}),c.jsx("button",{onClick:()=>N(S.rental_id),className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-50 rounded-full hover:bg-red-100 disabled:opacity-50",title:o.delete,disabled:x===S.rental_id||h,children:o.delete}),!w(S)&&c.jsx("button",{onClick:()=>y(S),className:"px-3 py-1 text-xs font-medium text-green-700 bg-green-50 rounded-full hover:bg-green-100 disabled:opacity-50",title:o.payRent,disabled:h,children:o.pay})]})})]},S.rental_id)}),l.length===0&&!h&&c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-sm text-gray-500",children:o.noSpacesFound})})]})]})})}),b&&c.jsx(g4e,{rental:b,month:i,year:a,onClose:()=>y(null),onSuccess:()=>{y(null),r==null||r()}})]})}function v4e({businessCode:t,onMonthYearChange:e,refreshTrigger:r=0}){const{language:n}=_e(),i=Ru[n],[a,s]=j.useState([]),[o,l]=j.useState(!0),[u,d]=j.useState(null),f=new Date,[h,m]=j.useState(f.getMonth()+1),[g,p]=j.useState(f.getFullYear()),x=j.useMemo(()=>{const y=f.getFullYear();return Array.from({length:4},(_,w)=>y-2+w).sort((_,w)=>w-_)},[f]);j.useEffect(()=>{v(),e==null||e(h,g)},[t,h,g,r]);const v=async()=>{try{l(!0),d(null);const y=await a4e(t,h,g);s(y)}catch(y){console.error("Error loading rental history:",y),d("Failed to load rental history")}finally{l(!1)}},b=y=>{switch(y){case"paid":return"text-green-600 bg-green-50";case"pending":return"text-yellow-600 bg-yellow-50";case"overdue":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}};return o&&a.length===0?c.jsx("div",{className:"bg-white rounded-lg shadow",children:c.jsx("div",{className:"flex items-center justify-center p-6",children:c.jsx("div",{className:"text-gray-600",children:i.loading})})}):c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"p-4 border-b",children:c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:i.paymentHistory}),c.jsxs("div",{className:`flex ${n==="ar"?"space-x-reverse":""} space-x-4`,children:[c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium text-gray-700 mb-1 ${n==="ar"?"text-right":"text-left"}`,children:i.month}),c.jsx("select",{value:h,onChange:y=>m(parseInt(y.target.value)),className:`p-2 border rounded w-32 ${n==="ar"?"text-right":"text-left"}`,children:Array.from({length:12},(y,_)=>_+1).map(y=>c.jsx("option",{value:y,children:$e(new Date(2e3,y-1),"MMMM")},y))})]}),c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium text-gray-700 mb-1 ${n==="ar"?"text-right":"text-left"}`,children:i.year}),c.jsx("select",{value:g,onChange:y=>p(parseInt(y.target.value)),className:`p-2 border rounded w-24 ${n==="ar"?"text-right":"text-left"}`,children:x.map(y=>c.jsx("option",{value:y,children:y},y))})]})]})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:`px-6 py-3 ${n==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4`,children:i.vendor}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${n==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6`,children:i.branch}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${n==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6`,children:i.amount}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${n==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6`,children:i.status}),c.jsx("th",{scope:"col",className:`px-6 py-3 ${n==="ar"?"text-right":"text-left"} text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6`,children:i.paymentDate})]})}),c.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[a.map(y=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${n==="ar"?"text-right":"text-left"}`,children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.vendor_business_name})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${n==="ar"?"text-right":"text-left"}`,children:c.jsx("div",{className:"text-sm text-gray-900",children:y.branch_name})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${n==="ar"?"text-right":"text-left"}`,children:c.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[y.tax_amount.toFixed(2)," OMR"]})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${n==="ar"?"text-right":"text-left"}`,children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b(y.payment_status)}`,children:i[y.payment_status]})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${n==="ar"?"text-right":"text-left"}`,children:c.jsx("div",{className:"text-sm text-gray-900",children:$e(new Date(y.created_at),"MMM d, yyyy")})})]},y.id)),a.length===0&&!o&&c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:`px-6 py-4 text-center text-sm text-gray-500 ${n==="ar"?"text-right":"text-left"}`,children:i.noPaymentsFound})})]})]})})]})}async function y4e(t,e,r){const{data:n}=await oe.from("vendor_rentals").select("rental_id, rent_amount").eq("owner_business_code",t),{data:i}=await oe.from("vendor_rentals_history").select("*").eq("owner_business_code",t).eq("month",e).eq("year",r),a=(n==null?void 0:n.length)||0,s=(i==null?void 0:i.filter(f=>f.payment_status==="paid").length)||0,o=a-s,l=(i==null?void 0:i.reduce((f,h)=>h.payment_status==="paid"?f+(h.tax_amount||0):f,0))||0,u=(n==null?void 0:n.reduce((f,h)=>f+(h.rent_amount||0),0))||0,d=u-l;return{totalSpaces:a,totalPaid:s,totalPending:o,totalAmount:u,paidAmount:l,pendingAmount:d}}function b4e({businessCode:t,month:e,year:r,refreshTrigger:n=0}){const{language:i}=_e(),a=Ru[i],[s,o]=j.useState(null),[l,u]=j.useState(!0),[d,f]=j.useState(null);j.useEffect(()=>{h()},[t,e,r,n]);const h=async()=>{try{u(!0),f(null);const p=await y4e(t,e,r);o(p)}catch(p){console.error("Error loading rental stats:",p),f(a.errorLoadingStats)}finally{u(!1)}};if(l)return c.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:c.jsx("div",{className:"text-gray-600 text-center",children:a.loading})});if(d||!s)return c.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:c.jsx("div",{className:"text-red-600 text-center",children:d||a.errorLoadingStats})});const m=i==="ar",g=[{icon:pu,label:a.totalSpaces,value:s.totalSpaces,color:"text-blue-600",bgColor:"bg-blue-100"},{icon:q7,label:a.paidSpaces,value:s.totalPaid,subValue:`${s.paidAmount.toFixed(2)} OMR`,color:"text-green-600",bgColor:"bg-green-100"},{icon:K7,label:a.pendingSpaces,value:s.totalPending,subValue:`${s.pendingAmount.toFixed(2)} OMR`,color:"text-yellow-600",bgColor:"bg-yellow-100"},{icon:kf,label:a.totalAmount,value:`${s.totalAmount.toFixed(2)} OMR`,color:"text-indigo-600",bgColor:"bg-indigo-100"}];return c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:g.map((p,x)=>c.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:c.jsxs("div",{className:`flex items-center ${m?"space-x-reverse":""} space-x-3`,children:[c.jsx("div",{className:`p-2 rounded-lg ${p.bgColor}`,children:c.jsx(p.icon,{className:`w-6 h-6 ${p.color}`})}),c.jsxs("div",{className:`flex flex-col ${m?"text-right":"text-left"}`,children:[c.jsx("span",{className:"text-sm text-gray-600",children:p.label}),c.jsx("span",{className:`text-xl font-semibold ${p.color}`,children:p.value}),p.subValue&&c.jsx("span",{className:"text-sm text-gray-500",children:p.subValue})]})]})},x))})}function w4e(){const{user:t}=qe(),{language:e}=_e(),r=Ru[e],[n,i]=j.useState(!1),[a,s]=j.useState(null),[o,l]=j.useState(0),[u,d]=j.useState(new Date().getMonth()+1),[f,h]=j.useState(new Date().getFullYear()),m=b=>{s(b),i(!0)},g=()=>{i(!1),s(null)},p=()=>{g(),l(b=>b+1)},x=(b,y)=>{d(b),h(y)},v=e==="ar";return c.jsx("div",{className:"p-6 max-w-7xl mx-auto",dir:v?"rtl":"ltr",children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:r.title}),c.jsx("button",{onClick:()=>{s(null),i(!0)},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:r.addNew})]}),c.jsx(b4e,{businessCode:(t==null?void 0:t.businessCode)||"",month:u,year:f,refreshTrigger:o})]}),n&&c.jsx("div",{className:"mb-8",children:c.jsx(i4e,{businessCode:(t==null?void 0:t.businessCode)||"",onClose:g,onSuccess:p,editingRental:a})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:r.activeSpaces}),c.jsx(x4e,{businessCode:(t==null?void 0:t.businessCode)||"",onEdit:m,onDeleted:p,refreshTrigger:o,selectedMonth:u,selectedYear:f})]}),c.jsx("div",{children:c.jsx(v4e,{businessCode:(t==null?void 0:t.businessCode)||"",onMonthYearChange:x,refreshTrigger:o})})]})})}function _4e(){const{language:t}=_e(),e=d2[t],r=mu(),[n,i]=j.useState(""),[a,s]=j.useState(!1),[o,l]=j.useState(null),[u,d]=j.useState(!1),f=async h=>{h.preventDefault(),l(null),s(!0);try{const m="https://generalpos.netlify.app/",{error:g}=await oe.auth.resetPasswordForEmail(n,{redirectTo:`${m}/update-password`});if(g)throw g;d(!0),setTimeout(()=>{r("/login")},3e3)}catch(m){l(m.message||e.unexpectedError)}finally{s(!1)}};return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx(Yt,{className:"w-12 h-12 text-indigo-600"})}),c.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:e.resetPassword})]}),c.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:c.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:u?c.jsx("div",{className:"rounded-md bg-green-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(c3,{className:"h-5 w-5 text-green-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-green-700",children:e.resetPasswordSuccess})})]})}):c.jsxs("form",{className:"space-y-6",onSubmit:f,children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:e.email}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})})]}),o&&c.jsx("div",{className:"rounded-md bg-red-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(il,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:a,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:a?e.sending:e.sendResetLink})})]})})})]})}function S4e(){const{language:t}=_e(),e=d2[t],r=mu(),[n,i]=j.useState(""),[a,s]=j.useState(""),[o,l]=j.useState(!1),[u,d]=j.useState(null),[f,h]=j.useState(!1);j.useEffect(()=>{(async()=>{const{data:{session:p}}=await oe.auth.getSession();p||r("/login")})()},[r]);const m=async g=>{if(g.preventDefault(),d(null),n!==a){d(e.passwordsDoNotMatch);return}if(n.length<6){d(e.passwordTooShort);return}l(!0);try{const{error:p}=await oe.auth.updateUser({password:n});if(p)throw p;h(!0),setTimeout(()=>{r("/login")},3e3)}catch(p){d(p.message||e.unexpectedError)}finally{l(!1)}};return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",dir:t==="ar"?"rtl":"ltr",children:[c.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx(Yt,{className:"w-12 h-12 text-indigo-600"})}),c.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:e.resetYourPassword})]}),c.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:c.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:f?c.jsx("div",{className:"rounded-md bg-green-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(c3,{className:"h-5 w-5 text-green-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-green-700",children:e.passwordResetSuccess})})]})}):c.jsxs("form",{className:"space-y-6",onSubmit:m,children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:e.newPassword}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"new-password",name:"new-password",type:"password",required:!0,value:n,onChange:g=>i(g.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:e.confirmPassword}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,value:a,onChange:g=>s(g.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})})]}),u&&c.jsx("div",{className:"rounded-md bg-red-50 p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(il,{className:"h-5 w-5 text-red-400"})}),c.jsx("div",{className:"mr-3",children:c.jsx("p",{className:"text-sm text-red-700",children:u})})]})}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:o?e.resettingPassword:e.resetPassword})})]})})})]})}function N4e({branches:t,selectedBranch:e,onBranchChange:r}){const{language:n}=_e();return c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:n==="ar"?"اختر الفرع":"Select Branch"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(i=>c.jsx("button",{onClick:()=>r(i.branch_name),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${e===i.branch_name?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:i.branch_name},i.branch_name))})]})}function j4e({selectedBranch:t,onBranchChange:e}){const{branches:r}=tr();_e();const n=r.filter(i=>i.is_active);return c.jsx("div",{className:"mb-6",children:c.jsx(N4e,{branches:n,selectedBranch:t,onBranchChange:e})})}const E4e=["cash","card","online"];function T4e({onSubmit:t,selectedBranch:e}){const{language:r}=_e(),[n,i]=X.useState({transaction_type:"deposit",amount:0,payment_method:"cash",transaction_reason:"",branch_name:e||"",details:{}});X.useEffect(()=>{i(o=>({...o,branch_name:e||""}))},[e]);const a=o=>{o.preventDefault(),e&&t(n)},s=o=>{const{name:l,value:u}=o.target;i(d=>({...d,[l]:u}))};return c.jsxs("form",{onSubmit:a,className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r==="ar"?"نوع المعاملة":"Transaction Type"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("label",{className:"inline-flex items-center",children:[c.jsx("input",{type:"radio",name:"transaction_type",value:"deposit",checked:n.transaction_type==="deposit",onChange:s,className:"form-radio text-blue-600"}),c.jsx("span",{className:"mr-2",children:r==="ar"?"إيداع":"Deposit"})]}),c.jsxs("label",{className:"inline-flex items-center",children:[c.jsx("input",{type:"radio",name:"transaction_type",value:"withdraw",checked:n.transaction_type==="withdraw",onChange:s,className:"form-radio text-blue-600"}),c.jsx("span",{className:"mr-2",children:r==="ar"?"سحب":"Withdraw"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r==="ar"?"المبلغ":"Amount"}),c.jsx("input",{type:"number",name:"amount",value:n.amount,onChange:s,min:"0",step:"0.001",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r==="ar"?"طريقة الدفع":"Payment Method"}),c.jsx("select",{name:"payment_method",value:n.payment_method,onChange:s,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:E4e.map(o=>c.jsx("option",{value:o,children:r==="ar"?o==="cash"?"نقداً":o==="card"?"بطاقة":"اونلاين":o},o))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r==="ar"?"الملاحظات / السبب":"Notes / Reason"}),c.jsx("textarea",{name:"transaction_reason",value:n.transaction_reason,onChange:s,required:!0,rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:!e,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white 
            ${e?"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-400 cursor-not-allowed"}`,children:r==="ar"?"حفظ المعاملة":"Save Transaction"})})]})}function P4e({type:t,message:e,onClose:r}){return _e(),X.useEffect(()=>{const n=setTimeout(()=>{r()},3e3);return()=>clearTimeout(n)},[r]),c.jsxs("div",{className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg ${t==="success"?"bg-green-500":"bg-red-500"} text-white flex items-center gap-2 z-50`,children:[c.jsx("span",{children:e}),c.jsx("button",{onClick:r,className:"ml-2 text-white hover:text-gray-200 focus:outline-none",children:"✕"})]})}function k4e(){const{language:t}=_e(),{user:e}=qe(),{getCurrentBranch:r,branches:n,businessCode:i}=tr(),[a,s]=j.useState(null),[o,l]=j.useState(null);j.useEffect(()=>{if((e==null?void 0:e.role)==="cashier"){const f=r();s((f==null?void 0:f.branch_name)||null)}else{const f=n.filter(h=>h.is_active);f.length>0&&s(f[0].branch_name)}},[e==null?void 0:e.role,n]);const u=f=>{s(f)},d=async f=>{if(!(!a||!i||!(e!=null&&e.name)))try{const h=await u2(i),m=f.transaction_type==="withdraw"?-Math.abs(Number(f.amount)):Math.abs(Number(f.amount)),g={business_code:i,business_name:h,branch_name:a,payment_method:f.payment_method,transaction_type:f.transaction_type,transaction_reason:f.transaction_reason||"",amount:m,owner_profit_from_this_transcation:m,currency:"OMR",transaction_date:new Date().toISOString(),details:{notes:f.transaction_reason||""}};await hc(g),f.payment_method==="cash"&&await wS(i,a,e.name,m,f.transaction_reason||(f.transaction_type==="deposit"?"Cash Addition":"Cash Removal")),l({type:"success",message:t==="ar"?"تم حفظ المعاملة بنجاح":"Transaction saved successfully"})}catch(h){console.error("Error creating transaction:",h),l({type:"error",message:t==="ar"?"حدث خطأ أثناء حفظ المعاملة":"Error saving transaction"})}};return c.jsxs("div",{className:"p-6",children:[c.jsx("h1",{className:"text-2xl font-semibold mb-6",children:t==="ar"?"المصروفات العامة":"General Expenses"}),(e==null?void 0:e.role)!=="cashier"&&c.jsx(j4e,{selectedBranch:a,onBranchChange:u}),c.jsx("div",{className:"mt-6",children:c.jsx(T4e,{selectedBranch:a,onSubmit:d})}),o&&c.jsx(P4e,{type:o.type,message:o.message,onClose:()=>l(null)})]})}const Fe=t=>typeof t=="string",gd=()=>{let t,e;const r=new Promise((n,i)=>{t=n,e=i});return r.resolve=t,r.reject=e,r},jC=t=>t==null?"":""+t,A4e=(t,e,r)=>{t.forEach(n=>{e[n]&&(r[n]=e[n])})},O4e=/###/g,EC=t=>t&&t.indexOf("###")>-1?t.replace(O4e,"."):t,TC=t=>!t||Fe(t),cf=(t,e,r)=>{const n=Fe(e)?e.split("."):e;let i=0;for(;i<n.length-1;){if(TC(t))return{};const a=EC(n[i]);!t[a]&&r&&(t[a]=new r),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return TC(t)?{}:{obj:t,k:EC(n[i])}},PC=(t,e,r)=>{const{obj:n,k:i}=cf(t,e,Object);if(n!==void 0||e.length===1){n[i]=r;return}let a=e[e.length-1],s=e.slice(0,e.length-1),o=cf(t,s,Object);for(;o.obj===void 0&&s.length;)a=`${s[s.length-1]}.${a}`,s=s.slice(0,s.length-1),o=cf(t,s,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${a}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${a}`]=r},C4e=(t,e,r,n)=>{const{obj:i,k:a}=cf(t,e,Object);i[a]=i[a]||[],i[a].push(r)},Bg=(t,e)=>{const{obj:r,k:n}=cf(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},M4e=(t,e,r)=>{const n=Bg(t,r);return n!==void 0?n:Bg(e,r)},LF=(t,e,r)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?Fe(t[n])||t[n]instanceof String||Fe(e[n])||e[n]instanceof String?r&&(t[n]=e[n]):LF(t[n],e[n],r):t[n]=e[n]);return t},Ml=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var D4e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const $4e=t=>Fe(t)?t.replace(/[&<>"'\/]/g,e=>D4e[e]):t;class I4e{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const R4e=[" ",",","?","!",";"],F4e=new I4e(20),L4e=(t,e,r)=>{e=e||"",r=r||"";const n=R4e.filter(s=>e.indexOf(s)<0&&r.indexOf(s)<0);if(n.length===0)return!0;const i=F4e.getRegExp(`(${n.map(s=>s==="?"?"\\?":s).join("|")})`);let a=!i.test(t);if(!a){const s=t.indexOf(r);s>0&&!i.test(t.substring(0,s))&&(a=!0)}return a},a_=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const n=e.split(r);let i=t;for(let a=0;a<n.length;){if(!i||typeof i!="object")return;let s,o="";for(let l=a;l<n.length;++l)if(l!==a&&(o+=r),o+=n[l],s=i[o],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&l<n.length-1)continue;a+=l-a+1;break}i=s}return i},Ug=t=>t==null?void 0:t.replace("_","-"),B4e={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var r,n;(n=(r=console==null?void 0:console[t])==null?void 0:r.apply)==null||n.call(r,console,e)}};class zg{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,r)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=e||B4e,this.options=r,this.debug=r.debug}log(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"log","",!0)}warn(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","",!0)}error(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"error","")}deprecate(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,n,i){return i&&!this.debug?null:(Fe(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new zg(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new zg(this.logger,e)}}var Yi=new zg;class Nv{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(r)||0;this.observers[n].set(r,i+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(s=>{let[o,l]=s;for(let u=0;u<l;u++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(s=>{let[o,l]=s;for(let u=0;u<l;u++)o.apply(o,[e,...n])})}}class kC extends Nv{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,n){var u,d;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,s=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,r],n&&(Array.isArray(n)?o.push(...n):Fe(n)&&a?o.push(...n.split(a)):o.push(n)));const l=Bg(this.data,o);return!l&&!r&&!n&&e.indexOf(".")>-1&&(e=o[0],r=o[1],n=o.slice(2).join(".")),l||!s||!Fe(n)?l:a_((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[r],n,a)}addResource(e,r,n,i){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let o=[e,r];n&&(o=o.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(o=e.split("."),i=r,r=o[1]),this.addNamespaces(r),PC(this.data,o,i),a.silent||this.emit("added",e,r,n,i)}addResources(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in n)(Fe(n[a])||Array.isArray(n[a]))&&this.addResource(e,r,a,n[a],{silent:!0});i.silent||this.emit("added",e,r,n)}addResourceBundle(e,r,n,i,a){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,r];e.indexOf(".")>-1&&(o=e.split("."),i=n,n=r,r=o[1]),this.addNamespaces(r);let l=Bg(this.data,o)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?LF(l,n,a):l={...l,...n},PC(this.data,o,l),s.silent||this.emit("added",e,r,n)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(i=>r[i]&&Object.keys(r[i]).length>0)}toJSON(){return this.data}}var BF={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,n,i){return t.forEach(a=>{var s;e=((s=this.processors[a])==null?void 0:s.process(e,r,n,i))??e}),e}};const AC={},OC=t=>!Fe(t)&&typeof t!="boolean"&&typeof t!="number";class Wg extends Nv{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),A4e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Yi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,r);return(n==null?void 0:n.res)!==void 0}extractFromKey(e,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let a=r.ns||this.options.defaultNS||[];const s=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!L4e(e,n,i);if(s&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:Fe(a)?[a]:a};const u=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),e=u.join(i)}return{key:e,namespaces:Fe(a)?[a]:a}}translate(e,r,n){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:s,namespaces:o}=this.extractFromKey(e[e.length-1],r),l=o[o.length-1],u=r.lng||this.language,d=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((u==null?void 0:u.toLowerCase())==="cimode"){if(d){const A=r.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${A}${s}`,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${A}${s}`}return i?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:s}const f=this.resolve(e,r);let h=f==null?void 0:f.res;const m=(f==null?void 0:f.usedKey)||s,g=(f==null?void 0:f.exactUsedKey)||s,p=["[object Number]","[object Function]","[object RegExp]"],x=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,b=r.count!==void 0&&!Fe(r.count),y=Wg.hasDefaultValue(r),_=b?this.pluralResolver.getSuffix(u,r.count,r):"",w=r.ordinal&&b?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",N=b&&!r.ordinal&&r.count===0,S=N&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${_}`]||r[`defaultValue${w}`]||r.defaultValue;let E=h;v&&!h&&y&&(E=S);const T=OC(E),P=Object.prototype.toString.apply(E);if(v&&E&&T&&p.indexOf(P)<0&&!(Fe(x)&&Array.isArray(E))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const A=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,E,{...r,ns:o}):`key '${s} (${this.language})' returned an object instead of string.`;return i?(f.res=A,f.usedParams=this.getUsedParamsDetails(r),f):A}if(a){const A=Array.isArray(E),k=A?[]:{},F=A?g:m;for(const H in E)if(Object.prototype.hasOwnProperty.call(E,H)){const M=`${F}${a}${H}`;y&&!h?k[H]=this.translate(M,{...r,defaultValue:OC(S)?S[H]:void 0,joinArrays:!1,ns:o}):k[H]=this.translate(M,{...r,joinArrays:!1,ns:o}),k[H]===M&&(k[H]=E[H])}h=k}}else if(v&&Fe(x)&&Array.isArray(h))h=h.join(x),h&&(h=this.extendTranslation(h,e,r,n));else{let A=!1,k=!1;!this.isValidLookup(h)&&y&&(A=!0,h=S),this.isValidLookup(h)||(k=!0,h=s);const H=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:h,M=y&&S!==h&&this.options.updateMissing;if(k||A||M){if(this.logger.log(M?"updateKey":"missingKey",u,l,s,M?S:h),a){const z=this.resolve(s,{...r,keySeparator:!1});z&&z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let O=[];const L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&L&&L[0])for(let z=0;z<L.length;z++)O.push(L[z]);else this.options.saveMissingTo==="all"?O=this.languageUtils.toResolveHierarchy(r.lng||this.language):O.push(r.lng||this.language);const R=(z,J,W)=>{var G;const C=y&&W!==h?W:H;this.options.missingKeyHandler?this.options.missingKeyHandler(z,l,J,C,M,r):(G=this.backendConnector)!=null&&G.saveMissing&&this.backendConnector.saveMissing(z,l,J,C,M,r),this.emit("missingKey",z,l,J,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?O.forEach(z=>{const J=this.pluralResolver.getSuffixes(z,r);N&&r[`defaultValue${this.options.pluralSeparator}zero`]&&J.indexOf(`${this.options.pluralSeparator}zero`)<0&&J.push(`${this.options.pluralSeparator}zero`),J.forEach(W=>{R([z],s+W,r[`defaultValue${W}`]||S)})}):R(O,s,S))}h=this.extendTranslation(h,e,r,f,n),k&&h===s&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${s}`),(k||A)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${s}`:s,A?h:void 0))}return i?(f.res=h,f.usedParams=this.getUsedParamsDetails(r),f):h}extendTranslation(e,r,n,i,a){var u,d;var s=this;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const f=Fe(e)&&(((d=n==null?void 0:n.interpolation)==null?void 0:d.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(f){const g=e.match(this.interpolator.nestingRegexp);h=g&&g.length}let m=n.replace&&!Fe(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,n.lng||this.language||i.usedLng,n),f){const g=e.match(this.interpolator.nestingRegexp),p=g&&g.length;h<p&&(n.nest=!1)}!n.lng&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var g=arguments.length,p=new Array(g),x=0;x<g;x++)p[x]=arguments[x];return(a==null?void 0:a[0])===p[0]&&!n.context?(s.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${r[0]}`),null):s.translate(...p,r)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=Fe(o)?[o]:o;return e!=null&&(l!=null&&l.length)&&n.applyPostProcessor!==!1&&(e=BF.handle(l,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i,a,s,o;return Fe(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(l,r),d=u.key;i=d;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const h=r.count!==void 0&&!Fe(r.count),m=h&&!r.ordinal&&r.count===0,g=r.context!==void 0&&(Fe(r.context)||typeof r.context=="number")&&r.context!=="",p=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);f.forEach(x=>{var v,b;this.isValidLookup(n)||(o=x,!AC[`${p[0]}-${x}`]&&((v=this.utils)!=null&&v.hasLoadedNamespace)&&!((b=this.utils)!=null&&b.hasLoadedNamespace(o))&&(AC[`${p[0]}-${x}`]=!0,this.logger.warn(`key "${i}" for languages "${p.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(y=>{var N;if(this.isValidLookup(n))return;s=y;const _=[d];if((N=this.i18nFormat)!=null&&N.addLookupKeys)this.i18nFormat.addLookupKeys(_,d,y,x,r);else{let S;h&&(S=this.pluralResolver.getSuffix(y,r.count,r));const E=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(_.push(d+S),r.ordinal&&S.indexOf(T)===0&&_.push(d+S.replace(T,this.options.pluralSeparator)),m&&_.push(d+E)),g){const P=`${d}${this.options.contextSeparator}${r.context}`;_.push(P),h&&(_.push(P+S),r.ordinal&&S.indexOf(T)===0&&_.push(P+S.replace(T,this.options.pluralSeparator)),m&&_.push(P+E))}}let w;for(;w=_.pop();)this.isValidLookup(n)||(a=w,n=this.getResource(y,x,w,r))}))})}),{res:n,usedKey:i,exactUsedKey:a,usedLng:s,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,n){var a;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,r,n,i):this.resourceStore.getResource(e,r,n,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Fe(e.replace);let i=n?e.replace:e;if(n&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const a of r)delete i[a]}return i}static hasDefaultValue(e){const r="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r===n.substring(0,r.length)&&e[n]!==void 0)return!0;return!1}}class CC{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Yi.create("languageUtils")}getScriptPartFromCode(e){if(e=Ug(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=Ug(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(Fe(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(n=>{if(r)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(r=i)}),!r&&this.options.supportedLngs&&e.forEach(n=>{if(r)return;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(a=>{if(a===i)return a;if(!(a.indexOf("-")<0&&i.indexOf("-")<0)&&(a.indexOf("-")>0&&i.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===i||a.indexOf(i)===0&&i.length>1))return a})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),Fe(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}toResolveHierarchy(e,r){const n=this.getFallbackCodes(r||this.options.fallbackLng||[],e),i=[],a=s=>{s&&(this.isSupportedCode(s)?i.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Fe(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Fe(e)&&a(this.formatLanguageCode(e)),n.forEach(s=>{i.indexOf(s)<0&&a(this.formatLanguageCode(s))}),i}}const MC={zero:0,one:1,two:2,few:3,many:4,other:5},DC={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class U4e{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=r,this.logger=Yi.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=Ug(e==="dev"?"en":e),i=r.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:n,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let s;try{s=new Intl.PluralRules(n,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),DC;if(!e.match(/-|_/))return DC;const l=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(l,r)}return this.pluralRulesCache[a]=s,s}needsPlural(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(i=>`${r}${i}`)}getSuffixes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((i,a)=>MC[i]-MC[a]).map(i=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,n);return i?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,n))}}const $C=function(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=M4e(t,e,r);return!a&&i&&Fe(r)&&(a=a_(t,r,n),a===void 0&&(a=a_(e,r,n))),a},tb=t=>t.replace(/\$/g,"$$$$");class z4e{constructor(){var r;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Yi.create("interpolator"),this.options=e,this.format=((r=e==null?void 0:e.interpolation)==null?void 0:r.format)||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:i,prefix:a,prefixEscaped:s,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:h,nestingPrefixEscaped:m,nestingSuffix:g,nestingSuffixEscaped:p,nestingOptionsSeparator:x,maxReplaces:v,alwaysFormat:b}=e.interpolation;this.escape=r!==void 0?r:$4e,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Ml(a):s||"{{",this.suffix=o?Ml(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=h?Ml(h):m||Ml("$t("),this.nestingSuffix=g?Ml(g):p||Ml(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=v||1e3,this.alwaysFormat=b!==void 0?b:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,n)=>(r==null?void 0:r.source)===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,n,i){var m;let a,s,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const b=$C(r,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,n,{...i,...r,interpolationkey:g}):b}const p=g.split(this.formatSeparator),x=p.shift().trim(),v=p.join(this.formatSeparator).trim();return this.format($C(r,l,x,this.options.keySeparator,this.options.ignoreJSONStructure),v,n,{...i,...r,interpolationkey:x})};this.resetRegExp();const d=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,f=((m=i==null?void 0:i.interpolation)==null?void 0:m.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>tb(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?tb(this.escape(g)):tb(g)}].forEach(g=>{for(o=0;a=g.regex.exec(e);){const p=a[1].trim();if(s=u(p),s===void 0)if(typeof d=="function"){const v=d(e,a,i);s=Fe(v)?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,p))s="";else if(f){s=a[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),s="";else!Fe(s)&&!this.useRawValueToEscape&&(s=jC(s));const x=g.safeValue(s);if(e=e.replace(a[0],x),f?(g.regex.lastIndex+=s.length,g.regex.lastIndex-=a[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,a,s;const o=(l,u)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const f=l.split(new RegExp(`${d}[ ]*{`));let h=`{${f[1]}`;l=f[0],h=this.interpolate(h,s);const m=h.match(/'/g),g=h.match(/"/g);(((m==null?void 0:m.length)??0)%2===0&&!g||g.length%2!==0)&&(h=h.replace(/'/g,'"'));try{s=JSON.parse(h),u&&(s={...u,...s})}catch(p){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,p),`${l}${d}${h}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];s={...n},s=s.replace&&!Fe(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const d=i[1].split(this.formatSeparator).map(f=>f.trim());i[1]=d.shift(),l=d,u=!0}if(a=r(o.call(this,i[1].trim(),s),s),a&&i[0]===e&&!Fe(a))return a;Fe(a)||(a=jC(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),u&&(a=l.reduce((d,f)=>this.format(d,f,n.lng,{...n,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const W4e=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);e==="currency"&&i.indexOf(":")<0?r.currency||(r.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?r.range||(r.range=i.trim()):i.split(";").forEach(s=>{if(s){const[o,...l]=s.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),d=o.trim();r[d]||(r[d]=u),u==="false"&&(r[d]=!1),u==="true"&&(r[d]=!0),isNaN(u)||(r[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},Dl=t=>{const e={};return(r,n,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const s=n+JSON.stringify(a);let o=e[s];return o||(o=t(Ug(n),i),e[s]=o),o(r)}};class V4e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Yi.create("formatter"),this.options=e,this.formats={number:Dl((r,n)=>{const i=new Intl.NumberFormat(r,{...n});return a=>i.format(a)}),currency:Dl((r,n)=>{const i=new Intl.NumberFormat(r,{...n,style:"currency"});return a=>i.format(a)}),datetime:Dl((r,n)=>{const i=new Intl.DateTimeFormat(r,{...n});return a=>i.format(a)}),relativetime:Dl((r,n)=>{const i=new Intl.RelativeTimeFormat(r,{...n});return a=>i.format(a,n.range||"day")}),list:Dl((r,n)=>{const i=new Intl.ListFormat(r,{...n});return a=>i.format(a)})},this.init(e)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=r.interpolation.formatSeparator||","}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Dl(r)}format(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=r.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(o=>o.indexOf(")")>-1)){const o=a.findIndex(l=>l.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,o)].join(this.formatSeparator)}return a.reduce((o,l)=>{var f;const{formatName:u,formatOptions:d}=W4e(l);if(this.formats[u]){let h=o;try{const m=((f=i==null?void 0:i.formatParams)==null?void 0:f[i.interpolationkey])||{},g=m.locale||m.lng||i.locale||i.lng||n;h=this.formats[u](o,g,{...d,...i,...m})}catch(m){this.logger.warn(m)}return h}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const H4e=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class q4e extends Nv{constructor(e,r,n){var a,s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=Yi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(s=(a=this.backend)==null?void 0:a.init)==null||s.call(a,n,i.backend,i)}queueLoad(e,r,n,i){const a={},s={},o={},l={};return e.forEach(u=>{let d=!0;r.forEach(f=>{const h=`${u}|${f}`;!n.reload&&this.store.hasResourceBundle(u,f)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?s[h]===void 0&&(s[h]=!0):(this.state[h]=1,d=!1,s[h]===void 0&&(s[h]=!0),a[h]===void 0&&(a[h]=!0),l[f]===void 0&&(l[f]=!0)))}),d||(o[u]=!0)}),(Object.keys(a).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(s),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,r,n){const i=e.split("|"),a=i[0],s=i[1];r&&this.emit("failedLoading",a,s,r),!r&&n&&this.store.addResourceBundle(a,s,n,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&n&&(this.state[e]=0);const o={};this.queue.forEach(l=>{C4e(l.loaded,[a],s),H4e(l,e),r&&l.errors.push(r),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const d=l.loaded[u];d.length&&d.forEach(f=>{o[u][f]===void 0&&(o[u][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:n,tried:i,wait:a,callback:s});return}this.readingCalls++;const o=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,n,i+1,a*2,s)},a);return}s(u,d)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const u=l(e,r);u&&typeof u.then=="function"?u.then(d=>o(null,d)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,r,o)}prepareLoading(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Fe(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Fe(r)&&(r=[r]);const a=this.queueLoad(e,r,n,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(s=>{this.loadOne(s)})}load(e,r,n){this.prepareLoading(e,r,{},n)}reload(e,r,n){this.prepareLoading(e,r,{reload:!0},n)}loadOne(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),i=n[0],a=n[1];this.read(i,a,"read",void 0,void 0,(s,o)=>{s&&this.logger.warn(`${r}loading namespace ${a} for language ${i} failed`,s),!s&&o&&this.logger.log(`${r}loaded namespace ${a} for language ${i}`,o),this.loaded(e,s,o)})}saveMissing(e,r,n,i,a){var l,u,d,f,h;let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((f=(d=this.services)==null?void 0:d.utils)!=null&&f.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((h=this.backend)!=null&&h.create){const m={...s,isUpdate:a},g=this.backend.create.bind(this.backend);if(g.length<6)try{let p;g.length===5?p=g(e,r,n,i,m):p=g(e,r,n,i),p&&typeof p.then=="function"?p.then(x=>o(null,x)).catch(o):o(null,p)}catch(p){o(p)}else g(e,r,n,i,o,m)}!e||!e[0]||this.store.addResource(e[0],r,n,i)}}}const IC=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Fe(t[1])&&(e.defaultValue=t[1]),Fe(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(n=>{e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),RC=t=>{var e,r;return Fe(t.ns)&&(t.ns=[t.ns]),Fe(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Fe(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((r=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:r.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},v0=()=>{},G4e=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class Ah extends Nv{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=RC(e),this.services={},this.logger=Yi,this.modules={external:[]},G4e(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(){var e=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(n=r,r={}),r.defaultNS==null&&r.ns&&(Fe(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const i=IC();this.options={...i,...this.options,...RC(r)},this.options.interpolation={...i.interpolation,...this.options.interpolation},r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);const a=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Yi.init(a(this.modules.logger),this.options):Yi.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=V4e;const f=new CC(this.options);this.store=new kC(this.options.resources,this.options);const h=this.services;h.logger=Yi,h.resourceStore=this.store,h.languageUtils=f,h.pluralResolver=new U4e(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(h.formatter=a(d),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new z4e(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new q4e(a(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(m){for(var g=arguments.length,p=new Array(g>1?g-1:0),x=1;x<g;x++)p[x-1]=arguments[x];e.emit(m,...p)}),this.modules.languageDetector&&(h.languageDetector=a(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=a(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Wg(this.services,this.options),this.translator.on("*",function(m){for(var g=arguments.length,p=new Array(g>1?g-1:0),x=1;x<g;x++)p[x-1]=arguments[x];e.emit(m,...p)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,n||(n=v0),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const l=gd(),u=()=>{const d=(f,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),n(f,h)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),l}loadResources(e){var a,s;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v0;const i=Fe(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),(s=(a=this.options.preload)==null?void 0:a.forEach)==null||s.call(a,u=>l(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,r,n){const i=gd();return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),n||(n=v0),this.services.backendConnector.reload(e,r,a=>{i.resolve(),n(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&BF.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,r){var n=this;this.isLanguageChangingTo=e;const i=gd();this.emit("languageChanging",e);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},s=(l,u)=>{u?(a(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return n.t(...arguments)}),r&&r(l,function(){return n.t(...arguments)})},o=l=>{var d,f;!e&&!l&&this.services.languageDetector&&(l=[]);const u=Fe(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||a(u),this.translator.language||this.translator.changeLanguage(u),(f=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||f.call(d,u)),this.loadResources(u,h=>{s(h,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,r,n){var i=this;const a=function(s,o){let l;if(typeof o!="object"){for(var u=arguments.length,d=new Array(u>2?u-2:0),f=2;f<u;f++)d[f-2]=arguments[f];l=i.options.overloadTranslationOptionHandler([s,o].concat(d))}else l={...o};l.lng=l.lng||a.lng,l.lngs=l.lngs||a.lngs,l.ns=l.ns||a.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||a.keyPrefix);const h=i.options.keySeparator||".";let m;return l.keyPrefix&&Array.isArray(s)?m=s.map(g=>`${l.keyPrefix}${h}${g}`):m=l.keyPrefix?`${l.keyPrefix}${h}${s}`:s,i.t(m,l)};return Fe(e)?a.lng=e:a.lngs=e,a.ns=r,a.keyPrefix=n,a}t(){var i;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(i=this.translator)==null?void 0:i.translate(...r)}exists(){var i;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(i=this.translator)==null?void 0:i.exists(...r)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const s=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(r.precheck){const o=r.precheck(this,s);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(n,e)&&(!i||s(a,e)))}loadNamespaces(e,r){const n=gd();return this.options.ns?(Fe(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),r&&r(i)}),n):(r&&r(),Promise.resolve())}loadLanguages(e,r){const n=gd();Fe(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(s=>i.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return a.length?(this.options.preload=i.concat(a),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}dir(e){var i,a;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((a=this.services)==null?void 0:a.languageUtils)||new CC(IC());return r.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new Ah(e,r)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v0;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new Ah(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(o=>{a[o]=this[o]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n){const o=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},Object.keys(l[u]).reduce((d,f)=>(d[f]={...l[u][f]},d),{})),{});a.store=new kC(o,i),a.services.resourceStore=a.store}return a.translator=new Wg(a.services,i),a.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),d=1;d<l;d++)u[d-1]=arguments[d];a.emit(o,...u)}),a.init(i,r),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Yr=Ah.createInstance();Yr.createInstance=Ah.createInstance;Yr.createInstance;Yr.dir;Yr.init;Yr.loadResources;Yr.reloadResources;Yr.use;Yr.changeLanguage;Yr.getFixedT;Yr.t;Yr.exists;Yr.setDefaultNamespace;Yr.hasLoadedNamespace;Yr.loadNamespaces;Yr.loadLanguages;Yr.use(_W).init({resources:{en:{translation:{...Mf.en}},ar:{translation:{...Mf.ar}}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});function K4e({children:t}){const{user:e}=qe(),{settings:r,isLoading:n}=sW();return Gs(),e?n?c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsx("p",{className:"text-gray-500",children:"Loading settings..."})}):c.jsx(c.Fragment,{children:t}):c.jsx(dp,{to:"/login",replace:!0})}function Y4e(){const{user:t}=qe();return Gs().pathname==="/"&&!t?c.jsx(dp,{to:"/login",replace:!0}):c.jsxs(N7,{children:[c.jsx(Ye,{path:"/login",element:c.jsx(uW,{})}),c.jsx(Ye,{path:"/reset-password",element:c.jsx(_4e,{})}),c.jsx(Ye,{path:"/update-password",element:c.jsx(S4e,{})}),c.jsxs(Ye,{path:"/",element:c.jsx(K4e,{children:c.jsx(aW,{})}),children:[c.jsx(Ye,{index:!0,element:c.jsx(dp,{to:"/dashboard",replace:!0})}),(t==null?void 0:t.role)==="super_admin"||(t==null?void 0:t.role)==="admin"?c.jsxs(c.Fragment,{children:[c.jsx(Ye,{path:"dashboard",element:c.jsx(kCe,{})}),c.jsx(Ye,{path:"cashiers",element:c.jsx(OCe,{})}),c.jsx(Ye,{path:"vendors",element:c.jsx(MCe,{})})]}):(t==null?void 0:t.role)==="vendor"?c.jsxs(c.Fragment,{children:[c.jsx(Ye,{path:"dashboard",element:c.jsx(LCe,{})}),c.jsx(Ye,{path:"products",element:c.jsx(zCe,{})}),c.jsx(Ye,{path:"settings",element:c.jsx(QOe,{})})]}):c.jsxs(c.Fragment,{children:[c.jsx(Ye,{path:"pos",element:c.jsx(Sbe,{})}),c.jsx(Ye,{path:"products",element:c.jsx(O1e,{})}),c.jsx(Ye,{path:"upcoming-products",element:c.jsx(N1e,{})}),c.jsx(Ye,{path:"customers",element:c.jsx($1e,{})}),c.jsx(Ye,{path:"cash-drawer",element:c.jsx(USe,{})}),c.jsx(Ye,{path:"expenses",element:c.jsx(k4e,{})}),c.jsx(Ye,{path:"return-products",element:c.jsx(M1e,{})}),c.jsx(Ye,{path:"receipts",element:c.jsx(VCe,{})}),((t==null?void 0:t.role)==="owner"||(t==null?void 0:t.role)==="manager")&&c.jsxs(c.Fragment,{children:[c.jsx(Ye,{path:"dashboard",element:c.jsx(kve,{})}),c.jsx(Ye,{path:"reports",element:c.jsx(LOe,{})}),c.jsx(Ye,{path:"cashiers",element:c.jsx(cCe,{})}),c.jsx(Ye,{path:"managers",element:c.jsx(gCe,{})}),c.jsx(Ye,{path:"sub-vendors",element:c.jsx(vCe,{})}),c.jsx(Ye,{path:"vendor-profits",element:c.jsx(_C,{})}),c.jsx(Ye,{path:"monthly-vendor-taxes",element:c.jsx(ZCe,{})}),c.jsx(Ye,{path:"vendor-spaces",element:c.jsx(w4e,{})}),c.jsx(Ye,{path:"branches",element:c.jsx(nCe,{})}),c.jsx(Ye,{path:"coupons",element:c.jsx(bCe,{})}),c.jsx(Ye,{path:"settings",element:c.jsx(UOe,{})}),c.jsx(Ye,{path:"developer",element:c.jsx(_Ce,{})})]}),c.jsx(Ye,{path:"vendor-profits",element:c.jsx(_C,{})})]})]})]})}function X4e(){const{user:t}=qe(),{language:e}=_e();return tr(),j.useEffect(()=>{if(t!=null&&t.businessCode){const r=t.role==="cashier"?t.main_branch:void 0;hR(t.businessCode,t.role,r,e),console.log("Started monitoring for business:",t.businessCode,"branch:",r)}return()=>{_1e(),console.log("Stopped monitoring")}},[t==null?void 0:t.businessCode,t==null?void 0:t.role,t==null?void 0:t.main_branch,e]),c.jsxs(c.Fragment,{children:[c.jsx(b1e,{position:e==="ar"?"top-left":"top-right"}),c.jsx(C7,{children:c.jsx(Y4e,{})})]})}XM(document.getElementById("root")).render(c.jsx(j.StrictMode,{children:c.jsx(X4e,{})}));export{at as g};
